[{"content":"ç¼–ç¨‹å­¦ä¹  åœ¨å¤§å­¦æœŸé—´ï¼Œæˆ‘ä¸»è¦å­¦ä¹ äº†ä»¥ä¸‹ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯ï¼š\nPythonï¼šç”¨äºæ•°æ®åˆ†æã€è„šæœ¬è‡ªåŠ¨åŒ– Javaï¼šé¢å‘å¯¹è±¡è®¾è®¡å’Œå¤§å‹é¡¹ç›®å¼€å‘ C/C++ï¼šç³»ç»Ÿç¼–ç¨‹å’Œç®—æ³•å®ç° Web å¼€å‘ï¼šHTMLã€CSSã€JavaScriptï¼Œæ­å»ºä¸ªäººé¡¹ç›®ç½‘ç«™ é¡¹ç›®å®è·µ Web3 å®éªŒé¡¹ç›®ï¼šä½¿ç”¨åŒºå—é“¾ç›¸å…³æŠ€æœ¯å®ç°ç®€å•çš„å»ä¸­å¿ƒåŒ–åº”ç”¨ æ•°æ®åˆ†æé¡¹ç›®ï¼šPython + Pandas å¯¹å®éªŒæ•°æ®è¿›è¡Œå¤„ç†ä¸å¯è§†åŒ– è¯¾è®¾ä¸å®éªŒï¼šå›¢é˜Ÿåä½œå®Œæˆ Java å’Œ C++ é¡¹ç›®ï¼Œç§¯ç´¯ç‰ˆæœ¬æ§åˆ¶ç»éªŒ å­¦ä¹ å¿ƒå¾— ç†è®ºå­¦ä¹ å’Œå®è·µç»“åˆï¼ŒåŠ¨æ‰‹åšé¡¹ç›®æ‰èƒ½åŠ æ·±ç†è§£ å­¦ä¼šåˆ©ç”¨ Git/GitHub è¿›è¡Œç‰ˆæœ¬æ§åˆ¶å’Œåä½œ å¤šåšç¬”è®°ï¼Œè®°å½•å­¦ä¹ è¿‡ç¨‹ä¸­çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ å…³æ³¨æ–°æŠ€æœ¯åŠ¨æ€ï¼Œä¾‹å¦‚ Web3ã€AIã€äº‘è®¡ç®—ç­‰ æŠ€æœ¯åˆ†äº«è®¡åˆ’ å®šæœŸåœ¨åšå®¢å‘å¸ƒå­¦ä¹ ç¬”è®°ä¸é¡¹ç›®æ€»ç»“ åˆ†äº«ä»£ç ç¤ºä¾‹å’Œå®éªŒæ•™ç¨‹ï¼Œä¾¿äºåŒå­¦å‚è€ƒ æŒç»­æ›´æ–°æŠ€æœ¯æ ˆï¼Œè®°å½•æˆé•¿è¿‡ç¨‹ ","permalink":"http://localhost:1313/uestc/intro/","summary":"\u003ch2 id=\"ç¼–ç¨‹å­¦ä¹ \"\u003eç¼–ç¨‹å­¦ä¹ \u003c/h2\u003e\n\u003cp\u003eåœ¨å¤§å­¦æœŸé—´ï¼Œæˆ‘ä¸»è¦å­¦ä¹ äº†ä»¥ä¸‹ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePython\u003c/strong\u003eï¼šç”¨äºæ•°æ®åˆ†æã€è„šæœ¬è‡ªåŠ¨åŒ–\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eJava\u003c/strong\u003eï¼šé¢å‘å¯¹è±¡è®¾è®¡å’Œå¤§å‹é¡¹ç›®å¼€å‘\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eC/C++\u003c/strong\u003eï¼šç³»ç»Ÿç¼–ç¨‹å’Œç®—æ³•å®ç°\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eWeb å¼€å‘\u003c/strong\u003eï¼šHTMLã€CSSã€JavaScriptï¼Œæ­å»ºä¸ªäººé¡¹ç›®ç½‘ç«™\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"é¡¹ç›®å®è·µ\"\u003eé¡¹ç›®å®è·µ\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eWeb3 å®éªŒé¡¹ç›®\u003c/strong\u003eï¼šä½¿ç”¨åŒºå—é“¾ç›¸å…³æŠ€æœ¯å®ç°ç®€å•çš„å»ä¸­å¿ƒåŒ–åº”ç”¨\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæ•°æ®åˆ†æé¡¹ç›®\u003c/strong\u003eï¼šPython + Pandas å¯¹å®éªŒæ•°æ®è¿›è¡Œå¤„ç†ä¸å¯è§†åŒ–\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eè¯¾è®¾ä¸å®éªŒ\u003c/strong\u003eï¼šå›¢é˜Ÿåä½œå®Œæˆ Java å’Œ C++ é¡¹ç›®ï¼Œç§¯ç´¯ç‰ˆæœ¬æ§åˆ¶ç»éªŒ\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å­¦ä¹ å¿ƒå¾—\"\u003eå­¦ä¹ å¿ƒå¾—\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eç†è®ºå­¦ä¹ å’Œå®è·µç»“åˆï¼ŒåŠ¨æ‰‹åšé¡¹ç›®æ‰èƒ½åŠ æ·±ç†è§£\u003c/li\u003e\n\u003cli\u003eå­¦ä¼šåˆ©ç”¨ Git/GitHub è¿›è¡Œç‰ˆæœ¬æ§åˆ¶å’Œåä½œ\u003c/li\u003e\n\u003cli\u003eå¤šåšç¬”è®°ï¼Œè®°å½•å­¦ä¹ è¿‡ç¨‹ä¸­çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ\u003c/li\u003e\n\u003cli\u003eå…³æ³¨æ–°æŠ€æœ¯åŠ¨æ€ï¼Œä¾‹å¦‚ Web3ã€AIã€äº‘è®¡ç®—ç­‰\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"æŠ€æœ¯åˆ†äº«è®¡åˆ’\"\u003eæŠ€æœ¯åˆ†äº«è®¡åˆ’\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eå®šæœŸåœ¨åšå®¢å‘å¸ƒå­¦ä¹ ç¬”è®°ä¸é¡¹ç›®æ€»ç»“\u003c/li\u003e\n\u003cli\u003eåˆ†äº«ä»£ç ç¤ºä¾‹å’Œå®éªŒæ•™ç¨‹ï¼Œä¾¿äºåŒå­¦å‚è€ƒ\u003c/li\u003e\n\u003cli\u003eæŒç»­æ›´æ–°æŠ€æœ¯æ ˆï¼Œè®°å½•æˆé•¿è¿‡ç¨‹\u003c/li\u003e\n\u003c/ul\u003e","title":"UESTC ç®€ä»‹"},{"content":"Welcome to Web3! Web3ä»£è¡¨äº’è”ç½‘ä¸‹ä¸€ä¸ªæ—¶ä»£ä»¥åŒºå—é“¾ä¸ºæ ¸å¿ƒå®ç°å»ä¸­å¿ƒåŒ–ç”¨æˆ·æŒæ§æ•°æ®å’Œèµ„äº§é€šè¿‡æ™ºèƒ½åˆçº¦è‡ªåŠ¨åŒ–äº¤äº’æ‘†è„±ä¸­å¿ƒåŒ–å¹³å°æ§åˆ¶\nsecurity Web3å®‰å…¨èšç„¦é¢„é˜²é»‘å®¢æ”»å‡»å’Œæ¼æ´åˆ©ç”¨\né‡‡ç”¨å¤šå±‚é˜²å¾¡ç­–ç•¥åŒ…æ‹¬æ™ºèƒ½åˆçº¦å®¡è®¡è®¿é—®æ§åˆ¶å®æ—¶ç›‘æ§\nä½¿ç”¨Slither Mythrilæ£€æµ‹é‡å…¥æ”»å‡»æ•´æ•°æº¢å‡ºæƒé™é—®é¢˜\næœ€ä½³å®è·µå¼ºè°ƒç§é’¥ç®¡ç†å¤šç­¾åé’±åŒ…ç´§æ€¥æš‚åœæœºåˆ¶\n2025å¹´ä¸»è¦å¨èƒåŒ…æ‹¬é—ªè´·æ²»ç†æ”»å‡»è·¨é“¾æ¡¥æ¼æ´é’“é±¼æ”»å‡»\nå¼ºè°ƒå®‰å…¨å³ä»£ç ä»è®¾è®¡é˜¶æ®µæ•´åˆå½¢å¼éªŒè¯AIé©±åŠ¨ç›‘æ§\nå¼€æºåº“OpenZeppelinæä¾›å®‰å…¨åˆçº¦æ¨¡æ¿å‡å°‘å¸¸è§é”™è¯¯\næœºæ„çº§é¡¹ç›®éœ€æŒç»­å®¡è®¡æ¼æ´èµé‡‘è®¡åˆ’æ„å»ºä¿¡ä»»\nwallet é’±åŒ…æ˜¯Web3å…¥å£ç®¡ç†ç§é’¥å’Œèµ„äº§äº¤äº’\nåˆ†ä¸ºçƒ­é’±åŒ…å’Œå†·é’±åŒ…\nçƒ­é’±åŒ…å¦‚MetaMaskæµè§ˆå™¨æ‰©å±•æ–¹ä¾¿dAppè¿æ¥ä½†æ˜“å—ç½‘ç»œæ”»å‡»\nå†·é’±åŒ…åŒ…æ‹¬Ledgerç¡¬ä»¶é’±åŒ…å’Œçº¸é’±åŒ…ç¦»çº¿å­˜å‚¨æ›´å®‰å…¨é€‚åˆå¤§é¢æŒæœ‰\néæ‰˜ç®¡é’±åŒ…ç”¨æˆ·å®Œå…¨æ§åˆ¶å¯†é’¥\næ‰˜ç®¡é’±åŒ…å¦‚Coinbaseç®€åŒ–ä½†ä¾èµ–å¹³å°\nERC-4337è´¦æˆ·æŠ½è±¡æå‡ç”¨æˆ·ä½“éªŒæ”¯æŒç¤¾äº¤æ¢å¤æ°”ä½“èµåŠ©\nå¤šé“¾é’±åŒ…å¦‚Rainbowæ”¯æŒLayer2é™ä½è´¹ç”¨\nå®‰å…¨æç¤ºå¿…é¡»ä½¿ç”¨ç¡¬ä»¶ç­¾åç»ä¸æ³„éœ²ç§å­çŸ­è¯­å®šæœŸå¤‡ä»½\neip ğŸ‘‰ EIP ç¬”è®°åˆé›†\nEIPæ˜¯ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆæ ‡å‡†åŒ–å¹³å°å˜æ›´\næ¶µç›–æ ¸å¿ƒåè®®å®¢æˆ·ç«¯APIåˆçº¦è§„èŒƒ\nä»»ä½•äººå¯æäº¤è‰æ¡ˆç»ç¤¾åŒºè®¨è®ºç¼–è¾‘å®¡æŸ¥è¿›å…¥æœ€ç»ˆçŠ¶æ€\næ ¸å¿ƒEIPéœ€å…¨ç½‘å…±è¯†å¯èƒ½å¼•å‘ç¡¬åˆ†å‰\nå¦‚EIP-1559å¼•å…¥åŸºç¡€è´¹å¸‚åœº\nERCæ˜¯EIPå­é›†ä¸“æ³¨åº”ç”¨å±‚æ ‡å‡†\nEIPè¿‡ç¨‹ç¡®ä¿é€æ˜åŒ…å®¹\nä»è‰ç¨¿åˆ°æœ€åè°ƒç”¨å†åˆ°æœ€ç»ˆå®æ–½\nEIP-4844å¼•å…¥blobæ•°æ®å¤§å¹…é™ä½Layer2æˆæœ¬\næœªæ¥EIPèšç„¦å¯æ‰©å±•æ€§éšç§å¦‚Verkleæ ‘\nerc ERCæ˜¯ä»¥å¤ªåŠè¯·æ±‚è¯„è®ºå®šä¹‰ä»£å¸å’Œåº”ç”¨æ ‡å‡†\nERC20ç”¨äºå¯äº’æ¢ä»£å¸å¦‚USDTæ”¯æŒè½¬ç§»æ‰¹å‡†ä½™é¢æŸ¥è¯¢\nERC721åˆ›å»ºéåŒè´¨åŒ–ä»£å¸NFTå”¯ä¸€æ ‡è¯†æ‰€æœ‰æƒå¦‚CryptoKitties\nERC1155å¤šä»£å¸æ ‡å‡†å•ä¸€åˆçº¦ç®¡ç†å¯äº’æ¢éåŒè´¨åŒ–åŠåŒè´¨åŒ–èµ„äº§\né«˜æ•ˆæ‰¹é‡è½¬ç§»èŠ‚çœæ°”ä½“é€‚ç”¨äºæ¸¸æˆç‰©å“ç¥¨åŠ¡\nè¿™äº›æ ‡å‡†ç¡®ä¿å…¨ç”Ÿæ€äº’æ“ä½œæ€§\nå¼€å‘è€…å¯ç›´æ¥æ„å»ºå…¼å®¹é¡¹ç›®\nERC20ä¸»å¯¼DeFi\nERC721æ¨åŠ¨NFTå¸‚åœº\nERC1155ä¼˜åŒ–å¤æ‚ç”¨ä¾‹\ncodeLanuage æ™ºèƒ½åˆçº¦è¯­è¨€æœ€ç»ˆç¼–è¯‘ä¸ºEVMå­—èŠ‚ç \nSolidityä¸»æµç±»JavaScriptæ”¯æŒç»§æ‰¿ä¿®é¥°ç¬¦åº“ç”Ÿæ€æœ€ä¸°å¯Œ\nVyper Pythoné£æ ¼æ•…æ„å»é™¤ç»§æ‰¿æ— é™å¾ªç¯æå‡å¯å®¡è®¡æ€§å®‰å…¨æ€§\nYulä¸­é—´è¯­è¨€ç”¨äºç²¾ç»†æ°”ä½“ä¼˜åŒ–\nRustä¸»è¦ç”¨äºSolanaéEVMé“¾\nEthereumç”Ÿæ€ä»ä»¥Solidityå’ŒVyperä¸ºä¸»\nå­¦ä¹ Solidityæ¨èä»Remix IDEå¼€å§‹\nVyperå¼ºè°ƒäººç±»å¯è¯»ä»£ç å‡å°‘æ”»å‡»é¢\né€‰æ‹©è¯­è¨€å–å†³äºé¡¹ç›®å¤æ‚åº¦å’Œå®‰å…¨ä¼˜å…ˆçº§\nevm EVMæ˜¯ä»¥å¤ªåŠè™šæ‹Ÿæœºå»ä¸­å¿ƒåŒ–è®¡ç®—å¼•æ“\næ‰§è¡Œæ™ºèƒ½åˆçº¦å­—èŠ‚ç é‡‡ç”¨æ ˆåŸºæ¶æ„æ·±åº¦1024\næ¯æ“ä½œç æ¶ˆè€—æ°”ä½“é˜²æ­¢æ»¥ç”¨\nTuringå®Œå¤‡æ”¯æŒä»»æ„é€»è¾‘ä½†æœ‰æ°”ä½“ä¸Šé™é¿å…æ— é™å¾ªç¯\nEVMè´Ÿè´£çŠ¶æ€è½¬æ¢æ›´æ–°è´¦æˆ·ä½™é¢å­˜å‚¨\næ‰€æœ‰èŠ‚ç‚¹ä¸€è‡´æ‰§è¡Œä¿è¯ç¡®å®šæ€§éš”ç¦»\nå…¼å®¹é“¾å¦‚Polygon Arbitrumå…±äº«EVMå®ç°æ— ç¼ç§»æ¤\næœªæ¥å‡çº§EOFå¼•å…¥å®¹å™¨åŒ–ä»£ç æå‡æ•ˆç‡\nEVMæ˜¯æ•´ä¸ªä»¥å¤ªåŠç”Ÿæ€çš„è®¡ç®—æ ¸å¿ƒ\nframework(é¡¹ç›®æ¡†æ¶) Web3å¼€å‘æ¡†æ¶å¤§å¹…ç®€åŒ–åˆçº¦æ„å»ºæµ‹è¯•éƒ¨ç½²\nHardhat JavaScriptåŸºç¡€æ’ä»¶åŒ–æ”¯æŒæ§åˆ¶å°æ—¥å¿—è‡ªå®šä¹‰ä»»åŠ¡æ·±åº¦é›†æˆEthers.js\nTruffleè€ç‰Œå¥—ä»¶è‡ªå¸¦Ganacheæœ¬åœ°é“¾Mochaæµ‹è¯•é€‚åˆæ–°æ‰‹\nFoundry Rustç¼–å†™è¶…å¿«ç¼–è¯‘é“¸é€ Anvilåˆ†å‰ä¸»ç½‘ç”¨Solidityå†™æµ‹è¯•æ”¯æŒæ¨¡ç³Šæµ‹è¯•\nå½“å‰ä¸»æµé€‰æ‹©\nHardhatçµæ´»åº¦æœ€é«˜\nTruffleæœ€é€‚åˆæ•™å­¦\nFoundryæ€§èƒ½æè‡´é€‚åˆé«˜çº§å¼€å‘è€…\næ­é…VS Code Solidityæ‰©å±•å¼€å‘ä½“éªŒæœ€ä½³\n","permalink":"http://localhost:1313/web3/intro/","summary":"\u003ch1 id=\"welcome-to-web3\"\u003eWelcome to Web3!\u003c/h1\u003e\n\u003cp\u003eWeb3ä»£è¡¨äº’è”ç½‘ä¸‹ä¸€ä¸ªæ—¶ä»£ä»¥åŒºå—é“¾ä¸ºæ ¸å¿ƒå®ç°å»ä¸­å¿ƒåŒ–ç”¨æˆ·æŒæ§æ•°æ®å’Œèµ„äº§é€šè¿‡æ™ºèƒ½åˆçº¦è‡ªåŠ¨åŒ–äº¤äº’æ‘†è„±ä¸­å¿ƒåŒ–å¹³å°æ§åˆ¶\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"security\"\u003esecurity\u003c/h2\u003e\n\u003cp\u003eWeb3å®‰å…¨èšç„¦é¢„é˜²é»‘å®¢æ”»å‡»å’Œæ¼æ´åˆ©ç”¨\u003cbr\u003e\né‡‡ç”¨å¤šå±‚é˜²å¾¡ç­–ç•¥åŒ…æ‹¬æ™ºèƒ½åˆçº¦å®¡è®¡è®¿é—®æ§åˆ¶å®æ—¶ç›‘æ§\u003cbr\u003e\nä½¿ç”¨Slither Mythrilæ£€æµ‹é‡å…¥æ”»å‡»æ•´æ•°æº¢å‡ºæƒé™é—®é¢˜\u003cbr\u003e\næœ€ä½³å®è·µå¼ºè°ƒç§é’¥ç®¡ç†å¤šç­¾åé’±åŒ…ç´§æ€¥æš‚åœæœºåˆ¶\u003cbr\u003e\n2025å¹´ä¸»è¦å¨èƒåŒ…æ‹¬é—ªè´·æ²»ç†æ”»å‡»è·¨é“¾æ¡¥æ¼æ´é’“é±¼æ”»å‡»\u003cbr\u003e\nå¼ºè°ƒå®‰å…¨å³ä»£ç ä»è®¾è®¡é˜¶æ®µæ•´åˆå½¢å¼éªŒè¯AIé©±åŠ¨ç›‘æ§\u003cbr\u003e\nå¼€æºåº“OpenZeppelinæä¾›å®‰å…¨åˆçº¦æ¨¡æ¿å‡å°‘å¸¸è§é”™è¯¯\u003cbr\u003e\næœºæ„çº§é¡¹ç›®éœ€æŒç»­å®¡è®¡æ¼æ´èµé‡‘è®¡åˆ’æ„å»ºä¿¡ä»»\u003c/p\u003e\n\u003ch2 id=\"wallet\"\u003ewallet\u003c/h2\u003e\n\u003cp\u003eé’±åŒ…æ˜¯Web3å…¥å£ç®¡ç†ç§é’¥å’Œèµ„äº§äº¤äº’\u003cbr\u003e\nåˆ†ä¸ºçƒ­é’±åŒ…å’Œå†·é’±åŒ…\u003cbr\u003e\nçƒ­é’±åŒ…å¦‚MetaMaskæµè§ˆå™¨æ‰©å±•æ–¹ä¾¿dAppè¿æ¥ä½†æ˜“å—ç½‘ç»œæ”»å‡»\u003cbr\u003e\nå†·é’±åŒ…åŒ…æ‹¬Ledgerç¡¬ä»¶é’±åŒ…å’Œçº¸é’±åŒ…ç¦»çº¿å­˜å‚¨æ›´å®‰å…¨é€‚åˆå¤§é¢æŒæœ‰\u003cbr\u003e\néæ‰˜ç®¡é’±åŒ…ç”¨æˆ·å®Œå…¨æ§åˆ¶å¯†é’¥\u003cbr\u003e\næ‰˜ç®¡é’±åŒ…å¦‚Coinbaseç®€åŒ–ä½†ä¾èµ–å¹³å°\u003cbr\u003e\nERC-4337è´¦æˆ·æŠ½è±¡æå‡ç”¨æˆ·ä½“éªŒæ”¯æŒç¤¾äº¤æ¢å¤æ°”ä½“èµåŠ©\u003cbr\u003e\nå¤šé“¾é’±åŒ…å¦‚Rainbowæ”¯æŒLayer2é™ä½è´¹ç”¨\u003cbr\u003e\nå®‰å…¨æç¤ºå¿…é¡»ä½¿ç”¨ç¡¬ä»¶ç­¾åç»ä¸æ³„éœ²ç§å­çŸ­è¯­å®šæœŸå¤‡ä»½\u003c/p\u003e\n\u003ch2 id=\"eip\"\u003eeip\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eğŸ‘‰ \u003ca href=\"/web3/eip/intro\"\u003eEIP ç¬”è®°åˆé›†\u003c/a\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003eEIPæ˜¯ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆæ ‡å‡†åŒ–å¹³å°å˜æ›´\u003cbr\u003e\næ¶µç›–æ ¸å¿ƒåè®®å®¢æˆ·ç«¯APIåˆçº¦è§„èŒƒ\u003cbr\u003e\nä»»ä½•äººå¯æäº¤è‰æ¡ˆç»ç¤¾åŒºè®¨è®ºç¼–è¾‘å®¡æŸ¥è¿›å…¥æœ€ç»ˆçŠ¶æ€\u003cbr\u003e\næ ¸å¿ƒEIPéœ€å…¨ç½‘å…±è¯†å¯èƒ½å¼•å‘ç¡¬åˆ†å‰\u003cbr\u003e\nå¦‚EIP-1559å¼•å…¥åŸºç¡€è´¹å¸‚åœº\u003cbr\u003e\nERCæ˜¯EIPå­é›†ä¸“æ³¨åº”ç”¨å±‚æ ‡å‡†\u003cbr\u003e\nEIPè¿‡ç¨‹ç¡®ä¿é€æ˜åŒ…å®¹\u003cbr\u003e\nä»è‰ç¨¿åˆ°æœ€åè°ƒç”¨å†åˆ°æœ€ç»ˆå®æ–½\u003cbr\u003e\nEIP-4844å¼•å…¥blobæ•°æ®å¤§å¹…é™ä½Layer2æˆæœ¬\u003cbr\u003e\næœªæ¥EIPèšç„¦å¯æ‰©å±•æ€§éšç§å¦‚Verkleæ ‘\u003c/p\u003e\n\u003ch2 id=\"erc\"\u003eerc\u003c/h2\u003e\n\u003cp\u003eERCæ˜¯ä»¥å¤ªåŠè¯·æ±‚è¯„è®ºå®šä¹‰ä»£å¸å’Œåº”ç”¨æ ‡å‡†\u003cbr\u003e\nERC20ç”¨äºå¯äº’æ¢ä»£å¸å¦‚USDTæ”¯æŒè½¬ç§»æ‰¹å‡†ä½™é¢æŸ¥è¯¢\u003cbr\u003e\nERC721åˆ›å»ºéåŒè´¨åŒ–ä»£å¸NFTå”¯ä¸€æ ‡è¯†æ‰€æœ‰æƒå¦‚CryptoKitties\u003cbr\u003e\nERC1155å¤šä»£å¸æ ‡å‡†å•ä¸€åˆçº¦ç®¡ç†å¯äº’æ¢éåŒè´¨åŒ–åŠåŒè´¨åŒ–èµ„äº§\u003cbr\u003e\né«˜æ•ˆæ‰¹é‡è½¬ç§»èŠ‚çœæ°”ä½“é€‚ç”¨äºæ¸¸æˆç‰©å“ç¥¨åŠ¡\u003cbr\u003e\nè¿™äº›æ ‡å‡†ç¡®ä¿å…¨ç”Ÿæ€äº’æ“ä½œæ€§\u003cbr\u003e\nå¼€å‘è€…å¯ç›´æ¥æ„å»ºå…¼å®¹é¡¹ç›®\u003cbr\u003e\nERC20ä¸»å¯¼DeFi\u003cbr\u003e\nERC721æ¨åŠ¨NFTå¸‚åœº\u003cbr\u003e\nERC1155ä¼˜åŒ–å¤æ‚ç”¨ä¾‹\u003c/p\u003e\n\u003ch2 id=\"codelanuage\"\u003ecodeLanuage\u003c/h2\u003e\n\u003cp\u003eæ™ºèƒ½åˆçº¦è¯­è¨€æœ€ç»ˆç¼–è¯‘ä¸ºEVMå­—èŠ‚ç \u003cbr\u003e\nSolidityä¸»æµç±»JavaScriptæ”¯æŒç»§æ‰¿ä¿®é¥°ç¬¦åº“ç”Ÿæ€æœ€ä¸°å¯Œ\u003cbr\u003e\nVyper Pythoné£æ ¼æ•…æ„å»é™¤ç»§æ‰¿æ— é™å¾ªç¯æå‡å¯å®¡è®¡æ€§å®‰å…¨æ€§\u003cbr\u003e\nYulä¸­é—´è¯­è¨€ç”¨äºç²¾ç»†æ°”ä½“ä¼˜åŒ–\u003cbr\u003e\nRustä¸»è¦ç”¨äºSolanaéEVMé“¾\u003cbr\u003e\nEthereumç”Ÿæ€ä»ä»¥Solidityå’ŒVyperä¸ºä¸»\u003cbr\u003e\nå­¦ä¹ Solidityæ¨èä»Remix IDEå¼€å§‹\u003cbr\u003e\nVyperå¼ºè°ƒäººç±»å¯è¯»ä»£ç å‡å°‘æ”»å‡»é¢\u003cbr\u003e\né€‰æ‹©è¯­è¨€å–å†³äºé¡¹ç›®å¤æ‚åº¦å’Œå®‰å…¨ä¼˜å…ˆçº§\u003c/p\u003e\n\u003ch2 id=\"evm\"\u003eevm\u003c/h2\u003e\n\u003cp\u003eEVMæ˜¯ä»¥å¤ªåŠè™šæ‹Ÿæœºå»ä¸­å¿ƒåŒ–è®¡ç®—å¼•æ“\u003cbr\u003e\næ‰§è¡Œæ™ºèƒ½åˆçº¦å­—èŠ‚ç é‡‡ç”¨æ ˆåŸºæ¶æ„æ·±åº¦1024\u003cbr\u003e\næ¯æ“ä½œç æ¶ˆè€—æ°”ä½“é˜²æ­¢æ»¥ç”¨\u003cbr\u003e\nTuringå®Œå¤‡æ”¯æŒä»»æ„é€»è¾‘ä½†æœ‰æ°”ä½“ä¸Šé™é¿å…æ— é™å¾ªç¯\u003cbr\u003e\nEVMè´Ÿè´£çŠ¶æ€è½¬æ¢æ›´æ–°è´¦æˆ·ä½™é¢å­˜å‚¨\u003cbr\u003e\næ‰€æœ‰èŠ‚ç‚¹ä¸€è‡´æ‰§è¡Œä¿è¯ç¡®å®šæ€§éš”ç¦»\u003cbr\u003e\nå…¼å®¹é“¾å¦‚Polygon Arbitrumå…±äº«EVMå®ç°æ— ç¼ç§»æ¤\u003cbr\u003e\næœªæ¥å‡çº§EOFå¼•å…¥å®¹å™¨åŒ–ä»£ç æå‡æ•ˆç‡\u003cbr\u003e\nEVMæ˜¯æ•´ä¸ªä»¥å¤ªåŠç”Ÿæ€çš„è®¡ç®—æ ¸å¿ƒ\u003c/p\u003e","title":"Web3 ç®€ä»‹"},{"content":"é¡¹ç›®ç®€ä»‹ é¡¹ç›®åç§°ï¼š0907 Wallet\nç³»ç»Ÿç±»å‹ï¼šåŸºäºæµè§ˆå™¨çš„ Web3 å»ä¸­å¿ƒåŒ–é’±åŒ…\nç³»ç»Ÿå®šä½ï¼šè½»é‡åŒ–ã€æœ¬åœ°åŒ–ã€è‡ªæ‰˜ç®¡çš„é’±åŒ…ç³»ç»Ÿ\nç³»ç»Ÿä»£ç æ¡†æ¶: React + Next.js\næ ¸å¿ƒç›®æ ‡\næä¾›å®‰å…¨å¯é çš„é’±åŒ…è´¦æˆ·ç”Ÿæˆä¸ç®¡ç†èƒ½åŠ›\næ”¯æŒåŸºæœ¬çš„è½¬è´¦ã€æ¶ˆæ¯ç­¾åä¸èµ„äº§æŸ¥çœ‹åŠŸèƒ½\nå®ç°å®Œæ•´çš„æœ¬åœ°åŒ–å­˜å‚¨ï¼Œå…¨æµç¨‹ä¸ä¸Šä¼ ç§é’¥\néç›®æ ‡è¯´æ˜ï¼ˆå¯é€‰ï¼‰\nä¸æ„å»ºé“¾ä¸‹åç«¯æœåŠ¡\nä¸æä¾›ä¸­å¿ƒåŒ–è´¦æˆ·ä½“ç³»\nä¸æ‰˜ç®¡ä»»ä½•ç”¨æˆ·èµ„äº§\n1. ä»£ç è§„èŒƒ 1.1 ä»£ç å‘½åè§„èŒƒ 1.1.1 ç»„ä»¶å‘½åï¼ˆReact ç»„ä»¶ã€é¡µé¢ï¼‰ è§„åˆ™ï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰ æ–‡ä»¶å‘½åï¼šåŒå .tsx æ–‡ä»¶ä¹Ÿå¿…é¡» PascalCase ç¤ºä¾‹ï¼š AccountCard.tsx â†’ æ­£ç¡® UserProfile.tsx â†’ æ­£ç¡® account-card.tsx â†’ é”™è¯¯ 1.1.2 æ¥å£ã€ç±»å‹ã€æšä¸¾å‘½å è§„åˆ™ï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰ å»ºè®®ï¼šæ¥å£å¯åŠ  I å‰ç¼€ï¼ˆå›¢é˜Ÿç»Ÿä¸€å³å¯ï¼‰ï¼Œç±»å‹å¯åŠ  T å‰ç¼€ï¼ˆå¯é€‰ï¼‰ ç¤ºä¾‹ï¼š interface UserInfo { ... } interface IUserInfo { ... } // ä¹Ÿå¯ type NetworkConfig = { ... } type TResponse\u0026lt;T\u0026gt; = { ... } enum ChainId { Ethereum = 1, Sepolia = 11155111 } 1.1.3 å¸¸é‡å‘½åï¼ˆå…¨å±€é…ç½®ã€é­”æ³•å€¼ï¼‰ è§„åˆ™ï¼šå…¨å¤§å†™ + ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆSCREAMING_SNAKE_CASEï¼‰ ç¤ºä¾‹ï¼š const API_BASE_URL = \u0026#34;https://api.0907wallet.com\u0026#34;; const DEFAULT_CHAIN_ID = 1; const MAX_RETRY_COUNT = 5; const SUPPORTED_CHAINS = [1, 5, 11155111]; 1.1.4 æ™®é€šå˜é‡ã€å‡½æ•°ã€å±æ€§å‘½å è§„åˆ™ï¼šå°é©¼å³°ï¼ˆcamelCaseï¼‰ å¸ƒå°”å€¼å»ºè®®ï¼šä»¥ isã€hasã€shouldã€can å¼€å¤´ ç¤ºä¾‹ï¼š const walletAddress = \u0026#34;0x1234...abcd\u0026#34;; let isConnected = false; const hasBalance = balance \u0026gt; 0; function connectWallet() { ... } async function fetchUserInfo() { ... } 1.1.5 æ–‡ä»¶ä¸æ–‡ä»¶å¤¹å‘½å ç±»å‹ å‘½åè§„åˆ™ ç¤ºä¾‹ ç»„ä»¶ / é¡µé¢ PascalCase AccountCard.tsxã€settings/page.tsx å·¥å…·å‡½æ•° kebab-case æˆ– camelCase storage.tsã€format-address.ts hooks ä»¥ use å¼€å¤´ useWallet.tsã€useDebounce.ts æ ·å¼ ä¸ç»„ä»¶åŒå AccountCard.module.css å¸¸é‡/é…ç½® kebab-case chains.config.ts 1.2 ä»£ç æ³¨é‡Šè§„èŒƒ 1.2.1 æ–‡ä»¶å¤´æ³¨é‡Šï¼ˆæ¯ä¸ªæ–‡ä»¶å¿…é¡»ï¼‰ /** * @file æ–‡ä»¶ç®€è¦æè¿°ï¼ˆä¸€å¥è¯ï¼‰ * @description æ›´è¯¦ç»†è¯´æ˜ï¼ˆå¯é€‰ï¼‰ * @author å¼ ä¸‰ï¼ˆgithub: zhangsanï¼‰ * @date 2025-04-05 */ 1.2.2 å¯¼å‡ºå‡½æ•° / ç»„ä»¶ / Hook å¿…é¡»å†™ JSDoc /** * åˆå§‹åŒ– IndexedDB æ•°æ®åº“ï¼ˆæ”¯æŒè‡ªåŠ¨æŒ‰éœ€å»ºè¡¨ï¼‰ * * @returns IndexedDB å®ä¾‹ * @example const db = await initDB(); */ export async function initDB(): Promise\u0026lt;IDBPDatabase\u0026gt; { ... } /** * è´¦æˆ·å¡ç‰‡ç»„ä»¶ï¼ˆå¸¦æ‚¬åœå¤åˆ¶åŠ¨ç”»ï¼‰ * * @param address - é’±åŒ…åœ°å€ï¼ˆ0x...ï¼‰ * @param name - å¯é€‰è´¦æˆ·åˆ«å */ export default function AccountCard({ address, name }: { address: string; name?: string; }) { ... } 1.2.3 å¤æ‚é€»è¾‘å¿…é¡»è§£é‡Šã€Œä¸ºä»€ä¹ˆã€ // ä¸ºä»€ä¹ˆå…³é—­å†å‡çº§ï¼Ÿ // IndexedDB åªæœ‰åœ¨ versionchange äº‹åŠ¡ä¸­æ‰èƒ½åˆ›å»º objectStoreï¼Œ // å½“å‰è¿æ¥æ— æ³•åˆ›å»ºæ–°è¡¨ï¼Œå¿…é¡»å…³é—­åä»¥æ–°ç‰ˆæœ¬é‡æ–°æ‰“å¼€ db.close(); 1.2.4 TODO / FIXME ç»Ÿä¸€æ ¼å¼ // TODO: [é«˜] æ”¯æŒå¤šç­¾é’±åŒ…ï¼ˆ@æå››ï¼Œ2025-07-01ï¼‰ // FIXME: å¿«é€Ÿç§»å…¥ç§»å‡ºä¼šå¯¼è‡´å¤šä¸ª setTimeout æ®‹ç•™ 1.2.5 ç¦æ­¢çš„æ³¨é‡Šï¼ˆç›´æ¥æ‰“å›ï¼‰ // é”™è¯¯ç¤ºä¾‹ï¼ˆè§£é‡Šã€Œåšä»€ä¹ˆã€è€Œä¸æ˜¯ã€Œä¸ºä»€ä¹ˆã€ï¼‰ const a = 1; // å®šä¹‰å˜é‡ a setLoading(true); // è®¾ç½® loading ä¸º true // é”™è¯¯ï¼šè¿‡æ—¶æ³¨é‡Š const MAX_RETRY = 3; // æœ€å¤§é‡è¯•æ¬¡æ•° 5 æ¬¡ï¼ˆå®é™…æ˜¯ 3ï¼‰ 1.3 å…¶ä»–å¼ºåˆ¶è§„èŒƒï¼ˆå¿«é€Ÿè®°å¿†ç‰ˆï¼‰ é¡¹ç›® è¦æ±‚ ç±»å‹ä¼˜å…ˆ èƒ½ç”¨ TypeScript è§£å†³çš„ç»ä¸å†™æ³¨é‡Š props ç±»å‹ å¿…é¡»æ˜¾å¼å£°æ˜ interface/typeï¼Œç¦æ­¢ any è‡ªå®šä¹‰ Hook å¿…é¡»ä»¥ use å¼€å¤´ï¼Œæ–‡ä»¶åä¹Ÿå¿…é¡»æ˜¯ useXxx.ts async å‡½æ•° å¿…é¡» try-catch æˆ–è¿”å›é”™è¯¯çŠ¶æ€ console.log ä¸Šçº¿å‰å¿…é¡»åˆ é™¤æˆ–æ”¹ä¸º logger é­”æ³•å€¼ å…¨éƒ¨æå–ä¸ºå¸¸é‡ï¼ˆå‚è€ƒ 1.1.3ï¼‰ 2. ç³»ç»ŸåŠŸèƒ½èŒƒå›´ï¼ˆScopeï¼‰ 2.1 åŸºç¡€åŠŸèƒ½ ç”¨æˆ·å¯†ç åˆ›å»ºä¸éªŒè¯\nåŠ©è®°è¯ç”Ÿæˆä¸å±•ç¤º\nç§é’¥ç”Ÿæˆä¸å¯¼å…¥\nå¤šè´¦æˆ·ç®¡ç†\né“¾ä¸Šèµ„äº§ï¼ˆETHï¼‰ä½™é¢æŸ¥è¯¢\näº¤æ˜“å‘é€ï¼ˆè½¬è´¦ï¼‰\nåŸºæœ¬æ¶ˆæ¯ç­¾ååŠŸèƒ½\n2.2 æ‰©å±•åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰ å¤šè¯­è¨€æ”¯æŒï¼ˆä¸­/è‹±æ–‡ï¼‰\né’±åŒ…é”å®š / è§£é”\né’±åŒ…æ•°æ®å¯¼å‡ºï¼ˆåŠ©è®°è¯ / ç§é’¥ï¼‰\nå‹å¥½çš„é”™è¯¯åé¦ˆä¸åŸºç¡€æ ¡éªŒ\n3. ç³»ç»Ÿæ•´ä½“ç»“æ„ï¼ˆSystem Overviewï¼‰ ç³»ç»Ÿæ•´ä½“ç”±ä»¥ä¸‹å››ä¸ªä¸»è¦æ¨¡å—ç»„æˆï¼Œå„æ¨¡å—èŒè´£æ¸…æ™°ã€è¾¹ç•Œæ˜ç¡®ï¼Œé€šè¿‡æ ‡å‡†åŒ–æ¥å£è¿›è¡Œåä½œï¼š\n3.0 ç³»ç»Ÿå…¬ç”¨æ¨¡å— ğŸ‘‰ è¯¦ç»†è®¾è®¡è¯·è§ï¼š0907 Wallet ç³»ç»Ÿå…¬ç”¨å±‚è®¾è®¡\n3.1 ç”¨æˆ·ç®¡ç†æ¨¡å— ğŸ‘‰ è¯¦ç»†è®¾è®¡è¯·è§ï¼š0907 Wallet ç”¨æˆ·ç®¡ç†æ¨¡å—è®¾è®¡\n3.2 é’±åŒ…ç®¡ç†æ¨¡å— ğŸ‘‰ è¯¦ç»†è®¾è®¡è¯·è§ï¼š0907 Wallet é’±åŒ…ç®¡ç†æ¨¡å—è®¾è®¡\n3.3 ç½‘ç»œç®¡ç†æ¨¡å— 3.4 åŒºå—é“¾äº¤äº’æ¨¡å— 4. å®‰å…¨ç­–ç•¥æ¦‚è¿° 4.1 æ•°æ®å¤„ç†åŸåˆ™ æ‰€æœ‰æ•æ„Ÿæ•°æ®ä»…å­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°\nç³»ç»Ÿä¸ä¼šä¸Šä¼ ã€å¤‡ä»½æˆ–æ‰˜ç®¡ä»»ä½•ç§é’¥ä¿¡æ¯\n4.2 å¯†ç ç­–ç•¥ ç”¨æˆ·å¯†ç ä»…åœ¨æœ¬åœ°ç”Ÿæ•ˆ\nå¯†ç ç”¨äºæ§åˆ¶é’±åŒ…è§£é”ä¸ç§é’¥è®¿é—®æƒé™\n4.3 äº¤äº’å®‰å…¨æ€§ å¼•å¯¼ç”¨æˆ·åŠæ—¶å¤‡ä»½åŠ©è®°è¯\nè½¬è´¦ç­‰æ•æ„Ÿæ“ä½œéœ€è¿›è¡Œç¡®è®¤æç¤º\n5. å‰ç«¯ç•Œé¢ä¸ä½¿ç”¨æµç¨‹æ¦‚è¿° 5.1 é¡µé¢ç»“æ„ æ¬¢è¿ / åˆå§‹é¡µé¢\nå¯†ç è®¾ç½®é¡µé¢\nåˆ›å»ºé’±åŒ… / å¯¼å…¥é’±åŒ…é¡µé¢\né’±åŒ…ä¸»é¡µï¼ˆè´¦æˆ·ä¸èµ„äº§ï¼‰\nè½¬è´¦é¡µé¢\nè®¾ç½®é¡µé¢\n5.2 UI ä½¿ç”¨æµç¨‹ é¦–æ¬¡ä½¿ç”¨ï¼šåˆå§‹é¡µé¢ â†’ è®¾ç½®å¯†ç  â†’ åˆ›å»º/å¯¼å…¥é’±åŒ… â†’ è¿›å…¥ä¸»é¡µ\nå·²æœ‰é’±åŒ…ç”¨æˆ·ï¼šè¾“å…¥å¯†ç  â†’ è§£é”é’±åŒ… â†’ è¿›å…¥ä¸»é¡µ\n6. ç³»ç»Ÿè¾¹ç•Œï¼ˆSystem Boundariesï¼‰ 6.1 ç³»ç»Ÿå†…çš„å†…å®¹ æ‰€æœ‰å‰ç«¯é’±åŒ…ä¸šåŠ¡é€»è¾‘\næœ¬åœ°ç§é’¥ç”Ÿæˆä¸ç®¡ç†\nä¸åŒºå—é“¾èŠ‚ç‚¹çš„ç›´æ¥äº¤äº’\n6.2 ç³»ç»Ÿå¤–çš„å†…å®¹ åç«¯æœåŠ¡ï¼ˆé“¾ä¸‹åç«¯ï¼‰\næ•°æ®åº“ï¼ˆé“¾ä¸‹å­˜å‚¨ï¼‰\nå¤–éƒ¨é’±åŒ…æ’ä»¶ï¼ˆMetaMask ç­‰ï¼‰\nå¤–éƒ¨ä»·æ ¼æœåŠ¡\nåŒºå—é“¾æµè§ˆå™¨\n7. éåŠŸèƒ½æ€§è¦æ±‚ï¼ˆNFRï¼‰æ¦‚è¿° 7.1 å®‰å…¨æ€§ ç§é’¥ä¸ä¼šé€šè¿‡ç½‘ç»œä¼ è¾“\nç”¨æˆ·å¯†ç éœ€å—åˆ°é€‚å½“ä¿æŠ¤\n7.2 å¯ç”¨æ€§ é¡µé¢ç»“æ„ç®€æ´æ¸…æ™°\næä¾›å¿…è¦çš„é”™è¯¯æç¤º\n7.3 å¯ç»´æŠ¤æ€§ æ ¸å¿ƒé’±åŒ…æ¨¡å—ä¸ UI åˆ†å±‚\næ¨¡å—åŠŸèƒ½è¾¹ç•Œæ˜ç¡®\n7.4 æ‰©å±•æ€§ æ”¯æŒæœªæ¥æ‰©å±•å¤šé“¾èƒ½åŠ›\næ”¯æŒæ–°å¢è´¦æˆ·æˆ–èµ„äº§ç±»å‹\n8. é™åˆ¶ä¸å·²çŸ¥é—®é¢˜ï¼ˆKnown Limitationsï¼‰ æµè§ˆå™¨ç¯å¢ƒå®‰å…¨æ€§ä¾èµ–ç”¨æˆ·è®¾å¤‡æœ¬èº«\nIndexedDB æ•°æ®å¯èƒ½å› æµè§ˆå™¨æ¸…ç†è€Œä¸¢å¤±\nç§é’¥æ³„éœ²åä¸å¯æ¢å¤\n9. åç»­è§„åˆ’ï¼ˆRoadmapï¼‰ 9.1 1.0 ç‰ˆæœ¬ï¼šå•é“¾é’±åŒ… + åŸºç¡€è½¬è´¦/ç­¾ååŠŸèƒ½ å®ç°ä»¥å¤ªåŠä¸»ç½‘åŸºç¡€åŠŸèƒ½ï¼ŒåŒ…æ‹¬è´¦æˆ·ç®¡ç†ã€ETH è½¬è´¦ã€æ¶ˆæ¯ç­¾åç­‰æ ¸å¿ƒèƒ½åŠ›ã€‚\n9.2 2.0 ç‰ˆæœ¬ï¼šå¤šé“¾æ”¯æŒã€NFT åŸºç¡€å±•ç¤º æ‰©å±•è‡³å¤šé“¾æ¶æ„ï¼Œæ”¯æŒ BSCã€Polygon ç­‰ EVM å…¼å®¹é“¾ï¼Œå¹¶å¢åŠ  NFT èµ„äº§å±•ç¤ºåŠŸèƒ½ã€‚\n9.3 3.0 ç‰ˆæœ¬ï¼šDApp è¿æ¥ï¼ˆInject Providerï¼‰ å®ç° EIP-1193 æ ‡å‡† Provider æ³¨å…¥ï¼Œæ”¯æŒè¿æ¥å¤–éƒ¨ DAppï¼Œæä¾› MetaMask å…¼å®¹çš„äº¤äº’ä½“éªŒã€‚\n9.4 3.5 ç‰ˆæœ¬ï¼šç§»åŠ¨ç«¯é€‚é… ä¼˜åŒ–ç§»åŠ¨ç«¯å“åº”å¼å¸ƒå±€ï¼Œå¢åŠ  PWA æ”¯æŒï¼Œæå‡ç§»åŠ¨ç«¯ç”¨æˆ·ä½“éªŒã€‚\n9.5 4.0 ç‰ˆæœ¬ï¼šæ”¯æŒç¡¬ä»¶é’±åŒ… é›†æˆ Ledgerã€Trezor ç­‰ç¡¬ä»¶é’±åŒ…ï¼Œæä¾›ç¡¬ä»¶çº§ç§é’¥ä¿æŠ¤èƒ½åŠ›ã€‚\n","permalink":"http://localhost:1313/projects/0907wallet/","summary":"\u003ch1 id=\"é¡¹ç›®ç®€ä»‹\"\u003eé¡¹ç›®ç®€ä»‹\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eé¡¹ç›®åç§°\u003c/strong\u003eï¼š0907 Wallet\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eç³»ç»Ÿç±»å‹\u003c/strong\u003eï¼šåŸºäºæµè§ˆå™¨çš„ Web3 å»ä¸­å¿ƒåŒ–é’±åŒ…\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eç³»ç»Ÿå®šä½\u003c/strong\u003eï¼šè½»é‡åŒ–ã€æœ¬åœ°åŒ–ã€è‡ªæ‰˜ç®¡çš„é’±åŒ…ç³»ç»Ÿ\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eç³»ç»Ÿä»£ç æ¡†æ¶\u003c/strong\u003e: React + Next.js\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eæ ¸å¿ƒç›®æ ‡\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eæä¾›å®‰å…¨å¯é çš„é’±åŒ…è´¦æˆ·ç”Ÿæˆä¸ç®¡ç†èƒ½åŠ›\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eæ”¯æŒåŸºæœ¬çš„è½¬è´¦ã€æ¶ˆæ¯ç­¾åä¸èµ„äº§æŸ¥çœ‹åŠŸèƒ½\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eå®ç°å®Œæ•´çš„æœ¬åœ°åŒ–å­˜å‚¨ï¼Œå…¨æµç¨‹ä¸ä¸Šä¼ ç§é’¥\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eéç›®æ ‡è¯´æ˜ï¼ˆå¯é€‰ï¼‰\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eä¸æ„å»ºé“¾ä¸‹åç«¯æœåŠ¡\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eä¸æä¾›ä¸­å¿ƒåŒ–è´¦æˆ·ä½“ç³»\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eä¸æ‰˜ç®¡ä»»ä½•ç”¨æˆ·èµ„äº§\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch1 id=\"1-ä»£ç è§„èŒƒ\"\u003e1. ä»£ç è§„èŒƒ\u003c/h1\u003e\n\u003ch2 id=\"11-ä»£ç å‘½åè§„èŒƒ\"\u003e1.1 ä»£ç å‘½åè§„èŒƒ\u003c/h2\u003e\n\u003ch3 id=\"111-ç»„ä»¶å‘½åreact-ç»„ä»¶é¡µé¢\"\u003e1.1.1 ç»„ä»¶å‘½åï¼ˆReact ç»„ä»¶ã€é¡µé¢ï¼‰\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè§„åˆ™\u003c/strong\u003eï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæ–‡ä»¶å‘½å\u003c/strong\u003eï¼šåŒå \u003ccode\u003e.tsx\u003c/code\u003e æ–‡ä»¶ä¹Ÿå¿…é¡» PascalCase\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç¤ºä¾‹\u003c/strong\u003eï¼š\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eAccountCard\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etsx\u003c/span\u003e        \u003cspan class=\"err\"\u003eâ†’\u003c/span\u003e \u003cspan class=\"err\"\u003eæ­£ç¡®\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eUserProfile\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etsx\u003c/span\u003e        \u003cspan class=\"err\"\u003eâ†’\u003c/span\u003e \u003cspan class=\"err\"\u003eæ­£ç¡®\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eaccount\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"nx\"\u003ecard\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etsx\u003c/span\u003e       \u003cspan class=\"err\"\u003eâ†’\u003c/span\u003e \u003cspan class=\"err\"\u003eé”™è¯¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"112-æ¥å£ç±»å‹æšä¸¾å‘½å\"\u003e1.1.2 æ¥å£ã€ç±»å‹ã€æšä¸¾å‘½å\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè§„åˆ™\u003c/strong\u003eï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå»ºè®®\u003c/strong\u003eï¼šæ¥å£å¯åŠ  \u003ccode\u003eI\u003c/code\u003e å‰ç¼€ï¼ˆå›¢é˜Ÿç»Ÿä¸€å³å¯ï¼‰ï¼Œç±»å‹å¯åŠ  \u003ccode\u003eT\u003c/code\u003e å‰ç¼€ï¼ˆå¯é€‰ï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç¤ºä¾‹\u003c/strong\u003eï¼š\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003einterface\u003c/span\u003e \u003cspan class=\"nx\"\u003eUserInfo\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003einterface\u003c/span\u003e \u003cspan class=\"nx\"\u003eIUserInfo\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e      \u003cspan class=\"c1\"\u003e// ä¹Ÿå¯\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kr\"\u003etype\u003c/span\u003e \u003cspan class=\"nx\"\u003eNetworkConfig\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003etype\u003c/span\u003e \u003cspan class=\"nx\"\u003eTResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eenum\u003c/span\u003e \u003cspan class=\"nx\"\u003eChainId\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003eEthereum\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eSepolia\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e11155111\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"113-å¸¸é‡å‘½åå…¨å±€é…ç½®é­”æ³•å€¼\"\u003e1.1.3 å¸¸é‡å‘½åï¼ˆå…¨å±€é…ç½®ã€é­”æ³•å€¼ï¼‰\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè§„åˆ™\u003c/strong\u003eï¼šå…¨å¤§å†™ + ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆSCREAMING_SNAKE_CASEï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç¤ºä¾‹\u003c/strong\u003eï¼š\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eAPI_BASE_URL\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;https://api.0907wallet.com\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eDEFAULT_CHAIN_ID\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eMAX_RETRY_COUNT\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eSUPPORTED_CHAINS\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e11155111\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"114-æ™®é€šå˜é‡å‡½æ•°å±æ€§å‘½å\"\u003e1.1.4 æ™®é€šå˜é‡ã€å‡½æ•°ã€å±æ€§å‘½å\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè§„åˆ™\u003c/strong\u003eï¼šå°é©¼å³°ï¼ˆcamelCaseï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå¸ƒå°”å€¼å»ºè®®\u003c/strong\u003eï¼šä»¥ \u003ccode\u003eis\u003c/code\u003eã€\u003ccode\u003ehas\u003c/code\u003eã€\u003ccode\u003eshould\u003c/code\u003eã€\u003ccode\u003ecan\u003c/code\u003e å¼€å¤´\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç¤ºä¾‹\u003c/strong\u003eï¼š\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ewalletAddress\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;0x1234...abcd\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eisConnected\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kc\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ehasBalance\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ebalance\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003econnectWallet() {\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003easync\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003efetchUserInfo() {\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"115-æ–‡ä»¶ä¸æ–‡ä»¶å¤¹å‘½å\"\u003e1.1.5 æ–‡ä»¶ä¸æ–‡ä»¶å¤¹å‘½å\u003c/h3\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eç±»å‹\u003c/th\u003e\n          \u003cth\u003eå‘½åè§„åˆ™\u003c/th\u003e\n          \u003cth\u003eç¤ºä¾‹\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eç»„ä»¶ / é¡µé¢\u003c/td\u003e\n          \u003ctd\u003ePascalCase\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003eAccountCard.tsx\u003c/code\u003eã€\u003ccode\u003esettings/page.tsx\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eå·¥å…·å‡½æ•°\u003c/td\u003e\n          \u003ctd\u003ekebab-case æˆ– camelCase\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003estorage.ts\u003c/code\u003eã€\u003ccode\u003eformat-address.ts\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ehooks\u003c/td\u003e\n          \u003ctd\u003eä»¥ \u003ccode\u003euse\u003c/code\u003e å¼€å¤´\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003euseWallet.ts\u003c/code\u003eã€\u003ccode\u003euseDebounce.ts\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eæ ·å¼\u003c/td\u003e\n          \u003ctd\u003eä¸ç»„ä»¶åŒå\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003eAccountCard.module.css\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eå¸¸é‡/é…ç½®\u003c/td\u003e\n          \u003ctd\u003ekebab-case\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003echains.config.ts\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"12-ä»£ç æ³¨é‡Šè§„èŒƒ\"\u003e1.2 ä»£ç æ³¨é‡Šè§„èŒƒ\u003c/h2\u003e\n\u003ch3 id=\"121-æ–‡ä»¶å¤´æ³¨é‡Šæ¯ä¸ªæ–‡ä»¶å¿…é¡»\"\u003e1.2.1 æ–‡ä»¶å¤´æ³¨é‡Šï¼ˆæ¯ä¸ªæ–‡ä»¶å¿…é¡»ï¼‰\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @file æ–‡ä»¶ç®€è¦æè¿°ï¼ˆä¸€å¥è¯ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @description æ›´è¯¦ç»†è¯´æ˜ï¼ˆå¯é€‰ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @author å¼ ä¸‰ï¼ˆgithub: zhangsanï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @date 2025-04-05\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"122-å¯¼å‡ºå‡½æ•°--ç»„ä»¶--hook-å¿…é¡»å†™-jsdoc\"\u003e1.2.2 å¯¼å‡ºå‡½æ•° / ç»„ä»¶ / Hook å¿…é¡»å†™ JSDoc\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * åˆå§‹åŒ– IndexedDB æ•°æ®åº“ï¼ˆæ”¯æŒè‡ªåŠ¨æŒ‰éœ€å»ºè¡¨ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @returns IndexedDB å®ä¾‹\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @example const db = await initDB();\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kr\"\u003easync\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003einitDB\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003ePromise\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eIDBPDatabase\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * è´¦æˆ·å¡ç‰‡ç»„ä»¶ï¼ˆå¸¦æ‚¬åœå¤åˆ¶åŠ¨ç”»ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param address - é’±åŒ…åœ°å€ï¼ˆ0x...ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param name    - å¯é€‰è´¦æˆ·åˆ«å\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eAccountCard\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003eaddress\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003ename\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003eaddress\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003ename?\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e})\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"123-å¤æ‚é€»è¾‘å¿…é¡»è§£é‡Šä¸ºä»€ä¹ˆ\"\u003e1.2.3 å¤æ‚é€»è¾‘å¿…é¡»è§£é‡Šã€Œä¸ºä»€ä¹ˆã€\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// ä¸ºä»€ä¹ˆå…³é—­å†å‡çº§ï¼Ÿ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// IndexedDB åªæœ‰åœ¨ versionchange äº‹åŠ¡ä¸­æ‰èƒ½åˆ›å»º objectStoreï¼Œ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// å½“å‰è¿æ¥æ— æ³•åˆ›å»ºæ–°è¡¨ï¼Œå¿…é¡»å…³é—­åä»¥æ–°ç‰ˆæœ¬é‡æ–°æ‰“å¼€\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eclose\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"124-todo--fixme-ç»Ÿä¸€æ ¼å¼\"\u003e1.2.4 TODO / FIXME ç»Ÿä¸€æ ¼å¼\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// TODO: [é«˜] æ”¯æŒå¤šç­¾é’±åŒ…ï¼ˆ@æå››ï¼Œ2025-07-01ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// FIXME: å¿«é€Ÿç§»å…¥ç§»å‡ºä¼šå¯¼è‡´å¤šä¸ª setTimeout æ®‹ç•™\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"125-ç¦æ­¢çš„æ³¨é‡Šç›´æ¥æ‰“å›\"\u003e1.2.5 ç¦æ­¢çš„æ³¨é‡Šï¼ˆç›´æ¥æ‰“å›ï¼‰\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// é”™è¯¯ç¤ºä¾‹ï¼ˆè§£é‡Šã€Œåšä»€ä¹ˆã€è€Œä¸æ˜¯ã€Œä¸ºä»€ä¹ˆã€ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ea\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e           \u003cspan class=\"c1\"\u003e// å®šä¹‰å˜é‡ a\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"nx\"\u003esetLoading\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e      \u003cspan class=\"c1\"\u003e// è®¾ç½® loading ä¸º true\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// é”™è¯¯ï¼šè¿‡æ—¶æ³¨é‡Š\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eMAX_RETRY\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e   \u003cspan class=\"c1\"\u003e// æœ€å¤§é‡è¯•æ¬¡æ•° 5 æ¬¡ï¼ˆå®é™…æ˜¯ 3ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"13-å…¶ä»–å¼ºåˆ¶è§„èŒƒå¿«é€Ÿè®°å¿†ç‰ˆ\"\u003e1.3 å…¶ä»–å¼ºåˆ¶è§„èŒƒï¼ˆå¿«é€Ÿè®°å¿†ç‰ˆï¼‰\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eé¡¹ç›®\u003c/th\u003e\n          \u003cth\u003eè¦æ±‚\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eç±»å‹ä¼˜å…ˆ\u003c/td\u003e\n          \u003ctd\u003eèƒ½ç”¨ TypeScript è§£å†³çš„ç»ä¸å†™æ³¨é‡Š\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eprops ç±»å‹\u003c/td\u003e\n          \u003ctd\u003eå¿…é¡»æ˜¾å¼å£°æ˜ interface/typeï¼Œç¦æ­¢ any\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè‡ªå®šä¹‰ Hook\u003c/td\u003e\n          \u003ctd\u003eå¿…é¡»ä»¥ \u003ccode\u003euse\u003c/code\u003e å¼€å¤´ï¼Œæ–‡ä»¶åä¹Ÿå¿…é¡»æ˜¯ \u003ccode\u003euseXxx.ts\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003easync å‡½æ•°\u003c/td\u003e\n          \u003ctd\u003eå¿…é¡» try-catch æˆ–è¿”å›é”™è¯¯çŠ¶æ€\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003econsole.log\u003c/td\u003e\n          \u003ctd\u003eä¸Šçº¿å‰å¿…é¡»åˆ é™¤æˆ–æ”¹ä¸º logger\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eé­”æ³•å€¼\u003c/td\u003e\n          \u003ctd\u003eå…¨éƒ¨æå–ä¸ºå¸¸é‡ï¼ˆå‚è€ƒ 1.1.3ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"2-ç³»ç»ŸåŠŸèƒ½èŒƒå›´scope\"\u003e2. ç³»ç»ŸåŠŸèƒ½èŒƒå›´ï¼ˆScopeï¼‰\u003c/h2\u003e\n\u003ch3 id=\"21-åŸºç¡€åŠŸèƒ½\"\u003e2.1 åŸºç¡€åŠŸèƒ½\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eç”¨æˆ·å¯†ç åˆ›å»ºä¸éªŒè¯\u003c/p\u003e","title":"0907 Wallet"},{"content":"IDE Integrated Development Environmentï¼ˆé›†æˆå¼€å‘ç¯å¢ƒï¼‰\nå¸¸ç”¨çš„å¼€å‘ä¸è°ƒè¯•å·¥å…·\nVS Codeï¼šè½»é‡çº§é€šç”¨ç¼–è¾‘å™¨ IntelliJ IDEAï¼šJava é¡¹ç›®å¼€å‘ PyCharmï¼šPython é¡¹ç›®å¼€å‘ ç‰ˆæœ¬æ§åˆ¶ ç”¨äºä»£ç åä½œã€å†å²ç®¡ç†ä¸è‡ªåŠ¨åŒ–æµç¨‹\nGit / GitHubï¼šåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ä¸åä½œ GitHub Actionsï¼šè‡ªåŠ¨åŒ– CI/CD å·¥ä½œæµ GitKrakenï¼šå¯è§†åŒ– Git æ“ä½œå®¢æˆ·ç«¯ å®¹å™¨éƒ¨ç½² Dockerï¼šåº”ç”¨å®¹å™¨åŒ–ä¸ç¯å¢ƒä¸€è‡´æ€§ Docker Composeï¼šå¤šå®¹å™¨å¼€å‘ç¯å¢ƒ Kubernetesï¼ˆå¯é€‰ï¼‰ï¼šåº”ç”¨ç¼–æ’ä¸å¤§è§„æ¨¡éƒ¨ç½² å‰ç«¯å¼€å‘ Node.js / npm / pnpmï¼šå‰ç«¯æ„å»ºç¯å¢ƒ Vue / Reactï¼šå¸¸ç”¨å‰ç«¯æ¡†æ¶ Viteï¼šå¿«é€Ÿæ„å»ºå·¥å…· TailwindCSSï¼šå®ç”¨åŒ– CSS æ¡†æ¶ åç«¯å¼€å‘ Spring Bootï¼šç°ä»£åŒ– Java åç«¯å¼€å‘æ¡†æ¶ MyBatis / JPAï¼šæ•°æ®åº“ ORM Redisï¼šç¼“å­˜ä¸­é—´ä»¶ OpenAPI / Swaggerï¼šæ¥å£æ–‡æ¡£ç”Ÿæˆ è¿ç»´å¼€å‘ æ—¥å¿—ç®¡ç† Lokiï¼šåˆ†å¸ƒå¼æ—¥å¿—ç³»ç»Ÿ Vectorï¼šæ—¥å¿—é‡‡é›†ä¸å¤„ç† ğŸ‘‰ ç›¸å…³ç¬”è®°ï¼šVector æ—¥å¿—é‡‡é›†ä¸å¤„ç† LogstashEncoderï¼šç»“æ„åŒ– JSON æ—¥å¿— ç³»ç»Ÿç›‘æ§ Prometheusï¼šæ—¶åºç›‘æ§ä¸æŠ¥è­¦ Grafanaï¼šå¯è§†åŒ–ç›‘æ§é¢æ¿ åº”ç”¨æµ‹è¯• Postmanï¼šæ¥å£æµ‹è¯• JMeterï¼šå‹æµ‹å·¥å…· æ•°æ®å­˜å‚¨ ClickHouse: é«˜æ€§èƒ½åˆ—å¼æ•°æ®åº“ ğŸ‘‰ ç›¸å…³ç¬”è®°ï¼šClickHouse é«˜æ€§èƒ½æ•°æ®åº“ å­¦ä¹ ä¸æ•ˆç‡å·¥å…· å¸®åŠ©çŸ¥è¯†ç®¡ç†ã€é¡¹ç›®æ•´ç†ä¸å†™ä½œ\nNotionï¼šçŸ¥è¯†åº“ä¸ä»»åŠ¡ç®¡ç† Obsidianï¼šMarkdown åŒé“¾ç¬”è®° Hugo + PaperModï¼šä¸ªäººåšå®¢ç”Ÿæˆå™¨ å›¾åƒå¤„ç† Photopeaï¼šåœ¨çº¿ PS GIMPï¼šå¼€æºå›¾åƒå¤„ç† Pixelmator / Affinityï¼ˆå¯é€‰ï¼‰ï¼šè½»é‡ PS æ›¿ä»£å“ ","permalink":"http://localhost:1313/toolkits/intro/","summary":"\u003ch2 id=\"ide\"\u003eIDE\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIntegrated Development Environmentï¼ˆé›†æˆå¼€å‘ç¯å¢ƒï¼‰\u003cbr\u003e\nå¸¸ç”¨çš„å¼€å‘ä¸è°ƒè¯•å·¥å…·\u003c/p\u003e\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eVS Code\u003c/strong\u003eï¼šè½»é‡çº§é€šç”¨ç¼–è¾‘å™¨\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eIntelliJ IDEA\u003c/strong\u003eï¼šJava é¡¹ç›®å¼€å‘\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePyCharm\u003c/strong\u003eï¼šPython é¡¹ç›®å¼€å‘\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"ç‰ˆæœ¬æ§åˆ¶\"\u003eç‰ˆæœ¬æ§åˆ¶\u003c/h2\u003e\n\u003cp\u003eç”¨äºä»£ç åä½œã€å†å²ç®¡ç†ä¸è‡ªåŠ¨åŒ–æµç¨‹\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eGit / GitHub\u003c/strong\u003eï¼šåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ä¸åä½œ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGitHub Actions\u003c/strong\u003eï¼šè‡ªåŠ¨åŒ– CI/CD å·¥ä½œæµ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGitKraken\u003c/strong\u003eï¼šå¯è§†åŒ– Git æ“ä½œå®¢æˆ·ç«¯\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å®¹å™¨éƒ¨ç½²\"\u003eå®¹å™¨éƒ¨ç½²\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eDocker\u003c/strong\u003eï¼šåº”ç”¨å®¹å™¨åŒ–ä¸ç¯å¢ƒä¸€è‡´æ€§\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDocker Compose\u003c/strong\u003eï¼šå¤šå®¹å™¨å¼€å‘ç¯å¢ƒ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eKubernetesï¼ˆå¯é€‰ï¼‰\u003c/strong\u003eï¼šåº”ç”¨ç¼–æ’ä¸å¤§è§„æ¨¡éƒ¨ç½²\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å‰ç«¯å¼€å‘\"\u003eå‰ç«¯å¼€å‘\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eNode.js / npm / pnpm\u003c/strong\u003eï¼šå‰ç«¯æ„å»ºç¯å¢ƒ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVue / React\u003c/strong\u003eï¼šå¸¸ç”¨å‰ç«¯æ¡†æ¶\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVite\u003c/strong\u003eï¼šå¿«é€Ÿæ„å»ºå·¥å…·\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTailwindCSS\u003c/strong\u003eï¼šå®ç”¨åŒ– CSS æ¡†æ¶\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"åç«¯å¼€å‘\"\u003eåç«¯å¼€å‘\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eSpring Boot\u003c/strong\u003eï¼šç°ä»£åŒ– Java åç«¯å¼€å‘æ¡†æ¶\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMyBatis / JPA\u003c/strong\u003eï¼šæ•°æ®åº“ ORM\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eRedis\u003c/strong\u003eï¼šç¼“å­˜ä¸­é—´ä»¶\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eOpenAPI / Swagger\u003c/strong\u003eï¼šæ¥å£æ–‡æ¡£ç”Ÿæˆ\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"è¿ç»´å¼€å‘\"\u003eè¿ç»´å¼€å‘\u003c/h2\u003e\n\u003ch3 id=\"æ—¥å¿—ç®¡ç†\"\u003eæ—¥å¿—ç®¡ç†\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eLoki\u003c/strong\u003eï¼šåˆ†å¸ƒå¼æ—¥å¿—ç³»ç»Ÿ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVector\u003c/strong\u003eï¼šæ—¥å¿—é‡‡é›†ä¸å¤„ç†  ğŸ‘‰ \u003ca href=\"/toolkits/vector\"\u003eç›¸å…³ç¬”è®°ï¼šVector æ—¥å¿—é‡‡é›†ä¸å¤„ç†\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLogstashEncoder\u003c/strong\u003eï¼šç»“æ„åŒ– JSON æ—¥å¿—\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ç³»ç»Ÿç›‘æ§\"\u003eç³»ç»Ÿç›‘æ§\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePrometheus\u003c/strong\u003eï¼šæ—¶åºç›‘æ§ä¸æŠ¥è­¦\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGrafana\u003c/strong\u003eï¼šå¯è§†åŒ–ç›‘æ§é¢æ¿\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"åº”ç”¨æµ‹è¯•\"\u003eåº”ç”¨æµ‹è¯•\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePostman\u003c/strong\u003eï¼šæ¥å£æµ‹è¯•\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eJMeter\u003c/strong\u003eï¼šå‹æµ‹å·¥å…·\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"æ•°æ®å­˜å‚¨\"\u003eæ•°æ®å­˜å‚¨\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eClickHouse\u003c/strong\u003e: é«˜æ€§èƒ½åˆ—å¼æ•°æ®åº“\nğŸ‘‰ \u003ca href=\"/toolkits/clickhouse\"\u003eç›¸å…³ç¬”è®°ï¼šClickHouse é«˜æ€§èƒ½æ•°æ®åº“\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å­¦ä¹ ä¸æ•ˆç‡å·¥å…·\"\u003eå­¦ä¹ ä¸æ•ˆç‡å·¥å…·\u003c/h2\u003e\n\u003cp\u003eå¸®åŠ©çŸ¥è¯†ç®¡ç†ã€é¡¹ç›®æ•´ç†ä¸å†™ä½œ\u003c/p\u003e","title":"Toolkits ç®€ä»‹"},{"content":"EIP ç´¢å¼•æ€»è§ˆ è¿™é‡Œæ”¶å½•æ‰€æœ‰å€¼å¾—å•ç‹¬æˆæ–‡çš„é‡Œç¨‹ç¢‘çº§EIP\næ¯ç¯‡æ·±åº¦æ‹†è§£ä¸€ä»½EIPçš„è¯ç”ŸèƒŒæ™¯æŠ€æœ¯ç»†èŠ‚å®‰å…¨å½±å“è½åœ°å†ç¨‹ç¤¾åŒºäº‰è®®åŠåç»­æ¼”è¿›\nç‚¹å‡»æ ‡é¢˜ç›´è¾¾å¯¹åº”ä¸“æ–‡\nç®€ä»‹ EIPï¼ˆEthereum Improvement Proposalï¼‰æ˜¯ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆ\nä»»ä½•äººéƒ½èƒ½æäº¤çš„æ ‡å‡†åŒ–æ–‡æ¡£\né©±åŠ¨ä»¥å¤ªåŠä»åˆ›ä¸–åŒºå—åˆ°ä»Šå¤©çš„å”¯ä¸€æ­£å¼æœºåˆ¶\nERCåªæ˜¯EIPçš„åº”ç”¨å±‚å­é›†\næ‰€æœ‰ç¡¬åˆ†å‰å‡çº§Layer2å˜é©è´¦æˆ·æŠ½è±¡éƒ½æºäºEIP\nè´¦æˆ·æŠ½è±¡æ—¶ä»£ EIP-4337 æ— ç§é’¥è´¦æˆ·æŠ½è±¡ï¼š2023å¹´çœŸæ­£è½åœ°ç‰ˆæœ¬ï¼ˆå·²å®Œç¨¿ï¼‰ EIP-3074 AUTHä¸AUTHCALLï¼šè¢«åºŸå¼ƒçš„è´¦æˆ·æŠ½è±¡å…ˆé©±ï¼ˆå¾…æ’°å†™ï¼‰ EIP-5003 ä»£ç æ³¨å…¥å¼è´¦æˆ·æŠ½è±¡ï¼ˆå¾…æ’°å†™ï¼‰ EIP-7702 æ–°è´¦æˆ·æŠ½è±¡ç»ˆææ–¹æ¡ˆï¼ˆ2025è¿›è¡Œä¸­ï¼‰ï¼ˆå¾…æ’°å†™ï¼‰ è´¹ç”¨å¸‚åœºä¸é€šç¼© EIP-1559 åŸºç¡€è´¹ç‡ƒçƒ§ï¼šè®©ETHæˆä¸ºè¶…å£°æ³¢è´§å¸ï¼ˆå¾…æ’°å†™ï¼‰ EIP-4844 Proto-Dankshardingï¼šRollupè´¹ç”¨æš´è·Œ90%ï¼ˆå¾…æ’°å†™ï¼‰ EIP-7514 å‡ç¼“è´¨æŠ¼å¢é•¿ï¼šä¿æŠ¤å»ä¸­å¿ƒåŒ–ï¼ˆå¾…æ’°å†™ï¼‰ è´¨æŠ¼ä¸ææ¬¾ EIP-4895 è´¨æŠ¼ææ¬¾ï¼šä¸Šæµ·å‡çº§æ ¸å¿ƒï¼ˆå¾…æ’°å†™ï¼‰ EIP-7002 éƒ¨åˆ†ææ¬¾ä¸ä¸»åŠ¨é€€å‡ºï¼ˆå¾…æ’°å†™ï¼‰ EIP-6110 é“¾ä¸Šè´¨æŠ¼å­˜æ¬¾ï¼ˆå¾…æ’°å†™ï¼‰ EVMä¸æ‰§è¡Œå±‚æœªæ¥ EIP-7691 EOFï¼šEVMå®¹å™¨åŒ–é©å‘½ï¼ˆ2026ç›®æ ‡ï¼‰ï¼ˆå¾…æ’°å†™ï¼‰ EIP-7623 æé«˜CALLDATAæˆæœ¬ä¸ºDankshardingé“ºè·¯ï¼ˆå¾…æ’°å†™ï¼‰ EIP-4444 å†å²æ•°æ®è¿‡æœŸæœºåˆ¶ï¼ˆå¾…æ’°å†™ï¼‰ EIP-5656 MCOPYæŒ‡ä»¤ï¼šé™ä½å†…å­˜æ‹·è´æˆæœ¬ï¼ˆå¾…æ’°å†™ï¼‰ æ•°æ®å¯ç”¨æ€§ä¸Layer2 EIP-4844 Blobäº¤æ˜“ä¸Dankshardingè·¯çº¿å›¾ï¼ˆå¾…æ’°å†™ï¼‰ EIP-7594 PeerDASï¼šå¯¹ç­‰æ•°æ®å¯ç”¨æ€§é‡‡æ ·ï¼ˆå¾…æ’°å†™ï¼‰ EIP-6465/6466 Blobå†å²è¿‡æœŸæ–¹æ¡ˆï¼ˆå¾…æ’°å†™ï¼‰ å…¶ä»–æ­£åœ¨å…³æ³¨çš„EIP EIP-7732 EIP-7702+ERC-7730å®‰å…¨å¢å¼ºç‰ˆï¼ˆå¾…æ’°å†™ï¼‰ EIP-2537 BLSé¢„ç¼–è¯‘ï¼šåŠ é€Ÿé›¶çŸ¥è¯†è¯æ˜ï¼ˆå¾…æ’°å†™ï¼‰ EIP-5920 PAY opcodeï¼šåŸç”Ÿè½¬è´¦æ–°æ–¹å¼ï¼ˆå¾…æ’°å†™ï¼‰ EIP-6780 è‡ªæ¯ä»…é™åˆ›å»ºäº¤æ˜“ï¼šæå‡çŠ¶æ€ç®¡ç†ï¼ˆå¾…æ’°å†™ï¼‰ æ›´å¤šEIPä¸“æ–‡æŒç»­æ›´æ–°ä¸­\nç›®å‰ä»…EIP-4337å·²å®Œç¨¿ï¼Œå…¶ä½™é™†ç»­æ”¾å‡º\næ¯ä¸€ç¯‡éƒ½æ˜¯ä»¥å¤ªåŠè¿›åŒ–å²çš„çœŸå®æ³¨è„š\n","permalink":"http://localhost:1313/web3/eip/intro/","summary":"\u003ch1 id=\"eip-ç´¢å¼•æ€»è§ˆ\"\u003eEIP ç´¢å¼•æ€»è§ˆ\u003c/h1\u003e\n\u003cp\u003eè¿™é‡Œæ”¶å½•æ‰€æœ‰å€¼å¾—å•ç‹¬æˆæ–‡çš„é‡Œç¨‹ç¢‘çº§EIP\u003cbr\u003e\næ¯ç¯‡æ·±åº¦æ‹†è§£ä¸€ä»½EIPçš„è¯ç”ŸèƒŒæ™¯æŠ€æœ¯ç»†èŠ‚å®‰å…¨å½±å“è½åœ°å†ç¨‹ç¤¾åŒºäº‰è®®åŠåç»­æ¼”è¿›\u003cbr\u003e\nç‚¹å‡»æ ‡é¢˜ç›´è¾¾å¯¹åº”ä¸“æ–‡\u003c/p\u003e\n\u003ch2 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eEIPï¼ˆEthereum Improvement Proposalï¼‰æ˜¯ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆ\u003cbr\u003e\nä»»ä½•äººéƒ½èƒ½æäº¤çš„æ ‡å‡†åŒ–æ–‡æ¡£\u003cbr\u003e\né©±åŠ¨ä»¥å¤ªåŠä»åˆ›ä¸–åŒºå—åˆ°ä»Šå¤©çš„å”¯ä¸€æ­£å¼æœºåˆ¶\u003cbr\u003e\nERCåªæ˜¯EIPçš„åº”ç”¨å±‚å­é›†\u003cbr\u003e\næ‰€æœ‰ç¡¬åˆ†å‰å‡çº§Layer2å˜é©è´¦æˆ·æŠ½è±¡éƒ½æºäºEIP\u003c/p\u003e\n\u003ch2 id=\"è´¦æˆ·æŠ½è±¡æ—¶ä»£\"\u003eè´¦æˆ·æŠ½è±¡æ—¶ä»£\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/web3/eip/eip-4337\"\u003eEIP-4337 æ— ç§é’¥è´¦æˆ·æŠ½è±¡ï¼š2023å¹´çœŸæ­£è½åœ°ç‰ˆæœ¬ï¼ˆå·²å®Œç¨¿ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-3074\"\u003eEIP-3074 AUTHä¸AUTHCALLï¼šè¢«åºŸå¼ƒçš„è´¦æˆ·æŠ½è±¡å…ˆé©±ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-5003\"\u003eEIP-5003 ä»£ç æ³¨å…¥å¼è´¦æˆ·æŠ½è±¡ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7702\"\u003eEIP-7702 æ–°è´¦æˆ·æŠ½è±¡ç»ˆææ–¹æ¡ˆï¼ˆ2025è¿›è¡Œä¸­ï¼‰ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"è´¹ç”¨å¸‚åœºä¸é€šç¼©\"\u003eè´¹ç”¨å¸‚åœºä¸é€šç¼©\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-1559\"\u003eEIP-1559 åŸºç¡€è´¹ç‡ƒçƒ§ï¼šè®©ETHæˆä¸ºè¶…å£°æ³¢è´§å¸ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-4844\"\u003eEIP-4844 Proto-Dankshardingï¼šRollupè´¹ç”¨æš´è·Œ90%ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7514\"\u003eEIP-7514 å‡ç¼“è´¨æŠ¼å¢é•¿ï¼šä¿æŠ¤å»ä¸­å¿ƒåŒ–ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"è´¨æŠ¼ä¸ææ¬¾\"\u003eè´¨æŠ¼ä¸ææ¬¾\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-4895\"\u003eEIP-4895 è´¨æŠ¼ææ¬¾ï¼šä¸Šæµ·å‡çº§æ ¸å¿ƒï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7002\"\u003eEIP-7002 éƒ¨åˆ†ææ¬¾ä¸ä¸»åŠ¨é€€å‡ºï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-6110\"\u003eEIP-6110 é“¾ä¸Šè´¨æŠ¼å­˜æ¬¾ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"evmä¸æ‰§è¡Œå±‚æœªæ¥\"\u003eEVMä¸æ‰§è¡Œå±‚æœªæ¥\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7691\"\u003eEIP-7691 EOFï¼šEVMå®¹å™¨åŒ–é©å‘½ï¼ˆ2026ç›®æ ‡ï¼‰ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7623\"\u003eEIP-7623 æé«˜CALLDATAæˆæœ¬ä¸ºDankshardingé“ºè·¯ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-4444\"\u003eEIP-4444 å†å²æ•°æ®è¿‡æœŸæœºåˆ¶ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-5656\"\u003eEIP-5656 MCOPYæŒ‡ä»¤ï¼šé™ä½å†…å­˜æ‹·è´æˆæœ¬ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"æ•°æ®å¯ç”¨æ€§ä¸layer2\"\u003eæ•°æ®å¯ç”¨æ€§ä¸Layer2\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-4844\"\u003eEIP-4844 Blobäº¤æ˜“ä¸Dankshardingè·¯çº¿å›¾ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7594\"\u003eEIP-7594 PeerDASï¼šå¯¹ç­‰æ•°æ®å¯ç”¨æ€§é‡‡æ ·ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-6465\"\u003eEIP-6465/6466 Blobå†å²è¿‡æœŸæ–¹æ¡ˆï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å…¶ä»–æ­£åœ¨å…³æ³¨çš„eip\"\u003eå…¶ä»–æ­£åœ¨å…³æ³¨çš„EIP\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7732\"\u003eEIP-7732 EIP-7702+ERC-7730å®‰å…¨å¢å¼ºç‰ˆï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-2537\"\u003eEIP-2537 BLSé¢„ç¼–è¯‘ï¼šåŠ é€Ÿé›¶çŸ¥è¯†è¯æ˜ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-5920\"\u003eEIP-5920 PAY opcodeï¼šåŸç”Ÿè½¬è´¦æ–°æ–¹å¼ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-6780\"\u003eEIP-6780 è‡ªæ¯ä»…é™åˆ›å»ºäº¤æ˜“ï¼šæå‡çŠ¶æ€ç®¡ç†ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæ›´å¤šEIPä¸“æ–‡æŒç»­æ›´æ–°ä¸­\u003cbr\u003e\nç›®å‰ä»…EIP-4337å·²å®Œç¨¿ï¼Œå…¶ä½™é™†ç»­æ”¾å‡º\u003cbr\u003e\næ¯ä¸€ç¯‡éƒ½æ˜¯ä»¥å¤ªåŠè¿›åŒ–å²çš„çœŸå®æ³¨è„š\u003c/p\u003e","title":"EIP ç¬”è®°åˆé›†"},{"content":"æ‘˜è¦ å¼•å…¥ UserOperationï¼šä¸€ç§é«˜å±‚â€œä¼ªäº¤æ˜“å¯¹è±¡â€ï¼Œæ›¿ä»£ç›´æ¥åœ¨å…±è¯†å±‚æäº¤äº¤æ˜“\nç”¨æˆ·å°† UserOperation å‘é€åˆ°å•ç‹¬çš„ mempool\nBundler å°†å¤šä¸ª UserOperation æ‰“åŒ…ï¼Œé€šè¿‡ handleOps è°ƒç”¨ EntryPoint åˆçº¦ï¼Œå†æ‰“åŒ…è¿›åŒºå—\nç›®æ ‡æ˜¯åœ¨ä¸ä¿®æ”¹ä»¥å¤ªåŠåº•å±‚åè®®çš„æƒ…å†µä¸‹ï¼Œå®ç°è´¦æˆ·æŠ½è±¡\nåŠ¨æœº å®ç°è´¦æˆ·æŠ½è±¡\nå…è®¸ä½¿ç”¨æ™ºèƒ½åˆçº¦è´¦æˆ·ä½œä¸ºä¸»è´¦æˆ·ï¼Œæ”¯æŒä»»æ„éªŒè¯é€»è¾‘ã€‚ ç”¨æˆ·æ— éœ€æ‹¥æœ‰å¤–éƒ¨è´¦æˆ·ï¼ˆEOAï¼‰ã€‚ å»ä¸­å¿ƒåŒ–ä¸å¼€æ”¾å‚ä¸\nä»»ä½• bundler éƒ½å¯å‚ä¸äº¤æ˜“æ‰“åŒ…ã€‚ ä¾èµ–å…¬å…± mempoolï¼Œæ— éœ€ç”¨æˆ·ç›´æ¥çŸ¥æ™“ bundler åœ°å€ã€‚ ä¸å¢åŠ ä¿¡ä»»å‡è®¾ã€‚ æ— éœ€å…±è¯†å±‚ä¿®æ”¹\né¿å…åè®®å±‚æ”¹åŠ¨ï¼Œæé«˜å¿«é€Ÿéƒ¨ç½²çš„å¯èƒ½æ€§ã€‚ æ”¯æŒæ›´å¤šåº”ç”¨åœºæ™¯\néšç§ä¿æŠ¤å‹åº”ç”¨ åŸå­å¤šæ“ä½œ ä½¿ç”¨ ERC-20 ä»£å¸æ”¯ä»˜æ‰‹ç»­è´¹æˆ–å¼€å‘è€…ä»£ä»˜ çµæ´»çš„éªŒè¯é€»è¾‘ï¼ˆä¸åŒç­¾åæ–¹æ¡ˆã€å¤šç­¾ã€æ¢å¤æ–¹æ¡ˆï¼‰ çµæ´»çš„æ‰‹ç»­è´¹æ”¯ä»˜ï¼ˆç¬¬ä¸‰æ–¹æ”¯ä»˜ã€è·¨é“¾æ”¯ä»˜ï¼‰ æ‰¹é‡æ“ä½œä¸æ‰“åŒ…æ‰§è¡Œ æ€»ç»“ï¼šè¯¥ææ¡ˆé€šè¿‡ UserOperationã€Bundler å’Œ EntryPoint åˆçº¦å®ç°æ™ºèƒ½åˆçº¦è´¦æˆ·çš„å®Œå…¨æŠ½è±¡åŒ–ï¼Œæ”¯æŒå¤šç­¾ã€ä»£ä»˜å’Œæ‰¹é‡æ“ä½œï¼ŒåŒæ—¶æ— éœ€ä¿®æ”¹ä»¥å¤ªåŠå…±è¯†å±‚\nè§„èŒƒ æœ¯è¯­å®šä¹‰ æœ¯è¯­ å®šä¹‰ UserOperation ä¸€ç§æè¿°â€œä»£è¡¨ç”¨æˆ·å‘èµ·ä¸€ç¬”äº¤æ˜“â€çš„æ•°æ®ç»“æ„ã€‚ä¸ºé¿å…ä¸åŸç”Ÿäº¤æ˜“æ··æ·†ï¼Œç‰¹æ„ä¸å«â€œtransactionâ€ã€‚åƒäº¤æ˜“ä¸€æ ·ï¼Œå®ƒåŒ…å« toã€calldataã€maxFeePerGasã€maxPriorityFeePerGasã€nonceã€signatureã€‚ä¸åƒäº¤æ˜“ï¼Œå®ƒåŒ…å«ä»¥ä¸‹æ‰€è¿°çš„å‡ ä¸ªå…¶ä»–å­—æ®µã€‚ç‰¹åˆ«æ³¨æ„ï¼Œsignature å­—æ®µçš„ä½¿ç”¨ä¸ç”±åè®®å®šä¹‰ï¼Œè€Œæ˜¯ç”±æ™ºèƒ½åˆçº¦è´¦æˆ·å®ç°å®šä¹‰ Sender å‘èµ· UserOperation çš„æ™ºèƒ½åˆçº¦è´¦æˆ· EntryPoint ç”¨äºæ‰§è¡Œ UserOperation æ‰¹æ¬¡çš„å•ä¾‹åˆçº¦ã€‚Bundler åº”ç™½åå•æ”¯æŒçš„ EntryPoint Bundler ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆåŒºå—æ„å»ºè€…ï¼‰ï¼Œå®ƒèƒ½å¤„ç† UserOperationã€åˆ›å»ºæœ‰æ•ˆçš„ entryPoint.handleOps() äº¤æ˜“ï¼Œå¹¶åœ¨äº¤æ˜“ä»æœ‰æ•ˆæ—¶å°†å…¶æ·»åŠ åˆ°åŒºå—ä¸­ã€‚è¿™å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°ï¼šBundler å¯ä»¥è‡ªå·±å……å½“åŒºå—æ„å»ºè€…ã€‚å¦‚æœ bundler ä¸æ˜¯åŒºå—æ„å»ºè€…ï¼Œå®ƒåº”é€šè¿‡ mev-boost ç­‰åŸºç¡€è®¾æ–½æˆ–å…¶ä»–æè®®è€…-æ„å»ºè€…åˆ†ç¦»æœºåˆ¶ä¸åŒºå—æ„å»ºè€…åˆä½œ Paymaster åŒæ„ä»£æ›¿ sender æ”¯ä»˜äº¤æ˜“è´¹ç”¨çš„è¾…åŠ©åˆçº¦ Factory å¿…è¦æ—¶è´Ÿè´£éƒ¨ç½²æ–° sender åˆçº¦çš„è¾…åŠ©åˆçº¦ Aggregator ä¹Ÿç§°ä¸ºâ€œæˆæƒåˆçº¦â€ - ä¸€ä¸ªå…è®¸å¤šä¸ª UserOperation å…±äº«ä¸€æ¬¡éªŒè¯çš„åˆçº¦ã€‚æ­¤ç±»åˆçº¦çš„å®Œæ•´è®¾è®¡è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´ Canonical UserOperation mempool ä¸€ä¸ªå»ä¸­å¿ƒåŒ–ã€æ— è®¸å¯çš„ P2P ç½‘ç»œï¼Œbundler åœ¨å…¶ä¸­äº¤æ¢ç¬¦åˆåŒä¸€å¥—å…±äº«éªŒè¯è§„åˆ™çš„åˆæ³• UserOperationã€‚å…·ä½“è§„åˆ™çš„å®Œæ•´è§„èŒƒè¶…å‡ºæœ¬ææ¡ˆèŒƒå›´ Alternative UserOperation mempool ä»»ä½•å…¶ä»– P2P å†…å­˜æ± ï¼Œå…¶ä¸­ UserOperation çš„æœ‰æ•ˆæ€§ç”±ä¸åŒäºå…±äº«è§„åˆ™çš„è§„åˆ™å†³å®šï¼Œè¿™äº›è§„åˆ™ä»¥ä»»ä½•æ–¹å¼åº”ç”¨äºéªŒè¯ä»£ç  Deposit Sender æˆ– Paymaster åˆçº¦å‘ EntryPoint åˆçº¦è½¬å…¥çš„ä¸€ç¬”ä»¥å¤ªå¸ï¼ˆæˆ–ä»»ä½• L2 åŸç”Ÿè´§å¸ï¼‰ï¼Œç”¨äºæ”¯ä»˜æœªæ¥ UserOperation çš„ gas è´¹ç”¨ UserOperation ç»“æ„å®šä¹‰ å­—æ®µ ç±»å‹ æè¿° sender address å‘èµ· UserOperation çš„è´¦æˆ· nonce uint256 é˜²é‡æ”¾å‚æ•°ï¼ˆè¯¦è§â€œåŠæŠ½è±¡ Nonce æ”¯æŒâ€ï¼‰ factory address æ–°è´¦æˆ·çš„è´¦æˆ·å·¥å‚ OR 0x7702 æ ‡å¿—ç”¨äº EIP-7702 è´¦æˆ·ï¼Œå¦åˆ™ address(0) factoryData bytes å¦‚æœæä¾› factoryï¼Œåˆ™ä¸ºè´¦æˆ·å·¥å‚çš„æ•°æ® OR EIP-7702 åˆå§‹åŒ–æ•°æ®ï¼Œæˆ–ç©ºæ•°ç»„ callData bytes åœ¨ä¸»è¦æ‰§è¡Œè°ƒç”¨æœŸé—´ä¼ é€’ç»™ sender çš„æ•°æ® callGasLimit uint256 ä¸ºä¸»è¦æ‰§è¡Œè°ƒç”¨åˆ†é…çš„ gas é‡ verificationGasLimit uint256 ä¸ºéªŒè¯æ­¥éª¤åˆ†é…çš„ gas é‡ preVerificationGas uint256 é¢å¤– gas ç”¨äºæ”¯ä»˜ bundler maxFeePerGas uint256 æœ€å¤§ gas è´¹ï¼ˆç±»ä¼¼äº EIP-1559 max_fee_per_gasï¼‰ maxPriorityFeePerGas uint256 æœ€å¤§ä¼˜å…ˆè´¹ï¼ˆç±»ä¼¼äº EIP-1559 max_priority_fee_per_gasï¼‰ paymaster address paymaster åˆçº¦åœ°å€ï¼ˆæˆ–ç©ºï¼Œå¦‚æœ sender è‡ªå·±æ”¯ä»˜ gasï¼‰ paymasterVerificationGasLimit uint256 ä¸º paymaster éªŒè¯ä»£ç åˆ†é…çš„ gas é‡ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰ paymasterPostOpGasLimit uint256 ä¸º paymaster åæ“ä½œä»£ç åˆ†é…çš„ gas é‡ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰ paymasterData bytes paymaster çš„æ•°æ®ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰ signature bytes ä¼ å…¥ sender ä»¥éªŒè¯æˆæƒçš„æ•°æ® ä¸Šé“¾æ—¶éƒ¨åˆ†å­—æ®µä¼šè¢«æ‰“åŒ…ï¼Œè½¬å˜æˆ PackedUserOperation\nEntrypoint æ¥å£ PackedUserOperation ç»“æ„å®šä¹‰\nå­—æ®µ ç±»å‹ æè¿° sender address nonce uint256 initCode bytes factory åœ°å€å’Œ factoryData çš„è¿æ¥ï¼ˆæˆ–ç©ºï¼‰ï¼Œæˆ– EIP-7702 æ•°æ® callData bytes accountGasLimits bytes32 verificationGasLimitï¼ˆ16 å­—èŠ‚ï¼‰å’Œ callGasLimitï¼ˆ16 å­—èŠ‚ï¼‰çš„è¿æ¥ preVerificationGas uint256 gasFees bytes32 maxPriorityFeePerGasï¼ˆ16 å­—èŠ‚ï¼‰å’Œ maxFeePerGasï¼ˆ16 å­—èŠ‚ï¼‰çš„è¿æ¥ paymasterAndData bytes paymaster å­—æ®µçš„è¿æ¥ï¼ˆæˆ–ç©ºï¼‰ signature bytes EntryPoint åˆçº¦çš„æ ¸å¿ƒæ¥å£å¦‚ä¸‹ï¼š\nfunction handleOps(PackedUserOperation[] calldata ops, address payable beneficiary); beneficiary æ˜¯å°†æ”¶åˆ°æ‰¹æ¬¡æ‰§è¡ŒæœŸé—´æ”¶é›†çš„æ‰€æœ‰ gas è´¹çš„åœ°å€ã€‚\nSmart Contract Account æ¥å£ interface IAccount { function validateUserOp (PackedUserOperation calldata userOp, bytes32 userOpHash, uint256 missingAccountFunds) external returns (uint256 validationData); } userOpHash æ˜¯å¯¹ userOpï¼ˆé™¤ signatureï¼‰ã€entryPoint å’Œ chainId çš„å“ˆå¸Œ\néœ€å®ç°åŠŸèƒ½\nå¿…é¡»éªŒè¯è°ƒç”¨è€…æ˜¯å¯ä¿¡çš„ EntryPoint å¿…é¡»éªŒè¯ signature æ˜¯ userOpHash çš„æœ‰æ•ˆç­¾åï¼Œå¹¶åœ¨ç­¾åä¸åŒ¹é…æ—¶è¿”å› SIG_VALIDATION_FAILED (1) è€Œé revertã€‚ä»»ä½•å…¶ä»–é”™è¯¯å¿…é¡» revert åœ¨è¿”å› SIG_VALIDATION_FAILED (1) æ—¶ä¸åº”æå‰è¿”å›ã€‚ç›¸åï¼Œåº”å®Œæˆæ­£å¸¸æµç¨‹ä»¥å¯ç”¨éªŒè¯å‡½æ•°çš„ gas ä¼°ç®— å¿…é¡»æ”¯ä»˜ EntryPointï¼ˆè°ƒç”¨è€…ï¼‰è‡³å°‘ missingAccountFundsï¼ˆå¯èƒ½ä¸ºé›¶ï¼Œå¦‚æœå½“å‰ sender çš„å­˜æ¬¾è¶³å¤Ÿ/å­˜åœ¨ paymaster å«ä»˜ï¼‰ sender å¯ä»¥æ”¯ä»˜è¶…è¿‡æ­¤æœ€å°å€¼ä»¥è¦†ç›–æœªæ¥äº¤æ˜“ã€‚å®ƒä¹Ÿå¯ä»¥éšæ—¶è°ƒç”¨ withdrawTo æ¥å–å› è¿”å›å€¼å¿…é¡»æ‰“åŒ… aggregator/authorizerã€validUntil å’Œ validAfter æ—¶é—´æˆ³ aggregator/authorizer - 0 è¡¨ç¤ºæœ‰æ•ˆç­¾åï¼Œ1 è¡¨ç¤ºç­¾åå¤±è´¥ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¸º aggregator/authorizer åˆçº¦çš„åœ°å€ validUntil æ˜¯ 6 å­—èŠ‚æ—¶é—´æˆ³å€¼ï¼Œæˆ–é›¶è¡¨ç¤ºâ€œæ— é™â€ã€‚UserOperation ä»…åœ¨æ­¤æ—¶é—´ä¹‹å‰æœ‰æ•ˆ validAfter æ˜¯ 6 å­—èŠ‚æ—¶é—´æˆ³ã€‚UserOperation ä»…åœ¨æ­¤æ—¶é—´ä¹‹åæœ‰æ•ˆ ä¸ºäº†ä½¿ç”¨åŒºå—å·æŒ‡å®šæœ‰æ•ˆèŒƒå›´ï¼ŒvalidUntil å’Œ validAfter éƒ½éœ€è¦å°†å…¶æœ€é«˜ä½è®¾ç½®ä¸º 1 æ³¨æ„ï¼šæœ‰æ•ˆèŒƒå›´å¯ä»¥ç”¨ä¸¤ä¸ªåŒºå—æ—¶é—´æˆ³æˆ–ä¸¤ä¸ªåŒºå—å·è¡¨ç¤ºï¼Œä½†ä¸èƒ½åœ¨åŒä¸€ä¸ª UserOperation çš„æœ‰æ•ˆèŒƒå›´ä¸­æ··åˆä¸€ä¸ªæ—¶é—´æˆ³å’Œä¸€ä¸ªåŒºå—å·\nSmart Contract Account å¯ä»¥å®ç° IAccountExecute æ¥å£\ninterface IAccountExecute { function executeUserOp(PackedUserOperation calldata userOp, bytes32 userOpHash) external; } æ­¤æ–¹æ³•å°†ç”± EntryPoint ä½¿ç”¨å½“å‰ UserOperation è°ƒç”¨ï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨ sender ä¸Šæ‰§è¡Œ callData\nåŠæŠ½è±¡ Nonce æ”¯æŒ åœ¨ä»¥å¤ªåŠåè®®ä¸­ï¼Œé¡ºåºäº¤æ˜“ nonce å€¼ç”¨ä½œé˜²é‡æ”¾æ–¹æ³•ï¼Œä»¥åŠç¡®å®šäº¤æ˜“åŒ…å«åœ¨åŒºå—ä¸­çš„æœ‰æ•ˆé¡ºåº.\nå®ƒè¿˜è´¡çŒ®äºäº¤æ˜“å“ˆå¸Œçš„å”¯ä¸€æ€§ï¼Œå› ä¸ºåŒä¸€ sender çš„åŒä¸€ nonce äº¤æ˜“ä¸èƒ½ä¸¤æ¬¡åŒ…å«åœ¨é“¾ä¸­.\nç„¶è€Œï¼Œè¦æ±‚å•ä¸€é¡ºåº nonce å€¼é™åˆ¶äº† sender å®šä¹‰è‡ªå®šä¹‰äº¤æ˜“æ’åºå’Œé˜²é‡æ”¾é€»è¾‘çš„èƒ½åŠ›.\næˆ‘ä»¬å®ç°äº† nonce æœºåˆ¶ï¼Œä½¿ç”¨ UserOperation ä¸­çš„å•ä¸€ uint256 nonce å€¼ï¼Œä½†å°†å…¶è§†ä¸ºä¸¤ä¸ªå€¼ï¼š\n192 ä½â€œkeyâ€ 64 ä½â€œsequenceâ€ è¿™äº›å€¼åœ¨ EntryPoint åˆçº¦ä¸­é“¾ä¸Šè¡¨ç¤ºã€‚æˆ‘ä»¬åœ¨ EntryPoint æ¥å£ä¸­å®šä¹‰ä»¥ä¸‹æ–¹æ³•æ¥æš´éœ²è¿™äº›å€¼ï¼š\nfunction getNonce(address sender, uint192 key) external view returns (uint256 nonce); å¯¹äºæ¯ä¸ª keyï¼ŒEntryPoint ä¸ºæ¯ä¸ª UserOperation éªŒè¯ sequenceã€‚å¦‚æœ nonce éªŒè¯å¤±è´¥ï¼ŒUserOperation è¢«è§†ä¸ºæ— æ•ˆï¼Œæ‰¹æ¬¡ revertã€‚sequence å€¼ä¸º sender é¡ºåºä¸”å•è°ƒé€’å¢ã€‚æ–° key å¯ä»¥éšæ—¶å¼•å…¥ä»»æ„å€¼ï¼Œå…¶ sequence ä» 0 å¼€å§‹.\nè¿™ç§æ–¹æ³•åœ¨åè®®å±‚é¢ç»´æŠ¤äº†é“¾ä¸Š UserOperation å“ˆå¸Œå”¯ä¸€æ€§çš„ä¿è¯ï¼ŒåŒæ—¶å…è®¸è´¦æˆ·ä½¿ç”¨ 192 ä½â€œkeyâ€å­—æ®µå®ç°ä»»ä½•è‡ªå®šä¹‰é€»è¾‘ï¼ŒåŒæ—¶é€‚åˆ 32 å­—èŠ‚å­—.\nè¯»å–/éªŒè¯ nonce åœ¨å‡†å¤‡ UserOperation æ—¶ï¼Œbundler å¯ä»¥è°ƒç”¨æ­¤æ–¹æ³•æ¥ç¡®å®š nonce å­—æ®µçš„æœ‰æ•ˆå€¼.\nBundler å¯¹ UserOperation çš„éªŒè¯åº”ä»¥ getNonce å¼€å§‹ï¼Œä»¥ç¡®ä¿äº¤æ˜“å…·æœ‰æœ‰æ•ˆçš„ nonce å­—æ®µ.\nå¦‚æœ bundler æ„¿æ„æ¥å—åŒä¸€ sender çš„å¤šä¸ª UserOperation è¿›å…¥å…¶å†…å­˜æ± ï¼Œåˆ™ bundler åº”è·Ÿè¸ªå·²æ·»åŠ å†…å­˜æ± çš„ UserOperation çš„ key å’Œ sequence å¯¹.\nä½¿ç”¨ç¤ºä¾‹\nç»å…¸é¡ºåºé€’å¢ nonce ä¸ºäº†è¦æ±‚è´¦æˆ·å…·æœ‰ç»å…¸é¡ºåº nonceï¼ŒéªŒè¯å‡½æ•°å¿…é¡»æ‰§è¡Œï¼š\nrequire(userOp.nonce\u0026lt;type(uint64).max) æœ‰åºç®¡ç†äº‹ä»¶ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè´¦æˆ·å¯èƒ½éœ€è¦ä¸æ­£å¸¸æ“ä½œå¹¶è¡Œçš„â€œç®¡ç†â€æ“ä½œé€šé“.\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè´¦æˆ·å¯ä»¥åœ¨è°ƒç”¨è´¦æˆ·è‡ªèº«çš„æ–¹æ³•æ—¶ä½¿ç”¨ç‰¹å®š keyï¼š\nbytes4 sig = bytes4(userOp.callData[0 : 4]); uint key = userOp.nonce \u0026gt;\u0026gt; 64; if (sig == ADMIN_METHODSIG) { require(key == ADMIN_KEY, \u0026#34;wrong nonce-key for admin operation\u0026#34;); } else { require(key == 0, \u0026#34;wrong nonce-key for normal operation\u0026#34;); } EntryPoint åˆçº¦æ‰€éœ€åŠŸèƒ½ EntryPoint æ ¸å¿ƒæ–¹æ³•æ˜¯ handleOpsï¼Œå®ƒå¤„ç† UserOperation æ•°ç»„\nEntryPoint çš„ handleOps å‡½æ•°å¿…é¡»æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼ˆæˆ‘ä»¬é¦–å…ˆæè¿°æ›´ç®€å•çš„æ—  paymaster æƒ…å†µï¼‰ã€‚å®ƒå¿…é¡»è¿›è¡Œä¸¤ä¸ªå¾ªç¯ï¼ŒéªŒè¯å¾ªç¯å’Œæ‰§è¡Œå¾ªç¯ã€‚åœ¨éªŒè¯å¾ªç¯ä¸­ï¼ŒhandleOps è°ƒç”¨å¿…é¡»ä¸ºæ¯ä¸ª UserOperation æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š\nå¦‚æœ sender æ™ºèƒ½åˆçº¦è´¦æˆ·å°šä¸å­˜åœ¨ï¼Œä½¿ç”¨ UserOperation ä¸­æä¾›çš„ initcode åˆ›å»ºå®ƒ å¦‚æœ factory åœ°å€æ˜¯â€œ0x7702â€ï¼Œåˆ™ sender å¿…é¡»æ˜¯å…·æœ‰ EIP-7702 æˆæƒæŒ‡å®šçš„ EOAã€‚EntryPoint éªŒè¯æˆæƒåœ°å€ä¸ UserOperation signature ä¸­æŒ‡å®šçš„åœ°å€åŒ¹é…ï¼ˆè¯¦è§å¯¹ [EIP-7702] æˆæƒçš„æ”¯æŒï¼‰ å¦‚æœ sender ä¸å­˜åœ¨ï¼Œä¸” initcode ä¸ºç©ºï¼Œæˆ–æœªåœ¨â€œsenderâ€åœ°å€éƒ¨ç½²åˆçº¦ï¼Œåˆ™è°ƒç”¨å¿…é¡»å¤±è´¥ è­¦å‘Šï¼šå¦‚æœ sender å­˜åœ¨ï¼Œä¸” initcode ä¸ä¸ºç©ºï¼Œåˆ™å¿½ç•¥ initcodeã€‚\nåŸºäºéªŒè¯å’Œè°ƒç”¨ gas é™åˆ¶ä»¥åŠå½“å‰ gas å€¼è®¡ç®— sender éœ€è¦æ”¯ä»˜çš„æœ€å¤§å¯èƒ½è´¹ç”¨ è®¡ç®— sender å¿…é¡»æ·»åŠ åˆ° EntryPointâ€œdepositâ€çš„è´¹ç”¨ åœ¨ sender åˆçº¦ä¸Šè°ƒç”¨ validateUserOpï¼Œä¼ å…¥ UserOperationã€å…¶å“ˆå¸Œå’Œæ‰€éœ€è´¹ç”¨ã€‚å¦‚æœ sender è®¤ä¸º UserOperation æœ‰æ•ˆï¼Œæ™ºèƒ½åˆçº¦è´¦æˆ·å¿…é¡»éªŒè¯ UserOperation çš„ signature å‚æ•°å¹¶æ”¯ä»˜è´¹ç”¨ã€‚å¦‚æœä»»ä½• validateUserOp è°ƒç”¨å¤±è´¥ï¼ŒhandleOps å¿…é¡»è‡³å°‘è·³è¿‡è¯¥ UserOperation çš„æ‰§è¡Œï¼Œå¹¶å¯èƒ½å®Œå…¨ revert éªŒè¯ EntryPoint ä¸­è´¦æˆ·çš„ deposit è¶³å¤Ÿé«˜ä»¥è¦†ç›–æœ€å¤§å¯èƒ½æˆæœ¬ï¼ˆè¦†ç›–å·²å®Œæˆçš„éªŒè¯å’Œæœ€å¤§æ‰§è¡Œ gasï¼‰ æ‰§è¡Œæµç¨‹ ä½¿ç”¨ UserOperation çš„ calldata è°ƒç”¨è´¦æˆ·ã€‚è´¦æˆ·è‡ªè¡Œå†³å®šå¦‚ä½•è§£æ calldataï¼›é¢„æœŸå·¥ä½œæµæ˜¯è´¦æˆ·æœ‰ä¸€ä¸ª execute å‡½æ•°ï¼Œå°†å‰©ä½™ calldata è§£æä¸ºè´¦æˆ·åº”æ‰§è¡Œçš„ä¸€ä¸ªæˆ–å¤šä¸ªè°ƒç”¨åºåˆ— å¦‚æœ calldata ä»¥ IAccountExecute.executeUserOp çš„æ–¹æ³•ç­¾åå¼€å¤´ï¼Œåˆ™ EntryPoint å¿…é¡»é€šè¿‡ç¼–ç  executeUserOp(userOp,userOpHash) æ„å»º calldataï¼Œå¹¶ä½¿ç”¨è¯¥ calldata è°ƒç”¨è´¦æˆ· è°ƒç”¨åï¼Œç”¨é¢„æ”¶è´¹ç”¨çš„å¤šä½™ gas æˆæœ¬é€€è¿˜è´¦æˆ·çš„ deposit å¯¹ callGasLimit å’Œ paymasterPostOpGasLimit çš„å‰©ä½™æœªç”¨ gas æ–½åŠ  10%ï¼ˆUNUSED_GAS_PENALTY_PERCENTï¼‰çš„ç½šæ¬¾ã€‚ ä»…å½“å‰©ä½™æœªç”¨ gas é‡å¤§äºæˆ–ç­‰äº 40000ï¼ˆPENALTY_GAS_THRESHOLDï¼‰æ—¶æ‰æ–½åŠ æ­¤ç½šæ¬¾ æ­¤ç½šæ¬¾æ˜¯å¿…è¦çš„ï¼Œä»¥é˜²æ­¢ UserOperation é¢„ç•™æ‰¹æ¬¡ä¸­çš„å¤§é‡ gas ç©ºé—´ä½†æœªä½¿ç”¨ï¼Œä»è€Œé˜»æ­¢ bundler åŒ…å«å…¶ä»– UserOperation\næ‰§è¡Œæ‰€æœ‰è°ƒç”¨åï¼Œä»æ‰€æœ‰ UserOperation æ”¶é›†çš„è´¹ç”¨æ”¯ä»˜ç»™ bundler æä¾›çš„ beneficiary åœ°å€ åœ¨æ¥å— UserOperation ä¹‹å‰ï¼Œbundler åº”ä½¿ç”¨ RPC æ–¹æ³•æœ¬åœ°è°ƒç”¨ EntryPoint çš„ handleOps å‡½æ•°ï¼Œä»¥éªŒè¯ signature æ­£ç¡®ä¸” UserOperation å®é™…æ”¯ä»˜è´¹ç”¨ï¼›è¯¦è§ä¸‹æ–‡Simulation sectionéƒ¨åˆ†ã€‚èŠ‚ç‚¹/bundler å¿…é¡»æ‹’ç»éªŒè¯å¤±è´¥çš„ UserOperationï¼Œå³ä¸å°†å…¶æ·»åŠ åˆ°æœ¬åœ°å†…å­˜æ± ï¼Œä¹Ÿä¸ä¼ æ’­ç»™å…¶ä»–å¯¹ç­‰èŠ‚ç‚¹\nERC-4337 çš„ JSON-RPC API ä¸ºäº†æ”¯æŒå‘ bundler å‘é€ UserOperation å¯¹è±¡ï¼Œåè€…é€šè¿‡ P2P å†…å­˜æ± ä¼ æ’­å®ƒä»¬ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ç»„ JSON-RPC APIï¼ŒåŒ…æ‹¬ eth_sendUserOperation å’Œ eth_getUserOperationReceipt\næ–° JSON-RPC API çš„å®Œæ•´å®šä¹‰è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\nå¯¹ EIP-712 ç­¾åçš„æ”¯æŒ userOpHash è®¡ç®—ä¸º [EIP-712] ç±»å‹æ¶ˆæ¯å“ˆå¸Œï¼Œå…·æœ‰ä»¥ä¸‹å‚æ•°ï¼š\nbytes32 constant TYPE_HASH = keccak256( \u0026#34;EIP712Domain(string name,string version,uint256 chainId,address verifyingContract)\u0026#34; ); bytes32 constant PACKED_USEROP_TYPEHASH = keccak256( \u0026#34;PackedUserOperation(address sender,uint256 nonce,bytes initCode,bytes callData,bytes32 accountGasLimits,uint256 preVerificationGas,bytes32 gasFees,bytes paymasterAndData)\u0026#34; ); å¯¹ EIP-7702 æˆæƒçš„æ”¯æŒ åœ¨å¯ç”¨ EIP-7702 çš„ç½‘ç»œä¸Šï¼Œeth_sendUserOperation æ–¹æ³•æ¥å—é¢å¤–çš„ eip7702Auth å‚æ•°ã€‚å¦‚æœè®¾ç½®æ­¤å‚æ•°ï¼Œå®ƒå¿…é¡»æ˜¯æœ‰æ•ˆçš„ EIP-7702 æˆæƒå…ƒç»„ï¼Œå¹¶ç”± sender åœ°å€ç­¾åã€‚Bundler å¿…é¡»å°†æ‰¹æ¬¡ä¸­æ‰€æœ‰ UserOperation çš„æ‰€æœ‰æ‰€éœ€ eip7702Auth æ·»åŠ åˆ° authorizationListï¼Œå¹¶ä½¿ç”¨ SET_CODE_TX_TYPE äº¤æ˜“ç±»å‹æ‰§è¡Œæ‰¹æ¬¡ã€‚æ­¤å¤–ï¼ŒUserOperation å“ˆå¸Œè®¡ç®—æ›´æ–°ä»¥åŒ…å«æ‰€éœ€çš„ EIP-7702 å§”æ‰˜åœ°å€\nå¦‚æœ initCode å­—æ®µä»¥å³å¡«å…… 18 ä¸ªé›¶çš„ 0x7702 å¼€å¤´ï¼Œä¸”æ­¤è´¦æˆ·ä½¿ç”¨ EIP-7702 äº¤æ˜“éƒ¨ç½²ï¼Œåˆ™å“ˆå¸Œè®¡ç®—å¦‚ä¸‹ï¼š\nä¸ºå“ˆå¸Œè®¡ç®—ç›®çš„ï¼Œå°† UserOperation çš„ initCode å­—æ®µçš„å‰ 20 å­—èŠ‚è®¾ç½®ä¸ºè´¦æˆ·çš„ EIP-7702 å§”æ‰˜åœ°å€ï¼ˆä½¿ç”¨ EXTCODECOPY è·å–ï¼‰ initCode ä¸ç”¨äºè°ƒç”¨ factory åˆçº¦ å¦‚æœ initCode é•¿äº 20 å­—èŠ‚ï¼Œåˆ™å‰©ä½™ initCode ç”¨äºè°ƒç”¨è´¦æˆ·è‡ªèº«çš„åˆå§‹åŒ–å‡½æ•° æ³¨æ„ï¼šUserOperation å¯èƒ½ä»å¯åœ¨æ— æ­¤ç±» initCode çš„æƒ…å†µä¸‹æ‰§è¡Œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒEntryPoint ä¸å“ˆå¸Œå½“å‰ EIP-7702 å§”æ‰˜ï¼Œå¹¶å¯èƒ½é’ˆå¯¹ä¿®æ”¹åçš„è´¦æˆ·æ‰§è¡Œ\næ­¤å¤–ï¼ŒEIP-7702 å®šä¹‰æ‰§è¡Œæˆæƒçš„ gas æˆæœ¬ç­‰äº PER_EMPTY_ACCOUNT_COST = 25000ã€‚æ­¤ gas æ¶ˆè€—åœ¨ EntryPoint åˆçº¦é“¾ä¸Šä¸å¯è§‚å¯Ÿï¼Œå¿…é¡»åŒ…å«åœ¨ preVerificationGas å€¼ä¸­\næ‰©å±•ï¼špaymaster æˆ‘ä»¬æ‰©å±• EntryPoint é€»è¾‘ä»¥æ”¯æŒ paymaster èµåŠ©å…¶ä»–ç”¨æˆ·çš„äº¤æ˜“ã€‚æ­¤åŠŸèƒ½å¯ç”¨äºå…è®¸åº”ç”¨å¼€å‘è€…ä¸ºç”¨æˆ·è¡¥è´´è´¹ç”¨ã€å…è®¸ç”¨æˆ·ä½¿ç”¨ [ERC-20] ä»£å¸æ”¯ä»˜è´¹ç”¨ä»¥åŠè®¸å¤šå…¶ä»–ç”¨ä¾‹ã€‚å½“ UserOperation ä¸­çš„ paymasterAndData å­—æ®µéç©ºæ—¶ï¼ŒEntryPoint ä¸ºè¯¥ UserOperation å®ç°ä¸åŒçš„æµç¨‹ï¼š\nåœ¨éªŒè¯å¾ªç¯æœŸé—´ï¼Œé™¤äº†è°ƒç”¨ validateUserOpï¼ŒhandleOps æ‰§è¡Œè¿˜å¿…é¡»æ£€æŸ¥ paymaster åœ¨ EntryPoint æœ‰è¶³å¤Ÿçš„ ETH å­˜æ¬¾æ¥æ”¯ä»˜ UserOperationï¼Œç„¶åè°ƒç”¨ paymaster ä¸Šçš„ validatePaymasterUserOp ä»¥éªŒè¯ paymaster æ˜¯å¦æ„¿æ„æ”¯ä»˜ UserOperationã€‚è¯·æ³¨æ„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒvalidateUserOp ä»¥ missingAccountFunds ä¸º 0 è°ƒç”¨ï¼Œä»¥åæ˜ è´¦æˆ·çš„å­˜æ¬¾ä¸ç”¨äºæ­¤ UserOperation çš„æ”¯ä»˜\nå¦‚æœ paymaster çš„ validatePaymasterUserOp è¿”å›éç©º context å­—èŠ‚æ•°ç»„ï¼Œåˆ™ handleOps å¿…é¡»åœ¨ä¸»è¦æ‰§è¡Œè°ƒç”¨åè°ƒç”¨ paymaster ä¸Šçš„ postOpã€‚å¦åˆ™ï¼Œä¸è°ƒç”¨ postOp å‡½æ•°\næ¶æ„åˆ¶ä½œçš„ paymaster å¯èƒ½å¯¹ç³»ç»Ÿé€ æˆ DoS æ”»å‡»é£é™©ï¼Œbundler åº”é‡‡å–æ­¥éª¤ç¼“è§£ã€‚ä½œä¸ºç¼“è§£ï¼Œbundler åº”ä¸ºå…¶æœåŠ¡çš„åˆçº¦ä½¿ç”¨å£°èª‰ç³»ç»Ÿï¼Œä¸” paymaster å¿…é¡»é™åˆ¶å…¶å­˜å‚¨ä½¿ç”¨ï¼Œæˆ–åœ¨å£°èª‰ç³»ç»Ÿä¸­å­˜å…¥ stakeã€‚æ­¤ç±»å£°èª‰ç³»ç»Ÿçš„å®Œæ•´è§„èŒƒè¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\npaymasterAndData å­—æ®µç¼–ç å’Œ paymasterSignature paymasterAndData å­—æ®µæ˜¯ä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µçš„éæ ‡å‡†ç¼–ç ï¼š\npaymasterAddress - 20 å­—èŠ‚ â€” paymaster åˆçº¦åœ°å€\npaymasterVerificationGasLimit - 16 å­—èŠ‚ - éªŒè¯å‡½æ•°çš„ gas é™åˆ¶\npostOpGasLimit - 16 å­—èŠ‚ - postOp å‡½æ•°çš„ gas é™åˆ¶\npaymasterData - paymaster åˆçº¦å°†åœ¨ validatePaymasterUserOp è°ƒç”¨ä¸­æ¥æ”¶çš„æ•°æ® ä»¥ä¸‹æ•°æ®å¯ä»¥é€‰æ‹©é™„åŠ åˆ° paymasterAndData å­—æ®µï¼š\npaymasterSignature - paymaster åˆçº¦è¦æ£€æŸ¥çš„â€œsignatureâ€å€¼å­—èŠ‚æ•°ç»„ï¼›æ­¤å€¼å¯ä»¥æä¾›è€Œä¸å½±å“ UserOperation å“ˆå¸Œ\npaymasterSignatureLength - 2 å­—èŠ‚ - paymasterSignature å‚æ•°å­—èŠ‚æ•°ç»„çš„ç²¾ç¡®é•¿åº¦\nPAYMASTER_SIG_MAGIC (0x22e325a297439656) - é™„åŠ çš„é­”æœ¯å€¼ï¼Œè¡¨ç¤º UserOperation ä½¿ç”¨ paymasterSignature åŠŸèƒ½\næ³¨æ„ï¼Œç”±äº signature å’Œ paymasterSignature å­—æ®µéƒ½ä¸å½±å“ UserOperation å“ˆå¸Œï¼ŒSender å’Œ Paymaster çš„ç­¾åå¯ä»¥å¹¶è¡Œæ‰§è¡Œ\npaymaster æ¥å£å¦‚ä¸‹ï¼š\nfunction validatePaymasterUserOp (PackedUserOperation calldata userOp, bytes32 userOpHash, uint256 maxCost) external returns (bytes memory context, uint256 validationData); function postOp (PostOpMode mode, bytes calldata context, uint256 actualGasCost, uint256 actualUserOpFeePerGas) external; enum PostOpMode { opSucceeded, // UserOperation æˆåŠŸ opReverted // UserOperation revertã€‚paymaster ä»éœ€æ”¯ä»˜ gasã€‚ } EntryPoint å¿…é¡»å®ç°ä»¥ä¸‹ API ä»¥å…è®¸ paymaster ç­‰å®ä½“ stakeï¼Œä»è€Œåœ¨å­˜å‚¨è®¿é—®ä¸­å…·æœ‰æ›´å¤šçµæ´»æ€§ã€‚ // ä¸ºè°ƒç”¨å®ä½“æ·»åŠ  stake function addStake(uint32 _unstakeDelaySec) external payable; // è§£é” stakeï¼ˆå¿…é¡»ç­‰å¾… unstakeDelay æ‰èƒ½å–å›ï¼‰ function unlockStake() external; // å–å›è§£é”çš„ stake function withdrawStake(address payable withdrawAddress) external; paymaster è¿˜å¿…é¡»æœ‰ depositï¼ŒEntryPoint å°†ä»ä¸­æ”¶å– UserOperation æˆæœ¬ã€‚depositï¼ˆç”¨äºæ”¯ä»˜ gas è´¹ç”¨ï¼‰ä¸ stakeï¼ˆè¢«é”å®šï¼‰åˆ†å¼€ã€‚ EntryPoint å¿…é¡»å®ç°ä»¥ä¸‹æ¥å£ä»¥å…è®¸ Paymasterï¼ˆå¯é€‰åœ° Accountsï¼‰ç®¡ç†å…¶ depositï¼š\n// è¿”å›è´¦æˆ·çš„ deposit function balanceOf(address account) public view returns (uint256); // æ·»åŠ åˆ°ç»™å®šè´¦æˆ·çš„ deposit function depositTo(address account) public payable; // æ·»åŠ åˆ°è°ƒç”¨è´¦æˆ·çš„ deposit receive() external payable; // ä»å½“å‰è´¦æˆ·çš„ deposit å–å› function withdrawTo(address payable withdrawAddress, uint256 withdrawAmount) external; // è·å–å½“å‰æ‰§è¡Œçš„ UserOperation å“ˆå¸Œï¼Œæˆ–å¦‚æœä¸åœ¨æ‰§è¡ŒæœŸé—´è°ƒç”¨åˆ™ä¸º 0 function getCurrentUserOpHash() public view returns (bytes32); Bundler åœ¨æ”¶åˆ° UserOperation æ—¶çš„è¡Œä¸º ç±»ä¼¼äºä»¥å¤ªåŠäº¤æ˜“ï¼ŒUserOperation çš„é“¾å¤–æµç¨‹å¯ä»¥æè¿°å¦‚ä¸‹ï¼š\nå®¢æˆ·ç«¯é€šè¿‡ RPC è°ƒç”¨ eth_sendUserOperation å‘ bundler å‘é€ UserOperation åœ¨å°† UserOperation åŒ…å«åˆ°å†…å­˜æ± ä¹‹å‰ï¼Œbundler å¯¹æ–°æ”¶åˆ°çš„ UserOperation è¿è¡Œç¬¬ä¸€æ¬¡éªŒè¯ã€‚å¦‚æœ UserOperation éªŒè¯å¤±è´¥ï¼Œbundler ä¸¢å¼ƒå®ƒå¹¶åœ¨ eth_sendUserOperation å“åº”ä¸­è¿”å›é”™è¯¯ ç¨åï¼Œä¸€æ—¦æ„å»ºæ‰¹æ¬¡ï¼Œbundler ä»å†…å­˜æ± å–å‡º UserOperation å¹¶å¯¹æ¯ä¸ªè¿è¡Œå•ä¸ª UserOperation çš„ç¬¬äºŒæ¬¡éªŒè¯ã€‚å¦‚æœæˆåŠŸï¼Œåˆ™è®¡åˆ’åŒ…å«åœ¨ä¸‹ä¸€ä¸ªæ‰¹æ¬¡ä¸­ï¼Œå¦åˆ™ä¸¢å¼ƒ åœ¨é“¾ä¸Šæäº¤æ–°æ‰¹æ¬¡ä¹‹å‰ï¼Œbundler æ‰§è¡Œæ•´ä¸ª UserOperation æ‰¹æ¬¡çš„ç¬¬ä¸‰æ¬¡éªŒè¯ã€‚å¦‚æœä»»ä½• UserOperation éªŒè¯å¤±è´¥ï¼Œbundler ä¸¢å¼ƒå®ƒä»¬ã€‚bundler åº”è·Ÿè¸ªå¯¹ç­‰èŠ‚ç‚¹çš„å£°èª‰ã€‚æ­¤ç±»å£°èª‰ç³»ç»Ÿçš„å®Œæ•´è®¾è®¡è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´ å½“ bundler æ”¶åˆ° UserOperation æ—¶ï¼Œå®ƒå¿…é¡»é¦–å…ˆè¿è¡Œä¸€äº›åŸºæœ¬ sanity æ£€æŸ¥ï¼Œå³ï¼š\nsender æ˜¯ç°æœ‰åˆçº¦ï¼Œæˆ– initCode éç©ºï¼ˆä½†ä¸èƒ½ä¸¤è€…çš†æœ‰ï¼‰ å¦‚æœ initCode éç©ºï¼Œè§£æå…¶å‰ 20 å­—èŠ‚ä¸º factory åœ°å€æˆ– EIP-7702 æ ‡å¿— è®°å½• factory æ˜¯å¦ stakeï¼Œåœ¨åç»­æ¨¡æ‹Ÿè¡¨æ˜éœ€è¦æ—¶ã€‚å¦‚æœ factory è®¿é—®å…¨å±€çŠ¶æ€ï¼Œå®ƒå¿…é¡» stake verificationGasLimit å’Œ paymasterVerificationGasLimits ä½äº MAX_VERIFICATION_GAS (500000)ï¼Œä¸” preVerificationGas è¶³å¤Ÿé«˜ä»¥æ”¯ä»˜åºåˆ—åŒ– UserOperation çš„ calldata gas æˆæœ¬åŠ ä¸Š PRE_VERIFICATION_OVERHEAD_GAS (50000) paymasterAndData ä¸ºç©ºï¼Œæˆ–ä»¥ paymaster åœ°å€å¼€å¤´ï¼Œè¯¥åˆçº¦ (i) å½“å‰é“¾ä¸Šæœ‰éç©ºä»£ç ï¼Œ(ii) æœ‰è¶³å¤Ÿ deposit æ”¯ä»˜ UserOperationï¼Œ(iii) å½“å‰æœªè¢«ç¦ã€‚åœ¨æ¨¡æ‹ŸæœŸé—´ï¼Œè¿˜æ ¹æ®å…¶å­˜å‚¨ä½¿ç”¨æ£€æŸ¥ paymaster çš„ stake callGasLimit è‡³å°‘æ˜¯å…·æœ‰éé›¶å€¼çš„ CALL æˆæœ¬ maxFeePerGas å’Œ maxPriorityFeePerGas é«˜äº bundler æ„¿æ„æ¥å—çš„å¯é…ç½®æœ€å°å€¼ã€‚è‡³å°‘ï¼Œå®ƒä»¬è¶³å¤Ÿé«˜ä»¥åŒ…å«åœ¨å³å°†åˆ°æ¥çš„ block.basefee ä¸­ sender åœ¨å†…å­˜æ± ä¸­æ²¡æœ‰å¦ä¸€ä¸ª UserOperationï¼ˆæˆ–å®ƒæ›¿æ¢ç°æœ‰æ¡ç›®ï¼Œå…·æœ‰ç›¸åŒ sender å’Œ nonceï¼Œå…·æœ‰æ›´é«˜çš„ maxPriorityFeePerGas å’ŒåŒç­‰å¢åŠ çš„ maxFeePerGasï¼‰ã€‚å•ä¸ªæ‰¹æ¬¡ä¸­æ¯ä¸ª sender ä»…ä¸€ä¸ª UserOperationã€‚å¦‚æœ sender stakeï¼Œåˆ™å…é™¤æ­¤è§„åˆ™ï¼Œå¹¶å¯åœ¨å†…å­˜æ± å’Œæ‰¹æ¬¡ä¸­æœ‰å¤šä¸ª UserOperation UserOperation Simulation æˆ‘ä»¬å®šä¹‰ UserOperation æ¨¡æ‹Ÿï¼Œä½œä¸ºå¯¹ EntryPoint åˆçº¦çš„é“¾å¤–è§†å›¾è°ƒç”¨ï¼ˆæˆ–è·Ÿè¸ªè°ƒç”¨ï¼‰ä¸ UserOperationï¼Œä»¥åŠå¯¹éªŒè¯ä»£ç åº”ç”¨çš„å…±äº«è§„åˆ™é›†çš„å¼ºåˆ¶ï¼Œä½œä¸º UserOperation éªŒè¯çš„ä¸€éƒ¨åˆ†\nSimulation é€»è¾‘ä¾æ® è¦éªŒè¯æ­£å¸¸ä»¥å¤ªåŠäº¤æ˜“ txï¼Œbundler æ‰§è¡Œé™æ€æ£€æŸ¥ï¼Œå¦‚ï¼š\necrecover(tx.v, tx.r, tx.s) å¿…é¡»è¿”å›æœ‰æ•ˆ EOA tx.nonce å¿…é¡»æ˜¯æ¢å¤çš„ EOA çš„å½“å‰ nonce æ¢å¤çš„ EOA çš„ä½™é¢å¿…é¡»è¶³å¤Ÿæ”¯ä»˜äº¤æ˜“ tx.gasLimit å¿…é¡»è¶³å¤Ÿè¦†ç›–äº¤æ˜“çš„å†…åœ¨ gas æˆæœ¬ chainId å¿…é¡»åŒ¹é…å½“å‰é“¾ æ‰€æœ‰è¿™äº›æ£€æŸ¥ä¸ä¾èµ– EVM çŠ¶æ€ï¼Œä¸”ä¸èƒ½å—å…¶ä»–è´¦æˆ·äº¤æ˜“å½±å“\nç›¸åï¼ŒUserOperation éªŒè¯ä¾èµ– EVM çŠ¶æ€ï¼ˆå¯¹ validateUserOpã€validatePaymasterUserOp çš„è°ƒç”¨ï¼‰ï¼Œå¯è¢«å…¶ä»– UserOperationï¼ˆæˆ–æ­£å¸¸ä»¥å¤ªåŠäº¤æ˜“ï¼‰æ”¹å˜ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¼•å…¥æ¨¡æ‹Ÿä½œä¸ºæ£€æŸ¥å…¶æœ‰æ•ˆæ€§çš„æ–°æœºåˆ¶ã€‚ç›´è§‚åœ°è¯´ï¼Œæ¨¡æ‹Ÿçš„ç›®æ ‡æ˜¯ç¡®ä¿ UserOperation çš„é“¾ä¸ŠéªŒè¯ä»£ç è¢«æ²™ç®±åŒ–ï¼Œä¸åŒä¸€æ‰¹æ¬¡ä¸­çš„å…¶ä»– UserOperation éš”ç¦»\nSimulation è§„èŒƒï¼š è¦æ¨¡æ‹Ÿ UserOperation éªŒè¯ï¼Œbundler å¯¹ handleOps() æ–¹æ³•è¿›è¡Œè§†å›¾è°ƒç”¨ï¼Œä½¿ç”¨è¦æ£€æŸ¥çš„ UserOperation\næ¨¡æ‹Ÿåº”ä»…è¿è¡Œåœ¨ sender å’Œ paymaster çš„éªŒè¯éƒ¨åˆ†ï¼Œä¸”ä¸è¦æ±‚ UserOperation çš„æ‰§è¡Œã€‚Bundler å¯ä»¥å‘æ‰¹æ¬¡æ·»åŠ ç¬¬äºŒä¸ªâ€œæ€»æ˜¯å¤±è´¥â€çš„ UserOperationï¼Œä»¥ä¾¿æ¨¡æ‹Ÿåœ¨ç¬¬ä¸€ä¸ª UserOperation çš„éªŒè¯å®Œæˆåç»“æŸ\nå¦‚æœæ¨¡æ‹Ÿ revertï¼Œbundler å¿…é¡»ä¸¢å¼ƒ UserOperation\næ¨¡æ‹Ÿè°ƒç”¨æ‰§è¡Œå®Œæ•´éªŒè¯ï¼Œé€šè¿‡è°ƒç”¨ï¼š\nå¦‚æœå­˜åœ¨ initCodeï¼Œåˆ›å»º sender è´¦æˆ· account.validateUserOpã€‚ å¦‚æœæŒ‡å®š paymasterï¼špaymaster.validatePaymasterUserOp sender æˆ– paymaster å¯ä»¥è¿”å›æ—¶é—´èŒƒå›´ï¼ˆvalidAfter/validUntilï¼‰ã€‚UserOperation åœ¨å½“å‰æ—¶é—´å¿…é¡»æœ‰æ•ˆæ‰èƒ½è¢«è§†ä¸ºæœ‰æ•ˆï¼Œå®šä¹‰ä¸º validAfter\u0026lt;=block.timestamp\nBundler å¿…é¡»ä¸¢å¼ƒè¿‡æœŸå¤ªå¿«ä¸”å¯èƒ½åœ¨ä¸‹ä¸€ä¸ªåŒºå—å‰å¤±æ•ˆçš„ UserOperationã€‚è¦è§£ç è¿”å›çš„æ—¶é—´èŒƒå›´ï¼Œbundler å¿…é¡»ä½¿ç”¨è·Ÿè¸ªè¿è¡ŒéªŒè¯ï¼Œä»¥ä» validateUserOp å’Œ validatePaymasterUserOp æ–¹æ³•è§£ç è¿”å›å€¼\nä¸ºäº†é˜²æ­¢å¯¹ bundler çš„ DoS æ”»å‡»ï¼Œå®ƒä»¬å¿…é¡»ç¡®ä¿ä¸Šè¿°éªŒè¯æ–¹æ³•é€šè¿‡éªŒè¯è§„åˆ™ï¼Œè¿™äº›è§„åˆ™çº¦æŸå…¶ opcode å’Œå­˜å‚¨çš„ä½¿ç”¨ã€‚æ­¤ç±»å…±äº«è§„åˆ™é›†çš„å®Œæ•´è®¾è®¡è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\nEstimate preVerificationGas æœ¬æ–‡æ¡£ä¸æŒ‡å®šä¼°ç®—æ­¤å€¼çš„è§„èŒƒæ–¹å¼ï¼Œå› ä¸ºå®ƒå–å†³äºéæ°¸ä¹…ç½‘ç»œå±æ€§ï¼Œå¦‚æ“ä½œå’Œæ•°æ® gas å®šä»·ä»¥åŠé¢„æœŸæ‰¹æ¬¡å¤§å°ã€‚\nç„¶è€Œï¼Œè¦æ±‚ä¼°ç®—å€¼è¶³å¤Ÿè¦†ç›–ä»¥ä¸‹æˆæœ¬ï¼š\nåŸºæœ¬æ‰¹æ¬¡äº¤æ˜“æˆæœ¬ã€‚åœ¨ä»¥å¤ªåŠä¸Šï¼Œ21000 gas é™¤ä»¥ UserOperation æ•°é‡ã€‚ ä¸ UserOperation ç›¸å…³çš„ calldata gas æˆæœ¬ï¼Œå¦‚ EIP-2028 å®šä¹‰ã€‚ é™æ€ EntryPoint åˆçº¦ä»£ç æ‰§è¡Œã€‚ åŠ è½½ UserOperation çš„å›ºå®šå¤§å°å­—æ®µåˆ° EVM å†…å­˜çš„é™æ€å†…å­˜æˆæœ¬ ç”±äº paymaster validatePaymasterUserOp å‡½æ•°è¿”å›çš„ context å¯¼è‡´çš„å†…å­˜æˆæœ¬ï¼ˆåŒ…æ‹¬æ‰©å±•æˆæœ¬ï¼‰ï¼Œå¦‚æœç›¸å…³ã€‚ åˆ° innerHandleOp() å‡½æ•°çš„å¤–éƒ¨è°ƒç”¨ï¼Œè¿™æ˜¯ EntryPoint å®ç°çš„ä¸»è¦éƒ¨åˆ†ã€‚è¯·æ³¨æ„ï¼Œæ­¤å€¼éé™æ€ï¼Œå–å†³äº UserOperation åœ¨æ‰¹æ¬¡ä¸­çš„ä½ç½®ã€‚ [EIP-7702] æˆæƒæˆæœ¬ï¼Œå¦‚æœæœ‰ã€‚ EIP-7623 calldata åº•ä»·å¢åŠ ä¼°ç®—å¦‚ä¸‹ï¼š åº”ç”¨ tx.gasUsed çš„æ–°å…¬å¼ï¼Œç”¨æ­¤ UserOperation çš„ä¼°ç®—å€¼æ›¿æ¢ execution_gas_used å€¼ã€‚ ä¼°ç®—æ˜¯æ¨¡æ‹ŸæœŸé—´ä½¿ç”¨çš„æ‰€æœ‰éªŒè¯ gasï¼ˆè´¦æˆ·åˆ›å»ºã€éªŒè¯å’Œ paymaster éªŒè¯ï¼‰çš„æ€»å’ŒåŠ ä¸Šæ‰§è¡Œå’Œ postOp gas é™åˆ¶æ€»å’Œçš„ 10%ã€‚ Bundler å¿…é¡»è¦æ±‚ PreVerificationGas å€¼æœ‰ slack(æ¾å¼›å€¼)ï¼Œä»¥é€‚åº”æœªæ¥æ‰¹æ¬¡ä¸­çš„å†…å­˜æ‰©å±•æˆæœ¬ï¼Œä»¥åŠ UserOperation åœ¨å…¶ä¸­çš„é¢„æœŸä½ç½®\nPaymaster Paymaster åˆçº¦å…è®¸ gas æŠ½è±¡ï¼šæœ‰ä¸€ä¸ªåˆçº¦ï¼Œä¸æ˜¯äº¤æ˜“çš„ senderï¼Œæ¥æ”¯ä»˜äº¤æ˜“è´¹ç”¨\nPaymaster æ¶æ„å…è®¸å®ƒä»¬éµå¾ªâ€œé¢„æ”¶è´¹ï¼Œåé€€æ¬¾â€çš„æ¨¡å‹ã€‚ä¾‹å¦‚ï¼Œtoken-paymaster å¯ä»¥ç”¨äº¤æ˜“çš„æœ€å¤§å¯èƒ½ä»·æ ¼é¢„æ”¶è´¹ç”¨æˆ·ï¼Œå¹¶åœ¨ä¹‹åé€€æ¬¾å¤šä½™éƒ¨åˆ†\né¦–æ¬¡æ™ºèƒ½åˆçº¦è´¦æˆ·åˆ›å»º æ³¨æ„ï¼šå¯¹äºä½¿ç”¨ EIP-7702 çš„åˆçº¦ï¼Œæ­¤æµç¨‹åœ¨å¯¹ [EIP-7702] æˆæƒçš„æ”¯æŒä¸­æè¿°\næœ¬ææ¡ˆçš„é‡è¦è®¾è®¡ç›®æ ‡æ˜¯å¤åˆ¶ EOA çš„å…³é”®å±æ€§ï¼Œå³ç”¨æˆ·æ— éœ€æ‰§è¡Œè‡ªå®šä¹‰æ“ä½œæˆ–ä¾èµ–ç°æœ‰ç”¨æˆ·åˆ›å»ºå…¶æ™ºèƒ½åˆçº¦è´¦æˆ·ï¼›ä»–ä»¬å¯ä»¥æœ¬åœ°ç”Ÿæˆåœ°å€å¹¶ç«‹å³å¼€å§‹æ¥å—èµ„é‡‘\næ™ºèƒ½åˆçº¦è´¦æˆ·åˆ›å»ºæœ¬èº«ç”±â€œfactoryâ€åˆçº¦å®Œæˆï¼Œå¸¦æœ‰ä¸€äº›è´¦æˆ·ç‰¹å®šæ•°æ®ã€‚Factory é¢„æœŸä½¿ç”¨ CREATE2 0xF5ï¼ˆè€Œé CREATE 0xF0ï¼‰åˆ›å»ºè´¦æˆ·ï¼Œä»¥ä¾¿è´¦æˆ·åˆ›å»ºé¡ºåºä¸å¹²æ‰°ç”Ÿæˆåœ°å€ã€‚initCode å­—æ®µï¼ˆå¦‚æœéé›¶é•¿åº¦ï¼‰è§£æä¸º 20 å­—èŠ‚ factory åœ°å€ï¼Œåè·Ÿä¼ é€’ç»™æ­¤åœ°å€çš„ calldataã€‚æ­¤æ–¹æ³•è°ƒç”¨é¢„æœŸåˆ›å»ºè´¦æˆ·å¹¶è¿”å›å…¶åœ°å€ã€‚å¦‚æœ factory ä½¿ç”¨ CREATE2 0xF5 æˆ–å…¶ä»–ç¡®å®šæ€§æ–¹æ³•åˆ›å»ºè´¦æˆ·ï¼Œé¢„æœŸå³ä½¿å·²åˆ›å»ºä¹Ÿè¿”å›è´¦æˆ·åœ°å€ã€‚è¿™ä½¿å¾— bundler æ›´å®¹æ˜“æŸ¥è¯¢åœ°å€ï¼Œè€Œæ— éœ€çŸ¥é“è´¦æˆ·æ˜¯å¦å·²éƒ¨ç½²ï¼Œé€šè¿‡æ¨¡æ‹Ÿè°ƒç”¨ entryPoint.getSenderAddress()ï¼Œå®ƒåœ¨åº•å±‚è°ƒç”¨ factoryã€‚å½“æŒ‡å®š initCode æ—¶ï¼Œå¦‚æœ sender åœ°å€æŒ‡å‘ç°æœ‰åˆçº¦æˆ–è°ƒç”¨ initCode å sender åœ°å€ä»ä¸å­˜åœ¨ï¼Œåˆ™æ“ä½œä¸­æ­¢ã€‚initCode ä¸å¾—ç›´æ¥ä» EntryPoint è°ƒç”¨ï¼Œè€Œä»å¦ä¸€ä¸ªåœ°å€è°ƒç”¨ã€‚æ­¤ factory æ–¹æ³•åˆ›å»ºçš„åˆçº¦å¿…é¡»æ¥å— validateUserOp è°ƒç”¨ä»¥éªŒè¯ UserOperation çš„ç­¾åã€‚å¦‚æœ factory è®¿é—®å…¨å±€å­˜å‚¨ï¼Œåˆ™å¿…é¡» stakeã€‚æ³¨æ„ï¼šä¸ºäº†è®©é’±åŒ…åº”ç”¨åœ¨åˆ›å»ºå‰ç¡®å®šè´¦æˆ·çš„â€œåäº‹å®â€åœ°å€ï¼Œå®ƒåº”é™æ€è°ƒç”¨ entryPoint.getSenderAddress()\nå®‰å…¨è€ƒé‡ Factory åˆçº¦ æ‰€æœ‰ factory åˆçº¦å¿…é¡»æ£€æŸ¥å¯¹ createAccount() å‡½æ•°çš„æ‰€æœ‰è°ƒç”¨æºäº entryPoint.senderCreator() åœ°å€\nPaymaster åˆçº¦ æ‰€æœ‰ paymaster åˆçº¦å¿…é¡»æ£€æŸ¥å¯¹ validatePaymasterUserOp() å’Œ postOp() å‡½æ•°çš„æ‰€æœ‰è°ƒç”¨æºäº EntryPoint\nAggregator åˆçº¦ æ‰€æœ‰ aggregator åˆçº¦å¿…é¡»æ£€æŸ¥å¯¹ validateSignatures() å‡½æ•°çš„æ‰€æœ‰è°ƒç”¨æºäº EntryPoint\nEIP-7702 å§”æ‰˜æ™ºèƒ½åˆçº¦è´¦æˆ· æ‰€æœ‰ EIP-7702 å§”æ‰˜æ™ºèƒ½åˆçº¦è´¦æˆ·å®ç°å¿…é¡»æ£€æŸ¥å¯¹åˆå§‹åŒ–å‡½æ•°çš„æ‰€æœ‰è°ƒç”¨æºäº entryPoint.senderCreator() åœ°å€\nEntryPoint åˆçº¦æ— æ³•çŸ¥é“ EIP-7702 è´¦æˆ·æ˜¯å¦å·²åˆå§‹åŒ–ï¼Œå› æ­¤ EIP-7702 è´¦æˆ·åˆå§‹åŒ–ä»£ç å¯ä»¥é€šè¿‡ EntryPoint å¤šæ¬¡è°ƒç”¨ã€‚è´¦æˆ·ä»£ç åº”ä»…å…è®¸è°ƒç”¨ä¸€æ¬¡ï¼Œä¸”é’±åŒ…åº”ç”¨ä¸åº”é‡å¤ä¼ é€’ initCode\n","permalink":"http://localhost:1313/web3/eip/eip-4337/","summary":"\u003ch1 id=\"æ‘˜è¦\"\u003eæ‘˜è¦\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eå¼•å…¥ UserOperationï¼šä¸€ç§é«˜å±‚â€œä¼ªäº¤æ˜“å¯¹è±¡â€ï¼Œæ›¿ä»£ç›´æ¥åœ¨å…±è¯†å±‚æäº¤äº¤æ˜“\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç”¨æˆ·å°† UserOperation å‘é€åˆ°å•ç‹¬çš„ mempool\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eBundler å°†å¤šä¸ª UserOperation æ‰“åŒ…ï¼Œé€šè¿‡ handleOps è°ƒç”¨ EntryPoint åˆçº¦ï¼Œå†æ‰“åŒ…è¿›åŒºå—\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç›®æ ‡æ˜¯åœ¨ä¸ä¿®æ”¹ä»¥å¤ªåŠåº•å±‚åè®®çš„æƒ…å†µä¸‹ï¼Œå®ç°è´¦æˆ·æŠ½è±¡\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"åŠ¨æœº\"\u003eåŠ¨æœº\u003c/h1\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eå®ç°è´¦æˆ·æŠ½è±¡\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå…è®¸ä½¿ç”¨æ™ºèƒ½åˆçº¦è´¦æˆ·ä½œä¸ºä¸»è´¦æˆ·ï¼Œæ”¯æŒä»»æ„éªŒè¯é€»è¾‘ã€‚\u003c/li\u003e\n\u003cli\u003eç”¨æˆ·æ— éœ€æ‹¥æœ‰å¤–éƒ¨è´¦æˆ·ï¼ˆEOAï¼‰ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eå»ä¸­å¿ƒåŒ–ä¸å¼€æ”¾å‚ä¸\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä»»ä½• bundler éƒ½å¯å‚ä¸äº¤æ˜“æ‰“åŒ…ã€‚\u003c/li\u003e\n\u003cli\u003eä¾èµ–å…¬å…± mempoolï¼Œæ— éœ€ç”¨æˆ·ç›´æ¥çŸ¥æ™“ bundler åœ°å€ã€‚\u003c/li\u003e\n\u003cli\u003eä¸å¢åŠ ä¿¡ä»»å‡è®¾ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eæ— éœ€å…±è¯†å±‚ä¿®æ”¹\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eé¿å…åè®®å±‚æ”¹åŠ¨ï¼Œæé«˜å¿«é€Ÿéƒ¨ç½²çš„å¯èƒ½æ€§ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eæ”¯æŒæ›´å¤šåº”ç”¨åœºæ™¯\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eéšç§ä¿æŠ¤å‹åº”ç”¨\u003c/li\u003e\n\u003cli\u003eåŸå­å¤šæ“ä½œ\u003c/li\u003e\n\u003cli\u003eä½¿ç”¨ ERC-20 ä»£å¸æ”¯ä»˜æ‰‹ç»­è´¹æˆ–å¼€å‘è€…ä»£ä»˜\u003c/li\u003e\n\u003cli\u003eçµæ´»çš„éªŒè¯é€»è¾‘ï¼ˆä¸åŒç­¾åæ–¹æ¡ˆã€å¤šç­¾ã€æ¢å¤æ–¹æ¡ˆï¼‰\u003c/li\u003e\n\u003cli\u003eçµæ´»çš„æ‰‹ç»­è´¹æ”¯ä»˜ï¼ˆç¬¬ä¸‰æ–¹æ”¯ä»˜ã€è·¨é“¾æ”¯ä»˜ï¼‰\u003c/li\u003e\n\u003cli\u003eæ‰¹é‡æ“ä½œä¸æ‰“åŒ…æ‰§è¡Œ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cstrong\u003eæ€»ç»“\u003c/strong\u003eï¼šè¯¥ææ¡ˆé€šè¿‡ UserOperationã€Bundler å’Œ EntryPoint åˆçº¦å®ç°æ™ºèƒ½åˆçº¦è´¦æˆ·çš„å®Œå…¨æŠ½è±¡åŒ–ï¼Œæ”¯æŒå¤šç­¾ã€ä»£ä»˜å’Œæ‰¹é‡æ“ä½œï¼ŒåŒæ—¶æ— éœ€ä¿®æ”¹ä»¥å¤ªåŠå…±è¯†å±‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"è§„èŒƒ\"\u003eè§„èŒƒ\u003c/h2\u003e\n\u003ch3 id=\"æœ¯è¯­å®šä¹‰\"\u003eæœ¯è¯­å®šä¹‰\u003c/h3\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæœ¯è¯­\u003c/th\u003e\n          \u003cth\u003eå®šä¹‰\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eUserOperation\u003c/td\u003e\n          \u003ctd\u003eä¸€ç§æè¿°â€œä»£è¡¨ç”¨æˆ·å‘èµ·ä¸€ç¬”äº¤æ˜“â€çš„æ•°æ®ç»“æ„ã€‚ä¸ºé¿å…ä¸åŸç”Ÿäº¤æ˜“æ··æ·†ï¼Œç‰¹æ„ä¸å«â€œtransactionâ€ã€‚åƒäº¤æ˜“ä¸€æ ·ï¼Œå®ƒåŒ…å« toã€calldataã€maxFeePerGasã€maxPriorityFeePerGasã€nonceã€signatureã€‚ä¸åƒäº¤æ˜“ï¼Œå®ƒåŒ…å«ä»¥ä¸‹æ‰€è¿°çš„å‡ ä¸ªå…¶ä»–å­—æ®µã€‚ç‰¹åˆ«æ³¨æ„ï¼Œsignature å­—æ®µçš„ä½¿ç”¨ä¸ç”±åè®®å®šä¹‰ï¼Œè€Œæ˜¯ç”±æ™ºèƒ½åˆçº¦è´¦æˆ·å®ç°å®šä¹‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eSender\u003c/td\u003e\n          \u003ctd\u003eå‘èµ· UserOperation çš„æ™ºèƒ½åˆçº¦è´¦æˆ·\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eEntryPoint\u003c/td\u003e\n          \u003ctd\u003eç”¨äºæ‰§è¡Œ UserOperation æ‰¹æ¬¡çš„å•ä¾‹åˆçº¦ã€‚Bundler åº”ç™½åå•æ”¯æŒçš„ EntryPoint\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eBundler\u003c/td\u003e\n          \u003ctd\u003eä¸€ä¸ªèŠ‚ç‚¹ï¼ˆåŒºå—æ„å»ºè€…ï¼‰ï¼Œå®ƒèƒ½å¤„ç† UserOperationã€åˆ›å»ºæœ‰æ•ˆçš„ entryPoint.handleOps() äº¤æ˜“ï¼Œå¹¶åœ¨äº¤æ˜“ä»æœ‰æ•ˆæ—¶å°†å…¶æ·»åŠ åˆ°åŒºå—ä¸­ã€‚è¿™å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°ï¼šBundler å¯ä»¥è‡ªå·±å……å½“åŒºå—æ„å»ºè€…ã€‚å¦‚æœ bundler ä¸æ˜¯åŒºå—æ„å»ºè€…ï¼Œå®ƒåº”é€šè¿‡ mev-boost ç­‰åŸºç¡€è®¾æ–½æˆ–å…¶ä»–æè®®è€…-æ„å»ºè€…åˆ†ç¦»æœºåˆ¶ä¸åŒºå—æ„å»ºè€…åˆä½œ\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ePaymaster\u003c/td\u003e\n          \u003ctd\u003eåŒæ„ä»£æ›¿ sender æ”¯ä»˜äº¤æ˜“è´¹ç”¨çš„è¾…åŠ©åˆçº¦\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eFactory\u003c/td\u003e\n          \u003ctd\u003eå¿…è¦æ—¶è´Ÿè´£éƒ¨ç½²æ–° sender åˆçº¦çš„è¾…åŠ©åˆçº¦\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eAggregator\u003c/td\u003e\n          \u003ctd\u003eä¹Ÿç§°ä¸ºâ€œæˆæƒåˆçº¦â€ - ä¸€ä¸ªå…è®¸å¤šä¸ª UserOperation å…±äº«ä¸€æ¬¡éªŒè¯çš„åˆçº¦ã€‚æ­¤ç±»åˆçº¦çš„å®Œæ•´è®¾è®¡è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eCanonical UserOperation mempool\u003c/td\u003e\n          \u003ctd\u003eä¸€ä¸ªå»ä¸­å¿ƒåŒ–ã€æ— è®¸å¯çš„ P2P ç½‘ç»œï¼Œbundler åœ¨å…¶ä¸­äº¤æ¢ç¬¦åˆåŒä¸€å¥—å…±äº«éªŒè¯è§„åˆ™çš„åˆæ³• UserOperationã€‚å…·ä½“è§„åˆ™çš„å®Œæ•´è§„èŒƒè¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eAlternative UserOperation mempool\u003c/td\u003e\n          \u003ctd\u003eä»»ä½•å…¶ä»– P2P å†…å­˜æ± ï¼Œå…¶ä¸­ UserOperation çš„æœ‰æ•ˆæ€§ç”±ä¸åŒäºå…±äº«è§„åˆ™çš„è§„åˆ™å†³å®šï¼Œè¿™äº›è§„åˆ™ä»¥ä»»ä½•æ–¹å¼åº”ç”¨äºéªŒè¯ä»£ç \u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eDeposit\u003c/td\u003e\n          \u003ctd\u003eSender æˆ– Paymaster åˆçº¦å‘ EntryPoint åˆçº¦è½¬å…¥çš„ä¸€ç¬”ä»¥å¤ªå¸ï¼ˆæˆ–ä»»ä½• L2 åŸç”Ÿè´§å¸ï¼‰ï¼Œç”¨äºæ”¯ä»˜æœªæ¥ UserOperation çš„ gas è´¹ç”¨\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch3 id=\"useroperation-ç»“æ„å®šä¹‰\"\u003e\u003ccode\u003eUserOperation\u003c/code\u003e ç»“æ„å®šä¹‰\u003c/h3\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eå­—æ®µ\u003c/th\u003e\n          \u003cth\u003eç±»å‹\u003c/th\u003e\n          \u003cth\u003eæè¿°\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003esender\u003c/td\u003e\n          \u003ctd\u003eaddress\u003c/td\u003e\n          \u003ctd\u003eå‘èµ· UserOperation çš„è´¦æˆ·\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003enonce\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eé˜²é‡æ”¾å‚æ•°ï¼ˆè¯¦è§â€œåŠæŠ½è±¡ Nonce æ”¯æŒâ€ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003efactory\u003c/td\u003e\n          \u003ctd\u003eaddress\u003c/td\u003e\n          \u003ctd\u003eæ–°è´¦æˆ·çš„è´¦æˆ·å·¥å‚ OR 0x7702 æ ‡å¿—ç”¨äº EIP-7702 è´¦æˆ·ï¼Œå¦åˆ™ address(0)\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003efactoryData\u003c/td\u003e\n          \u003ctd\u003ebytes\u003c/td\u003e\n          \u003ctd\u003eå¦‚æœæä¾› factoryï¼Œåˆ™ä¸ºè´¦æˆ·å·¥å‚çš„æ•°æ® OR EIP-7702 åˆå§‹åŒ–æ•°æ®ï¼Œæˆ–ç©ºæ•°ç»„\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ecallData\u003c/td\u003e\n          \u003ctd\u003ebytes\u003c/td\u003e\n          \u003ctd\u003eåœ¨ä¸»è¦æ‰§è¡Œè°ƒç”¨æœŸé—´ä¼ é€’ç»™ sender çš„æ•°æ®\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ecallGasLimit\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eä¸ºä¸»è¦æ‰§è¡Œè°ƒç”¨åˆ†é…çš„ gas é‡\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003everificationGasLimit\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eä¸ºéªŒè¯æ­¥éª¤åˆ†é…çš„ gas é‡\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epreVerificationGas\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eé¢å¤– gas ç”¨äºæ”¯ä»˜ bundler\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003emaxFeePerGas\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eæœ€å¤§ gas è´¹ï¼ˆç±»ä¼¼äº EIP-1559 max_fee_per_gasï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003emaxPriorityFeePerGas\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eæœ€å¤§ä¼˜å…ˆè´¹ï¼ˆç±»ä¼¼äº EIP-1559 max_priority_fee_per_gasï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epaymaster\u003c/td\u003e\n          \u003ctd\u003eaddress\u003c/td\u003e\n          \u003ctd\u003epaymaster åˆçº¦åœ°å€ï¼ˆæˆ–ç©ºï¼Œå¦‚æœ sender è‡ªå·±æ”¯ä»˜ gasï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epaymasterVerificationGasLimit\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eä¸º paymaster éªŒè¯ä»£ç åˆ†é…çš„ gas é‡ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epaymasterPostOpGasLimit\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eä¸º paymaster åæ“ä½œä»£ç åˆ†é…çš„ gas é‡ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epaymasterData\u003c/td\u003e\n          \u003ctd\u003ebytes\u003c/td\u003e\n          \u003ctd\u003epaymaster çš„æ•°æ®ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003esignature\u003c/td\u003e\n          \u003ctd\u003ebytes\u003c/td\u003e\n          \u003ctd\u003eä¼ å…¥ sender ä»¥éªŒè¯æˆæƒçš„æ•°æ®\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cblockquote\u003e\n\u003cp\u003eä¸Šé“¾æ—¶éƒ¨åˆ†å­—æ®µä¼šè¢«æ‰“åŒ…ï¼Œè½¬å˜æˆ \u003ccode\u003ePackedUserOperation\u003c/code\u003e\u003c/p\u003e","title":"EIP-4337"},{"content":" Promise ä¸ Event Loopï¼šåˆ†æ­¥æ·±å…¥æŒ‡å— ç®€ä»‹ JavaScript æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œå´è¦å¤„ç†å¤§é‡å¼‚æ­¥æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€å®šæ—¶å™¨ã€ç”¨æˆ·äº¤äº’ç­‰ï¼‰ã€‚ä¸ºäº†æ—¢ä¸é˜»å¡ä¸»çº¿ç¨‹ã€åˆèƒ½ä¿è¯å›è°ƒæŒ‰é¢„æœŸé¡ºåºæ‰§è¡Œï¼Œè¯­è¨€å’Œè¿è¡Œæ—¶å…±åŒæä¾›äº†ä¸¤å¥—æ ¸å¿ƒæœºåˆ¶ï¼š\nPromise â€”â€” ä»£è¡¨ä¸€ä¸ªâ€œæœªæ¥ä¼šç»“æŸâ€çš„å¼‚æ­¥æ“ä½œï¼Œæä¾›äº†çŠ¶æ€ç®¡ç†ã€é“¾å¼è°ƒç”¨ã€é”™è¯¯ä¼ æ’­ç­‰è¯­ä¹‰ï¼Œæ˜¯ç°ä»£å¼‚æ­¥ç¼–ç¨‹çš„åŸºçŸ³ Event Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ â€”â€” JavaScript è¿è¡Œæ—¶çœŸæ­£çš„è°ƒåº¦ä¸­å¿ƒï¼Œå®ƒå†³å®šäº†åŒæ­¥ä»£ç ã€Promise å›è°ƒï¼ˆå¾®ä»»åŠ¡ï¼‰ã€setTimeout/IO ç­‰ï¼ˆå®ä»»åŠ¡ï¼‰åˆ°åº•åœ¨ä»€ä¹ˆæ—¶æœºè¢«æ¨å…¥è°ƒç”¨æ ˆæ‰§è¡Œ è¿™ä¸¤è€…ç´§å¯†åä½œï¼š\nPromise çš„ .then / .catch / await åç»­å…¨éƒ¨å±äºå¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰ å¾®ä»»åŠ¡ä¸å®ä»»åŠ¡ï¼ˆmacrotaskï¼‰åœ¨ Event Loop ä¸­æœ‰ä¸¥æ ¼çš„ä¼˜å…ˆçº§ï¼šæ¯æ‰§è¡Œå®Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œå¿…é¡»å…ˆæ¸…ç©ºå…¨éƒ¨å¾®ä»»åŠ¡ï¼Œæ‰ä¼šè¿›è¡Œæ¸²æŸ“å¹¶è¿›å…¥ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ æŒæ¡ Promise çš„çŠ¶æ€æœºç»†èŠ‚ + Event Loop çš„å¾®/å®ä»»åŠ¡æ‰§è¡Œé¡ºåºï¼Œå°±ç­‰äºæ‹¿åˆ°äº† JavaScript å¼‚æ­¥ä¸–ç•Œçš„å®Œæ•´â€œæ—¶åºåœ°å›¾â€\næ‰§è¡Œé¡ºåºè¡¨\næ‰§è¡Œé¡ºåº ç±»å‹ å…¸å‹ä»£è¡¨ è§¦å‘æ—¶æœº åŒæ­¥ä»£ç (åŒ…å«Promise executor) console.logã€å˜é‡èµ‹å€¼ã€å‡½æ•°è°ƒç”¨ ç«‹å³æ‰§è¡Œ å¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰ .then/.catchã€await åç»­ã€queueMicrotaskã€MutationObserver å½“å‰å®ä»»åŠ¡ç»“æŸåã€æ¸²æŸ“å‰å…¨éƒ¨æ¸…ç©º æ¸²æŸ“ï¼ˆæµè§ˆå™¨ï¼‰ é¡µé¢é‡ç»˜ã€å¸ƒå±€ å¾®ä»»åŠ¡æ¸…ç©ºåï¼ˆå¯èƒ½è·³è¿‡ï¼‰ å®ä»»åŠ¡ï¼ˆmacrotaskï¼‰ setTimeoutã€setIntervalã€I/Oã€UI äº‹ä»¶ æ¯è½® Event Loop æ‰§è¡Œä¸€ä¸ª Promise æ ¸å¿ƒæœºåˆ¶\nPromise çš„ä¸‰ä¸ªçŠ¶æ€\npending â†’ fulfilled (æˆåŠŸï¼Œè¿”å› value) â†’ rejected (å¤±è´¥ï¼Œè¿”å› reason) æ„é€ å™¨ executor æ˜¯åŒæ­¥æ‰§è¡Œçš„\nnew Promise((resolve, reject) =\u0026gt; { console.log(\u0026#39;executor start\u0026#39;); // ç«‹åˆ»æ‰“å° setTimeout(() =\u0026gt; resolve(100), 3000); console.log(\u0026#39;executor end\u0026#39;); // ç«‹åˆ»æ‰“å° }); ä¸ºä»€ä¹ˆå¿…é¡»åŒæ­¥ï¼Ÿ\nä¸ºäº†è®©ä½ å¯ä»¥åœ¨åˆ›å»º Promise æ—¶ç«‹åˆ»åšåˆå§‹åŒ–ã€å‚æ•°æ ¡éªŒã€æŠ›é”™ç­‰æ“ä½œ\nå†…éƒ¨æ§½ä½\næ§½ä½å å†…å®¹è¯´æ˜ [[PromiseState]] pending / fulfilled / rejected [[PromiseResult]] æˆåŠŸå€¼æˆ–å¤±è´¥åŸå›  [[PromiseFulfillReactions]] å­˜æ”¾æ‰€æœ‰ onFulfilled å›è°ƒ [[PromiseRejectReactions]] å­˜æ”¾æ‰€æœ‰ onRejected å›è°ƒ resolve/reject ç¬¬ä¸€æ¬¡è°ƒç”¨æˆåŠŸåï¼Œåç»­å…¨éƒ¨å¿½ç•¥\nexecutor æŠ›é”™ = è‡ªåŠ¨ reject\nnew Promise(() =\u0026gt; { throw new Error(\u0026#39;boom\u0026#39;); }) .catch(e =\u0026gt; console.log(e.message)); // boom thenable ä¸æ‰å¹³åŒ–\nPromise.resolve({ then(onFulfilled) { setTimeout(() =\u0026gt; onFulfilled(42), 1000); } }).then(console.log); // 1ç§’åæ‰“å° 42 è§„èŒƒä¼šï¼š\nå–å‡º x.then è°ƒç”¨ then.call(x, resolvePromise, rejectPromise) resolvePromise/rejectPromise æ˜¯åŒ…è£…è¿‡çš„â€œåªå…è®¸è°ƒç”¨ä¸€æ¬¡â€çš„å‡½æ•° è¿™å°±æ˜¯é“¾å¼è°ƒç”¨ä¸ä¼šæ— é™åµŒå¥—çš„æ ¹æœ¬åŸå› \nthen / catch / finally ä¸é“¾å¼è°ƒç”¨\nPromise.resolve(1) .then(x =\u0026gt; x + 1) // è¿”å›æ™®é€šå€¼ â†’ æ–° Promise fulfilled(2) .then(x =\u0026gt; new Promise(r =\u0026gt; setTimeout(() =\u0026gt; r(x + 1), 100))) // è¿”å› Promise â†’ ç­‰å¾…å¹¶é‡‡ç”¨ .then(console.log) // æ‰“å°æœ€ç»ˆç»“æœ .catch(console.error) .finally(() =\u0026gt; console.log(\u0026#39;done\u0026#39;)); .catch = .then(undefined, onRejected)\n.finally ä¸ä¼ å€¼ï¼Œå¼‚å¸¸ä¼šç»§ç»­å‘ä¸‹æŠ›\nasync / await æœ¬è´¨\nasync function foo() { console.log(\u0026#39;1\u0026#39;); const a = await 111; console.log(\u0026#39;2\u0026#39;); const b = await 222; console.log(\u0026#39;3\u0026#39;); return a + b; } V8 ç¼–è¯‘åç­‰ä»·äºï¼š\nfunction foo() { console.log(\u0026#39;1\u0026#39;); return Promise.resolve(111).then(a =\u0026gt; { console.log(\u0026#39;2\u0026#39;); return Promise.resolve(222).then(b =\u0026gt; { console.log(\u0026#39;3\u0026#39;); return a + b; }); }); } ç»“è®ºï¼š\nasync function æ°¸è¿œè¿”å› Promise æ¯ä¸€ä¸ª await = æŠŠåé¢çš„ä»£ç åˆ‡å‡ºå»ï¼ŒåŒ…è£…æˆ .then() å›è°ƒ await å³ä¾§ä¸æ˜¯ Promise ä¹Ÿä¼šè¢« Promise.resolve() åŒ…è£… Promise é™æ€æ–¹æ³•å…¨å®¶æ¡¶\næ–¹æ³• è¡Œä¸º æœ€ä½³å®è·µåœºæ™¯ Promise.all å…¨éƒ¨æˆåŠŸæ‰æˆåŠŸï¼Œä»»ä¸€å¤±è´¥ç«‹å³å¤±è´¥ å¹¶å‘è¯·æ±‚å¤šä¸ªå¿…é¡»æˆåŠŸçš„æ¥å£ Promise.allSettled æ°¸è¿œæˆåŠŸï¼Œè¿”å›æ¯ä¸ªç»“æœçš„çŠ¶æ€å’Œå€¼ æ‰¹é‡æ“ä½œã€ç»Ÿè®¡ä¸ŠæŠ¥ã€ä¸æ€•éƒ¨åˆ†å¤±è´¥ Promise.any ç¬¬ä¸€ä¸ªæˆåŠŸå°±æˆåŠŸï¼Œå…¨å¤±è´¥æ‰å¤±è´¥ å¤š CDN åŠ è½½èµ„æºï¼Œè°å¿«ç”¨è° Promise.race ç¬¬ä¸€ä¸ªæœ‰çŠ¶æ€ï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰å°±è¿”å› è¶…æ—¶æ§åˆ¶ã€é˜²è¶…æ—¶ // å¹¶å‘ + ç»“æ„èµ‹å€¼ const [user, posts] = await Promise.all([ fetch(\u0026#39;/user\u0026#39;), fetch(\u0026#39;/posts\u0026#39;) ]); // è¯·æ±‚è¶…æ—¶æ¨¡æ¿ const withTimeout = (p, ms) =\u0026gt; Promise.race([ p, new Promise((_ , reject) =\u0026gt; setTimeout(() =\u0026gt; reject(\u0026#39;è¶…æ—¶\u0026#39;), ms)) ]); Event Loop å®Œæ•´æµç¨‹ï¼ˆæµè§ˆå™¨ç¯å¢ƒï¼‰\næ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆscript æ•´ä½“ã€setTimeout å›è°ƒã€ç‚¹å‡»äº‹ä»¶ç­‰ï¼‰ æ‰§è¡Œå®Œå½“å‰å®ä»»åŠ¡ â†’ è°ƒç”¨æ ˆæ¸…ç©º æ¸…ç©ºå½“å‰æ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆ.thenã€await åç»­ã€queueMicrotask ç­‰ï¼‰ ï¼ˆæµè§ˆå™¨ï¼‰å¯èƒ½è¿›è¡Œæ¸²æŸ“æ›´æ–° ä»å®ä»»åŠ¡é˜Ÿåˆ—å–ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ é‡å¤ä»¥ä¸Šæ­¥éª¤ Node.js å°åŒºåˆ«\nprocess.nextTick æ¯”å¾®ä»»åŠ¡è¿˜ä¼˜å…ˆ setImmediate æ˜¯ Node ç‰¹æœ‰çš„å®ä»»åŠ¡ ç»å…¸ç»¼åˆä¾‹é¢˜\nconsole.log(\u0026#39;start\u0026#39;); setTimeout(() =\u0026gt; console.log(\u0026#39;timeout\u0026#39;), 0); Promise.resolve() .then(() =\u0026gt; console.log(\u0026#39;p1\u0026#39;)) .then(() =\u0026gt; console.log(\u0026#39;p2\u0026#39;)); queueMicrotask(() =\u0026gt; console.log(\u0026#39;micro\u0026#39;)); (async () =\u0026gt; { console.log(\u0026#39;async start\u0026#39;); await 1; console.log(\u0026#39;await after\u0026#39;); })(); console.log(\u0026#39;end\u0026#39;); è¾“å‡ºé¡ºåºï¼š\ns a e p m a p t t s n 1 i w 2 i a y d c a m r n r i e t c o t o u s a t t f a t r e t r å¸¸è§é™·é˜± \u0026amp; æœ€ä½³å®è·µ\né™·é˜± æ­£ç¡®åšæ³• è¯¯ä»¥ä¸º await é˜»å¡ä¸»çº¿ç¨‹ ä¸é˜»å¡ï¼Œåªæ˜¯æš‚åœå½“å‰ async å‡½æ•° å¤šä¸ªç‹¬ç«‹è¯·æ±‚å†™æˆä¸²è¡Œ await å¹¶è¡Œå‘èµ· â†’ Promise.all èšåˆ å¾®ä»»åŠ¡æ— é™è‡ªæˆ‘è°ƒåº¦ é¿å… then(() =\u0026gt; then(...)) æ— é™å¾ªç¯ æ²¡å¤„ç† rejected Promise å…¨å±€ç›‘å¬ unhandledrejection è¿”å› thenable å¯¼è‡´æ„å¤–æ‰å¹³åŒ– æ˜ç¡®çŸ¥é“è‡ªå·±åœ¨å¹²ä»€ä¹ˆ ","permalink":"http://localhost:1313/findings/promisetoeventloop/","summary":"\u003chr\u003e\n\u003ch1 id=\"promise-ä¸-event-loopåˆ†æ­¥æ·±å…¥æŒ‡å—\"\u003ePromise ä¸ Event Loopï¼šåˆ†æ­¥æ·±å…¥æŒ‡å—\u003c/h1\u003e\n\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eJavaScript æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œå´è¦å¤„ç†å¤§é‡å¼‚æ­¥æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€å®šæ—¶å™¨ã€ç”¨æˆ·äº¤äº’ç­‰ï¼‰ã€‚ä¸ºäº†æ—¢ä¸é˜»å¡ä¸»çº¿ç¨‹ã€åˆèƒ½ä¿è¯å›è°ƒæŒ‰é¢„æœŸé¡ºåºæ‰§è¡Œï¼Œè¯­è¨€å’Œè¿è¡Œæ—¶å…±åŒæä¾›äº†ä¸¤å¥—æ ¸å¿ƒæœºåˆ¶ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePromise\u003c/strong\u003e â€”â€” ä»£è¡¨ä¸€ä¸ªâ€œæœªæ¥ä¼šç»“æŸâ€çš„å¼‚æ­¥æ“ä½œï¼Œæä¾›äº†çŠ¶æ€ç®¡ç†ã€é“¾å¼è°ƒç”¨ã€é”™è¯¯ä¼ æ’­ç­‰è¯­ä¹‰ï¼Œæ˜¯ç°ä»£å¼‚æ­¥ç¼–ç¨‹çš„åŸºçŸ³\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eEvent Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰\u003c/strong\u003e â€”â€” JavaScript è¿è¡Œæ—¶çœŸæ­£çš„è°ƒåº¦ä¸­å¿ƒï¼Œå®ƒå†³å®šäº†åŒæ­¥ä»£ç ã€Promise å›è°ƒï¼ˆå¾®ä»»åŠ¡ï¼‰ã€setTimeout/IO ç­‰ï¼ˆå®ä»»åŠ¡ï¼‰åˆ°åº•åœ¨ä»€ä¹ˆæ—¶æœºè¢«æ¨å…¥è°ƒç”¨æ ˆæ‰§è¡Œ\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eè¿™ä¸¤è€…ç´§å¯†åä½œï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePromise çš„ \u003ccode\u003e.then\u003c/code\u003e / \u003ccode\u003e.catch\u003c/code\u003e / \u003ccode\u003eawait\u003c/code\u003e åç»­å…¨éƒ¨å±äº\u003cstrong\u003eå¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eå¾®ä»»åŠ¡ä¸å®ä»»åŠ¡ï¼ˆmacrotaskï¼‰åœ¨ Event Loop ä¸­æœ‰ä¸¥æ ¼çš„ä¼˜å…ˆçº§ï¼š\u003cstrong\u003eæ¯æ‰§è¡Œå®Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œå¿…é¡»å…ˆæ¸…ç©ºå…¨éƒ¨å¾®ä»»åŠ¡ï¼Œæ‰ä¼šè¿›è¡Œæ¸²æŸ“å¹¶è¿›å…¥ä¸‹ä¸€ä¸ªå®ä»»åŠ¡\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæŒæ¡ Promise çš„çŠ¶æ€æœºç»†èŠ‚ + Event Loop çš„å¾®/å®ä»»åŠ¡æ‰§è¡Œé¡ºåºï¼Œå°±ç­‰äºæ‹¿åˆ°äº† JavaScript å¼‚æ­¥ä¸–ç•Œçš„å®Œæ•´â€œæ—¶åºåœ°å›¾â€\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eæ‰§è¡Œé¡ºåºè¡¨\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ‰§è¡Œé¡ºåº\u003c/th\u003e\n          \u003cth\u003eç±»å‹\u003c/th\u003e\n          \u003cth\u003eå…¸å‹ä»£è¡¨\u003c/th\u003e\n          \u003cth\u003eè§¦å‘æ—¶æœº\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003eåŒæ­¥ä»£ç (åŒ…å«Promise executor)\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003econsole.log\u003c/code\u003eã€å˜é‡èµ‹å€¼ã€å‡½æ•°è°ƒç”¨\u003c/td\u003e\n          \u003ctd\u003eç«‹å³æ‰§è¡Œ\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003eå¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e.then/.catch\u003c/code\u003eã€\u003ccode\u003eawait\u003c/code\u003e åç»­ã€\u003ccode\u003equeueMicrotask\u003c/code\u003eã€\u003ccode\u003eMutationObserver\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eå½“å‰å®ä»»åŠ¡ç»“æŸåã€æ¸²æŸ“å‰å…¨éƒ¨æ¸…ç©º\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003eæ¸²æŸ“ï¼ˆæµè§ˆå™¨ï¼‰\u003c/td\u003e\n          \u003ctd\u003eé¡µé¢é‡ç»˜ã€å¸ƒå±€\u003c/td\u003e\n          \u003ctd\u003eå¾®ä»»åŠ¡æ¸…ç©ºåï¼ˆå¯èƒ½è·³è¿‡ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003eå®ä»»åŠ¡ï¼ˆmacrotaskï¼‰\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003esetTimeout\u003c/code\u003eã€\u003ccode\u003esetInterval\u003c/code\u003eã€\u003ccode\u003eI/O\u003c/code\u003eã€\u003ccode\u003eUI äº‹ä»¶\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæ¯è½® Event Loop æ‰§è¡Œä¸€ä¸ª\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003cp\u003ePromise æ ¸å¿ƒæœºåˆ¶\u003c/p\u003e\n\u003cp\u003ePromise çš„ä¸‰ä¸ªçŠ¶æ€\u003c/p\u003e","title":"Promise ä¸ Event Loop çš„è”ç³»ä¸ç†è§£"},{"content":" æ¨¡å—æ¦‚è§ˆ ğŸ‘‰ æ¨¡å—ä»£ç ä»“åº“ï¼ˆwalletManagementï¼‰\né¡¹ç›® å†…å®¹ æ¨¡å—åç§° é’±åŒ…ç®¡ç†ï¼ˆWallet Managementï¼‰ è·¯ç”±è·¯å¾„ /walletManagement åŠŸèƒ½èŒƒå›´ éšæœº HD é’±åŒ…ç”Ÿæˆã€åŠ©è®°è¯å±•ç¤ºã€é’±åŒ…åŠ å¯†/è§£å¯†ã€åŠ å¯†é’±åŒ…ä¸åœ°å€æœ¬åœ°æŒä¹…åŒ–ï¼ˆIndexedDBï¼‰ è®¿é—®æƒé™ ä¾èµ–æœ¬åœ°ç”¨æˆ·å¯†ç è®°å½•ï¼ˆuserManagement æ¨¡å—ï¼‰ï¼›è‹¥æ— ç”¨æˆ·è®°å½•åˆ™é‡å®šå‘ /userManagement ç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£ app/walletManagement/ â”œâ”€â”€ components â”‚ â”œâ”€â”€ GenerateWallet.tsx | â”œâ”€â”€ ImportWallet.tsx â”œâ”€â”€ lib â”‚ â”œâ”€â”€ cryptoWallet.ts â”‚ â”œâ”€â”€ generateWallet.ts | â”œâ”€â”€ importWallet.ts â”‚ â”œâ”€â”€ saveAddress.ts â”‚ â””â”€â”€ saveWallet.ts â”œâ”€â”€ page.tsx â””â”€â”€ test-cryptoWallet.ts æ–‡ä»¶è·¯å¾„ èŒè´£è¯¦è§£ page.tsx è·¯ç”±å…¥å£ï¼Œæ¸²æŸ“ GenerateWallet ç»„ä»¶ï¼ˆé¡µé¢æœ¬èº«ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼‰ components/GenerateWallet.tsx æ ¸å¿ƒ UI ä¸äº¤äº’ï¼šå¯†ç æ ¡éªŒ â†’ ç”Ÿæˆé’±åŒ… â†’ åŠ å¯† â†’ ä¿å­˜ â†’ åŠ©è®°è¯å±•ç¤ºï¼›åŒ…å«ç”¨æˆ·å‹å¥½æç¤ºä¸é”™è¯¯å¤„ç† lib/generateWallet.ts ä½¿ç”¨ ethers + bip39 ç”Ÿæˆéšæœº HD é’±åŒ…ã€è‹±æ–‡ä¸ä¸­æ–‡åŠ©è®°è¯å¹¶åšä¸€è‡´æ€§æ ¡éªŒ lib/cryptoWallet.ts æä¾›é’±åŒ…åŠ å¯†/è§£å¯†æ¥å£ï¼Œå®šä¹‰ IEncryptedWallet ç±»å‹ï¼ˆè´Ÿè´£ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿå¯†é’¥å¯¹ wallet è¿›è¡Œ AES-GCM åŠ å¯†ï¼‰ lib/saveWallet.ts IndexedDB å°è£…ï¼šå¯¹ Wallets è¡¨ï¼ˆæˆ– storeï¼‰è¿›è¡Œä¿å­˜/è¯»å–/åˆ é™¤/åˆ—å‡º lib/saveAddress.ts IndexedDB å°è£…ï¼šå¯¹ Addresses è¡¨ä¿å­˜åœ°å€è®°å½•ã€è¯»å–ã€åˆ é™¤ã€åˆ—å‡º test-cryptoWallet.ts å•å…ƒæµ‹è¯•ï¼šéªŒè¯åŠ å¯†/è§£å¯†ã€å¯†é’¥æ´¾ç”Ÿä¸€è‡´æ€§ã€å¼‚å¸¸åœºæ™¯ï¼ˆè§£å¯†å¤±è´¥ã€ç¯¡æ”¹æ£€æµ‹ï¼‰ lib/importWallet.ts ä½¿ç”¨ bip39 å’Œ ethers ä»è‹±æ–‡æˆ–ä¸­æ–‡åŠ©è®°è¯å¯¼å…¥ HDNodeWalletï¼ˆä¸­æ–‡å…ˆè½¬æ¢ä¸ºè‹±æ–‡åŠ©è®°è¯å†å¯¼å…¥ï¼‰ 1. è¯¦ç»†äº¤äº’æµç¨‹ 1.1 é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥ ç”¨æˆ·è®¿é—® /walletManagement\npage.tsx æ¸²æŸ“ GenerateWallet\nç»„ä»¶åŠ è½½æ—¶ä¼šæ£€æŸ¥æœ¬åœ°æ˜¯å¦å·²å­˜åœ¨ç”¨æˆ·å¯†ç è®°å½•ï¼ˆé€šè¿‡ userManagement çš„ getUserRecord()ï¼‰\nè‹¥æ— ç”¨æˆ·è®°å½•ï¼šé‡å®šå‘åˆ° /userManagement è¦æ±‚å…ˆè®¾ç½®æœ¬åœ°å¯†ç ï¼ˆé¦–æ¬¡åˆå§‹åŒ–ï¼‰ è‹¥æœ‰ç”¨æˆ·è®°å½•ï¼šç»§ç»­æ˜¾ç¤ºç”Ÿæˆé’±åŒ…æµç¨‹ï¼ˆéœ€ç”¨æˆ·è¾“å…¥æœ¬åœ°å¯†ç ç”¨äºéªŒè¯ï¼‰ 1.2 é’±åŒ…ç”Ÿæˆä¸å¯¼å…¥æµç¨‹ æ­¥éª¤ ç”Ÿæˆé’±åŒ…ï¼ˆGenerateï¼‰ å¯¼å…¥é’±åŒ…ï¼ˆImportï¼‰ 1 ç”¨æˆ·è¾“å…¥æœ¬åœ°å¯†ç  â†’ ç‚¹å‡»ã€Œç”Ÿæˆé’±åŒ…ã€ ç”¨æˆ·è¾“å…¥æœ¬åœ°å¯†ç  â†’ å¡«å†™/ç²˜è´´åŠ©è®°è¯ â†’ ç‚¹å‡»ã€Œå¯¼å…¥é’±åŒ…ã€ 2 å®¢æˆ·ç«¯å¯¹å¯†ç è¿›è¡Œ SHA-256 å“ˆå¸Œï¼Œä¸æœ¬åœ° userRecord.passwordHash æ¯”å¯¹ åŒå·¦ï¼Œå®Œå…¨ä¸€è‡´çš„å¯†ç æ ¡éªŒé€»è¾‘ 3 æ ¡éªŒé€šè¿‡ â†’ è°ƒç”¨ generateWallet()\nâ†’ ä½¿ç”¨ crypto.getRandomValues ç”Ÿæˆéšæœºç†µ\nâ†’ åŒæ—¶ç”Ÿæˆè‹±æ–‡ + ä¸­æ–‡åŠ©è®°è¯\nâ†’ è¿”å› WalletResultï¼ˆå« HDNodeWalletã€è‹±æ–‡åŠ©è®°è¯ã€ä¸­æ–‡åŠ©è®°è¯ï¼‰ æ ¡éªŒé€šè¿‡ â†’ è¯»å–ç”¨æˆ·å¡«å†™çš„åŠ©è®°è¯ï¼ˆæ”¯æŒ 12/24 è¯ã€è‡ªåŠ¨è¯†åˆ«ä¸­è‹±æ–‡ï¼‰\nâ†’ è°ƒç”¨ importWallet_en() æˆ– importWallet_zh()ï¼ˆä¸­æ–‡ä¼šå…ˆè½¬ç†µå†è½¬è‹±æ–‡ï¼‰\nâ†’ å¾—åˆ°ç­‰ä»·çš„ HDNodeWallet å®ä¾‹ 4 è°ƒç”¨ encryptWallet(wallet, password)\nâ†’ PBKDF2 æ´¾ç”Ÿå¯†é’¥ + AES-256-GCM åŠ å¯†æ•´ä¸ªé’±åŒ…å¯¹è±¡ å®Œå…¨ç›¸åŒï¼šencryptWallet(wallet, password)ï¼ˆä»£ç å¤ç”¨ 100%ï¼‰ 5 å¹¶è¡Œæ‰§è¡Œï¼š\nâ€¢ countWallet() æŸ¥è¯¢å·²æœ‰é’±åŒ…æ•°é‡\nâ€¢ åŠ å¯†é’±åŒ… åŒå·¦ï¼šå¹¶è¡Œæ‰§è¡Œ encryptWallet() ä¸ countWallet() 6 æ ¹æ®æ•°é‡å†³å®š keyPathï¼š\n0 ä¸ª â†’ '0'ï¼Œå…¶ä½™ â†’ crypto.randomUUID() å®Œå…¨ä¸€è‡´çš„ keyPath ç­–ç•¥ 7 å¹¶è¡Œä¿å­˜ï¼š\nâ€¢ saveWallet(keyPath, encryptedWallet)\nâ€¢ saveAddress(addressRecord) å®Œå…¨ç›¸åŒçš„å¹¶è¡Œå†™å…¥é€»è¾‘ï¼ˆWallets + Addresses è¡¨ï¼‰ 8 æ¸…ç†å†…å­˜ä¸­çš„æ˜æ–‡åŠ©è®°è¯ä¸ç§é’¥\næ˜¾ç¤ºã€Œç”ŸæˆæˆåŠŸã€\næä¾›å¯åˆ‡æ¢çš„è‹±æ–‡/ä¸­æ–‡åŠ©è®°è¯å±•ç¤ºï¼ˆä»…ç”¨äºå¤‡ä»½ï¼‰ æ¸…ç†è¾“å…¥æ¡†\næ˜¾ç¤ºã€Œå¯¼å…¥æˆåŠŸã€\næä¾›ç›¸åŒçš„åŠ©è®°è¯æ ¸å¯¹ç•Œé¢ï¼ˆè‹±æ–‡ â†” ä¸­æ–‡å¯åˆ‡æ¢ï¼‰ 9 ç”¨æˆ·æ‰‹åŠ¨å¤‡ä»½åŠ©è®°è¯ â†’ ç‚¹å‡»ã€Œå›åˆ°ä¸»é¡µã€ ç”¨æˆ·æ ¸å¯¹åŠ©è®°è¯æ— è¯¯ â†’ ç‚¹å‡»ã€Œå›åˆ°ä¸»é¡µã€æˆ–ã€Œå‰å¾€ç™»å½•ã€ 1.3 å¼‚å¸¸/è¾¹ç•Œåœºæ™¯ å¯†ç ä¸ºç©ºæˆ–æ ¡éªŒå¤±è´¥ï¼šé˜»æ­¢ç”Ÿæˆå¹¶å±•ç¤ºé”™è¯¯æç¤º åŠ å¯†ä¿å­˜å¤±è´¥ï¼ˆIO/Quotaï¼‰ï¼šå›æ»šæˆ–æ¸…ç†å·²å†™å…¥çš„éƒ¨åˆ†æ•°æ®ï¼Œæç¤ºç”¨æˆ·å¹¶è®°å½•é”™è¯¯æ—¥å¿—ï¼ˆå¯é€‰ä¸ŠæŠ¥ï¼‰ åŠ©è®°è¯ä¸€è‡´æ€§æ£€æŸ¥å¤±è´¥ï¼ˆç†è®ºä¸Šåœ¨ generateWallet å·²æ ¡éªŒï¼‰ï¼šæŠ›å‡ºå¼‚å¸¸å¹¶æç¤ºé‡æ–°ç”Ÿæˆ é‡å¤ä¿å­˜/é‡å¤æŒ‰é’®ç‚¹å‡»ï¼šä½¿ç”¨ loading çŠ¶æ€ç¦æ­¢é‡å¤æ“ä½œ 2. æ•°æ®æ¨¡å‹ï¼ˆIndexedDB è¡¨ç»“æ„ï¼‰ Wallets è¡¨ï¼ˆTABLE_WALLETS = 'Wallets'ï¼‰ key: stringï¼ˆå½“å‰å®ç°ä»¥ count() ä½œä¸ºè‡ªå¢ keyï¼Œå†è½¬ String å­˜å‚¨ï¼‰ value (IEncryptedWallet)ï¼ˆå»ºè®®ç¤ºä¾‹ï¼‰ interface IEncryptedWallet { version: number; // ç‰ˆæœ¬å·ï¼Œæ–¹ä¾¿æ—¥åè¿ç§» cipher: \u0026#39;AES-GCM\u0026#39;; // åŠ å¯†ç®—æ³•è¯´æ˜ iv: string; // base64/hex salt: string; // ç”¨äº KDF çš„ salt ciphertext: string; // åŠ å¯†åçš„ payloadï¼ˆå¯èƒ½åŒ…å«ç§é’¥ã€pathã€address ç­‰ï¼‰ meta?: { createdAt: string; // ISO æ—¶é—´ address?: string; } } Addresses è¡¨ï¼ˆTABLE_ADDRESSES = 'Addresses'ï¼‰ key: stringï¼ˆåŒä¸Šï¼‰ value (AddressRecord) interface AddressRecord { wallet: { type: string; // \u0026#39;HDNodeWallet\u0026#39; KeyPath: string; // æŒ‡å‘ Wallets è¡¨çš„ keyï¼ˆStringï¼‰ }; address: string; // 0x... } æ³¨æ„ï¼šå½“å‰å®ç°ä½¿ç”¨ storage.count() ä½œä¸ºè‡ªå¢é”®ï¼ˆkey = countï¼‰ï¼Œä¼˜ç‚¹ç®€å•ï¼›ç¼ºç‚¹æ˜¯åœ¨åˆ é™¤åå¯èƒ½å‡ºç° key ç¼éš™ã€å¹¶å‘å†™å…¥é£é™©ã€‚å¯è€ƒè™‘åç»­æ”¹ä¸º UUID æˆ–è‡ªå¢ sequence ç®¡ç†ã€‚\n3. æ ¸å¿ƒåº“è¯´æ˜ï¼ˆlib/*.tsï¼‰ generateWallet.ts åŠŸèƒ½ï¼šåŸºäº ethers.Wallet.createRandom() ç”Ÿæˆ HD é’±åŒ…ï¼Œè¯»å–è‹±æ–‡åŠ©è®°è¯ entropyï¼Œä½¿ç”¨ bip39 ä¸­æ–‡è¯åº“ç”Ÿæˆä¸­æ–‡åŠ©è®°è¯ï¼Œå¹¶åš entropy ä¸€è‡´æ€§æ ¡éªŒ è¿”å›ï¼šWalletResult { wallet: HDNodeWallet, mnemonic_en, mnemonic_zh } cryptoWallet.ts åŠŸèƒ½ï¼šé’±åŒ…åŠ å¯†ä¸è§£å¯†é€»è¾‘ï¼ˆAES-GCMï¼‰ä¸å¯†é’¥æ´¾ç”Ÿï¼ˆåº”ä½¿ç”¨ PBKDF2 / scrypt / argon2 ç±»å®‰å…¨ KDFï¼Œè‡³å°‘å¸¦ salt ä¸å¤šè½®æ¬¡ï¼‰ã€‚\nå¯¼å‡ºï¼š\nencryptWallet(wallet: HDNodeWallet, password: string): Promise\u0026lt;IEncryptedWallet\u0026gt; decryptWallet(enc: IEncryptedWallet, password: string): Promise\u0026lt;HDNodeWallet\u0026gt; æµ‹è¯•ç‚¹ï¼šè§£å¯†åé’±åŒ…åœ°å€ä¸åŠ å¯†å‰ä¸€è‡´ï¼›ç¯¡æ”¹ ciphertext/iv/salt å¯¼è‡´è§£å¯†å¤±è´¥ï¼ˆé”™è¯¯æŠ›å‡ºï¼‰\nsaveWallet.ts / saveAddress.ts åŠŸèƒ½ï¼šIndexedDB CRUD å°è£…ï¼ˆsave, get, delete, keys, values, count ç­‰ï¼‰ çº¦å®šï¼šsave* è¿”å›æ•°å­— keyï¼ˆå½“å‰å®ç°ä¸º count()ï¼‰ï¼Œget* è¿”å›ç›¸åº”è®°å½•æˆ– null/undefined 4. å®‰å…¨è®¾è®¡åŸåˆ™ å¯†ç æ°¸ä¸æ˜æ–‡å­˜ç›˜ï¼šä»…å­˜å‚¨å¯†ç çš„ SHA-256 å“ˆå¸Œï¼ˆç”¨äºç™»å½•/æ ¡éªŒï¼‰ï¼Œç”¨äºæ´¾ç”Ÿå¯†é’¥çš„ salt ä¸æ´¾ç”Ÿå‚æ•°ä¹Ÿåº”å­˜å‚¨ï¼Œä½†ä¸ä¿å­˜æ˜æ–‡å¯†ç  åŠ©è®°è¯/ç§é’¥æœ€å°ä¿ç•™æ—¶é—´ï¼šåŠ©è®°è¯ä¸ç§é’¥ä»…åœ¨å†…å­˜ä¸­å­˜åœ¨å¹¶åœ¨ä½¿ç”¨åç«‹å³è¦†ç›–/é‡Šæ”¾ï¼ˆå°½é‡é¿å…é•¿æ—¶é©»ç•™ï¼‰ åŠ å¯†å­˜å‚¨ï¼šæ‰€æœ‰æ•æ„Ÿ payload ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿå¯†é’¥ï¼ˆKDFï¼‰è¿›è¡Œ AES-GCM åŠ å¯†å¹¶å­˜å‚¨ï¼›åŠ å¯†å…ƒä¿¡æ¯ï¼ˆsalt, ivï¼‰å¯ä¸ ciphertext ä¸€èµ·å­˜ é˜²æ­¢ä¾§ä¿¡é“æ³„éœ²ï¼šé¿å…åœ¨æ§åˆ¶å°/æ—¥å¿—æ‰“å°åŠ©è®°è¯ã€ç§é’¥æˆ–å®Œæ•´è§£å¯† payload ä¸€é”®åˆ é™¤æœ¬åœ°æ•°æ®ï¼šæä¾›å¿˜è®°å¯†ç /é‡ç½®åŠŸèƒ½ï¼Œå½»åº•åˆ é™¤ Walletsã€Addressesã€user record ç‰ˆæœ¬ä¸è¿ç§»ï¼šåŠ å¯†æ•°æ®å¸¦ version å­—æ®µï¼Œä¾¿äºå°†æ¥æ›´æ¢åŠ å¯†ç­–ç•¥æˆ– KDF å‚æ•°æ—¶è¿›è¡Œè¿ç§» æœ€å°æƒé™ï¼šæ¨¡å—ä»…åšæœ¬åœ°ç®¡ç†ï¼Œä¸è¿›è¡Œç½‘ç»œåŒæ­¥ï¼ˆé™¤éç”¨æˆ·æ˜¾å¼å¯¼å‡ºå¹¶ä¸Šä¼ ï¼‰ï¼Œé¿å…è¿œç«¯æ³„éœ²é£é™© ","permalink":"http://localhost:1313/projects/0907wallet/walletmanagement/","summary":"\u003chr\u003e\n\u003ch1 id=\"æ¨¡å—æ¦‚è§ˆ\"\u003eæ¨¡å—æ¦‚è§ˆ\u003c/h1\u003e\n\u003cp\u003eğŸ‘‰ \u003ca href=\"https://github.com/cgcj0907/0907-Wallet/tree/main/app/walletManagement\"\u003eæ¨¡å—ä»£ç ä»“åº“ï¼ˆwalletManagementï¼‰\u003c/a\u003e\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eé¡¹ç›®\u003c/th\u003e\n          \u003cth\u003eå†…å®¹\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eæ¨¡å—åç§°\u003c/td\u003e\n          \u003ctd\u003eé’±åŒ…ç®¡ç†ï¼ˆWallet Managementï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè·¯ç”±è·¯å¾„\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e/walletManagement\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eåŠŸèƒ½èŒƒå›´\u003c/td\u003e\n          \u003ctd\u003eéšæœº HD é’±åŒ…ç”Ÿæˆã€åŠ©è®°è¯å±•ç¤ºã€é’±åŒ…åŠ å¯†/è§£å¯†ã€åŠ å¯†é’±åŒ…ä¸åœ°å€æœ¬åœ°æŒä¹…åŒ–ï¼ˆIndexedDBï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè®¿é—®æƒé™\u003c/td\u003e\n          \u003ctd\u003eä¾èµ–æœ¬åœ°ç”¨æˆ·å¯†ç è®°å½•ï¼ˆuserManagement æ¨¡å—ï¼‰ï¼›è‹¥æ— ç”¨æˆ·è®°å½•åˆ™é‡å®šå‘ \u003ccode\u003e/userManagement\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2 id=\"ç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£\"\u003eç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£\u003c/h2\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-cosole\" data-lang=\"cosole\"\u003eapp/walletManagement/\nâ”œâ”€â”€ components\nâ”‚   â”œâ”€â”€ GenerateWallet.tsx\n|   â”œâ”€â”€ ImportWallet.tsx\nâ”œâ”€â”€ lib\nâ”‚   â”œâ”€â”€ cryptoWallet.ts\nâ”‚   â”œâ”€â”€ generateWallet.ts\n|   â”œâ”€â”€ importWallet.ts\nâ”‚   â”œâ”€â”€ saveAddress.ts\nâ”‚   â””â”€â”€ saveWallet.ts\nâ”œâ”€â”€ page.tsx\nâ””â”€â”€ test-cryptoWallet.ts\n\u003c/code\u003e\u003c/pre\u003e\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ–‡ä»¶è·¯å¾„\u003c/th\u003e\n          \u003cth\u003eèŒè´£è¯¦è§£\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003epage.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eè·¯ç”±å…¥å£ï¼Œæ¸²æŸ“ GenerateWallet ç»„ä»¶ï¼ˆé¡µé¢æœ¬èº«ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003ecomponents/GenerateWallet.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæ ¸å¿ƒ UI ä¸äº¤äº’ï¼šå¯†ç æ ¡éªŒ â†’ ç”Ÿæˆé’±åŒ… â†’ åŠ å¯† â†’ ä¿å­˜ â†’ åŠ©è®°è¯å±•ç¤ºï¼›åŒ…å«ç”¨æˆ·å‹å¥½æç¤ºä¸é”™è¯¯å¤„ç†\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/generateWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eä½¿ç”¨ ethers + bip39 ç”Ÿæˆéšæœº HD é’±åŒ…ã€è‹±æ–‡ä¸ä¸­æ–‡åŠ©è®°è¯å¹¶åšä¸€è‡´æ€§æ ¡éªŒ\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/cryptoWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæä¾›é’±åŒ…åŠ å¯†/è§£å¯†æ¥å£ï¼Œå®šä¹‰ \u003ccode\u003eIEncryptedWallet\u003c/code\u003e ç±»å‹ï¼ˆè´Ÿè´£ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿå¯†é’¥å¯¹ wallet è¿›è¡Œ AES-GCM åŠ å¯†ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/saveWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eIndexedDB å°è£…ï¼šå¯¹ \u003ccode\u003eWallets\u003c/code\u003e è¡¨ï¼ˆæˆ– storeï¼‰è¿›è¡Œä¿å­˜/è¯»å–/åˆ é™¤/åˆ—å‡º\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/saveAddress.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eIndexedDB å°è£…ï¼šå¯¹ \u003ccode\u003eAddresses\u003c/code\u003e è¡¨ä¿å­˜åœ°å€è®°å½•ã€è¯»å–ã€åˆ é™¤ã€åˆ—å‡º\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003etest-cryptoWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eå•å…ƒæµ‹è¯•ï¼šéªŒè¯åŠ å¯†/è§£å¯†ã€å¯†é’¥æ´¾ç”Ÿä¸€è‡´æ€§ã€å¼‚å¸¸åœºæ™¯ï¼ˆè§£å¯†å¤±è´¥ã€ç¯¡æ”¹æ£€æµ‹ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/importWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eä½¿ç”¨ bip39 å’Œ ethers ä»è‹±æ–‡æˆ–ä¸­æ–‡åŠ©è®°è¯å¯¼å…¥ HDNodeWalletï¼ˆä¸­æ–‡å…ˆè½¬æ¢ä¸ºè‹±æ–‡åŠ©è®°è¯å†å¯¼å…¥ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-è¯¦ç»†äº¤äº’æµç¨‹\"\u003e1. è¯¦ç»†äº¤äº’æµç¨‹\u003c/h2\u003e\n\u003ch3 id=\"11-é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥\"\u003e1.1 é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eç”¨æˆ·è®¿é—® \u003ccode\u003e/walletManagement\u003c/code\u003e\u003c/p\u003e","title":"0907 Wallet é’±åŒ…ç®¡ç†æ¨¡å—è®¾è®¡"},{"content":"ç®€ä»‹ åœ¨åšå¯†ç å­˜å‚¨çš„æ—¶å€™ï¼Œæˆ‘é‡åˆ°äº†ä¸‰ç§å¸¸è§çš„æ•°æ®è¡¨ç¤ºæ–¹å¼ï¼šSHA256ã€Base64 å’Œ Uint8Arrayï¼ˆç®€ç§° Uint8ï¼‰ã€‚å®ƒä»¬å„æœ‰ç”¨é€”å’Œç‰¹ç‚¹ï¼Œäºæ˜¯å†™ä¸‹è¿™ç¯‡æ–‡ç« æ¥æ€»ç»“ä¸€ä¸‹ã€‚\nSHA256 SHA256 æ˜¯ç°ä»£äº’è”ç½‘å¹¿æ³›ä½¿ç”¨çš„åŠ å¯†å“ˆå¸Œç®—æ³•ï¼Œä¾‹å¦‚åœ¨åŒºå—é“¾ã€å¯†ç å­˜å‚¨å’Œæ•°æ®å®Œæ•´æ€§éªŒè¯ä¸­éƒ½å¾ˆå¸¸è§ã€‚\nç‰¹ç‚¹ï¼š\nå°†ä»»æ„é•¿åº¦çš„è¾“å…¥æ•°æ®ç»è¿‡æ•°å­¦è¿ç®—åï¼Œè¾“å‡º 256 ä½äºŒè¿›åˆ¶æ•°ï¼ˆ32 å­—èŠ‚ï¼‰ã€‚\nå‡ ä¹ä¸å¯é€†ï¼Œæ„å‘³ç€å³ä½¿æ‹¿åˆ° SHA256 çš„è¾“å‡ºï¼Œä¹Ÿå¾ˆéš¾åæ¨å‡ºåŸå§‹è¾“å…¥ã€‚\nç¤ºä¾‹è¾“å‡ºï¼ˆä»¥åå…­è¿›åˆ¶è¡¨ç¤ºï¼‰ï¼š\ne 3 b 0 c 4 4 2 9 8 f c 1 c 1 4 9 a f b f 4 c 8 9 9 6 f b 9 2 4 2 7 a e 4 1 e 4 6 4 9 b 9 3 4 c a 4 9 5 9 9 1 b 7 8 5 2 b 8 5 5 ç¼ºç‚¹ï¼šå¯è¯»æ€§å·®ï¼Œå°¤å…¶æ˜¯åœ¨å‰ç«¯éœ€è¦æ˜¾ç¤ºæˆ–ä¼ è¾“æ—¶ä¸æ–¹ä¾¿ã€‚\nå› æ­¤ï¼Œé€šå¸¸ä¼šé…åˆ Base64 æˆ–åå…­è¿›åˆ¶è¡¨ç¤ºæ¥æ–¹ä¾¿å­˜å‚¨å’Œå±•ç¤ºã€‚\nBase64 Base64 æ˜¯ä¸€ç§å°†äºŒè¿›åˆ¶æ•°æ®ç¼–ç ä¸ºå¯æ‰“å° ASCII å­—ç¬¦çš„æ–¹å¼ã€‚\nç‰¹ç‚¹ï¼š\næ¯ 6 ä½äºŒè¿›åˆ¶æ•°æ˜ å°„ä¸ºä¸€ä¸ªå­—ç¬¦ï¼Œå­—ç¬¦é›†åŒ…å«ï¼š\nA - Z , a - z , 0 - 9 , + , / ä»¥åŠ = ç”¨ä½œå¡«å……ï¼Œä½¿é•¿åº¦ä¸º 4 çš„å€æ•°ã€‚\nå¯ä»¥å°† SHA256 çš„ 32 å­—èŠ‚ï¼ˆ256 ä½ï¼‰è¾“å‡ºç¼–ç ä¸º 44 ä¸ª Base64 å­—ç¬¦ã€‚\nä¸ºä»€ä¹ˆæ˜¯ 44 ä¸ªè€Œä¸æ˜¯ 43 ä¸ªï¼ŸåŸå› å¦‚ä¸‹ï¼š\nBase64 æŒ‰ æ¯ 3 ä¸ªå­—èŠ‚ï¼ˆ24 ä½ï¼‰ä¸ºä¸€ç»„ æ¥ç¼–ç ï¼Œæ¯ç»„ä¼šç”Ÿæˆ 4 ä¸ª Base64 å­—ç¬¦ã€‚\nSHA256 è¾“å‡º 32 å­—èŠ‚ â†’ å¯ä»¥åˆ†ä¸º 10 ç»„å®Œæ•´çš„ 3 å­—èŠ‚ + å‰©ä½™ 2 å­—èŠ‚ã€‚\nå‰©ä½™ 2 å­—èŠ‚ä¼šç”Ÿæˆ 3 ä¸ª Base64 å­—ç¬¦ï¼Œæœ€åç”¨ = å¡«å……åˆ° 4 ä¸ªå­—ç¬¦ã€‚\næ€»é•¿åº¦ = 10Ã—4 + 4 = 44\nç¤ºä¾‹è¾“å‡ºï¼ˆBase64 ç¼–ç ï¼‰ï¼š\n4 7 D E Q p j 8 H B S a + / T I m W + 5 J C e u Q e R k m 5 N M p J W Z G 3 h S u F U = ä¼˜ç‚¹ï¼šé•¿åº¦æ›´çŸ­ã€å¯è¯»æ€§é«˜ã€é€‚åˆå‰ç«¯æ˜¾ç¤ºå’Œä¼ è¾“ã€‚\nUint8Arrayï¼ˆUint8ï¼‰ Uint8Array æ˜¯ JavaScript ä¸­çš„ å­—èŠ‚æ•°ç»„ç±»å‹ã€‚\nç‰¹ç‚¹ï¼š\næ¯ä¸ªå…ƒç´ å ç”¨ 8 ä½ï¼ˆ1 å­—èŠ‚ï¼‰\nç”¨äºå­˜å‚¨åŸå§‹äºŒè¿›åˆ¶æ•°æ®ï¼Œä¾‹å¦‚ SHA256 è¾“å‡ºã€æ–‡ä»¶ã€åŠ å¯†å¯†é’¥ç­‰\nä¸ Base64 ä¸åŒï¼Œå®ƒä¸æ˜¯ä¸ºäº†æ˜¾ç¤ºï¼Œè€Œæ˜¯ä¸ºäº†é«˜æ•ˆå­˜å‚¨å’Œè®¡ç®—\nç¤ºä¾‹ï¼š\nconst hash = new Uint8Array([227, 176, 196, 66, 152, 252, ...]); ä¸ Base64 çš„è½¬æ¢ï¼š\nSHA256 è¾“å‡º â†’ Uint8Array â†’ Base64ï¼ˆå¯æ˜¾ç¤ºï¼‰\nBase64 â†’ Uint8Arrayï¼ˆå¯è§£ç å›åŸå§‹äºŒè¿›åˆ¶ï¼‰\næ€»ç»“å¯¹æ¯” ç±»å‹ å•ä½ ç”¨é€” å¯è¯»æ€§ å¤§å° SHA256 256 bit å®‰å…¨å“ˆå¸Œã€æ•°æ®å®Œæ•´æ€§ å·® å›ºå®š 32 å­—èŠ‚ Base64 6 bit/å­—ç¬¦ å±•ç¤ºã€ä¼ è¾“ã€å‹ç¼©é•¿åº¦ é«˜ 44 å­—ç¬¦ï¼ˆå¡«å……ï¼‰ Uint8Array 8 bit/å­—èŠ‚ å†…å­˜æ“ä½œã€åŠ å¯†è¿ç®— ä½ 32 å­—èŠ‚ ","permalink":"http://localhost:1313/findings/sha256-base64-uint8/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eåœ¨åšå¯†ç å­˜å‚¨çš„æ—¶å€™ï¼Œæˆ‘é‡åˆ°äº†ä¸‰ç§å¸¸è§çš„æ•°æ®è¡¨ç¤ºæ–¹å¼ï¼š\u003ccode\u003eSHA256\u003c/code\u003eã€\u003ccode\u003eBase64\u003c/code\u003e å’Œ \u003ccode\u003eUint8Array\u003c/code\u003eï¼ˆç®€ç§° \u003ccode\u003eUint8\u003c/code\u003eï¼‰ã€‚å®ƒä»¬å„æœ‰ç”¨é€”å’Œç‰¹ç‚¹ï¼Œäºæ˜¯å†™ä¸‹è¿™ç¯‡æ–‡ç« æ¥æ€»ç»“ä¸€ä¸‹ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"sha256\"\u003eSHA256\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003eSHA256\u003c/code\u003e æ˜¯ç°ä»£äº’è”ç½‘å¹¿æ³›ä½¿ç”¨çš„åŠ å¯†å“ˆå¸Œç®—æ³•ï¼Œä¾‹å¦‚åœ¨åŒºå—é“¾ã€å¯†ç å­˜å‚¨å’Œæ•°æ®å®Œæ•´æ€§éªŒè¯ä¸­éƒ½å¾ˆå¸¸è§ã€‚\u003c/p\u003e\n\u003cp\u003eç‰¹ç‚¹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eå°†ä»»æ„é•¿åº¦çš„è¾“å…¥æ•°æ®ç»è¿‡æ•°å­¦è¿ç®—åï¼Œè¾“å‡º \u003cstrong\u003e256 ä½äºŒè¿›åˆ¶æ•°\u003c/strong\u003eï¼ˆ32 å­—èŠ‚ï¼‰ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eå‡ ä¹ä¸å¯é€†ï¼Œæ„å‘³ç€å³ä½¿æ‹¿åˆ° SHA256 çš„è¾“å‡ºï¼Œä¹Ÿå¾ˆéš¾åæ¨å‡ºåŸå§‹è¾“å…¥ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç¤ºä¾‹è¾“å‡ºï¼ˆä»¥åå…­è¿›åˆ¶è¡¨ç¤ºï¼‰ï¼š\u003c/p\u003e\n\n\n\n\u003cdiv class=\"goat svg-container \"\u003e\n  \n    \u003csvg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      font-family=\"Menlo,Lucida Console,monospace\"\n      \n        viewBox=\"0 0 520 25\"\n      \u003e\n      \u003cg transform='translate(8,16)'\u003e\n\u003ctext text-anchor='middle' x='0' y='4' fill='currentColor' style='font-size:1em'\u003ee\u003c/text\u003e\n\u003ctext text-anchor='middle' x='8' y='4' fill='currentColor' style='font-size:1em'\u003e3\u003c/text\u003e\n\u003ctext text-anchor='middle' x='16' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='24' y='4' fill='currentColor' style='font-size:1em'\u003e0\u003c/text\u003e\n\u003ctext text-anchor='middle' x='32' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='40' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='48' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='56' y='4' fill='currentColor' style='font-size:1em'\u003e2\u003c/text\u003e\n\u003ctext text-anchor='middle' x='64' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='72' y='4' fill='currentColor' style='font-size:1em'\u003e8\u003c/text\u003e\n\u003ctext text-anchor='middle' x='80' y='4' fill='currentColor' style='font-size:1em'\u003ef\u003c/text\u003e\n\u003ctext text-anchor='middle' x='88' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='96' y='4' fill='currentColor' style='font-size:1em'\u003e1\u003c/text\u003e\n\u003ctext text-anchor='middle' x='104' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='112' y='4' fill='currentColor' style='font-size:1em'\u003e1\u003c/text\u003e\n\u003ctext text-anchor='middle' x='120' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='128' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='136' y='4' fill='currentColor' style='font-size:1em'\u003ea\u003c/text\u003e\n\u003ctext text-anchor='middle' x='144' y='4' fill='currentColor' style='font-size:1em'\u003ef\u003c/text\u003e\n\u003ctext text-anchor='middle' x='152' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='160' y='4' fill='currentColor' style='font-size:1em'\u003ef\u003c/text\u003e\n\u003ctext text-anchor='middle' x='168' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='176' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='184' y='4' fill='currentColor' style='font-size:1em'\u003e8\u003c/text\u003e\n\u003ctext text-anchor='middle' x='192' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='200' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='208' y='4' fill='currentColor' style='font-size:1em'\u003e6\u003c/text\u003e\n\u003ctext text-anchor='middle' x='216' y='4' fill='currentColor' style='font-size:1em'\u003ef\u003c/text\u003e\n\u003ctext text-anchor='middle' x='224' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='232' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='240' y='4' fill='currentColor' style='font-size:1em'\u003e2\u003c/text\u003e\n\u003ctext text-anchor='middle' x='248' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='256' y='4' fill='currentColor' style='font-size:1em'\u003e2\u003c/text\u003e\n\u003ctext text-anchor='middle' x='264' y='4' fill='currentColor' style='font-size:1em'\u003e7\u003c/text\u003e\n\u003ctext text-anchor='middle' x='272' y='4' fill='currentColor' style='font-size:1em'\u003ea\u003c/text\u003e\n\u003ctext text-anchor='middle' x='280' y='4' fill='currentColor' style='font-size:1em'\u003ee\u003c/text\u003e\n\u003ctext text-anchor='middle' x='288' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='296' y='4' fill='currentColor' style='font-size:1em'\u003e1\u003c/text\u003e\n\u003ctext text-anchor='middle' x='304' y='4' fill='currentColor' style='font-size:1em'\u003ee\u003c/text\u003e\n\u003ctext text-anchor='middle' x='312' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='320' y='4' fill='currentColor' style='font-size:1em'\u003e6\u003c/text\u003e\n\u003ctext text-anchor='middle' x='328' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='336' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='344' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='352' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='360' y='4' fill='currentColor' style='font-size:1em'\u003e3\u003c/text\u003e\n\u003ctext text-anchor='middle' x='368' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='376' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='384' y='4' fill='currentColor' style='font-size:1em'\u003ea\u003c/text\u003e\n\u003ctext text-anchor='middle' x='392' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='400' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='408' y='4' fill='currentColor' style='font-size:1em'\u003e5\u003c/text\u003e\n\u003ctext text-anchor='middle' x='416' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='424' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='432' y='4' fill='currentColor' style='font-size:1em'\u003e1\u003c/text\u003e\n\u003ctext text-anchor='middle' x='440' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='448' y='4' fill='currentColor' style='font-size:1em'\u003e7\u003c/text\u003e\n\u003ctext text-anchor='middle' x='456' y='4' fill='currentColor' style='font-size:1em'\u003e8\u003c/text\u003e\n\u003ctext text-anchor='middle' x='464' y='4' fill='currentColor' style='font-size:1em'\u003e5\u003c/text\u003e\n\u003ctext text-anchor='middle' x='472' y='4' fill='currentColor' style='font-size:1em'\u003e2\u003c/text\u003e\n\u003ctext text-anchor='middle' x='480' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='488' y='4' fill='currentColor' style='font-size:1em'\u003e8\u003c/text\u003e\n\u003ctext text-anchor='middle' x='496' y='4' fill='currentColor' style='font-size:1em'\u003e5\u003c/text\u003e\n\u003ctext text-anchor='middle' x='504' y='4' fill='currentColor' style='font-size:1em'\u003e5\u003c/text\u003e\n\u003c/g\u003e\n\n    \u003c/svg\u003e\n  \n\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç¼ºç‚¹ï¼š\u003cstrong\u003eå¯è¯»æ€§å·®\u003c/strong\u003eï¼Œå°¤å…¶æ˜¯åœ¨å‰ç«¯éœ€è¦æ˜¾ç¤ºæˆ–ä¼ è¾“æ—¶ä¸æ–¹ä¾¿ã€‚\u003c/p\u003e","title":"SHA256ã€Base64 ä¸ Uint8Array çš„å¯¹æ¯”ä¸ç†è§£"},{"content":"æ¨¡å—æ¦‚è§ˆ ğŸ‘‰ æ¨¡å—ä»£ç ä»“åº“\né¡¹ç›® å†…å®¹ æ¨¡å—åç§° ç”¨æˆ·ç®¡ç†ï¼ˆUser Managementï¼‰ è·¯ç”±è·¯å¾„ /userManagement åŠŸèƒ½èŒƒå›´ å¯†ç è®¾ç½®ã€å·²æœ‰é’±åŒ…ç™»å½•ã€æœ¬åœ°åŠ å¯†å­˜å‚¨ è®¿é—®æƒé™ æœªç™»å½•çŠ¶æ€ä¸‹å¼ºåˆ¶è·³è½¬åˆ°æ­¤é¡µé¢ï¼Œå·²ç™»å½•æ”¾è¡Œ ç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£ app/userManage/ â”œâ”€â”€ components/ â”‚ â”œâ”€â”€ Login.tsx â”‚ â””â”€â”€ Register.tsx â”œâ”€â”€ lib/ â”‚ â””â”€â”€ savePassword.ts â””â”€â”€ page.tsx æ–‡ä»¶è·¯å¾„ èŒè´£è¯¦è§£ page.tsx 1. è·¯ç”±å…¥å£\n2. æ£€æµ‹ IndexedDB æ˜¯å¦å·²æœ‰é’±åŒ…è®°å½•\n3. å·²ç™»å½• â†’ è·³è½¬ /ï¼ˆé¦–é¡µï¼‰\n4. æœªç™»å½• â†’ æ¸²æŸ“ç™»å½•/æ³¨å†Œåˆ‡æ¢ç•Œé¢ components/Login.tsx çº¯å±•ç¤ºç»„ä»¶ï¼š\nâ€¢ å¯†ç è¾“å…¥è§£é”æœ¬åœ°é’±åŒ…\nâ€¢ â€œå¿˜è®°å¯†ç â€åˆ é™¤æœ¬åœ°æ•°æ® components/Register.tsx 1. è®¾ç½®å¯†ç ï¼ˆå¼ºåº¦æ ¡éªŒï¼‰\n2. åŠ å¯†å­˜å‚¨ lib/savePassword.ts æ ¸å¿ƒåŠ å¯†é€»è¾‘ï¼š\nâ€¢ å°†å¯†ç è¿›è¡Œ SHA256 å¤„ç†\nâ€¢ å­˜å…¥ IndexedDB 1. è¯¦ç»†äº¤äº’æµç¨‹ 1.1 é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥ è®¿é—®ä»»æ„é¡µé¢ â†’ AuthGuard æ£€æµ‹æœªç™»å½• â†’ é‡å®šå‘è‡³ /userManagement page.tsx æ£€æŸ¥ IndexedDB æ—  user:current æ•°æ® â†’ é»˜è®¤å±•ç¤º Register.tsx 1.2 åˆå§‹åŒ–å¯†ç æµç¨‹ é¦–æ¬¡ç™»å½•/å¿˜è®°å¯†ç  æ£€æŸ¥ IndexedDB æœ‰æ—  user:current, è‹¥æœ‰åˆ™åˆ é™¤æœ¬åœ° IndexedDB æ•°æ®åº“ç”¨æˆ·å’Œé’±åŒ…ç›¸å…³å†…å®¹ äºŒæ¬¡ç¡®è®¤å¯†ç åŠ å¯†å­˜å‚¨è‡³ IndexedDB 2. å®‰å…¨è®¾è®¡åŸåˆ™ å¯†ç æ°¸ä¸ä»¥æ˜æ–‡å½¢å¼å‡ºç°åœ¨å†…å­˜ã€ç½‘ç»œã€æ—¥å¿—ä¸­ åŠ©è®°è¯/ç§é’¥åªåœ¨å†…å­˜ä¸­çŸ­æ—¶å­˜åœ¨ï¼Œè§£å¯†åç«‹å³è¦†ç›– æ‰€æœ‰æ•æ„Ÿæ•°æ®å‡ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿçš„å¯†é’¥è¿›è¡Œ AES-GCM åŠ å¯†å­˜å‚¨ æä¾›â€œä¸€é”®åˆ é™¤æœ¬åœ°æ•°æ®â€åŠŸèƒ½ï¼ˆå¯¹åº”â€œå¿˜è®°å¯†ç â€åœºæ™¯ï¼‰ ","permalink":"http://localhost:1313/projects/0907wallet/usermanagement/","summary":"\u003ch1 id=\"æ¨¡å—æ¦‚è§ˆ\"\u003eæ¨¡å—æ¦‚è§ˆ\u003c/h1\u003e\n\u003cp\u003eğŸ‘‰ \u003ca href=\"https://github.com/cgcj0907/0907-Wallet/tree/main/app/userManagement\"\u003eæ¨¡å—ä»£ç ä»“åº“\u003c/a\u003e\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eé¡¹ç›®\u003c/th\u003e\n          \u003cth\u003eå†…å®¹\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eæ¨¡å—åç§°\u003c/td\u003e\n          \u003ctd\u003eç”¨æˆ·ç®¡ç†ï¼ˆUser Managementï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè·¯ç”±è·¯å¾„\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e/userManagement\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eåŠŸèƒ½èŒƒå›´\u003c/td\u003e\n          \u003ctd\u003eå¯†ç è®¾ç½®ã€å·²æœ‰é’±åŒ…ç™»å½•ã€æœ¬åœ°åŠ å¯†å­˜å‚¨\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè®¿é—®æƒé™\u003c/td\u003e\n          \u003ctd\u003eæœªç™»å½•çŠ¶æ€ä¸‹å¼ºåˆ¶è·³è½¬åˆ°æ­¤é¡µé¢ï¼Œå·²ç™»å½•æ”¾è¡Œ\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cul\u003e\n\u003cli\u003eç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eapp/userManage/\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”œâ”€â”€ components/\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”‚   â”œâ”€â”€ Login.tsx       \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”‚   â””â”€â”€ Register.tsx    \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”œâ”€â”€ lib/\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”‚   â””â”€â”€ savePassword.ts  \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ””â”€â”€ page.tsx            \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ–‡ä»¶è·¯å¾„\u003c/th\u003e\n          \u003cth\u003eèŒè´£è¯¦è§£\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003epage.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e1. è·¯ç”±å…¥å£\u003cbr\u003e2. æ£€æµ‹ IndexedDB æ˜¯å¦å·²æœ‰é’±åŒ…è®°å½•\u003cbr\u003e3. å·²ç™»å½• â†’ è·³è½¬ \u003ccode\u003e/\u003c/code\u003eï¼ˆé¦–é¡µï¼‰\u003cbr\u003e4. æœªç™»å½• â†’ æ¸²æŸ“ç™»å½•/æ³¨å†Œåˆ‡æ¢ç•Œé¢\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003ecomponents/Login.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eçº¯å±•ç¤ºç»„ä»¶ï¼š\u003cbr\u003eâ€¢ å¯†ç è¾“å…¥è§£é”æœ¬åœ°é’±åŒ…\u003cbr\u003eâ€¢ â€œå¿˜è®°å¯†ç â€åˆ é™¤æœ¬åœ°æ•°æ®\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003ecomponents/Register.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e1. è®¾ç½®å¯†ç ï¼ˆå¼ºåº¦æ ¡éªŒï¼‰\u003cbr\u003e2. åŠ å¯†å­˜å‚¨\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/savePassword.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæ ¸å¿ƒåŠ å¯†é€»è¾‘ï¼š\u003cbr\u003eâ€¢ å°†å¯†ç è¿›è¡Œ SHA256 å¤„ç†\u003cbr\u003eâ€¢ å­˜å…¥ IndexedDB\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2 id=\"1-è¯¦ç»†äº¤äº’æµç¨‹\"\u003e1. è¯¦ç»†äº¤äº’æµç¨‹\u003c/h2\u003e\n\u003ch3 id=\"11-é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥\"\u003e1.1 é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eè®¿é—®ä»»æ„é¡µé¢ â†’ \u003ccode\u003eAuthGuard\u003c/code\u003e æ£€æµ‹æœªç™»å½• â†’ é‡å®šå‘è‡³ \u003ccode\u003e/userManagement\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epage.tsx\u003c/code\u003e æ£€æŸ¥ IndexedDB æ—  \u003ccode\u003euser:current\u003c/code\u003e æ•°æ® â†’ é»˜è®¤å±•ç¤º \u003ccode\u003eRegister.tsx\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"12-åˆå§‹åŒ–å¯†ç æµç¨‹\"\u003e1.2 åˆå§‹åŒ–å¯†ç æµç¨‹\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eé¦–æ¬¡ç™»å½•/å¿˜è®°å¯†ç \u003c/li\u003e\n\u003cli\u003eæ£€æŸ¥ IndexedDB æœ‰æ—  \u003ccode\u003euser:current\u003c/code\u003e, è‹¥æœ‰åˆ™åˆ é™¤æœ¬åœ° IndexedDB æ•°æ®åº“ç”¨æˆ·å’Œé’±åŒ…ç›¸å…³å†…å®¹\u003c/li\u003e\n\u003cli\u003eäºŒæ¬¡ç¡®è®¤å¯†ç åŠ å¯†å­˜å‚¨è‡³ IndexedDB\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"2-å®‰å…¨è®¾è®¡åŸåˆ™\"\u003e2. å®‰å…¨è®¾è®¡åŸåˆ™\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eå¯†ç \u003cstrong\u003eæ°¸ä¸\u003c/strong\u003eä»¥æ˜æ–‡å½¢å¼å‡ºç°åœ¨å†…å­˜ã€ç½‘ç»œã€æ—¥å¿—ä¸­\u003c/li\u003e\n\u003cli\u003eåŠ©è®°è¯/ç§é’¥\u003cstrong\u003eåªåœ¨å†…å­˜ä¸­çŸ­æ—¶å­˜åœ¨\u003c/strong\u003eï¼Œè§£å¯†åç«‹å³è¦†ç›–\u003c/li\u003e\n\u003cli\u003eæ‰€æœ‰æ•æ„Ÿæ•°æ®å‡ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿçš„å¯†é’¥è¿›è¡Œ AES-GCM åŠ å¯†å­˜å‚¨\u003c/li\u003e\n\u003cli\u003eæä¾›â€œä¸€é”®åˆ é™¤æœ¬åœ°æ•°æ®â€åŠŸèƒ½ï¼ˆå¯¹åº”â€œå¿˜è®°å¯†ç â€åœºæ™¯ï¼‰\u003c/li\u003e\n\u003c/ul\u003e","title":"0907 Wallet ç”¨æˆ·ç®¡ç†æ¨¡å—è®¾è®¡"},{"content":"æ¨¡å—æ¦‚è§ˆ app â”œâ”€â”€ components â”‚ â”œâ”€â”€ AuthGuard.tsx â”‚ â”œâ”€â”€ InitProvider.tsx â”‚ â””â”€â”€ Logo.tsx â”œâ”€â”€ globals.css â”œâ”€â”€ layout.tsx â”œâ”€â”€ lib â”œâ”€â”€ auth.ts â”œâ”€â”€ storage.ts â””â”€â”€ transform.ts å…¬ç”¨åº“( lib ) auth hash storage å…¬ç”¨ç»„ä»¶( components ) AuthGuard Initialer Logo 1. å…¬ç”¨åº“è®¾è®¡ auth.ts // app/lib/auth.ts /** * @file é’±åŒ…è®¤è¯ä¸è´¦æˆ·ç®¡ç†æ ¸å¿ƒæ¨¡å— * @description è´Ÿè´£é’±åŒ…è¿æ¥ã€ç­¾åéªŒè¯ã€ç™»å½•çŠ¶æ€æŒä¹…åŒ–ã€ç™»å‡ºç­‰å®Œæ•´è®¤è¯æµç¨‹ * æ”¯æŒ MetaMaskã€WalletConnectã€Coinbase Wallet ç­‰ä¸»æµé’±åŒ… * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-08-16 */ export const LOGIN_FLAG_KEY = \u0026#39;isLoggedIn\u0026#39;; export const LOGIN_EXPIRES_KEY = \u0026#39;loginExpiresAt\u0026#39;; const DEFAULT_EXPIRE_MINUTES = 10; /**è·å–è¿‡æœŸæ—¶é—´ */ export function getLoginExpiresAt(): number | null {} /**æ£€æŸ¥ç™»å½•çŠ¶æ€æ˜¯å¦åˆæ³• */ export function isLoggedInLocal(): boolean {} /** åˆ·æ–°è¿‡æœŸæ—¶é—´ï¼ˆé»˜è®¤ +10 åˆ†é’Ÿï¼‰å¹¶ç¡®ä¿ flag = \u0026#39;1\u0026#39; */ export function refreshLoginExpiry(minutes = DEFAULT_EXPIRE_MINUTES) {} /** é€€å‡ºç™»å½•ï¼ˆæœ¬åœ°æ¸…ç†ï¼‰ */ export function logoutLocal() {} transform.ts // @/app/lib/hash.ts /** * @file å¯†ç å“ˆå¸Œä¸ ArrayBuffer/Base64 äº’è½¬å·¥å…· * @description æä¾›å®‰å…¨çš„å¯†ç  SHA-256 å“ˆå¸Œï¼ˆè¿”å› Base64ï¼‰å’Œé«˜æ€§èƒ½çš„äºŒè¿›åˆ¶ â†” Base64 è½¬æ¢å·¥å…· * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-11-27 */ /** * å°† ArrayBuffer è½¬æ¢ä¸º Base64 å­—ç¬¦ä¸² * * ä½¿ç”¨ Uint8Array + btoa çš„ç»å…¸å†™æ³•ï¼Œæ¯” Buffer.toString(\u0026#39;base64\u0026#39;) æ›´å…¼å®¹æµè§ˆå™¨ç¯å¢ƒ * * @param buffer è¦è½¬æ¢çš„ ArrayBuffer * @returns Base64 ç¼–ç å­—ç¬¦ä¸² * @example * const b64 = arrayBufferToBase64(hashBuffer); */ export function arrayBufferToBase64(buffer: ArrayBuffer): string {} /** * å°† Base64 å­—ç¬¦ä¸²è½¬æ¢ä¸º Uint8Array * * @param base64 Base64 ç¼–ç çš„å­—ç¬¦ä¸² * @returns å¯¹åº”çš„ Uint8Array * @example * const uint8 = base64ToUint8Array(storedHash); */ export function base64ToUint8Array(base64: string): Uint8Array {} /** * å¯¹æ˜æ–‡å¯†ç è¿›è¡Œå®‰å…¨çš„ SHA-256 å“ˆå¸Œï¼Œå¹¶è¿”å› Base64 ç¼–ç ç»“æœ * * ä½¿ç”¨ Web Crypto APIï¼ˆcrypto.subtleï¼‰ï¼Œåœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ä¸­å‡ä¸ºåŸç”Ÿå®ç°ï¼Œå®‰å…¨ä¸”é«˜æ€§èƒ½ã€‚ * * @param password æ˜æ–‡å¯†ç  * @returns SHA-256 å“ˆå¸Œåçš„ Base64 å­—ç¬¦ä¸²ï¼ˆå›ºå®š 44 å­—ç¬¦ï¼‰ * @example * const hashed = await hashPassword(\u0026#39;mySecret123\u0026#39;); * // â†’ \u0026#34;iOcJ9qP3b...==\u0026#34; */ export async function hashPassword(password: string): Promise\u0026lt;string\u0026gt; {} storage.ts ğŸ‘‰ å…³äº IndexedDB çš„ä½¿ç”¨æ–¹æ³•è¯·è§ï¼šIndexedDB æµè§ˆå™¨æ•°æ®åº“\n// app/lib/storage.ts /** * @file IndexedDB è½»é‡å°è£…å·¥å…·ï¼ˆæŒ‰éœ€æ‡’åˆ›å»º objectStoreï¼‰ * @description æä¾›ç±»ä¼¼ localStorage çš„ç®€æ´ APIï¼Œæ”¯æŒè‡ªåŠ¨å‡çº§ç‰ˆæœ¬åˆ›å»ºè¡¨ï¼Œé¿å…é¢„è®¾ schema * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-11-27 */ import { openDB, IDBPDatabase } from \u0026#39;idb\u0026#39;; const DB_NAME = \u0026#39;0907wallet-db\u0026#39;; const DEFAULT_STORE_NAME = \u0026#39;users\u0026#39;; /** * åˆå§‹åŒ–ï¼ˆæˆ–æ‰“å¼€ï¼‰IndexedDB æ•°æ®åº“ * * æ•°æ®åº“ä¸å­˜åœ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºç‰ˆæœ¬ 1ï¼Œä¸”ä¸é¢„åˆ›å»ºä»»ä½• objectStoreï¼Œ * æ‰€æœ‰è¡¨éƒ½é€šè¿‡ ensureStore æŒ‰éœ€æ‡’åˆ›å»ºï¼Œä¿æŒæœ€å°çš„åˆå§‹ schemaã€‚ * * @returns IndexedDB æ•°æ®åº“å®ä¾‹ * @example * const db = await initDB(); */ export async function initDB(): Promise\u0026lt;IDBPDatabase\u0026gt; {} /** * ç¡®ä¿æŒ‡å®šåç§°çš„ objectStore å­˜åœ¨ï¼ˆå†…éƒ¨ç§æœ‰å‡½æ•°ï¼‰ * * å¦‚æœè¡¨ä¸å­˜åœ¨ï¼Œä¼šå…³é—­å½“å‰è¿æ¥ â†’ ç‰ˆæœ¬ +1 â†’ åœ¨ upgrade äº‹åŠ¡ä¸­åˆ›å»ºè¡¨ã€‚ * è¿™æ˜¯ IndexedDB çš„ç¡¬æ€§é™åˆ¶ï¼šåªæœ‰ versionchange äº‹åŠ¡æ‰èƒ½åˆ›å»º/åˆ é™¤ objectStoreã€‚ * * @param db å½“å‰æ•°æ®åº“å®ä¾‹ * @param storeName è¦ç¡®ä¿å­˜åœ¨çš„è¡¨å * @returns åŒ…å«è¯¥è¡¨çš„æœ€æ–°æ•°æ®åº“å®ä¾‹ */ async function ensureObjectStoreExists( db: IDBPDatabase, storeName: string, ): Promise\u0026lt;IDBPDatabase\u0026gt; {} /** * æ ¹æ® key ä»æŒ‡å®šè¡¨ä¸­è¯»å–æ•°æ® * * @param key é”®å * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @returns å¯¹åº”çš„å€¼ï¼Œè‹¥ä¸å­˜åœ¨è¿”å› undefined * @example * const user = await get(\u0026#39;currentUser\u0026#39;); */ export async function get\u0026lt;T = unknown\u0026gt;( key: string, table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;T | undefined\u0026gt; {} /** * å‘æŒ‡å®šè¡¨ä¸­å†™å…¥æˆ–æ›´æ–°æ•°æ® * * @param key é”®å * @param value è¦å­˜å‚¨çš„å€¼ï¼ˆå¿…é¡»æ”¯æŒç»“æ„åŒ–å…‹éš†ï¼‰ * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @example * await set(\u0026#39;currentUser\u0026#39;, { address: \u0026#39;0x...\u0026#39;, name: \u0026#39;Alice\u0026#39; }); */ export async function set\u0026lt;T = unknown\u0026gt;( key: string, value: T, table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;void\u0026gt; {} /** * æ ¹æ® key åˆ é™¤æŒ‡å®šè¡¨ä¸­çš„è®°å½• * * @param key é”®å * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; */ export async function del( key: string, table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;void\u0026gt; {} /** * æ¸…ç©ºæŒ‡å®šè¡¨çš„æ‰€æœ‰è®°å½• * * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; */ export async function clear(table: string = DEFAULT_STORE_NAME): Promise\u0026lt;void\u0026gt; {} /** * è·å–æŒ‡å®šè¡¨ä¸­æ‰€æœ‰ key * * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @returns key æ•°ç»„ */ export async function keys( table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;IDBValidKey[]\u0026gt; {} /** * è·å–æŒ‡å®šè¡¨ä¸­æ‰€æœ‰å€¼ï¼ˆä¸åŒ…å« keyï¼‰ * * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @returns å€¼æ•°ç»„ */ export async function values\u0026lt;T = unknown\u0026gt;( table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;T[]\u0026gt; {} /** * è·å–æŒ‡å®šè¡¨çš„è®°å½•æ€»æ•° * * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @returns è®°å½•æ•°é‡ */ export async function count(table: string = DEFAULT_STORE_NAME): Promise\u0026lt;number\u0026gt; {} 2. å…¬ç”¨ç»„ä»¶è®¾è®¡ AuthGard.tsx // app/components/AuthGuard.tsx /** * @file å…¨å±€è·¯ç”±æƒé™å®ˆå«ï¼ˆå®¢æˆ·ç«¯ç»„ä»¶ï¼‰ * @description * 1. æœªç™»å½• â†’ å¼ºåˆ¶è·³è½¬ /userLoginï¼ˆå…¬å¼€é¡µé™¤å¤–ï¼‰ * 2. å·²ç™»å½•ä½†æ— é’±åŒ… â†’ å¼ºåˆ¶è·³è½¬ /generateWallet * 3. å…¨éƒ¨é€šè¿‡ â†’ æ”¾è¡Œå¹¶è‡ªåŠ¨åˆ·æ–°ç™»å½•æœ‰æ•ˆæœŸ * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-11-27 */ \u0026#39;use client\u0026#39;; import React, { useEffect, useState } from \u0026#39;react\u0026#39;; import { useRouter, usePathname } from \u0026#39;next/navigation\u0026#39;; import { count } from \u0026#39;@/app/lib/storage\u0026#39;; import * as auth from \u0026#39;@/app/lib/auth\u0026#39;; interface AuthGuardProps { /** è¦æ¸²æŸ“çš„å­å†…å®¹ï¼ˆå—ä¿æŠ¤çš„é¡µé¢ï¼‰ */ children: React.ReactNode; } // å…¬å¼€è·¯å¾„ï¼šæ— éœ€ç™»å½•å³å¯è®¿é—® const PUBLIC_PATHS = [\u0026#39;/userLogin\u0026#39;, \u0026#39;/generateWallet\u0026#39;] as const; // é’±åŒ…å­˜å‚¨è¡¨åï¼ˆé¿å…é­”æ³•å€¼ï¼‰ const WALLETS_STORE_NAME = \u0026#39;Wallets\u0026#39;; export default function AuthGuard({ children }: AuthGuardProps): React.ReactElement { const router = useRouter(); const pathname = usePathname(); const [isChecking, setIsChecking] = useState\u0026lt;boolean\u0026gt;(true); useEffect(() =\u0026gt; { let isMounted = true; /** * æ ¸å¿ƒé‰´æƒé€»è¾‘ * ä¸ºä»€ä¹ˆæ”¾åœ¨ useEffect é‡Œå•ç‹¬æ‰§è¡Œï¼Ÿ * - é¿å…é˜»å¡æ¸²æŸ“ * - éœ€è¦ async/await å¿…é¡»å°è£…åœ¨å‡½æ•°å†… * - é…åˆ isMounted é˜²æ­¢å†…å­˜æ³„æ¼ */ async function performAuthCheck(): Promise\u0026lt;void\u0026gt; { try { // pathname å¯èƒ½ä¸º nullï¼ˆNext.js æŸäº›è¾¹ç¼˜æƒ…å†µï¼‰ if (!pathname) { if (isMounted) setIsChecking(false); return; } const isPublicPath = PUBLIC_PATHS.includes(pathname as any); // Step 1: æ£€æŸ¥æœ¬åœ°ç™»å½•æ€ï¼ˆåŒæ­¥å¿«é€Ÿï¼‰ const isLoggedIn = auth.isLoggedInLocal(); if (!isLoggedIn \u0026amp;\u0026amp; !isPublicPath) { router.replace(\u0026#39;/userLogin\u0026#39;); if (isMounted) setIsChecking(false); return; } // Step 2: å·²ç™»å½• â†’ æ£€æŸ¥æ˜¯å¦å·²åˆ›å»ºé’±åŒ… if (isLoggedIn) { const walletCount = await count(WALLETS_STORE_NAME); // count è¿”å› numberï¼Œ0 è¡¨ç¤ºæ— é’±åŒ… const hasWallet = walletCount \u0026gt; 0; if (!hasWallet \u0026amp;\u0026amp; pathname !== \u0026#39;/generateWallet\u0026#39;) { router.replace(\u0026#39;/generateWallet\u0026#39;); if (isMounted) setIsChecking(false); return; } } // Step 3: å…¨éƒ¨é€šè¿‡ â†’ åˆ·æ–°ç™»å½•æœ‰æ•ˆæœŸå¹¶æ”¾è¡Œ if (isMounted) { auth.refreshLoginExpiry(); // å»¶é•¿æœ¬åœ°ç™»å½•æ€è¿‡æœŸæ—¶é—´ setIsChecking(false); } } catch (error) { // ä¸ºä»€ä¹ˆ catch åç›´æ¥è·³è½¬ç™»å½•ï¼Ÿ // IndexedDB å¼‚å¸¸ã€æœ¬åœ°å­˜å‚¨æŸåç­‰éƒ½è§†ä¸ºâ€œä¸å®‰å…¨çŠ¶æ€â€ï¼Œå¿…é¡»é‡æ–°ç™»å½• console.error(\u0026#39;[AuthGuard] é‰´æƒè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸:\u0026#39;, error); if (isMounted) { setIsChecking(false); router.replace(\u0026#39;/userLogin\u0026#39;); } } } performAuthCheck(); // æ¸…ç†å‡½æ•° return () =\u0026gt; { isMounted = false; }; }, [pathname, router]); // Loading çŠ¶æ€ï¼šå…¨å±å±…ä¸­åŠ¨æ•ˆ if (isChecking) { return ( \u0026lt;div className=\u0026#34;min-h-screen flex flex-col items-center justify-center bg-gray-50\u0026#34;\u0026gt; \u0026lt;p className=\u0026#34;text-gray-600 text-lg mb-4 animate-pulse\u0026#34;\u0026gt; æ­£åœ¨éªŒè¯æˆæƒ... \u0026lt;/p\u0026gt; \u0026lt;div className=\u0026#34;w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin\u0026#34; /\u0026gt; \u0026lt;/div\u0026gt; ); } // é‰´æƒé€šè¿‡ï¼šæ¸²æŸ“å­å†…å®¹ return \u0026lt;\u0026gt;{children}\u0026lt;/\u0026gt;; } InitProvider.tsx \u0026#39;use client\u0026#39; import { useState } from \u0026#39;react\u0026#39;; import clsx from \u0026#39;clsx\u0026#39;; /** * @file Logo ç»„ä»¶ï¼ˆé¦–é¡µ/å¯¼èˆªæ ä¸» Logoï¼‰ * @description å¸¦æ‚¬åœäº¤äº’çš„åœ†å½¢ Logoï¼Œé¼ æ ‡æ‚¬åœæ—¶å‘ä¸Šæµ®èµ·å¹¶å±•ç¤ºæ–‡å­—è¯´æ˜ï¼Œæ”¯æŒç¼“æ…¢å¼¹è·³åŠ¨ç”» * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-11-27 */ /** * ä¸» Logo ç»„ä»¶ * - é»˜è®¤çŠ¶æ€ï¼šLogo å‘ä¸‹ä½ç§»ä¸€åŠï¼Œé®æŒ¡ä¸‹æ–¹æ–‡å­—åŒºåŸŸï¼ˆè§†è§‰ä¸Šå½¢æˆâ€œåŠéšè—â€æ•ˆæœï¼‰ * - æ‚¬åœçŠ¶æ€ï¼šLogo ä¸Šç§»è‡³æ­£å¸¸ä½ç½®ï¼ŒåŒæ—¶ä¸‹æ–¹æ–‡å­—å¡ç‰‡ä» 0 é«˜åº¦å±•å¼€ * - ä½¿ç”¨ z-[-1]/z-[-2] ä¿è¯å›¾ç‰‡å§‹ç»ˆåœ¨æ–‡å­—å¡ç‰‡ä¸Šæ–¹ï¼Œä½†æ•´ä½“è¢«å¤–éƒ¨å®¹å™¨è£å‰ª */ export default function Logo() { // hover çŠ¶æ€æ§åˆ¶æ•´ä¸ªäº¤äº’åŠ¨ç”»çš„å¼€å¯ä¸å…³é—­ const [hover, setHover] = useState(false); return ( // å¤–å±‚å®¹å™¨ï¼šç›¸å¯¹å®šä½ï¼Œç”¨äºæ§åˆ¶å­å…ƒç´ çš„ç»å¯¹/å›ºå®šå®šä½åŸºå‡†ï¼ŒåŒæ—¶å‚ç›´å±…ä¸­æ’åˆ— \u0026lt;div className=\u0026#34;relative flex flex-col items-center\u0026#34; onMouseEnter={() =\u0026gt; setHover(true)} onMouseLeave={() =\u0026gt; setHover(false)} \u0026gt; {/* å›¾ç‰‡ Logoï¼ˆä¸»è§†è§‰å…ƒç´ ï¼‰ */} \u0026lt;div className={clsx( // è´Ÿ z-index è®©å›¾ç‰‡åœ¨æ–‡å­—å¡ç‰‡ä¹‹ä¸‹ï¼Œä½†é€šè¿‡ translate-y åˆ¶é€ â€œæµ®åœ¨å‰é¢â€çš„è§†è§‰é”™ä½ // w-86/h-86 â‰ˆ 344pxï¼ˆTailwind è‡ªå®šä¹‰å•ä½ï¼‰ï¼Œåœ†å½¢è£å‰ª + æº¢å‡ºéšè— + é˜´å½± + å¹³æ»‘ä½ç§»åŠ¨ç”» \u0026#34;z-[-1] w-86 h-86 rounded-full overflow-hidden cursor-pointer shadow-lg transition-transform duration-300\u0026#34;, // æœªæ‚¬åœæ—¶å‘ä¸‹ä½ç§» 48ï¼ˆ192pxï¼‰ï¼Œåˆšå¥½é®ä½ä¸‹æ–¹æ–‡å­—å¡ç‰‡ä¸€åŠï¼Œå½¢æˆæ‚¬å¿µæ„Ÿ // æ‚¬åœæ—¶æ¢å¤åŸä½ï¼Œè§†è§‰ä¸Šåƒâ€œLogo å‘ä¸Šæµ®èµ·â€ hover ? \u0026#34;translate-y-0\u0026#34; : \u0026#34;translate-y-48\u0026#34; )} \u0026gt; {/* Logo å›¾ç‰‡è‡ªé€‚åº”é“ºæ»¡å®¹å™¨ï¼Œä¿æŒåŸå§‹æ¯”ä¾‹ä¸è¢«æ‹‰ä¼¸ */} \u0026lt;img src=\u0026#34;/logo.png\u0026#34; alt=\u0026#34;Logo\u0026#34; className=\u0026#34;w-full h-full object-cover\u0026#34; /\u0026gt; \u0026lt;/div\u0026gt; {/* æ–‡å­—è¯´æ˜å¡ç‰‡åŒºåŸŸï¼ˆé»˜è®¤å®Œå…¨æ”¶èµ·ï¼Œæ‚¬åœæ—¶é€šè¿‡ max-h å±•å¼€ï¼‰ */} \u0026lt;div className={clsx( // ä½¿ç”¨ overflow-hidden + max-h å®ç°å¹³æ»‘çš„å±•å¼€/æ”¶èµ·åŠ¨ç”» // mt-2 ç»™å¡ç‰‡ç•™å‡ºä¸€ç‚¹ä¸Šè¾¹è·ï¼Œé¿å…ç´§è´´ Logo \u0026#34;z-[-2] overflow-hidden transition-all duration-300 mt-2\u0026#34;, hover ? \u0026#34;max-h-40\u0026#34; : \u0026#34;max-h-0\u0026#34; )} \u0026gt; {/* æ–‡å­—å¡ç‰‡æœ¬ä½“ï¼šåœ†è§’èƒŒæ™¯ + å†…è¾¹è· + å›ºå®šå®½åº¦ + æ–‡å­—å±…ä¸­ + ç¼“æ…¢å¼¹è·³åŠ¨ç”» */} \u0026lt;div className=\u0026#34;rounded-2xl p-3 w-40 text-center flex flex-col items-center gap-1 animate-bounce-slow\u0026#34;\u0026gt; {/* ä¸»æ ‡é¢˜ */} \u0026lt;p className=\u0026#34;text-sm font-semibold text-blue-500 flex items-center justify-center gap-1\u0026#34;\u0026gt; 0907 Wallet \u0026lt;/p\u0026gt; {/* å‰¯æ ‡é¢˜ï¼ˆæŠ€æœ¯æ”¯æŒå£°æ˜ï¼‰ */} \u0026lt;p className=\u0026#34;text-xs text-blue-300\u0026#34;\u0026gt;Supported by SST\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ); } ","permalink":"http://localhost:1313/projects/0907wallet/public/","summary":"\u003ch1 id=\"æ¨¡å—æ¦‚è§ˆ\"\u003eæ¨¡å—æ¦‚è§ˆ\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ components\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â”œâ”€â”€ AuthGuard.tsx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â”œâ”€â”€ InitProvider.tsx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â””â”€â”€ Logo.tsx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ globals.css\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ layout.tsx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ lib\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    â”œâ”€â”€ auth.ts\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    â”œâ”€â”€ storage.ts\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    â””â”€â”€ transform.ts\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eå…¬ç”¨åº“( lib )\n\u003cul\u003e\n\u003cli\u003eauth\u003c/li\u003e\n\u003cli\u003ehash\u003c/li\u003e\n\u003cli\u003estorage\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eå…¬ç”¨ç»„ä»¶( components )\n\u003cul\u003e\n\u003cli\u003eAuthGuard\u003c/li\u003e\n\u003cli\u003eInitialer\u003c/li\u003e\n\u003cli\u003eLogo\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"1-å…¬ç”¨åº“è®¾è®¡\"\u003e1. å…¬ç”¨åº“è®¾è®¡\u003c/h2\u003e\n\u003ch3 id=\"authts\"\u003eauth.ts\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// app/lib/auth.ts\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @file é’±åŒ…è®¤è¯ä¸è´¦æˆ·ç®¡ç†æ ¸å¿ƒæ¨¡å—\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @description è´Ÿè´£é’±åŒ…è¿æ¥ã€ç­¾åéªŒè¯ã€ç™»å½•çŠ¶æ€æŒä¹…åŒ–ã€ç™»å‡ºç­‰å®Œæ•´è®¤è¯æµç¨‹\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *              æ”¯æŒ MetaMaskã€WalletConnectã€Coinbase Wallet ç­‰ä¸»æµé’±åŒ…\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @author Guangyang Zhong | github: https://github.com/cgcj0907\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @date 2025-08-16\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eLOGIN_FLAG_KEY\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;isLoggedIn\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eLOGIN_EXPIRES_KEY\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;loginExpiresAt\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eDEFAULT_EXPIRE_MINUTES\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**è·å–è¿‡æœŸæ—¶é—´ */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003egetLoginExpiresAt\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003enumber\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**æ£€æŸ¥ç™»å½•çŠ¶æ€æ˜¯å¦åˆæ³• */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eisLoggedInLocal\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"kr\"\u003eboolean\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/** åˆ·æ–°è¿‡æœŸæ—¶é—´ï¼ˆé»˜è®¤ +10 åˆ†é’Ÿï¼‰å¹¶ç¡®ä¿ flag = \u0026#39;1\u0026#39; */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003erefreshLoginExpiry\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eminutes\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eDEFAULT_EXPIRE_MINUTES\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/** é€€å‡ºç™»å½•ï¼ˆæœ¬åœ°æ¸…ç†ï¼‰ */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003elogoutLocal() {\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"transformts\"\u003etransform.ts\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// @/app/lib/hash.ts\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @file å¯†ç å“ˆå¸Œä¸ ArrayBuffer/Base64 äº’è½¬å·¥å…·\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @description æä¾›å®‰å…¨çš„å¯†ç  SHA-256 å“ˆå¸Œï¼ˆè¿”å› Base64ï¼‰å’Œé«˜æ€§èƒ½çš„äºŒè¿›åˆ¶ â†” Base64 è½¬æ¢å·¥å…·\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @author Guangyang Zhong | github: https://github.com/cgcj0907\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @date 2025-11-27\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * å°† ArrayBuffer è½¬æ¢ä¸º Base64 å­—ç¬¦ä¸²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * ä½¿ç”¨ Uint8Array + btoa çš„ç»å…¸å†™æ³•ï¼Œæ¯” Buffer.toString(\u0026#39;base64\u0026#39;) æ›´å…¼å®¹æµè§ˆå™¨ç¯å¢ƒ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param buffer è¦è½¬æ¢çš„ ArrayBuffer\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @returns Base64 ç¼–ç å­—ç¬¦ä¸²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @example\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * const b64 = arrayBufferToBase64(hashBuffer);\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003earrayBufferToBase64\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ebuffer\u003c/span\u003e: \u003cspan class=\"kt\"\u003eArrayBuffer\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * å°† Base64 å­—ç¬¦ä¸²è½¬æ¢ä¸º Uint8Array\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param base64 Base64 ç¼–ç çš„å­—ç¬¦ä¸²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @returns å¯¹åº”çš„ Uint8Array\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @example\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * const uint8 = base64ToUint8Array(storedHash);\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003ebase64ToUint8Array\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ebase64\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003eUint8Array\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * å¯¹æ˜æ–‡å¯†ç è¿›è¡Œå®‰å…¨çš„ SHA-256 å“ˆå¸Œï¼Œå¹¶è¿”å› Base64 ç¼–ç ç»“æœ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * ä½¿ç”¨ Web Crypto APIï¼ˆcrypto.subtleï¼‰ï¼Œåœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ä¸­å‡ä¸ºåŸç”Ÿå®ç°ï¼Œå®‰å…¨ä¸”é«˜æ€§èƒ½ã€‚\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param password æ˜æ–‡å¯†ç \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @returns SHA-256 å“ˆå¸Œåçš„ Base64 å­—ç¬¦ä¸²ï¼ˆå›ºå®š 44 å­—ç¬¦ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @example\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * const hashed = await hashPassword(\u0026#39;mySecret123\u0026#39;);\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * // â†’ \u0026#34;iOcJ9qP3b...==\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kr\"\u003easync\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003ehashPassword\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003epassword\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003ePromise\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"storagets\"\u003estorage.ts\u003c/h3\u003e\n\u003cp\u003eğŸ‘‰ \u003ca href=\"/toolkits/indexedDB\"\u003eå…³äº IndexedDB çš„ä½¿ç”¨æ–¹æ³•è¯·è§ï¼šIndexedDB æµè§ˆå™¨æ•°æ®åº“\u003c/a\u003e\u003c/p\u003e","title":"0907 Wallet ç³»ç»Ÿå…¬ç”¨å±‚è®¾è®¡"},{"content":"ç®€ä»‹ Vector æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½æ—¥å¿—ä¸æŒ‡æ ‡é‡‡é›†ä»£ç†ï¼Œå®ƒä»å„ç§ source æ”¶é›†æ•°æ®ï¼Œç»è¿‡ transform å¤„ç†åå‘é€åˆ° sinkï¼ˆå¦‚ Lokiã€ClickHouseã€Kafkaã€Elasticsearch ç­‰ï¼‰\nå®ƒçš„ç‰¹ç‚¹æ˜¯é«˜ååã€ä½å»¶è¿Ÿã€æ— éœ€ä¾èµ– JVMã€è½»é‡å¥½éƒ¨ç½²ï¼Œéå¸¸é€‚åˆè¾¹ç¼˜èŠ‚ç‚¹å’Œå®¹å™¨ç¯å¢ƒ æœ¬æ–‡ä¸»è¦è®²è¿° Events å’Œ Compnents\n1. é…ç½®ç»“æ„æ¦‚è§ˆ Vector æœ‰ä¸¤ç§æ•°æ®æ¨¡å‹ (Data Model), åˆç§°äº‹ä»¶(Events):\nLogs: ç”¨äºè¡¨ç¤ºç»“æ„åŒ–æˆ–éç»“æ„åŒ–æ—¥å¿—æ•°æ® metrics: ç”¨äºè¡¨ç¤ºæŒ‡æ ‡æ•°æ® Vector çš„é…ç½®ç”±ä¸‰ä¸ªæ ¸å¿ƒéƒ¨åˆ† (Compnets) ç»„æˆï¼š\nsourcesï¼šæ•°æ®é‡‡é›†æº transformsï¼šæ•°æ®å¤„ç†ä¸è§£æ sinksï¼šè¾“å‡ºç›®æ ‡ 2. Data model(events) Log events Hereâ€™s an example representation of a log event (as JSON):\n{ \u0026#34;log\u0026#34;: { \u0026#34;custom\u0026#34;: \u0026#34;field\u0026#34;, \u0026#34;host\u0026#34;: \u0026#34;my.host.com\u0026#34;, \u0026#34;message\u0026#34;: \u0026#34;Hello world\u0026#34;, \u0026#34;timestamp\u0026#34;: \u0026#34;2020-11-01T21:15:47+00:00\u0026#34; } } Metric event æ­¤å¤„ç•™ç»™ä»¥åæ’°å†™\n3. Compnents 3.1 source è¯¦ç»†é…ç½®è¯·è§ ğŸ‘‰ Sources reference\næ­¤å¤„åªè¯¦ç»†ä»‹ç»ä»¥ File ä¸º source\nExample configurations(é…ç½®æ–‡ä»¶å‡ä¸º toml, ä¸‹åŒ)\n# minimal [sources.my_source_id] type = \u0026#34;file\u0026#34; include = [ \u0026#34;/var/log/**/*.log\u0026#34; ] 3.2 transform è¯¦ç»†é…ç½®è¯·è§ ğŸ‘‰ Sources reference\næ­¤å¤„åªè¯¦ç»†ä»‹ç» Remap with VRL(å³é‡æ–°åŒ¹é…)\n3.2.1 Parse key/value (logfmt) logs ä»¥ key/value å½¢å¼çš„æ—¥å¿—ä¸ºä¾‹\næ³¨æ„ä¸‹é¢çš„æ•°æ®æ ¼å¼ç»è¿‡ source å¤„ç†è¿‡ (ä¼šåŠ ä¸Š log å’Œ message åŒ…è£¹), æˆ‘ä»¬å†™å…¥çš„æ—¥å¿—æ–‡ä»¶ä¸­ä¸å¿…åœ¨å¤–é¢åŠ ä¸Š log å’Œ message åŒ…è£¹, ä¸ç„¶ä¼šå¯¼è‡´äºŒæ¬¡åŒ…è£¹, transform æ‰¾ä¸åˆ°æˆ‘ä»¬çœŸæ­£çš„æ—¥å¿—æ•°æ®\n{ \u0026#34;log\u0026#34;: { \u0026#34;message\u0026#34;: \u0026#34;@timestamp=\\\u0026#34;Sun Jan 10 16:47:39 EST 2021\\\u0026#34; level=info msg=\\\u0026#34;Stopping all fetchers\\\u0026#34; tag#production=stopping_fetchers id=ConsumerFetcherManager-1382721708341 module=kafka.consumer.ConsumerFetcherManager\u0026#34; } } Example configurations\n[transforms.my_transform_id] type = \u0026#34;remap\u0026#34; inputs = [ \u0026#34;my-source-or-transform-id\u0026#34; ] source = \u0026#34;. = parse_key_value!(.message)\u0026#34; 3.2.2 Parse custom logs å¦‚æœæœ‰æ•°æ®ç±»å‹çš„éœ€è¦, è¿˜éœ€è¦åœ¨é…ç½®ä¸­è¿›è¡Œæ•°æ®è½¬æ¢, å› ä¸ºé»˜è®¤è§£æå‡ºæ¥çš„æ˜¯ string Example configurations\n# Coerce parsed fields .timestamp = parse_timestamp(.timestamp, \u0026#34;%Y/%m/%d %H:%M:%S %z\u0026#34;) ?? now() .pid = to_int!(.pid) .tid = to_int!(.tid) 3.3 sink è¯¦ç»†é…ç½®è¯·è§ ğŸ‘‰ Sources reference\næ­¤å¤„åªè¯¦ç»†ä»‹ç»å¦‚ä½•è¾“å‡ºåˆ° ClickHouse Example configurations\n[sinks.my_sink_id] type = \u0026#34;clickhouse\u0026#34; inputs = [ \u0026#34;my-source-or-transform-id\u0026#34; ] endpoint = \u0026#34;http://localhost:8123\u0026#34; table = \u0026#34;mytable\u0026#34; å¦‚æœè¿˜éœ€è¦è®¤è¯ç™»å½•, æ­¤å¤„ä»¥ç”¨æˆ·å¯†ç ç™»å½•ä¸ºä¾‹\n[sinks.my_sink_id.auth] strategy = \u0026#34;basic\u0026#34; user = \u0026#34;default\u0026#34; password = \u0026#34;your_password\u0026#34; å…³äº ClickHouse æ•°æ®åº“çš„ä½¿ç”¨è§ç¬”è®° ğŸ‘‰é«˜æ€§èƒ½æ•°æ®åº“ ClickHouse\n","permalink":"http://localhost:1313/toolkits/vector/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eVector æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½æ—¥å¿—ä¸æŒ‡æ ‡é‡‡é›†ä»£ç†ï¼Œå®ƒä»å„ç§ source æ”¶é›†æ•°æ®ï¼Œç»è¿‡ transform å¤„ç†åå‘é€åˆ° sinkï¼ˆå¦‚ Lokiã€ClickHouseã€Kafkaã€Elasticsearch ç­‰ï¼‰\u003cbr\u003e\nå®ƒçš„ç‰¹ç‚¹æ˜¯é«˜ååã€ä½å»¶è¿Ÿã€æ— éœ€ä¾èµ– JVMã€è½»é‡å¥½éƒ¨ç½²ï¼Œéå¸¸é€‚åˆè¾¹ç¼˜èŠ‚ç‚¹å’Œå®¹å™¨ç¯å¢ƒ\næœ¬æ–‡ä¸»è¦è®²è¿° \u003ccode\u003eEvents\u003c/code\u003e å’Œ \u003ccode\u003eCompnents\u003c/code\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-é…ç½®ç»“æ„æ¦‚è§ˆ\"\u003e1. é…ç½®ç»“æ„æ¦‚è§ˆ\u003c/h2\u003e\n\u003cp\u003eVector æœ‰ä¸¤ç§æ•°æ®æ¨¡å‹ (Data Model), åˆç§°äº‹ä»¶(Events):\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eLogs\u003c/strong\u003e: ç”¨äºè¡¨ç¤ºç»“æ„åŒ–æˆ–éç»“æ„åŒ–æ—¥å¿—æ•°æ®\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003emetrics\u003c/strong\u003e: ç”¨äºè¡¨ç¤ºæŒ‡æ ‡æ•°æ®\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eVector çš„é…ç½®ç”±ä¸‰ä¸ªæ ¸å¿ƒéƒ¨åˆ† (Compnets) ç»„æˆï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003esources\u003c/strong\u003eï¼šæ•°æ®é‡‡é›†æº\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003etransforms\u003c/strong\u003eï¼šæ•°æ®å¤„ç†ä¸è§£æ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003esinks\u003c/strong\u003eï¼šè¾“å‡ºç›®æ ‡\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"2-data-modelevents\"\u003e2. Data model(events)\u003c/h2\u003e\n\u003cp\u003e\u003cimg alt=\"Data model\" loading=\"lazy\" src=\"/Toolkits/vector/Data_model.webp\"\u003e\u003c/p\u003e\n\u003ch3 id=\"log-events\"\u003eLog events\u003c/h3\u003e\n\u003cp\u003eHereâ€™s an example representation of a log event (as JSON):\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-log\" data-lang=\"log\"\u003e{\n  \u0026#34;log\u0026#34;: {\n    \u0026#34;custom\u0026#34;: \u0026#34;field\u0026#34;,\n    \u0026#34;host\u0026#34;: \u0026#34;my.host.com\u0026#34;,\n    \u0026#34;message\u0026#34;: \u0026#34;Hello world\u0026#34;,\n    \u0026#34;timestamp\u0026#34;: \u0026#34;2020-11-01T21:15:47+00:00\u0026#34;\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"metric-event\"\u003eMetric event\u003c/h3\u003e\n\u003cp\u003eæ­¤å¤„ç•™ç»™ä»¥åæ’°å†™\u003c/p\u003e\n\u003ch2 id=\"3-compnents\"\u003e3. Compnents\u003c/h2\u003e\n\u003ch3 id=\"31-source\"\u003e3.1 source\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003eè¯¦ç»†é…ç½®è¯·è§ ğŸ‘‰ \u003ca href=\"https://vector.dev/docs/reference/configuration/sources/\"\u003eSources reference\u003c/a\u003e\u003c/p\u003e","title":"Vector æ—¥å¿—é‡‡é›†ä¸å¤„ç†"},{"content":"ClickHouse é«˜æ€§èƒ½æ•°æ®åº“ ClickHouse æ˜¯ä¸€æ¬¾ å¼€æºã€é«˜æ€§èƒ½çš„åˆ—å¼æ•°æ®åº“ï¼Œä¸»è¦ç”¨äº å¤§è§„æ¨¡æ•°æ®åˆ†æ (OLAP) å’Œ å®æ—¶æŸ¥è¯¢ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼š\nåˆ—å¼å­˜å‚¨ï¼Œè¯»å–æŒ‡å®šåˆ—éå¸¸å¿« æ”¯æŒé«˜å¹¶å‘å†™å…¥å’ŒæŸ¥è¯¢ å¼ºå¤§çš„èšåˆåŠŸèƒ½ï¼Œé€‚åˆæŠ¥è¡¨å’Œæ—¥å¿—åˆ†æ æ”¯æŒ SQL æŸ¥è¯¢ï¼Œæ˜“ä¸Šæ‰‹ 1ï¸. å®‰è£…ä¸å¿«é€Ÿå¼€å§‹ å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£æˆ–ç¤¾åŒºæ•™ç¨‹ ğŸ‘‰ClickHouse å®˜æ–¹æ–‡æ¡£\n1.1 å®‰è£… curl https://clickhouse.com/ | sh sudo ./clickhouse install 1.2 è¿è¡Œ $ clickhouse-client --host server ClickHouse client version 24.12.2.29 (official build). Connecting to server:9000 as user default. Connected to ClickHouse server version 24.12.2. :) Specify additional connection details as necessary:\nOption Description --port \u0026lt;port\u0026gt; The port ClickHouse server is accepting connections on. The default ports are 9440 (TLS) and 9000 (no TLS). Note that ClickHouse Client uses the native protocol and not HTTP(S). -s [--secure] Whether to use TLS (usually autodetected). -u [--user] \u0026lt;username\u0026gt; The database user to connect as. Connects as the default user by default. --password \u0026lt;password\u0026gt; The password of the database user. You can also specify the password for a connection in the configuration file. If you do not specify the password, the client will ask for it. -c [--config] \u0026lt;path-to-file\u0026gt; The location of the configuration file for ClickHouse Client, if it is not at one of the default locations. See Configuration Files. 1.3 é€€å‡º To exit the client, press Ctrl+D, or enter one of the following instead of a query:\nexit or exit; quit or quit; q, Q or :q logout or logout; 2. åº“å’Œè¡¨çš„åˆ›å»º åœ¨ ClickHouse ä¸­ï¼Œæ•°æ®å­˜å‚¨çš„åŸºæœ¬å•å…ƒæ˜¯ æ•°æ®åº“ï¼ˆDatabaseï¼‰ å’Œ è¡¨ï¼ˆTableï¼‰ã€‚\nä¸‹é¢æ˜¯åˆ›å»ºåº“å’Œè¡¨çš„ç¤ºä¾‹ï¼š\n2.1 åˆ›å»ºæ•°æ®åº“ CREATE DATABASE IF NOT EXISTS analytics; IF NOT EXISTS â†’ é¿å…æ•°æ®åº“å·²å­˜åœ¨æ—¶æŠ¥é”™\nanalytics â†’ æ•°æ®åº“åç§°ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡è‡ªå®šä¹‰\n2.2 åˆ›å»ºè¡¨ CREATE TABLE IF NOT EXISTS analytics.visits ( user_id UInt32, page_id UInt32, timestamp DateTime ) ENGINE = MergeTree() ORDER BY timestamp; MergeTree() â†’ é«˜æ€§èƒ½è¡¨å¼•æ“\nORDER BY timestamp â†’ æŒ‰æ—¶é—´åˆ—æ’åºä¼˜åŒ–æŸ¥è¯¢\nIF NOT EXISTS â†’ é¿å…è¡¨å·²å­˜åœ¨æ—¶æŠ¥é”™\n3. æ•°æ®å†™å…¥ä¸æŸ¥è¯¢ æ­¤å¤„ä»¥åæ’°å†™\n","permalink":"http://localhost:1313/toolkits/clickhouse/","summary":"\u003ch1 id=\"clickhouse-é«˜æ€§èƒ½æ•°æ®åº“\"\u003eClickHouse é«˜æ€§èƒ½æ•°æ®åº“\u003c/h1\u003e\n\u003cp\u003eClickHouse æ˜¯ä¸€æ¬¾ \u003cstrong\u003eå¼€æºã€é«˜æ€§èƒ½çš„åˆ—å¼æ•°æ®åº“\u003c/strong\u003eï¼Œä¸»è¦ç”¨äº \u003cstrong\u003eå¤§è§„æ¨¡æ•°æ®åˆ†æ (OLAP)\u003c/strong\u003e å’Œ \u003cstrong\u003eå®æ—¶æŸ¥è¯¢\u003c/strong\u003eã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåˆ—å¼å­˜å‚¨ï¼Œè¯»å–æŒ‡å®šåˆ—éå¸¸å¿«\u003c/li\u003e\n\u003cli\u003eæ”¯æŒé«˜å¹¶å‘å†™å…¥å’ŒæŸ¥è¯¢\u003c/li\u003e\n\u003cli\u003eå¼ºå¤§çš„èšåˆåŠŸèƒ½ï¼Œé€‚åˆæŠ¥è¡¨å’Œæ—¥å¿—åˆ†æ\u003c/li\u003e\n\u003cli\u003eæ”¯æŒ SQL æŸ¥è¯¢ï¼Œæ˜“ä¸Šæ‰‹\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-å®‰è£…ä¸å¿«é€Ÿå¼€å§‹\"\u003e1ï¸. å®‰è£…ä¸å¿«é€Ÿå¼€å§‹\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£æˆ–ç¤¾åŒºæ•™ç¨‹ ğŸ‘‰\u003ca href=\"https://clickhouse.com/docs/\"\u003eClickHouse å®˜æ–¹æ–‡æ¡£\u003c/a\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003ch3 id=\"11-å®‰è£…\"\u003e1.1 å®‰è£…\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ecurl https://clickhouse.com/ \u003cspan class=\"p\"\u003e|\u003c/span\u003e sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo ./clickhouse install\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"12-è¿è¡Œ\"\u003e1.2 è¿è¡Œ\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ clickhouse-client --host server\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eClickHouse client version 24.12.2.29 \u003cspan class=\"o\"\u003e(\u003c/span\u003eofficial build\u003cspan class=\"o\"\u003e)\u003c/span\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eConnecting to server:9000 as user default.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eConnected to ClickHouse server version 24.12.2.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e:\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eSpecify additional connection details as necessary:\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eOption\u003c/th\u003e\n          \u003cth\u003eDescription\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e--port \u0026lt;port\u0026gt;\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eThe port ClickHouse server is accepting connections on. The default ports are 9440 (TLS) and 9000 (no TLS). Note that ClickHouse Client uses the native protocol and not HTTP(S).\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-s [--secure]\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eWhether to use TLS (usually autodetected).\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-u [--user] \u0026lt;username\u0026gt;\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eThe database user to connect as. Connects as the default user by default.\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e--password \u0026lt;password\u0026gt;\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eThe password of the database user. You can also specify the password for a connection in the configuration file. If you do not specify the password, the client will ask for it.\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-c [--config] \u0026lt;path-to-file\u0026gt;\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eThe location of the configuration file for ClickHouse Client, if it is not at one of the default locations. See Configuration Files.\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch3 id=\"13-é€€å‡º\"\u003e1.3 é€€å‡º\u003c/h3\u003e\n\u003cp\u003eTo exit the client, press Ctrl+D, or enter one of the following instead of a query:\u003c/p\u003e","title":"ClickHouse é«˜æ€§èƒ½æ•°æ®åº“"},{"content":"ç®€ä»‹ qr-scanner æ˜¯ä¸€æ¬¾çº¯å‰ç«¯ã€é›¶ä¾èµ–çš„ JavaScript äºŒç»´ç æ‰«æåº“ï¼Œå®Œå…¨åœ¨æµè§ˆå™¨ç«¯è¿è¡Œï¼Œæ— éœ€åç«¯é…åˆã€‚å®ƒåŒæ—¶æ”¯æŒï¼š\næ‘„åƒå¤´å®æ—¶æ‰«ç  é™æ€å›¾ç‰‡/æ–‡ä»¶ç¦»çº¿æ‰«ç ï¼ˆæ”¯æŒ \u0026lt;img\u0026gt;ã€\u0026lt;canvas\u0026gt;ã€\u0026lt;video\u0026gt;ã€Fileã€Blob ç­‰å¤šç§æ¥æºï¼‰ åº•å±‚ä½¿ç”¨ WebAssembly åŠ é€Ÿè§£ç ï¼Œè¯†åˆ«é€Ÿåº¦å¿«ã€å‡†ç¡®ç‡é«˜ï¼Œåœ¨æ‰‹æœºç«¯è¡¨ç°å°¤ä¸ºä¼˜ç§€ï¼Œæ˜¯ç›®å‰æœ€æ¨èçš„å‰ç«¯äºŒç»´ç æ‰«ææ–¹æ¡ˆ\næœ¬æ–‡ä»¥ React + Next.js æ¡†æ¶ä¸ºä¾‹\n1. å®‰è£… npm install qr-scanner æˆ–ä½¿ç”¨ yarnï¼š\nyarn add qr-scanner æ³¨æ„ï¼šå·²ä¸å†æ¨èç›´æ¥ç”¨ \u0026lt;script\u0026gt; æ ‡ç­¾å¼•å…¥ï¼Œç°ä»£é¡¹ç›®è¯·é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…\n2. åŸºæœ¬å¼•å…¥æ–¹å¼ import QrScanner from \u0026#39;qr-scanner\u0026#39;; 3. æ ¸å¿ƒç±»ï¼šQrScanner 3.1 æ‘„åƒå¤´å®æ—¶æ‰«ç  const videoElement = document.getElementById(\u0026#39;video\u0026#39;) as HTMLVideoElement; const scanner = new QrScanner( videoElement, (result) =\u0026gt; { console.log(\u0026#39;æ‰«ç æˆåŠŸ:\u0026#39;, result.data); // result.cornerPoints å¯ç”¨æ¥åšè¾¹æ¡†åŠ¨ç”» }, { returnDetailedScanResult: true, // è¿”å›å®Œæ•´å¯¹è±¡è€Œéä»…å­—ç¬¦ä¸² highlightScanRegion: true, // æ˜¾ç¤ºæ‰«æåŒºåŸŸé®ç½© highlightCodeOutline: true, // é«˜äº®äºŒç»´ç è½®å»“ } ); // å¯åŠ¨æ‘„åƒå¤´ await scanner.start(); // åœæ­¢æ‰«æ scanner.stop(); å¸¸ç”¨é…ç½®é¡¹ å‚æ•° è¯´æ˜ returnDetailedScanResult true æ—¶è¿”å› { data, cornerPoints } å¯¹è±¡ highlightScanRegion æ˜¾ç¤ºåŠé€æ˜æ‰«æåŒºåŸŸæ¡† highlightCodeOutline å®æ—¶ç»˜åˆ¶äºŒç»´ç å››è§’è½®å»“ 3.2 ç¦»çº¿æ‰«æå›¾ç‰‡æ–‡ä»¶ const file: File = æ–‡ä»¶è¾“å…¥æ¡†.files[0]; const result = await QrScanner.scanImage(file, { returnDetailedScanResult: true }); console.log(\u0026#39;äºŒç»´ç å†…å®¹:\u0026#39;, result.data); æ”¯æŒæ‰€æœ‰å›¾ç‰‡æºï¼šFileã€Blobã€HTMLImageElementã€HTMLCanvasElementã€URL ç­‰\n4. å¸¸ç”¨åœºæ™¯ç¤ºä¾‹ 4.1 æ‘„åƒå¤´æ‰«ç è‡ªåŠ¨å¡«å……åœ°å€ const scanner = new QrScanner(videoRef.current!, (result) =\u0026gt; { const match = result.data.match(/0x[a-fA-F0-9]{40}/i); if (match) { setAddress(match[0] as `0x${string}`); scanner.stop(); // æ‰«åˆ°å³åœæ­¢ onClose(); // å…³é—­å¼¹çª— } }); await scanner.start(); 4.2 ä¸Šä¼ å›¾ç‰‡æ‰«ç  const handleUpload = async (file: File) =\u0026gt; { try { const result = await QrScanner.scanImage(file); setAddress(result.data); message.success(\u0026#39;æ‰«ç æˆåŠŸ\u0026#39;); } catch (e) { message.error(\u0026#39;æœªè¯†åˆ«åˆ°äºŒç»´ç \u0026#39;); } }; 4.3 æ­£ç¡®é”€æ¯å®ä¾‹ï¼ˆå¾ˆé‡è¦ï¼ï¼‰ // React useEffect æ¸…ç†ç¤ºä¾‹ useEffect(() =\u0026gt; { return () =\u0026gt; { scanner?.stop(); scanner?.destroy(); scanner = null; }; }, []); ä¸é”€æ¯ä¼šå¯¼è‡´æ‘„åƒå¤´ä¸€ç›´è¢«å ç”¨ã€å†…å­˜æ³„æ¼\n5. React é¡¹ç›®æ³¨æ„äº‹é¡¹ video å…ƒç´ å¿…é¡»é€šè¿‡ useRef ç»‘å®šï¼Œä¸èƒ½ç›´æ¥ç”¨ document.getElementById å»ºè®®åœ¨å¼¹çª—/æŠ½å±‰æ‰“å¼€æ—¶æ‰ start()ï¼Œå…³é—­æ—¶ç«‹å³ stop + destroy start() æ˜¯å¼‚æ­¥çš„ï¼Œå»ºè®®åŠ  await å¹¶ try/catch å¤„ç†æƒé™é—®é¢˜ è¯†åˆ«ä»¥å¤ªåŠåœ°å€æ¨èæ­£åˆ™ï¼š/0x[a-fA-F0-9]{40}/i æä¾›ã€Œä¸Šä¼ å›¾ç‰‡æ‰«ç ã€ä½œä¸ºæ‘„åƒå¤´å¤±è´¥çš„å…œåº•æ–¹æ¡ˆ 6. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ é—®é¢˜ è§£å†³æ–¹æ¡ˆ æ‘„åƒå¤´é»‘å±/æ— æ³•å¼€å¯ å¿…é¡» HTTPS æˆ– localhostï¼›æ£€æŸ¥æ˜¯å¦å·²æˆæƒæ‘„åƒå¤´ start() æŠ¥é”™ ç¡®ä¿ videoRef.current å·²æœ‰å€¼ï¼Œä¸”ä¸Šä¸€ä¸ª scanner å·² destroy æ‰«ä¸åˆ°ç  å…‰çº¿è¦å……è¶³ã€äºŒç»´ç è¦å®Œæ•´ï¼›å¯æç¤ºç”¨æˆ·ã€Œæ”¯æŒä¸Šä¼ å›¾ç‰‡æ‰«ç ã€ åˆ‡æ¢é¡µé¢åæ‘„åƒå¤´ä»å ç”¨ ç»„ä»¶å¸è½½å¿…é¡»æ‰§è¡Œ stop() + destroy() æ‰‹æœºç«¯è¯†åˆ«æ…¢ qr-scanner å·²ä½¿ç”¨ WASMï¼Œå±äºç›®å‰æœ€å¿«æ–¹æ¡ˆï¼›ä»å»ºè®®ä¿æŒäºŒç»´ç å å± 1/3 ä»¥ä¸Šå¤§å° 7. æ€»ç»“ å®æ—¶æ‘„åƒå¤´æ‰«ç  + ç¦»çº¿å›¾ç‰‡æ‰«ç ä¸€æŠŠæŠ“ è¯†åˆ«é€Ÿåº¦å¿«ã€å‡†ç¡®ç‡é«˜ã€æ‰‹æœºç«¯è¡¨ç°ä¼˜ç§€ æä¾›æ‰«æåŒºåŸŸé«˜äº®ã€äºŒç»´ç è½®å»“é«˜äº®ã€è§’ç‚¹æ•°æ®ç­‰é«˜çº§åŠŸèƒ½ React ä½¿ç”¨æ—¶é…åˆ useRef + useEffect ç”Ÿå‘½å‘¨æœŸç®¡ç†å³å¯ å¼ºçƒˆå»ºè®®æ­é…ã€Œä¸Šä¼ å›¾ç‰‡æ‰«ç ã€ä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆï¼Œç”¨æˆ·ä½“éªŒæ›´ä½³ ","permalink":"http://localhost:1313/toolkits/qr-scanner/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003e\u003ccode\u003eqr-scanner\u003c/code\u003e æ˜¯ä¸€æ¬¾çº¯å‰ç«¯ã€é›¶ä¾èµ–çš„ JavaScript äºŒç»´ç æ‰«æåº“ï¼Œå®Œå…¨åœ¨æµè§ˆå™¨ç«¯è¿è¡Œï¼Œæ— éœ€åç«¯é…åˆã€‚å®ƒåŒæ—¶æ”¯æŒï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæ‘„åƒå¤´å®æ—¶æ‰«ç \u003c/li\u003e\n\u003cli\u003eé™æ€å›¾ç‰‡/æ–‡ä»¶ç¦»çº¿æ‰«ç ï¼ˆæ”¯æŒ \u003ccode\u003e\u0026lt;img\u0026gt;\u003c/code\u003eã€\u003ccode\u003e\u0026lt;canvas\u0026gt;\u003c/code\u003eã€\u003ccode\u003e\u0026lt;video\u0026gt;\u003c/code\u003eã€Fileã€Blob ç­‰å¤šç§æ¥æºï¼‰\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eåº•å±‚ä½¿ç”¨ WebAssembly åŠ é€Ÿè§£ç ï¼Œè¯†åˆ«é€Ÿåº¦å¿«ã€å‡†ç¡®ç‡é«˜ï¼Œåœ¨æ‰‹æœºç«¯è¡¨ç°å°¤ä¸ºä¼˜ç§€ï¼Œæ˜¯ç›®å‰æœ€æ¨èçš„å‰ç«¯äºŒç»´ç æ‰«ææ–¹æ¡ˆ\u003c/p\u003e\n\u003cp\u003eæœ¬æ–‡ä»¥ \u003ccode\u003eReact + Next.js\u003c/code\u003e æ¡†æ¶ä¸ºä¾‹\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-å®‰è£…\"\u003e1. å®‰è£…\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003enpm install qr-scanner\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæˆ–ä½¿ç”¨ yarnï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eyarn add qr-scanner\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003eæ³¨æ„ï¼šå·²ä¸å†æ¨èç›´æ¥ç”¨ \u003ccode\u003e\u0026lt;script\u0026gt;\u003c/code\u003e æ ‡ç­¾å¼•å…¥ï¼Œç°ä»£é¡¹ç›®è¯·é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…\u003c/p\u003e\u003c/blockquote\u003e\n\u003chr\u003e\n\u003ch2 id=\"2-åŸºæœ¬å¼•å…¥æ–¹å¼\"\u003e2. åŸºæœ¬å¼•å…¥æ–¹å¼\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eQrScanner\u003c/span\u003e \u003cspan class=\"kr\"\u003efrom\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;qr-scanner\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"3-æ ¸å¿ƒç±»qrscanner\"\u003e3. æ ¸å¿ƒç±»ï¼šQrScanner\u003c/h2\u003e\n\u003ch3 id=\"31-æ‘„åƒå¤´å®æ—¶æ‰«ç \"\u003e3.1 æ‘„åƒå¤´å®æ—¶æ‰«ç \u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003evideoElement\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003edocument\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetElementById\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;video\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"kr\"\u003eas\u003c/span\u003e \u003cspan class=\"nx\"\u003eHTMLVideoElement\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003escanner\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eQrScanner\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003evideoElement\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;æ‰«ç æˆåŠŸ:\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// result.cornerPoints å¯ç”¨æ¥åšè¾¹æ¡†åŠ¨ç”»\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e  \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nx\"\u003ereturnDetailedScanResult\u003c/span\u003e: \u003cspan class=\"kt\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"c1\"\u003e// è¿”å›å®Œæ•´å¯¹è±¡è€Œéä»…å­—ç¬¦ä¸²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003ehighlightScanRegion\u003c/span\u003e: \u003cspan class=\"kt\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e      \u003cspan class=\"c1\"\u003e// æ˜¾ç¤ºæ‰«æåŒºåŸŸé®ç½©\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003ehighlightCodeOutline\u003c/span\u003e: \u003cspan class=\"kt\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e     \u003cspan class=\"c1\"\u003e// é«˜äº®äºŒç»´ç è½®å»“\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// å¯åŠ¨æ‘„åƒå¤´\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003escanner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estart\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// åœæ­¢æ‰«æ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"nx\"\u003escanner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estop\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"å¸¸ç”¨é…ç½®é¡¹\"\u003eå¸¸ç”¨é…ç½®é¡¹\u003c/h4\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eå‚æ•°\u003c/th\u003e\n          \u003cth\u003eè¯´æ˜\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ereturnDetailedScanResult\u003c/td\u003e\n          \u003ctd\u003etrue æ—¶è¿”å› { data, cornerPoints } å¯¹è±¡\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ehighlightScanRegion\u003c/td\u003e\n          \u003ctd\u003eæ˜¾ç¤ºåŠé€æ˜æ‰«æåŒºåŸŸæ¡†\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ehighlightCodeOutline\u003c/td\u003e\n          \u003ctd\u003eå®æ—¶ç»˜åˆ¶äºŒç»´ç å››è§’è½®å»“\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch3 id=\"32-ç¦»çº¿æ‰«æå›¾ç‰‡æ–‡ä»¶\"\u003e3.2 ç¦»çº¿æ‰«æå›¾ç‰‡æ–‡ä»¶\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003efile\u003c/span\u003e: \u003cspan class=\"kt\"\u003eFile\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"err\"\u003eæ–‡ä»¶è¾“å…¥æ¡†\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efiles\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eQrScanner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003escanImage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efile\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003ereturnDetailedScanResult\u003c/span\u003e: \u003cspan class=\"kt\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;äºŒç»´ç å†…å®¹:\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæ”¯æŒæ‰€æœ‰å›¾ç‰‡æºï¼šFileã€Blobã€HTMLImageElementã€HTMLCanvasElementã€URL ç­‰\u003c/p\u003e","title":"QR Scanner ä½¿ç”¨æŒ‡å—"},{"content":"ç®€ä»‹ æœ¬æ–‡æ¡£æ€»ç»“äº†åœ¨ Hugo + PaperMod ä¸»é¢˜ ä¸‹è‡ªå®šä¹‰åšå®¢æ¨¡æ¿çš„é…ç½®æ–¹æ³•ï¼ŒåŒ…æ‹¬é™æ€èµ„æºä¼˜åŒ–ã€Nginx éƒ¨ç½²ã€ç¼“å­˜ç­–ç•¥å’Œå›¾ç‰‡åŠ é€ŸæŠ€å·§\n","permalink":"http://localhost:1313/toolkits/hugo_papermod/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eæœ¬æ–‡æ¡£æ€»ç»“äº†åœ¨ \u003cstrong\u003eHugo + PaperMod ä¸»é¢˜\u003c/strong\u003e ä¸‹è‡ªå®šä¹‰åšå®¢æ¨¡æ¿çš„é…ç½®æ–¹æ³•ï¼ŒåŒ…æ‹¬é™æ€èµ„æºä¼˜åŒ–ã€Nginx éƒ¨ç½²ã€ç¼“å­˜ç­–ç•¥å’Œå›¾ç‰‡åŠ é€ŸæŠ€å·§\u003c/p\u003e\n\u003chr\u003e","title":"Hugo-PaperMod è‡ªå®šä¹‰åšå®¢æ¨¡æ¿"},{"content":"","permalink":"http://localhost:1313/toolkits/indexeddb/","summary":"","title":"IndexedDB æµè§ˆå™¨æ•°æ®åº“"},{"content":"ç¼–ç¨‹å­¦ä¹  åœ¨å¤§å­¦æœŸé—´ï¼Œæˆ‘ä¸»è¦å­¦ä¹ äº†ä»¥ä¸‹ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯ï¼š\nPythonï¼šç”¨äºæ•°æ®åˆ†æã€è„šæœ¬è‡ªåŠ¨åŒ– Javaï¼šé¢å‘å¯¹è±¡è®¾è®¡å’Œå¤§å‹é¡¹ç›®å¼€å‘ C/C++ï¼šç³»ç»Ÿç¼–ç¨‹å’Œç®—æ³•å®ç° Web å¼€å‘ï¼šHTMLã€CSSã€JavaScriptï¼Œæ­å»ºä¸ªäººé¡¹ç›®ç½‘ç«™ é¡¹ç›®å®è·µ Web3 å®éªŒé¡¹ç›®ï¼šä½¿ç”¨åŒºå—é“¾ç›¸å…³æŠ€æœ¯å®ç°ç®€å•çš„å»ä¸­å¿ƒåŒ–åº”ç”¨ æ•°æ®åˆ†æé¡¹ç›®ï¼šPython + Pandas å¯¹å®éªŒæ•°æ®è¿›è¡Œå¤„ç†ä¸å¯è§†åŒ– è¯¾è®¾ä¸å®éªŒï¼šå›¢é˜Ÿåä½œå®Œæˆ Java å’Œ C++ é¡¹ç›®ï¼Œç§¯ç´¯ç‰ˆæœ¬æ§åˆ¶ç»éªŒ å­¦ä¹ å¿ƒå¾— ç†è®ºå­¦ä¹ å’Œå®è·µç»“åˆï¼ŒåŠ¨æ‰‹åšé¡¹ç›®æ‰èƒ½åŠ æ·±ç†è§£ å­¦ä¼šåˆ©ç”¨ Git/GitHub è¿›è¡Œç‰ˆæœ¬æ§åˆ¶å’Œåä½œ å¤šåšç¬”è®°ï¼Œè®°å½•å­¦ä¹ è¿‡ç¨‹ä¸­çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ å…³æ³¨æ–°æŠ€æœ¯åŠ¨æ€ï¼Œä¾‹å¦‚ Web3ã€AIã€äº‘è®¡ç®—ç­‰ æŠ€æœ¯åˆ†äº«è®¡åˆ’ å®šæœŸåœ¨åšå®¢å‘å¸ƒå­¦ä¹ ç¬”è®°ä¸é¡¹ç›®æ€»ç»“ åˆ†äº«ä»£ç ç¤ºä¾‹å’Œå®éªŒæ•™ç¨‹ï¼Œä¾¿äºåŒå­¦å‚è€ƒ æŒç»­æ›´æ–°æŠ€æœ¯æ ˆï¼Œè®°å½•æˆé•¿è¿‡ç¨‹ ","permalink":"http://localhost:1313/uestc/intro/","summary":"\u003ch2 id=\"ç¼–ç¨‹å­¦ä¹ \"\u003eç¼–ç¨‹å­¦ä¹ \u003c/h2\u003e\n\u003cp\u003eåœ¨å¤§å­¦æœŸé—´ï¼Œæˆ‘ä¸»è¦å­¦ä¹ äº†ä»¥ä¸‹ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePython\u003c/strong\u003eï¼šç”¨äºæ•°æ®åˆ†æã€è„šæœ¬è‡ªåŠ¨åŒ–\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eJava\u003c/strong\u003eï¼šé¢å‘å¯¹è±¡è®¾è®¡å’Œå¤§å‹é¡¹ç›®å¼€å‘\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eC/C++\u003c/strong\u003eï¼šç³»ç»Ÿç¼–ç¨‹å’Œç®—æ³•å®ç°\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eWeb å¼€å‘\u003c/strong\u003eï¼šHTMLã€CSSã€JavaScriptï¼Œæ­å»ºä¸ªäººé¡¹ç›®ç½‘ç«™\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"é¡¹ç›®å®è·µ\"\u003eé¡¹ç›®å®è·µ\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eWeb3 å®éªŒé¡¹ç›®\u003c/strong\u003eï¼šä½¿ç”¨åŒºå—é“¾ç›¸å…³æŠ€æœ¯å®ç°ç®€å•çš„å»ä¸­å¿ƒåŒ–åº”ç”¨\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæ•°æ®åˆ†æé¡¹ç›®\u003c/strong\u003eï¼šPython + Pandas å¯¹å®éªŒæ•°æ®è¿›è¡Œå¤„ç†ä¸å¯è§†åŒ–\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eè¯¾è®¾ä¸å®éªŒ\u003c/strong\u003eï¼šå›¢é˜Ÿåä½œå®Œæˆ Java å’Œ C++ é¡¹ç›®ï¼Œç§¯ç´¯ç‰ˆæœ¬æ§åˆ¶ç»éªŒ\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å­¦ä¹ å¿ƒå¾—\"\u003eå­¦ä¹ å¿ƒå¾—\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eç†è®ºå­¦ä¹ å’Œå®è·µç»“åˆï¼ŒåŠ¨æ‰‹åšé¡¹ç›®æ‰èƒ½åŠ æ·±ç†è§£\u003c/li\u003e\n\u003cli\u003eå­¦ä¼šåˆ©ç”¨ Git/GitHub è¿›è¡Œç‰ˆæœ¬æ§åˆ¶å’Œåä½œ\u003c/li\u003e\n\u003cli\u003eå¤šåšç¬”è®°ï¼Œè®°å½•å­¦ä¹ è¿‡ç¨‹ä¸­çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ\u003c/li\u003e\n\u003cli\u003eå…³æ³¨æ–°æŠ€æœ¯åŠ¨æ€ï¼Œä¾‹å¦‚ Web3ã€AIã€äº‘è®¡ç®—ç­‰\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"æŠ€æœ¯åˆ†äº«è®¡åˆ’\"\u003eæŠ€æœ¯åˆ†äº«è®¡åˆ’\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eå®šæœŸåœ¨åšå®¢å‘å¸ƒå­¦ä¹ ç¬”è®°ä¸é¡¹ç›®æ€»ç»“\u003c/li\u003e\n\u003cli\u003eåˆ†äº«ä»£ç ç¤ºä¾‹å’Œå®éªŒæ•™ç¨‹ï¼Œä¾¿äºåŒå­¦å‚è€ƒ\u003c/li\u003e\n\u003cli\u003eæŒç»­æ›´æ–°æŠ€æœ¯æ ˆï¼Œè®°å½•æˆé•¿è¿‡ç¨‹\u003c/li\u003e\n\u003c/ul\u003e","title":"UESTC ç®€ä»‹"},{"content":"Welcome to Web3! Web3ä»£è¡¨äº’è”ç½‘ä¸‹ä¸€ä¸ªæ—¶ä»£ä»¥åŒºå—é“¾ä¸ºæ ¸å¿ƒå®ç°å»ä¸­å¿ƒåŒ–ç”¨æˆ·æŒæ§æ•°æ®å’Œèµ„äº§é€šè¿‡æ™ºèƒ½åˆçº¦è‡ªåŠ¨åŒ–äº¤äº’æ‘†è„±ä¸­å¿ƒåŒ–å¹³å°æ§åˆ¶\nsecurity Web3å®‰å…¨èšç„¦é¢„é˜²é»‘å®¢æ”»å‡»å’Œæ¼æ´åˆ©ç”¨\né‡‡ç”¨å¤šå±‚é˜²å¾¡ç­–ç•¥åŒ…æ‹¬æ™ºèƒ½åˆçº¦å®¡è®¡è®¿é—®æ§åˆ¶å®æ—¶ç›‘æ§\nä½¿ç”¨Slither Mythrilæ£€æµ‹é‡å…¥æ”»å‡»æ•´æ•°æº¢å‡ºæƒé™é—®é¢˜\næœ€ä½³å®è·µå¼ºè°ƒç§é’¥ç®¡ç†å¤šç­¾åé’±åŒ…ç´§æ€¥æš‚åœæœºåˆ¶\n2025å¹´ä¸»è¦å¨èƒåŒ…æ‹¬é—ªè´·æ²»ç†æ”»å‡»è·¨é“¾æ¡¥æ¼æ´é’“é±¼æ”»å‡»\nå¼ºè°ƒå®‰å…¨å³ä»£ç ä»è®¾è®¡é˜¶æ®µæ•´åˆå½¢å¼éªŒè¯AIé©±åŠ¨ç›‘æ§\nå¼€æºåº“OpenZeppelinæä¾›å®‰å…¨åˆçº¦æ¨¡æ¿å‡å°‘å¸¸è§é”™è¯¯\næœºæ„çº§é¡¹ç›®éœ€æŒç»­å®¡è®¡æ¼æ´èµé‡‘è®¡åˆ’æ„å»ºä¿¡ä»»\nwallet é’±åŒ…æ˜¯Web3å…¥å£ç®¡ç†ç§é’¥å’Œèµ„äº§äº¤äº’\nåˆ†ä¸ºçƒ­é’±åŒ…å’Œå†·é’±åŒ…\nçƒ­é’±åŒ…å¦‚MetaMaskæµè§ˆå™¨æ‰©å±•æ–¹ä¾¿dAppè¿æ¥ä½†æ˜“å—ç½‘ç»œæ”»å‡»\nå†·é’±åŒ…åŒ…æ‹¬Ledgerç¡¬ä»¶é’±åŒ…å’Œçº¸é’±åŒ…ç¦»çº¿å­˜å‚¨æ›´å®‰å…¨é€‚åˆå¤§é¢æŒæœ‰\néæ‰˜ç®¡é’±åŒ…ç”¨æˆ·å®Œå…¨æ§åˆ¶å¯†é’¥\næ‰˜ç®¡é’±åŒ…å¦‚Coinbaseç®€åŒ–ä½†ä¾èµ–å¹³å°\nERC-4337è´¦æˆ·æŠ½è±¡æå‡ç”¨æˆ·ä½“éªŒæ”¯æŒç¤¾äº¤æ¢å¤æ°”ä½“èµåŠ©\nå¤šé“¾é’±åŒ…å¦‚Rainbowæ”¯æŒLayer2é™ä½è´¹ç”¨\nå®‰å…¨æç¤ºå¿…é¡»ä½¿ç”¨ç¡¬ä»¶ç­¾åç»ä¸æ³„éœ²ç§å­çŸ­è¯­å®šæœŸå¤‡ä»½\neip ğŸ‘‰ EIP ç¬”è®°åˆé›†\nEIPæ˜¯ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆæ ‡å‡†åŒ–å¹³å°å˜æ›´\næ¶µç›–æ ¸å¿ƒåè®®å®¢æˆ·ç«¯APIåˆçº¦è§„èŒƒ\nä»»ä½•äººå¯æäº¤è‰æ¡ˆç»ç¤¾åŒºè®¨è®ºç¼–è¾‘å®¡æŸ¥è¿›å…¥æœ€ç»ˆçŠ¶æ€\næ ¸å¿ƒEIPéœ€å…¨ç½‘å…±è¯†å¯èƒ½å¼•å‘ç¡¬åˆ†å‰\nå¦‚EIP-1559å¼•å…¥åŸºç¡€è´¹å¸‚åœº\nERCæ˜¯EIPå­é›†ä¸“æ³¨åº”ç”¨å±‚æ ‡å‡†\nEIPè¿‡ç¨‹ç¡®ä¿é€æ˜åŒ…å®¹\nä»è‰ç¨¿åˆ°æœ€åè°ƒç”¨å†åˆ°æœ€ç»ˆå®æ–½\nEIP-4844å¼•å…¥blobæ•°æ®å¤§å¹…é™ä½Layer2æˆæœ¬\næœªæ¥EIPèšç„¦å¯æ‰©å±•æ€§éšç§å¦‚Verkleæ ‘\nerc ERCæ˜¯ä»¥å¤ªåŠè¯·æ±‚è¯„è®ºå®šä¹‰ä»£å¸å’Œåº”ç”¨æ ‡å‡†\nERC20ç”¨äºå¯äº’æ¢ä»£å¸å¦‚USDTæ”¯æŒè½¬ç§»æ‰¹å‡†ä½™é¢æŸ¥è¯¢\nERC721åˆ›å»ºéåŒè´¨åŒ–ä»£å¸NFTå”¯ä¸€æ ‡è¯†æ‰€æœ‰æƒå¦‚CryptoKitties\nERC1155å¤šä»£å¸æ ‡å‡†å•ä¸€åˆçº¦ç®¡ç†å¯äº’æ¢éåŒè´¨åŒ–åŠåŒè´¨åŒ–èµ„äº§\né«˜æ•ˆæ‰¹é‡è½¬ç§»èŠ‚çœæ°”ä½“é€‚ç”¨äºæ¸¸æˆç‰©å“ç¥¨åŠ¡\nè¿™äº›æ ‡å‡†ç¡®ä¿å…¨ç”Ÿæ€äº’æ“ä½œæ€§\nå¼€å‘è€…å¯ç›´æ¥æ„å»ºå…¼å®¹é¡¹ç›®\nERC20ä¸»å¯¼DeFi\nERC721æ¨åŠ¨NFTå¸‚åœº\nERC1155ä¼˜åŒ–å¤æ‚ç”¨ä¾‹\ncodeLanuage æ™ºèƒ½åˆçº¦è¯­è¨€æœ€ç»ˆç¼–è¯‘ä¸ºEVMå­—èŠ‚ç \nSolidityä¸»æµç±»JavaScriptæ”¯æŒç»§æ‰¿ä¿®é¥°ç¬¦åº“ç”Ÿæ€æœ€ä¸°å¯Œ\nVyper Pythoné£æ ¼æ•…æ„å»é™¤ç»§æ‰¿æ— é™å¾ªç¯æå‡å¯å®¡è®¡æ€§å®‰å…¨æ€§\nYulä¸­é—´è¯­è¨€ç”¨äºç²¾ç»†æ°”ä½“ä¼˜åŒ–\nRustä¸»è¦ç”¨äºSolanaéEVMé“¾\nEthereumç”Ÿæ€ä»ä»¥Solidityå’ŒVyperä¸ºä¸»\nå­¦ä¹ Solidityæ¨èä»Remix IDEå¼€å§‹\nVyperå¼ºè°ƒäººç±»å¯è¯»ä»£ç å‡å°‘æ”»å‡»é¢\né€‰æ‹©è¯­è¨€å–å†³äºé¡¹ç›®å¤æ‚åº¦å’Œå®‰å…¨ä¼˜å…ˆçº§\nevm EVMæ˜¯ä»¥å¤ªåŠè™šæ‹Ÿæœºå»ä¸­å¿ƒåŒ–è®¡ç®—å¼•æ“\næ‰§è¡Œæ™ºèƒ½åˆçº¦å­—èŠ‚ç é‡‡ç”¨æ ˆåŸºæ¶æ„æ·±åº¦1024\næ¯æ“ä½œç æ¶ˆè€—æ°”ä½“é˜²æ­¢æ»¥ç”¨\nTuringå®Œå¤‡æ”¯æŒä»»æ„é€»è¾‘ä½†æœ‰æ°”ä½“ä¸Šé™é¿å…æ— é™å¾ªç¯\nEVMè´Ÿè´£çŠ¶æ€è½¬æ¢æ›´æ–°è´¦æˆ·ä½™é¢å­˜å‚¨\næ‰€æœ‰èŠ‚ç‚¹ä¸€è‡´æ‰§è¡Œä¿è¯ç¡®å®šæ€§éš”ç¦»\nå…¼å®¹é“¾å¦‚Polygon Arbitrumå…±äº«EVMå®ç°æ— ç¼ç§»æ¤\næœªæ¥å‡çº§EOFå¼•å…¥å®¹å™¨åŒ–ä»£ç æå‡æ•ˆç‡\nEVMæ˜¯æ•´ä¸ªä»¥å¤ªåŠç”Ÿæ€çš„è®¡ç®—æ ¸å¿ƒ\nframework(é¡¹ç›®æ¡†æ¶) Web3å¼€å‘æ¡†æ¶å¤§å¹…ç®€åŒ–åˆçº¦æ„å»ºæµ‹è¯•éƒ¨ç½²\nHardhat JavaScriptåŸºç¡€æ’ä»¶åŒ–æ”¯æŒæ§åˆ¶å°æ—¥å¿—è‡ªå®šä¹‰ä»»åŠ¡æ·±åº¦é›†æˆEthers.js\nTruffleè€ç‰Œå¥—ä»¶è‡ªå¸¦Ganacheæœ¬åœ°é“¾Mochaæµ‹è¯•é€‚åˆæ–°æ‰‹\nFoundry Rustç¼–å†™è¶…å¿«ç¼–è¯‘é“¸é€ Anvilåˆ†å‰ä¸»ç½‘ç”¨Solidityå†™æµ‹è¯•æ”¯æŒæ¨¡ç³Šæµ‹è¯•\nå½“å‰ä¸»æµé€‰æ‹©\nHardhatçµæ´»åº¦æœ€é«˜\nTruffleæœ€é€‚åˆæ•™å­¦\nFoundryæ€§èƒ½æè‡´é€‚åˆé«˜çº§å¼€å‘è€…\næ­é…VS Code Solidityæ‰©å±•å¼€å‘ä½“éªŒæœ€ä½³\n","permalink":"http://localhost:1313/web3/intro/","summary":"\u003ch1 id=\"welcome-to-web3\"\u003eWelcome to Web3!\u003c/h1\u003e\n\u003cp\u003eWeb3ä»£è¡¨äº’è”ç½‘ä¸‹ä¸€ä¸ªæ—¶ä»£ä»¥åŒºå—é“¾ä¸ºæ ¸å¿ƒå®ç°å»ä¸­å¿ƒåŒ–ç”¨æˆ·æŒæ§æ•°æ®å’Œèµ„äº§é€šè¿‡æ™ºèƒ½åˆçº¦è‡ªåŠ¨åŒ–äº¤äº’æ‘†è„±ä¸­å¿ƒåŒ–å¹³å°æ§åˆ¶\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"security\"\u003esecurity\u003c/h2\u003e\n\u003cp\u003eWeb3å®‰å…¨èšç„¦é¢„é˜²é»‘å®¢æ”»å‡»å’Œæ¼æ´åˆ©ç”¨\u003cbr\u003e\né‡‡ç”¨å¤šå±‚é˜²å¾¡ç­–ç•¥åŒ…æ‹¬æ™ºèƒ½åˆçº¦å®¡è®¡è®¿é—®æ§åˆ¶å®æ—¶ç›‘æ§\u003cbr\u003e\nä½¿ç”¨Slither Mythrilæ£€æµ‹é‡å…¥æ”»å‡»æ•´æ•°æº¢å‡ºæƒé™é—®é¢˜\u003cbr\u003e\næœ€ä½³å®è·µå¼ºè°ƒç§é’¥ç®¡ç†å¤šç­¾åé’±åŒ…ç´§æ€¥æš‚åœæœºåˆ¶\u003cbr\u003e\n2025å¹´ä¸»è¦å¨èƒåŒ…æ‹¬é—ªè´·æ²»ç†æ”»å‡»è·¨é“¾æ¡¥æ¼æ´é’“é±¼æ”»å‡»\u003cbr\u003e\nå¼ºè°ƒå®‰å…¨å³ä»£ç ä»è®¾è®¡é˜¶æ®µæ•´åˆå½¢å¼éªŒè¯AIé©±åŠ¨ç›‘æ§\u003cbr\u003e\nå¼€æºåº“OpenZeppelinæä¾›å®‰å…¨åˆçº¦æ¨¡æ¿å‡å°‘å¸¸è§é”™è¯¯\u003cbr\u003e\næœºæ„çº§é¡¹ç›®éœ€æŒç»­å®¡è®¡æ¼æ´èµé‡‘è®¡åˆ’æ„å»ºä¿¡ä»»\u003c/p\u003e\n\u003ch2 id=\"wallet\"\u003ewallet\u003c/h2\u003e\n\u003cp\u003eé’±åŒ…æ˜¯Web3å…¥å£ç®¡ç†ç§é’¥å’Œèµ„äº§äº¤äº’\u003cbr\u003e\nåˆ†ä¸ºçƒ­é’±åŒ…å’Œå†·é’±åŒ…\u003cbr\u003e\nçƒ­é’±åŒ…å¦‚MetaMaskæµè§ˆå™¨æ‰©å±•æ–¹ä¾¿dAppè¿æ¥ä½†æ˜“å—ç½‘ç»œæ”»å‡»\u003cbr\u003e\nå†·é’±åŒ…åŒ…æ‹¬Ledgerç¡¬ä»¶é’±åŒ…å’Œçº¸é’±åŒ…ç¦»çº¿å­˜å‚¨æ›´å®‰å…¨é€‚åˆå¤§é¢æŒæœ‰\u003cbr\u003e\néæ‰˜ç®¡é’±åŒ…ç”¨æˆ·å®Œå…¨æ§åˆ¶å¯†é’¥\u003cbr\u003e\næ‰˜ç®¡é’±åŒ…å¦‚Coinbaseç®€åŒ–ä½†ä¾èµ–å¹³å°\u003cbr\u003e\nERC-4337è´¦æˆ·æŠ½è±¡æå‡ç”¨æˆ·ä½“éªŒæ”¯æŒç¤¾äº¤æ¢å¤æ°”ä½“èµåŠ©\u003cbr\u003e\nå¤šé“¾é’±åŒ…å¦‚Rainbowæ”¯æŒLayer2é™ä½è´¹ç”¨\u003cbr\u003e\nå®‰å…¨æç¤ºå¿…é¡»ä½¿ç”¨ç¡¬ä»¶ç­¾åç»ä¸æ³„éœ²ç§å­çŸ­è¯­å®šæœŸå¤‡ä»½\u003c/p\u003e\n\u003ch2 id=\"eip\"\u003eeip\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eğŸ‘‰ \u003ca href=\"/web3/eip/intro\"\u003eEIP ç¬”è®°åˆé›†\u003c/a\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003eEIPæ˜¯ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆæ ‡å‡†åŒ–å¹³å°å˜æ›´\u003cbr\u003e\næ¶µç›–æ ¸å¿ƒåè®®å®¢æˆ·ç«¯APIåˆçº¦è§„èŒƒ\u003cbr\u003e\nä»»ä½•äººå¯æäº¤è‰æ¡ˆç»ç¤¾åŒºè®¨è®ºç¼–è¾‘å®¡æŸ¥è¿›å…¥æœ€ç»ˆçŠ¶æ€\u003cbr\u003e\næ ¸å¿ƒEIPéœ€å…¨ç½‘å…±è¯†å¯èƒ½å¼•å‘ç¡¬åˆ†å‰\u003cbr\u003e\nå¦‚EIP-1559å¼•å…¥åŸºç¡€è´¹å¸‚åœº\u003cbr\u003e\nERCæ˜¯EIPå­é›†ä¸“æ³¨åº”ç”¨å±‚æ ‡å‡†\u003cbr\u003e\nEIPè¿‡ç¨‹ç¡®ä¿é€æ˜åŒ…å®¹\u003cbr\u003e\nä»è‰ç¨¿åˆ°æœ€åè°ƒç”¨å†åˆ°æœ€ç»ˆå®æ–½\u003cbr\u003e\nEIP-4844å¼•å…¥blobæ•°æ®å¤§å¹…é™ä½Layer2æˆæœ¬\u003cbr\u003e\næœªæ¥EIPèšç„¦å¯æ‰©å±•æ€§éšç§å¦‚Verkleæ ‘\u003c/p\u003e\n\u003ch2 id=\"erc\"\u003eerc\u003c/h2\u003e\n\u003cp\u003eERCæ˜¯ä»¥å¤ªåŠè¯·æ±‚è¯„è®ºå®šä¹‰ä»£å¸å’Œåº”ç”¨æ ‡å‡†\u003cbr\u003e\nERC20ç”¨äºå¯äº’æ¢ä»£å¸å¦‚USDTæ”¯æŒè½¬ç§»æ‰¹å‡†ä½™é¢æŸ¥è¯¢\u003cbr\u003e\nERC721åˆ›å»ºéåŒè´¨åŒ–ä»£å¸NFTå”¯ä¸€æ ‡è¯†æ‰€æœ‰æƒå¦‚CryptoKitties\u003cbr\u003e\nERC1155å¤šä»£å¸æ ‡å‡†å•ä¸€åˆçº¦ç®¡ç†å¯äº’æ¢éåŒè´¨åŒ–åŠåŒè´¨åŒ–èµ„äº§\u003cbr\u003e\né«˜æ•ˆæ‰¹é‡è½¬ç§»èŠ‚çœæ°”ä½“é€‚ç”¨äºæ¸¸æˆç‰©å“ç¥¨åŠ¡\u003cbr\u003e\nè¿™äº›æ ‡å‡†ç¡®ä¿å…¨ç”Ÿæ€äº’æ“ä½œæ€§\u003cbr\u003e\nå¼€å‘è€…å¯ç›´æ¥æ„å»ºå…¼å®¹é¡¹ç›®\u003cbr\u003e\nERC20ä¸»å¯¼DeFi\u003cbr\u003e\nERC721æ¨åŠ¨NFTå¸‚åœº\u003cbr\u003e\nERC1155ä¼˜åŒ–å¤æ‚ç”¨ä¾‹\u003c/p\u003e\n\u003ch2 id=\"codelanuage\"\u003ecodeLanuage\u003c/h2\u003e\n\u003cp\u003eæ™ºèƒ½åˆçº¦è¯­è¨€æœ€ç»ˆç¼–è¯‘ä¸ºEVMå­—èŠ‚ç \u003cbr\u003e\nSolidityä¸»æµç±»JavaScriptæ”¯æŒç»§æ‰¿ä¿®é¥°ç¬¦åº“ç”Ÿæ€æœ€ä¸°å¯Œ\u003cbr\u003e\nVyper Pythoné£æ ¼æ•…æ„å»é™¤ç»§æ‰¿æ— é™å¾ªç¯æå‡å¯å®¡è®¡æ€§å®‰å…¨æ€§\u003cbr\u003e\nYulä¸­é—´è¯­è¨€ç”¨äºç²¾ç»†æ°”ä½“ä¼˜åŒ–\u003cbr\u003e\nRustä¸»è¦ç”¨äºSolanaéEVMé“¾\u003cbr\u003e\nEthereumç”Ÿæ€ä»ä»¥Solidityå’ŒVyperä¸ºä¸»\u003cbr\u003e\nå­¦ä¹ Solidityæ¨èä»Remix IDEå¼€å§‹\u003cbr\u003e\nVyperå¼ºè°ƒäººç±»å¯è¯»ä»£ç å‡å°‘æ”»å‡»é¢\u003cbr\u003e\né€‰æ‹©è¯­è¨€å–å†³äºé¡¹ç›®å¤æ‚åº¦å’Œå®‰å…¨ä¼˜å…ˆçº§\u003c/p\u003e\n\u003ch2 id=\"evm\"\u003eevm\u003c/h2\u003e\n\u003cp\u003eEVMæ˜¯ä»¥å¤ªåŠè™šæ‹Ÿæœºå»ä¸­å¿ƒåŒ–è®¡ç®—å¼•æ“\u003cbr\u003e\næ‰§è¡Œæ™ºèƒ½åˆçº¦å­—èŠ‚ç é‡‡ç”¨æ ˆåŸºæ¶æ„æ·±åº¦1024\u003cbr\u003e\næ¯æ“ä½œç æ¶ˆè€—æ°”ä½“é˜²æ­¢æ»¥ç”¨\u003cbr\u003e\nTuringå®Œå¤‡æ”¯æŒä»»æ„é€»è¾‘ä½†æœ‰æ°”ä½“ä¸Šé™é¿å…æ— é™å¾ªç¯\u003cbr\u003e\nEVMè´Ÿè´£çŠ¶æ€è½¬æ¢æ›´æ–°è´¦æˆ·ä½™é¢å­˜å‚¨\u003cbr\u003e\næ‰€æœ‰èŠ‚ç‚¹ä¸€è‡´æ‰§è¡Œä¿è¯ç¡®å®šæ€§éš”ç¦»\u003cbr\u003e\nå…¼å®¹é“¾å¦‚Polygon Arbitrumå…±äº«EVMå®ç°æ— ç¼ç§»æ¤\u003cbr\u003e\næœªæ¥å‡çº§EOFå¼•å…¥å®¹å™¨åŒ–ä»£ç æå‡æ•ˆç‡\u003cbr\u003e\nEVMæ˜¯æ•´ä¸ªä»¥å¤ªåŠç”Ÿæ€çš„è®¡ç®—æ ¸å¿ƒ\u003c/p\u003e","title":"Web3 ç®€ä»‹"},{"content":"é¡¹ç›®ç®€ä»‹ é¡¹ç›®åç§°ï¼š0907 Wallet\nç³»ç»Ÿç±»å‹ï¼šåŸºäºæµè§ˆå™¨çš„ Web3 å»ä¸­å¿ƒåŒ–é’±åŒ…\nç³»ç»Ÿå®šä½ï¼šè½»é‡åŒ–ã€æœ¬åœ°åŒ–ã€è‡ªæ‰˜ç®¡çš„é’±åŒ…ç³»ç»Ÿ\nç³»ç»Ÿä»£ç æ¡†æ¶: React + Next.js\næ ¸å¿ƒç›®æ ‡\næä¾›å®‰å…¨å¯é çš„é’±åŒ…è´¦æˆ·ç”Ÿæˆä¸ç®¡ç†èƒ½åŠ›\næ”¯æŒåŸºæœ¬çš„è½¬è´¦ã€æ¶ˆæ¯ç­¾åä¸èµ„äº§æŸ¥çœ‹åŠŸèƒ½\nå®ç°å®Œæ•´çš„æœ¬åœ°åŒ–å­˜å‚¨ï¼Œå…¨æµç¨‹ä¸ä¸Šä¼ ç§é’¥\néç›®æ ‡è¯´æ˜ï¼ˆå¯é€‰ï¼‰\nä¸æ„å»ºé“¾ä¸‹åç«¯æœåŠ¡\nä¸æä¾›ä¸­å¿ƒåŒ–è´¦æˆ·ä½“ç³»\nä¸æ‰˜ç®¡ä»»ä½•ç”¨æˆ·èµ„äº§\n1. ä»£ç è§„èŒƒ 1.1 ä»£ç å‘½åè§„èŒƒ 1.1.1 ç»„ä»¶å‘½åï¼ˆReact ç»„ä»¶ã€é¡µé¢ï¼‰ è§„åˆ™ï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰ æ–‡ä»¶å‘½åï¼šåŒå .tsx æ–‡ä»¶ä¹Ÿå¿…é¡» PascalCase ç¤ºä¾‹ï¼š AccountCard.tsx â†’ æ­£ç¡® UserProfile.tsx â†’ æ­£ç¡® account-card.tsx â†’ é”™è¯¯ 1.1.2 æ¥å£ã€ç±»å‹ã€æšä¸¾å‘½å è§„åˆ™ï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰ å»ºè®®ï¼šæ¥å£å¯åŠ  I å‰ç¼€ï¼ˆå›¢é˜Ÿç»Ÿä¸€å³å¯ï¼‰ï¼Œç±»å‹å¯åŠ  T å‰ç¼€ï¼ˆå¯é€‰ï¼‰ ç¤ºä¾‹ï¼š interface UserInfo { ... } interface IUserInfo { ... } // ä¹Ÿå¯ type NetworkConfig = { ... } type TResponse\u0026lt;T\u0026gt; = { ... } enum ChainId { Ethereum = 1, Sepolia = 11155111 } 1.1.3 å¸¸é‡å‘½åï¼ˆå…¨å±€é…ç½®ã€é­”æ³•å€¼ï¼‰ è§„åˆ™ï¼šå…¨å¤§å†™ + ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆSCREAMING_SNAKE_CASEï¼‰ ç¤ºä¾‹ï¼š const API_BASE_URL = \u0026#34;https://api.0907wallet.com\u0026#34;; const DEFAULT_CHAIN_ID = 1; const MAX_RETRY_COUNT = 5; const SUPPORTED_CHAINS = [1, 5, 11155111]; 1.1.4 æ™®é€šå˜é‡ã€å‡½æ•°ã€å±æ€§å‘½å è§„åˆ™ï¼šå°é©¼å³°ï¼ˆcamelCaseï¼‰ å¸ƒå°”å€¼å»ºè®®ï¼šä»¥ isã€hasã€shouldã€can å¼€å¤´ ç¤ºä¾‹ï¼š const walletAddress = \u0026#34;0x1234...abcd\u0026#34;; let isConnected = false; const hasBalance = balance \u0026gt; 0; function connectWallet() { ... } async function fetchUserInfo() { ... } 1.1.5 æ–‡ä»¶ä¸æ–‡ä»¶å¤¹å‘½å ç±»å‹ å‘½åè§„åˆ™ ç¤ºä¾‹ ç»„ä»¶ / é¡µé¢ PascalCase AccountCard.tsxã€settings/page.tsx å·¥å…·å‡½æ•° kebab-case æˆ– camelCase storage.tsã€format-address.ts hooks ä»¥ use å¼€å¤´ useWallet.tsã€useDebounce.ts æ ·å¼ ä¸ç»„ä»¶åŒå AccountCard.module.css å¸¸é‡/é…ç½® kebab-case chains.config.ts 1.2 ä»£ç æ³¨é‡Šè§„èŒƒ 1.2.1 æ–‡ä»¶å¤´æ³¨é‡Šï¼ˆæ¯ä¸ªæ–‡ä»¶å¿…é¡»ï¼‰ /** * @file æ–‡ä»¶ç®€è¦æè¿°ï¼ˆä¸€å¥è¯ï¼‰ * @description æ›´è¯¦ç»†è¯´æ˜ï¼ˆå¯é€‰ï¼‰ * @author å¼ ä¸‰ï¼ˆgithub: zhangsanï¼‰ * @date 2025-04-05 */ 1.2.2 å¯¼å‡ºå‡½æ•° / ç»„ä»¶ / Hook å¿…é¡»å†™ JSDoc /** * åˆå§‹åŒ– IndexedDB æ•°æ®åº“ï¼ˆæ”¯æŒè‡ªåŠ¨æŒ‰éœ€å»ºè¡¨ï¼‰ * * @returns IndexedDB å®ä¾‹ * @example const db = await initDB(); */ export async function initDB(): Promise\u0026lt;IDBPDatabase\u0026gt; { ... } /** * è´¦æˆ·å¡ç‰‡ç»„ä»¶ï¼ˆå¸¦æ‚¬åœå¤åˆ¶åŠ¨ç”»ï¼‰ * * @param address - é’±åŒ…åœ°å€ï¼ˆ0x...ï¼‰ * @param name - å¯é€‰è´¦æˆ·åˆ«å */ export default function AccountCard({ address, name }: { address: string; name?: string; }) { ... } 1.2.3 å¤æ‚é€»è¾‘å¿…é¡»è§£é‡Šã€Œä¸ºä»€ä¹ˆã€ // ä¸ºä»€ä¹ˆå…³é—­å†å‡çº§ï¼Ÿ // IndexedDB åªæœ‰åœ¨ versionchange äº‹åŠ¡ä¸­æ‰èƒ½åˆ›å»º objectStoreï¼Œ // å½“å‰è¿æ¥æ— æ³•åˆ›å»ºæ–°è¡¨ï¼Œå¿…é¡»å…³é—­åä»¥æ–°ç‰ˆæœ¬é‡æ–°æ‰“å¼€ db.close(); 1.2.4 TODO / FIXME ç»Ÿä¸€æ ¼å¼ // TODO: [é«˜] æ”¯æŒå¤šç­¾é’±åŒ…ï¼ˆ@æå››ï¼Œ2025-07-01ï¼‰ // FIXME: å¿«é€Ÿç§»å…¥ç§»å‡ºä¼šå¯¼è‡´å¤šä¸ª setTimeout æ®‹ç•™ 1.2.5 ç¦æ­¢çš„æ³¨é‡Šï¼ˆç›´æ¥æ‰“å›ï¼‰ // é”™è¯¯ç¤ºä¾‹ï¼ˆè§£é‡Šã€Œåšä»€ä¹ˆã€è€Œä¸æ˜¯ã€Œä¸ºä»€ä¹ˆã€ï¼‰ const a = 1; // å®šä¹‰å˜é‡ a setLoading(true); // è®¾ç½® loading ä¸º true // é”™è¯¯ï¼šè¿‡æ—¶æ³¨é‡Š const MAX_RETRY = 3; // æœ€å¤§é‡è¯•æ¬¡æ•° 5 æ¬¡ï¼ˆå®é™…æ˜¯ 3ï¼‰ 1.3 å…¶ä»–å¼ºåˆ¶è§„èŒƒï¼ˆå¿«é€Ÿè®°å¿†ç‰ˆï¼‰ é¡¹ç›® è¦æ±‚ ç±»å‹ä¼˜å…ˆ èƒ½ç”¨ TypeScript è§£å†³çš„ç»ä¸å†™æ³¨é‡Š props ç±»å‹ å¿…é¡»æ˜¾å¼å£°æ˜ interface/typeï¼Œç¦æ­¢ any è‡ªå®šä¹‰ Hook å¿…é¡»ä»¥ use å¼€å¤´ï¼Œæ–‡ä»¶åä¹Ÿå¿…é¡»æ˜¯ useXxx.ts async å‡½æ•° å¿…é¡» try-catch æˆ–è¿”å›é”™è¯¯çŠ¶æ€ console.log ä¸Šçº¿å‰å¿…é¡»åˆ é™¤æˆ–æ”¹ä¸º logger é­”æ³•å€¼ å…¨éƒ¨æå–ä¸ºå¸¸é‡ï¼ˆå‚è€ƒ 1.1.3ï¼‰ 2. ç³»ç»ŸåŠŸèƒ½èŒƒå›´ï¼ˆScopeï¼‰ 2.1 åŸºç¡€åŠŸèƒ½ ç”¨æˆ·å¯†ç åˆ›å»ºä¸éªŒè¯\nåŠ©è®°è¯ç”Ÿæˆä¸å±•ç¤º\nç§é’¥ç”Ÿæˆä¸å¯¼å…¥\nå¤šè´¦æˆ·ç®¡ç†\né“¾ä¸Šèµ„äº§ï¼ˆETHï¼‰ä½™é¢æŸ¥è¯¢\näº¤æ˜“å‘é€ï¼ˆè½¬è´¦ï¼‰\nåŸºæœ¬æ¶ˆæ¯ç­¾ååŠŸèƒ½\n2.2 æ‰©å±•åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰ å¤šè¯­è¨€æ”¯æŒï¼ˆä¸­/è‹±æ–‡ï¼‰\né’±åŒ…é”å®š / è§£é”\né’±åŒ…æ•°æ®å¯¼å‡ºï¼ˆåŠ©è®°è¯ / ç§é’¥ï¼‰\nå‹å¥½çš„é”™è¯¯åé¦ˆä¸åŸºç¡€æ ¡éªŒ\n3. ç³»ç»Ÿæ•´ä½“ç»“æ„ï¼ˆSystem Overviewï¼‰ ç³»ç»Ÿæ•´ä½“ç”±ä»¥ä¸‹å››ä¸ªä¸»è¦æ¨¡å—ç»„æˆï¼Œå„æ¨¡å—èŒè´£æ¸…æ™°ã€è¾¹ç•Œæ˜ç¡®ï¼Œé€šè¿‡æ ‡å‡†åŒ–æ¥å£è¿›è¡Œåä½œï¼š\n3.0 ç³»ç»Ÿå…¬ç”¨æ¨¡å— ğŸ‘‰ è¯¦ç»†è®¾è®¡è¯·è§ï¼š0907 Wallet ç³»ç»Ÿå…¬ç”¨å±‚è®¾è®¡\n3.1 ç”¨æˆ·ç®¡ç†æ¨¡å— ğŸ‘‰ è¯¦ç»†è®¾è®¡è¯·è§ï¼š0907 Wallet ç”¨æˆ·ç®¡ç†æ¨¡å—è®¾è®¡\n3.2 é’±åŒ…ç®¡ç†æ¨¡å— ğŸ‘‰ è¯¦ç»†è®¾è®¡è¯·è§ï¼š0907 Wallet é’±åŒ…ç®¡ç†æ¨¡å—è®¾è®¡\n3.3 ç½‘ç»œç®¡ç†æ¨¡å— 3.4 åŒºå—é“¾äº¤äº’æ¨¡å— 4. å®‰å…¨ç­–ç•¥æ¦‚è¿° 4.1 æ•°æ®å¤„ç†åŸåˆ™ æ‰€æœ‰æ•æ„Ÿæ•°æ®ä»…å­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°\nç³»ç»Ÿä¸ä¼šä¸Šä¼ ã€å¤‡ä»½æˆ–æ‰˜ç®¡ä»»ä½•ç§é’¥ä¿¡æ¯\n4.2 å¯†ç ç­–ç•¥ ç”¨æˆ·å¯†ç ä»…åœ¨æœ¬åœ°ç”Ÿæ•ˆ\nå¯†ç ç”¨äºæ§åˆ¶é’±åŒ…è§£é”ä¸ç§é’¥è®¿é—®æƒé™\n4.3 äº¤äº’å®‰å…¨æ€§ å¼•å¯¼ç”¨æˆ·åŠæ—¶å¤‡ä»½åŠ©è®°è¯\nè½¬è´¦ç­‰æ•æ„Ÿæ“ä½œéœ€è¿›è¡Œç¡®è®¤æç¤º\n5. å‰ç«¯ç•Œé¢ä¸ä½¿ç”¨æµç¨‹æ¦‚è¿° 5.1 é¡µé¢ç»“æ„ æ¬¢è¿ / åˆå§‹é¡µé¢\nå¯†ç è®¾ç½®é¡µé¢\nåˆ›å»ºé’±åŒ… / å¯¼å…¥é’±åŒ…é¡µé¢\né’±åŒ…ä¸»é¡µï¼ˆè´¦æˆ·ä¸èµ„äº§ï¼‰\nè½¬è´¦é¡µé¢\nè®¾ç½®é¡µé¢\n5.2 UI ä½¿ç”¨æµç¨‹ é¦–æ¬¡ä½¿ç”¨ï¼šåˆå§‹é¡µé¢ â†’ è®¾ç½®å¯†ç  â†’ åˆ›å»º/å¯¼å…¥é’±åŒ… â†’ è¿›å…¥ä¸»é¡µ\nå·²æœ‰é’±åŒ…ç”¨æˆ·ï¼šè¾“å…¥å¯†ç  â†’ è§£é”é’±åŒ… â†’ è¿›å…¥ä¸»é¡µ\n6. ç³»ç»Ÿè¾¹ç•Œï¼ˆSystem Boundariesï¼‰ 6.1 ç³»ç»Ÿå†…çš„å†…å®¹ æ‰€æœ‰å‰ç«¯é’±åŒ…ä¸šåŠ¡é€»è¾‘\næœ¬åœ°ç§é’¥ç”Ÿæˆä¸ç®¡ç†\nä¸åŒºå—é“¾èŠ‚ç‚¹çš„ç›´æ¥äº¤äº’\n6.2 ç³»ç»Ÿå¤–çš„å†…å®¹ åç«¯æœåŠ¡ï¼ˆé“¾ä¸‹åç«¯ï¼‰\næ•°æ®åº“ï¼ˆé“¾ä¸‹å­˜å‚¨ï¼‰\nå¤–éƒ¨é’±åŒ…æ’ä»¶ï¼ˆMetaMask ç­‰ï¼‰\nå¤–éƒ¨ä»·æ ¼æœåŠ¡\nåŒºå—é“¾æµè§ˆå™¨\n7. éåŠŸèƒ½æ€§è¦æ±‚ï¼ˆNFRï¼‰æ¦‚è¿° 7.1 å®‰å…¨æ€§ ç§é’¥ä¸ä¼šé€šè¿‡ç½‘ç»œä¼ è¾“\nç”¨æˆ·å¯†ç éœ€å—åˆ°é€‚å½“ä¿æŠ¤\n7.2 å¯ç”¨æ€§ é¡µé¢ç»“æ„ç®€æ´æ¸…æ™°\næä¾›å¿…è¦çš„é”™è¯¯æç¤º\n7.3 å¯ç»´æŠ¤æ€§ æ ¸å¿ƒé’±åŒ…æ¨¡å—ä¸ UI åˆ†å±‚\næ¨¡å—åŠŸèƒ½è¾¹ç•Œæ˜ç¡®\n7.4 æ‰©å±•æ€§ æ”¯æŒæœªæ¥æ‰©å±•å¤šé“¾èƒ½åŠ›\næ”¯æŒæ–°å¢è´¦æˆ·æˆ–èµ„äº§ç±»å‹\n8. é™åˆ¶ä¸å·²çŸ¥é—®é¢˜ï¼ˆKnown Limitationsï¼‰ æµè§ˆå™¨ç¯å¢ƒå®‰å…¨æ€§ä¾èµ–ç”¨æˆ·è®¾å¤‡æœ¬èº«\nIndexedDB æ•°æ®å¯èƒ½å› æµè§ˆå™¨æ¸…ç†è€Œä¸¢å¤±\nç§é’¥æ³„éœ²åä¸å¯æ¢å¤\n9. åç»­è§„åˆ’ï¼ˆRoadmapï¼‰ 9.1 1.0 ç‰ˆæœ¬ï¼šå•é“¾é’±åŒ… + åŸºç¡€è½¬è´¦/ç­¾ååŠŸèƒ½ å®ç°ä»¥å¤ªåŠä¸»ç½‘åŸºç¡€åŠŸèƒ½ï¼ŒåŒ…æ‹¬è´¦æˆ·ç®¡ç†ã€ETH è½¬è´¦ã€æ¶ˆæ¯ç­¾åç­‰æ ¸å¿ƒèƒ½åŠ›ã€‚\n9.2 2.0 ç‰ˆæœ¬ï¼šå¤šé“¾æ”¯æŒã€NFT åŸºç¡€å±•ç¤º æ‰©å±•è‡³å¤šé“¾æ¶æ„ï¼Œæ”¯æŒ BSCã€Polygon ç­‰ EVM å…¼å®¹é“¾ï¼Œå¹¶å¢åŠ  NFT èµ„äº§å±•ç¤ºåŠŸèƒ½ã€‚\n9.3 3.0 ç‰ˆæœ¬ï¼šDApp è¿æ¥ï¼ˆInject Providerï¼‰ å®ç° EIP-1193 æ ‡å‡† Provider æ³¨å…¥ï¼Œæ”¯æŒè¿æ¥å¤–éƒ¨ DAppï¼Œæä¾› MetaMask å…¼å®¹çš„äº¤äº’ä½“éªŒã€‚\n9.4 3.5 ç‰ˆæœ¬ï¼šç§»åŠ¨ç«¯é€‚é… ä¼˜åŒ–ç§»åŠ¨ç«¯å“åº”å¼å¸ƒå±€ï¼Œå¢åŠ  PWA æ”¯æŒï¼Œæå‡ç§»åŠ¨ç«¯ç”¨æˆ·ä½“éªŒã€‚\n9.5 4.0 ç‰ˆæœ¬ï¼šæ”¯æŒç¡¬ä»¶é’±åŒ… é›†æˆ Ledgerã€Trezor ç­‰ç¡¬ä»¶é’±åŒ…ï¼Œæä¾›ç¡¬ä»¶çº§ç§é’¥ä¿æŠ¤èƒ½åŠ›ã€‚\n","permalink":"http://localhost:1313/projects/0907wallet/","summary":"\u003ch1 id=\"é¡¹ç›®ç®€ä»‹\"\u003eé¡¹ç›®ç®€ä»‹\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eé¡¹ç›®åç§°\u003c/strong\u003eï¼š0907 Wallet\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eç³»ç»Ÿç±»å‹\u003c/strong\u003eï¼šåŸºäºæµè§ˆå™¨çš„ Web3 å»ä¸­å¿ƒåŒ–é’±åŒ…\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eç³»ç»Ÿå®šä½\u003c/strong\u003eï¼šè½»é‡åŒ–ã€æœ¬åœ°åŒ–ã€è‡ªæ‰˜ç®¡çš„é’±åŒ…ç³»ç»Ÿ\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eç³»ç»Ÿä»£ç æ¡†æ¶\u003c/strong\u003e: React + Next.js\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eæ ¸å¿ƒç›®æ ‡\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eæä¾›å®‰å…¨å¯é çš„é’±åŒ…è´¦æˆ·ç”Ÿæˆä¸ç®¡ç†èƒ½åŠ›\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eæ”¯æŒåŸºæœ¬çš„è½¬è´¦ã€æ¶ˆæ¯ç­¾åä¸èµ„äº§æŸ¥çœ‹åŠŸèƒ½\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eå®ç°å®Œæ•´çš„æœ¬åœ°åŒ–å­˜å‚¨ï¼Œå…¨æµç¨‹ä¸ä¸Šä¼ ç§é’¥\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eéç›®æ ‡è¯´æ˜ï¼ˆå¯é€‰ï¼‰\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eä¸æ„å»ºé“¾ä¸‹åç«¯æœåŠ¡\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eä¸æä¾›ä¸­å¿ƒåŒ–è´¦æˆ·ä½“ç³»\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eä¸æ‰˜ç®¡ä»»ä½•ç”¨æˆ·èµ„äº§\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch1 id=\"1-ä»£ç è§„èŒƒ\"\u003e1. ä»£ç è§„èŒƒ\u003c/h1\u003e\n\u003ch2 id=\"11-ä»£ç å‘½åè§„èŒƒ\"\u003e1.1 ä»£ç å‘½åè§„èŒƒ\u003c/h2\u003e\n\u003ch3 id=\"111-ç»„ä»¶å‘½åreact-ç»„ä»¶é¡µé¢\"\u003e1.1.1 ç»„ä»¶å‘½åï¼ˆReact ç»„ä»¶ã€é¡µé¢ï¼‰\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè§„åˆ™\u003c/strong\u003eï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæ–‡ä»¶å‘½å\u003c/strong\u003eï¼šåŒå \u003ccode\u003e.tsx\u003c/code\u003e æ–‡ä»¶ä¹Ÿå¿…é¡» PascalCase\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç¤ºä¾‹\u003c/strong\u003eï¼š\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eAccountCard\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etsx\u003c/span\u003e        \u003cspan class=\"err\"\u003eâ†’\u003c/span\u003e \u003cspan class=\"err\"\u003eæ­£ç¡®\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eUserProfile\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etsx\u003c/span\u003e        \u003cspan class=\"err\"\u003eâ†’\u003c/span\u003e \u003cspan class=\"err\"\u003eæ­£ç¡®\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eaccount\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"nx\"\u003ecard\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etsx\u003c/span\u003e       \u003cspan class=\"err\"\u003eâ†’\u003c/span\u003e \u003cspan class=\"err\"\u003eé”™è¯¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"112-æ¥å£ç±»å‹æšä¸¾å‘½å\"\u003e1.1.2 æ¥å£ã€ç±»å‹ã€æšä¸¾å‘½å\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè§„åˆ™\u003c/strong\u003eï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå»ºè®®\u003c/strong\u003eï¼šæ¥å£å¯åŠ  \u003ccode\u003eI\u003c/code\u003e å‰ç¼€ï¼ˆå›¢é˜Ÿç»Ÿä¸€å³å¯ï¼‰ï¼Œç±»å‹å¯åŠ  \u003ccode\u003eT\u003c/code\u003e å‰ç¼€ï¼ˆå¯é€‰ï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç¤ºä¾‹\u003c/strong\u003eï¼š\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003einterface\u003c/span\u003e \u003cspan class=\"nx\"\u003eUserInfo\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003einterface\u003c/span\u003e \u003cspan class=\"nx\"\u003eIUserInfo\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e      \u003cspan class=\"c1\"\u003e// ä¹Ÿå¯\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kr\"\u003etype\u003c/span\u003e \u003cspan class=\"nx\"\u003eNetworkConfig\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003etype\u003c/span\u003e \u003cspan class=\"nx\"\u003eTResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eenum\u003c/span\u003e \u003cspan class=\"nx\"\u003eChainId\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003eEthereum\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eSepolia\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e11155111\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"113-å¸¸é‡å‘½åå…¨å±€é…ç½®é­”æ³•å€¼\"\u003e1.1.3 å¸¸é‡å‘½åï¼ˆå…¨å±€é…ç½®ã€é­”æ³•å€¼ï¼‰\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè§„åˆ™\u003c/strong\u003eï¼šå…¨å¤§å†™ + ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆSCREAMING_SNAKE_CASEï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç¤ºä¾‹\u003c/strong\u003eï¼š\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eAPI_BASE_URL\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;https://api.0907wallet.com\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eDEFAULT_CHAIN_ID\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eMAX_RETRY_COUNT\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eSUPPORTED_CHAINS\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e11155111\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"114-æ™®é€šå˜é‡å‡½æ•°å±æ€§å‘½å\"\u003e1.1.4 æ™®é€šå˜é‡ã€å‡½æ•°ã€å±æ€§å‘½å\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè§„åˆ™\u003c/strong\u003eï¼šå°é©¼å³°ï¼ˆcamelCaseï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå¸ƒå°”å€¼å»ºè®®\u003c/strong\u003eï¼šä»¥ \u003ccode\u003eis\u003c/code\u003eã€\u003ccode\u003ehas\u003c/code\u003eã€\u003ccode\u003eshould\u003c/code\u003eã€\u003ccode\u003ecan\u003c/code\u003e å¼€å¤´\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç¤ºä¾‹\u003c/strong\u003eï¼š\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ewalletAddress\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;0x1234...abcd\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eisConnected\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kc\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ehasBalance\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ebalance\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003econnectWallet() {\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003easync\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003efetchUserInfo() {\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"115-æ–‡ä»¶ä¸æ–‡ä»¶å¤¹å‘½å\"\u003e1.1.5 æ–‡ä»¶ä¸æ–‡ä»¶å¤¹å‘½å\u003c/h3\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eç±»å‹\u003c/th\u003e\n          \u003cth\u003eå‘½åè§„åˆ™\u003c/th\u003e\n          \u003cth\u003eç¤ºä¾‹\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eç»„ä»¶ / é¡µé¢\u003c/td\u003e\n          \u003ctd\u003ePascalCase\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003eAccountCard.tsx\u003c/code\u003eã€\u003ccode\u003esettings/page.tsx\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eå·¥å…·å‡½æ•°\u003c/td\u003e\n          \u003ctd\u003ekebab-case æˆ– camelCase\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003estorage.ts\u003c/code\u003eã€\u003ccode\u003eformat-address.ts\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ehooks\u003c/td\u003e\n          \u003ctd\u003eä»¥ \u003ccode\u003euse\u003c/code\u003e å¼€å¤´\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003euseWallet.ts\u003c/code\u003eã€\u003ccode\u003euseDebounce.ts\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eæ ·å¼\u003c/td\u003e\n          \u003ctd\u003eä¸ç»„ä»¶åŒå\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003eAccountCard.module.css\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eå¸¸é‡/é…ç½®\u003c/td\u003e\n          \u003ctd\u003ekebab-case\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003echains.config.ts\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"12-ä»£ç æ³¨é‡Šè§„èŒƒ\"\u003e1.2 ä»£ç æ³¨é‡Šè§„èŒƒ\u003c/h2\u003e\n\u003ch3 id=\"121-æ–‡ä»¶å¤´æ³¨é‡Šæ¯ä¸ªæ–‡ä»¶å¿…é¡»\"\u003e1.2.1 æ–‡ä»¶å¤´æ³¨é‡Šï¼ˆæ¯ä¸ªæ–‡ä»¶å¿…é¡»ï¼‰\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @file æ–‡ä»¶ç®€è¦æè¿°ï¼ˆä¸€å¥è¯ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @description æ›´è¯¦ç»†è¯´æ˜ï¼ˆå¯é€‰ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @author å¼ ä¸‰ï¼ˆgithub: zhangsanï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @date 2025-04-05\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"122-å¯¼å‡ºå‡½æ•°--ç»„ä»¶--hook-å¿…é¡»å†™-jsdoc\"\u003e1.2.2 å¯¼å‡ºå‡½æ•° / ç»„ä»¶ / Hook å¿…é¡»å†™ JSDoc\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * åˆå§‹åŒ– IndexedDB æ•°æ®åº“ï¼ˆæ”¯æŒè‡ªåŠ¨æŒ‰éœ€å»ºè¡¨ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @returns IndexedDB å®ä¾‹\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @example const db = await initDB();\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kr\"\u003easync\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003einitDB\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003ePromise\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eIDBPDatabase\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * è´¦æˆ·å¡ç‰‡ç»„ä»¶ï¼ˆå¸¦æ‚¬åœå¤åˆ¶åŠ¨ç”»ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param address - é’±åŒ…åœ°å€ï¼ˆ0x...ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param name    - å¯é€‰è´¦æˆ·åˆ«å\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eAccountCard\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003eaddress\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003ename\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003eaddress\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003ename?\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e})\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"123-å¤æ‚é€»è¾‘å¿…é¡»è§£é‡Šä¸ºä»€ä¹ˆ\"\u003e1.2.3 å¤æ‚é€»è¾‘å¿…é¡»è§£é‡Šã€Œä¸ºä»€ä¹ˆã€\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// ä¸ºä»€ä¹ˆå…³é—­å†å‡çº§ï¼Ÿ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// IndexedDB åªæœ‰åœ¨ versionchange äº‹åŠ¡ä¸­æ‰èƒ½åˆ›å»º objectStoreï¼Œ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// å½“å‰è¿æ¥æ— æ³•åˆ›å»ºæ–°è¡¨ï¼Œå¿…é¡»å…³é—­åä»¥æ–°ç‰ˆæœ¬é‡æ–°æ‰“å¼€\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eclose\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"124-todo--fixme-ç»Ÿä¸€æ ¼å¼\"\u003e1.2.4 TODO / FIXME ç»Ÿä¸€æ ¼å¼\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// TODO: [é«˜] æ”¯æŒå¤šç­¾é’±åŒ…ï¼ˆ@æå››ï¼Œ2025-07-01ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// FIXME: å¿«é€Ÿç§»å…¥ç§»å‡ºä¼šå¯¼è‡´å¤šä¸ª setTimeout æ®‹ç•™\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"125-ç¦æ­¢çš„æ³¨é‡Šç›´æ¥æ‰“å›\"\u003e1.2.5 ç¦æ­¢çš„æ³¨é‡Šï¼ˆç›´æ¥æ‰“å›ï¼‰\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// é”™è¯¯ç¤ºä¾‹ï¼ˆè§£é‡Šã€Œåšä»€ä¹ˆã€è€Œä¸æ˜¯ã€Œä¸ºä»€ä¹ˆã€ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ea\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e           \u003cspan class=\"c1\"\u003e// å®šä¹‰å˜é‡ a\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"nx\"\u003esetLoading\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e      \u003cspan class=\"c1\"\u003e// è®¾ç½® loading ä¸º true\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// é”™è¯¯ï¼šè¿‡æ—¶æ³¨é‡Š\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eMAX_RETRY\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e   \u003cspan class=\"c1\"\u003e// æœ€å¤§é‡è¯•æ¬¡æ•° 5 æ¬¡ï¼ˆå®é™…æ˜¯ 3ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"13-å…¶ä»–å¼ºåˆ¶è§„èŒƒå¿«é€Ÿè®°å¿†ç‰ˆ\"\u003e1.3 å…¶ä»–å¼ºåˆ¶è§„èŒƒï¼ˆå¿«é€Ÿè®°å¿†ç‰ˆï¼‰\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eé¡¹ç›®\u003c/th\u003e\n          \u003cth\u003eè¦æ±‚\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eç±»å‹ä¼˜å…ˆ\u003c/td\u003e\n          \u003ctd\u003eèƒ½ç”¨ TypeScript è§£å†³çš„ç»ä¸å†™æ³¨é‡Š\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eprops ç±»å‹\u003c/td\u003e\n          \u003ctd\u003eå¿…é¡»æ˜¾å¼å£°æ˜ interface/typeï¼Œç¦æ­¢ any\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè‡ªå®šä¹‰ Hook\u003c/td\u003e\n          \u003ctd\u003eå¿…é¡»ä»¥ \u003ccode\u003euse\u003c/code\u003e å¼€å¤´ï¼Œæ–‡ä»¶åä¹Ÿå¿…é¡»æ˜¯ \u003ccode\u003euseXxx.ts\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003easync å‡½æ•°\u003c/td\u003e\n          \u003ctd\u003eå¿…é¡» try-catch æˆ–è¿”å›é”™è¯¯çŠ¶æ€\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003econsole.log\u003c/td\u003e\n          \u003ctd\u003eä¸Šçº¿å‰å¿…é¡»åˆ é™¤æˆ–æ”¹ä¸º logger\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eé­”æ³•å€¼\u003c/td\u003e\n          \u003ctd\u003eå…¨éƒ¨æå–ä¸ºå¸¸é‡ï¼ˆå‚è€ƒ 1.1.3ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"2-ç³»ç»ŸåŠŸèƒ½èŒƒå›´scope\"\u003e2. ç³»ç»ŸåŠŸèƒ½èŒƒå›´ï¼ˆScopeï¼‰\u003c/h2\u003e\n\u003ch3 id=\"21-åŸºç¡€åŠŸèƒ½\"\u003e2.1 åŸºç¡€åŠŸèƒ½\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eç”¨æˆ·å¯†ç åˆ›å»ºä¸éªŒè¯\u003c/p\u003e","title":"0907 Wallet"},{"content":"IDE Integrated Development Environmentï¼ˆé›†æˆå¼€å‘ç¯å¢ƒï¼‰\nå¸¸ç”¨çš„å¼€å‘ä¸è°ƒè¯•å·¥å…·\nVS Codeï¼šè½»é‡çº§é€šç”¨ç¼–è¾‘å™¨ IntelliJ IDEAï¼šJava é¡¹ç›®å¼€å‘ PyCharmï¼šPython é¡¹ç›®å¼€å‘ ç‰ˆæœ¬æ§åˆ¶ ç”¨äºä»£ç åä½œã€å†å²ç®¡ç†ä¸è‡ªåŠ¨åŒ–æµç¨‹\nGit / GitHubï¼šåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ä¸åä½œ GitHub Actionsï¼šè‡ªåŠ¨åŒ– CI/CD å·¥ä½œæµ GitKrakenï¼šå¯è§†åŒ– Git æ“ä½œå®¢æˆ·ç«¯ å®¹å™¨éƒ¨ç½² Dockerï¼šåº”ç”¨å®¹å™¨åŒ–ä¸ç¯å¢ƒä¸€è‡´æ€§ Docker Composeï¼šå¤šå®¹å™¨å¼€å‘ç¯å¢ƒ Kubernetesï¼ˆå¯é€‰ï¼‰ï¼šåº”ç”¨ç¼–æ’ä¸å¤§è§„æ¨¡éƒ¨ç½² å‰ç«¯å¼€å‘ Node.js / npm / pnpmï¼šå‰ç«¯æ„å»ºç¯å¢ƒ Vue / Reactï¼šå¸¸ç”¨å‰ç«¯æ¡†æ¶ Viteï¼šå¿«é€Ÿæ„å»ºå·¥å…· TailwindCSSï¼šå®ç”¨åŒ– CSS æ¡†æ¶ åç«¯å¼€å‘ Spring Bootï¼šç°ä»£åŒ– Java åç«¯å¼€å‘æ¡†æ¶ MyBatis / JPAï¼šæ•°æ®åº“ ORM Redisï¼šç¼“å­˜ä¸­é—´ä»¶ OpenAPI / Swaggerï¼šæ¥å£æ–‡æ¡£ç”Ÿæˆ è¿ç»´å¼€å‘ æ—¥å¿—ç®¡ç† Lokiï¼šåˆ†å¸ƒå¼æ—¥å¿—ç³»ç»Ÿ Vectorï¼šæ—¥å¿—é‡‡é›†ä¸å¤„ç† ğŸ‘‰ ç›¸å…³ç¬”è®°ï¼šVector æ—¥å¿—é‡‡é›†ä¸å¤„ç† LogstashEncoderï¼šç»“æ„åŒ– JSON æ—¥å¿— ç³»ç»Ÿç›‘æ§ Prometheusï¼šæ—¶åºç›‘æ§ä¸æŠ¥è­¦ Grafanaï¼šå¯è§†åŒ–ç›‘æ§é¢æ¿ åº”ç”¨æµ‹è¯• Postmanï¼šæ¥å£æµ‹è¯• JMeterï¼šå‹æµ‹å·¥å…· æ•°æ®å­˜å‚¨ ClickHouse: é«˜æ€§èƒ½åˆ—å¼æ•°æ®åº“ ğŸ‘‰ ç›¸å…³ç¬”è®°ï¼šClickHouse é«˜æ€§èƒ½æ•°æ®åº“ å­¦ä¹ ä¸æ•ˆç‡å·¥å…· å¸®åŠ©çŸ¥è¯†ç®¡ç†ã€é¡¹ç›®æ•´ç†ä¸å†™ä½œ\nNotionï¼šçŸ¥è¯†åº“ä¸ä»»åŠ¡ç®¡ç† Obsidianï¼šMarkdown åŒé“¾ç¬”è®° Hugo + PaperModï¼šä¸ªäººåšå®¢ç”Ÿæˆå™¨ å›¾åƒå¤„ç† Photopeaï¼šåœ¨çº¿ PS GIMPï¼šå¼€æºå›¾åƒå¤„ç† Pixelmator / Affinityï¼ˆå¯é€‰ï¼‰ï¼šè½»é‡ PS æ›¿ä»£å“ ","permalink":"http://localhost:1313/toolkits/intro/","summary":"\u003ch2 id=\"ide\"\u003eIDE\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIntegrated Development Environmentï¼ˆé›†æˆå¼€å‘ç¯å¢ƒï¼‰\u003cbr\u003e\nå¸¸ç”¨çš„å¼€å‘ä¸è°ƒè¯•å·¥å…·\u003c/p\u003e\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eVS Code\u003c/strong\u003eï¼šè½»é‡çº§é€šç”¨ç¼–è¾‘å™¨\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eIntelliJ IDEA\u003c/strong\u003eï¼šJava é¡¹ç›®å¼€å‘\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePyCharm\u003c/strong\u003eï¼šPython é¡¹ç›®å¼€å‘\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"ç‰ˆæœ¬æ§åˆ¶\"\u003eç‰ˆæœ¬æ§åˆ¶\u003c/h2\u003e\n\u003cp\u003eç”¨äºä»£ç åä½œã€å†å²ç®¡ç†ä¸è‡ªåŠ¨åŒ–æµç¨‹\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eGit / GitHub\u003c/strong\u003eï¼šåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ä¸åä½œ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGitHub Actions\u003c/strong\u003eï¼šè‡ªåŠ¨åŒ– CI/CD å·¥ä½œæµ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGitKraken\u003c/strong\u003eï¼šå¯è§†åŒ– Git æ“ä½œå®¢æˆ·ç«¯\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å®¹å™¨éƒ¨ç½²\"\u003eå®¹å™¨éƒ¨ç½²\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eDocker\u003c/strong\u003eï¼šåº”ç”¨å®¹å™¨åŒ–ä¸ç¯å¢ƒä¸€è‡´æ€§\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDocker Compose\u003c/strong\u003eï¼šå¤šå®¹å™¨å¼€å‘ç¯å¢ƒ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eKubernetesï¼ˆå¯é€‰ï¼‰\u003c/strong\u003eï¼šåº”ç”¨ç¼–æ’ä¸å¤§è§„æ¨¡éƒ¨ç½²\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å‰ç«¯å¼€å‘\"\u003eå‰ç«¯å¼€å‘\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eNode.js / npm / pnpm\u003c/strong\u003eï¼šå‰ç«¯æ„å»ºç¯å¢ƒ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVue / React\u003c/strong\u003eï¼šå¸¸ç”¨å‰ç«¯æ¡†æ¶\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVite\u003c/strong\u003eï¼šå¿«é€Ÿæ„å»ºå·¥å…·\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTailwindCSS\u003c/strong\u003eï¼šå®ç”¨åŒ– CSS æ¡†æ¶\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"åç«¯å¼€å‘\"\u003eåç«¯å¼€å‘\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eSpring Boot\u003c/strong\u003eï¼šç°ä»£åŒ– Java åç«¯å¼€å‘æ¡†æ¶\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMyBatis / JPA\u003c/strong\u003eï¼šæ•°æ®åº“ ORM\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eRedis\u003c/strong\u003eï¼šç¼“å­˜ä¸­é—´ä»¶\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eOpenAPI / Swagger\u003c/strong\u003eï¼šæ¥å£æ–‡æ¡£ç”Ÿæˆ\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"è¿ç»´å¼€å‘\"\u003eè¿ç»´å¼€å‘\u003c/h2\u003e\n\u003ch3 id=\"æ—¥å¿—ç®¡ç†\"\u003eæ—¥å¿—ç®¡ç†\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eLoki\u003c/strong\u003eï¼šåˆ†å¸ƒå¼æ—¥å¿—ç³»ç»Ÿ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVector\u003c/strong\u003eï¼šæ—¥å¿—é‡‡é›†ä¸å¤„ç†  ğŸ‘‰ \u003ca href=\"/toolkits/vector\"\u003eç›¸å…³ç¬”è®°ï¼šVector æ—¥å¿—é‡‡é›†ä¸å¤„ç†\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLogstashEncoder\u003c/strong\u003eï¼šç»“æ„åŒ– JSON æ—¥å¿—\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ç³»ç»Ÿç›‘æ§\"\u003eç³»ç»Ÿç›‘æ§\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePrometheus\u003c/strong\u003eï¼šæ—¶åºç›‘æ§ä¸æŠ¥è­¦\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGrafana\u003c/strong\u003eï¼šå¯è§†åŒ–ç›‘æ§é¢æ¿\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"åº”ç”¨æµ‹è¯•\"\u003eåº”ç”¨æµ‹è¯•\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePostman\u003c/strong\u003eï¼šæ¥å£æµ‹è¯•\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eJMeter\u003c/strong\u003eï¼šå‹æµ‹å·¥å…·\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"æ•°æ®å­˜å‚¨\"\u003eæ•°æ®å­˜å‚¨\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eClickHouse\u003c/strong\u003e: é«˜æ€§èƒ½åˆ—å¼æ•°æ®åº“\nğŸ‘‰ \u003ca href=\"/toolkits/clickhouse\"\u003eç›¸å…³ç¬”è®°ï¼šClickHouse é«˜æ€§èƒ½æ•°æ®åº“\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å­¦ä¹ ä¸æ•ˆç‡å·¥å…·\"\u003eå­¦ä¹ ä¸æ•ˆç‡å·¥å…·\u003c/h2\u003e\n\u003cp\u003eå¸®åŠ©çŸ¥è¯†ç®¡ç†ã€é¡¹ç›®æ•´ç†ä¸å†™ä½œ\u003c/p\u003e","title":"Toolkits ç®€ä»‹"},{"content":"EIP ç´¢å¼•æ€»è§ˆ è¿™é‡Œæ”¶å½•æ‰€æœ‰å€¼å¾—å•ç‹¬æˆæ–‡çš„é‡Œç¨‹ç¢‘çº§EIP\næ¯ç¯‡æ·±åº¦æ‹†è§£ä¸€ä»½EIPçš„è¯ç”ŸèƒŒæ™¯æŠ€æœ¯ç»†èŠ‚å®‰å…¨å½±å“è½åœ°å†ç¨‹ç¤¾åŒºäº‰è®®åŠåç»­æ¼”è¿›\nç‚¹å‡»æ ‡é¢˜ç›´è¾¾å¯¹åº”ä¸“æ–‡\nç®€ä»‹ EIPï¼ˆEthereum Improvement Proposalï¼‰æ˜¯ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆ\nä»»ä½•äººéƒ½èƒ½æäº¤çš„æ ‡å‡†åŒ–æ–‡æ¡£\né©±åŠ¨ä»¥å¤ªåŠä»åˆ›ä¸–åŒºå—åˆ°ä»Šå¤©çš„å”¯ä¸€æ­£å¼æœºåˆ¶\nERCåªæ˜¯EIPçš„åº”ç”¨å±‚å­é›†\næ‰€æœ‰ç¡¬åˆ†å‰å‡çº§Layer2å˜é©è´¦æˆ·æŠ½è±¡éƒ½æºäºEIP\nè´¦æˆ·æŠ½è±¡æ—¶ä»£ EIP-4337 æ— ç§é’¥è´¦æˆ·æŠ½è±¡ï¼š2023å¹´çœŸæ­£è½åœ°ç‰ˆæœ¬ï¼ˆå·²å®Œç¨¿ï¼‰ EIP-3074 AUTHä¸AUTHCALLï¼šè¢«åºŸå¼ƒçš„è´¦æˆ·æŠ½è±¡å…ˆé©±ï¼ˆå¾…æ’°å†™ï¼‰ EIP-5003 ä»£ç æ³¨å…¥å¼è´¦æˆ·æŠ½è±¡ï¼ˆå¾…æ’°å†™ï¼‰ EIP-7702 æ–°è´¦æˆ·æŠ½è±¡ç»ˆææ–¹æ¡ˆï¼ˆ2025è¿›è¡Œä¸­ï¼‰ï¼ˆå¾…æ’°å†™ï¼‰ è´¹ç”¨å¸‚åœºä¸é€šç¼© EIP-1559 åŸºç¡€è´¹ç‡ƒçƒ§ï¼šè®©ETHæˆä¸ºè¶…å£°æ³¢è´§å¸ï¼ˆå¾…æ’°å†™ï¼‰ EIP-4844 Proto-Dankshardingï¼šRollupè´¹ç”¨æš´è·Œ90%ï¼ˆå¾…æ’°å†™ï¼‰ EIP-7514 å‡ç¼“è´¨æŠ¼å¢é•¿ï¼šä¿æŠ¤å»ä¸­å¿ƒåŒ–ï¼ˆå¾…æ’°å†™ï¼‰ è´¨æŠ¼ä¸ææ¬¾ EIP-4895 è´¨æŠ¼ææ¬¾ï¼šä¸Šæµ·å‡çº§æ ¸å¿ƒï¼ˆå¾…æ’°å†™ï¼‰ EIP-7002 éƒ¨åˆ†ææ¬¾ä¸ä¸»åŠ¨é€€å‡ºï¼ˆå¾…æ’°å†™ï¼‰ EIP-6110 é“¾ä¸Šè´¨æŠ¼å­˜æ¬¾ï¼ˆå¾…æ’°å†™ï¼‰ EVMä¸æ‰§è¡Œå±‚æœªæ¥ EIP-7691 EOFï¼šEVMå®¹å™¨åŒ–é©å‘½ï¼ˆ2026ç›®æ ‡ï¼‰ï¼ˆå¾…æ’°å†™ï¼‰ EIP-7623 æé«˜CALLDATAæˆæœ¬ä¸ºDankshardingé“ºè·¯ï¼ˆå¾…æ’°å†™ï¼‰ EIP-4444 å†å²æ•°æ®è¿‡æœŸæœºåˆ¶ï¼ˆå¾…æ’°å†™ï¼‰ EIP-5656 MCOPYæŒ‡ä»¤ï¼šé™ä½å†…å­˜æ‹·è´æˆæœ¬ï¼ˆå¾…æ’°å†™ï¼‰ æ•°æ®å¯ç”¨æ€§ä¸Layer2 EIP-4844 Blobäº¤æ˜“ä¸Dankshardingè·¯çº¿å›¾ï¼ˆå¾…æ’°å†™ï¼‰ EIP-7594 PeerDASï¼šå¯¹ç­‰æ•°æ®å¯ç”¨æ€§é‡‡æ ·ï¼ˆå¾…æ’°å†™ï¼‰ EIP-6465/6466 Blobå†å²è¿‡æœŸæ–¹æ¡ˆï¼ˆå¾…æ’°å†™ï¼‰ å…¶ä»–æ­£åœ¨å…³æ³¨çš„EIP EIP-7732 EIP-7702+ERC-7730å®‰å…¨å¢å¼ºç‰ˆï¼ˆå¾…æ’°å†™ï¼‰ EIP-2537 BLSé¢„ç¼–è¯‘ï¼šåŠ é€Ÿé›¶çŸ¥è¯†è¯æ˜ï¼ˆå¾…æ’°å†™ï¼‰ EIP-5920 PAY opcodeï¼šåŸç”Ÿè½¬è´¦æ–°æ–¹å¼ï¼ˆå¾…æ’°å†™ï¼‰ EIP-6780 è‡ªæ¯ä»…é™åˆ›å»ºäº¤æ˜“ï¼šæå‡çŠ¶æ€ç®¡ç†ï¼ˆå¾…æ’°å†™ï¼‰ æ›´å¤šEIPä¸“æ–‡æŒç»­æ›´æ–°ä¸­\nç›®å‰ä»…EIP-4337å·²å®Œç¨¿ï¼Œå…¶ä½™é™†ç»­æ”¾å‡º\næ¯ä¸€ç¯‡éƒ½æ˜¯ä»¥å¤ªåŠè¿›åŒ–å²çš„çœŸå®æ³¨è„š\n","permalink":"http://localhost:1313/web3/eip/intro/","summary":"\u003ch1 id=\"eip-ç´¢å¼•æ€»è§ˆ\"\u003eEIP ç´¢å¼•æ€»è§ˆ\u003c/h1\u003e\n\u003cp\u003eè¿™é‡Œæ”¶å½•æ‰€æœ‰å€¼å¾—å•ç‹¬æˆæ–‡çš„é‡Œç¨‹ç¢‘çº§EIP\u003cbr\u003e\næ¯ç¯‡æ·±åº¦æ‹†è§£ä¸€ä»½EIPçš„è¯ç”ŸèƒŒæ™¯æŠ€æœ¯ç»†èŠ‚å®‰å…¨å½±å“è½åœ°å†ç¨‹ç¤¾åŒºäº‰è®®åŠåç»­æ¼”è¿›\u003cbr\u003e\nç‚¹å‡»æ ‡é¢˜ç›´è¾¾å¯¹åº”ä¸“æ–‡\u003c/p\u003e\n\u003ch2 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eEIPï¼ˆEthereum Improvement Proposalï¼‰æ˜¯ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆ\u003cbr\u003e\nä»»ä½•äººéƒ½èƒ½æäº¤çš„æ ‡å‡†åŒ–æ–‡æ¡£\u003cbr\u003e\né©±åŠ¨ä»¥å¤ªåŠä»åˆ›ä¸–åŒºå—åˆ°ä»Šå¤©çš„å”¯ä¸€æ­£å¼æœºåˆ¶\u003cbr\u003e\nERCåªæ˜¯EIPçš„åº”ç”¨å±‚å­é›†\u003cbr\u003e\næ‰€æœ‰ç¡¬åˆ†å‰å‡çº§Layer2å˜é©è´¦æˆ·æŠ½è±¡éƒ½æºäºEIP\u003c/p\u003e\n\u003ch2 id=\"è´¦æˆ·æŠ½è±¡æ—¶ä»£\"\u003eè´¦æˆ·æŠ½è±¡æ—¶ä»£\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/web3/eip/eip-4337\"\u003eEIP-4337 æ— ç§é’¥è´¦æˆ·æŠ½è±¡ï¼š2023å¹´çœŸæ­£è½åœ°ç‰ˆæœ¬ï¼ˆå·²å®Œç¨¿ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-3074\"\u003eEIP-3074 AUTHä¸AUTHCALLï¼šè¢«åºŸå¼ƒçš„è´¦æˆ·æŠ½è±¡å…ˆé©±ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-5003\"\u003eEIP-5003 ä»£ç æ³¨å…¥å¼è´¦æˆ·æŠ½è±¡ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7702\"\u003eEIP-7702 æ–°è´¦æˆ·æŠ½è±¡ç»ˆææ–¹æ¡ˆï¼ˆ2025è¿›è¡Œä¸­ï¼‰ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"è´¹ç”¨å¸‚åœºä¸é€šç¼©\"\u003eè´¹ç”¨å¸‚åœºä¸é€šç¼©\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-1559\"\u003eEIP-1559 åŸºç¡€è´¹ç‡ƒçƒ§ï¼šè®©ETHæˆä¸ºè¶…å£°æ³¢è´§å¸ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-4844\"\u003eEIP-4844 Proto-Dankshardingï¼šRollupè´¹ç”¨æš´è·Œ90%ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7514\"\u003eEIP-7514 å‡ç¼“è´¨æŠ¼å¢é•¿ï¼šä¿æŠ¤å»ä¸­å¿ƒåŒ–ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"è´¨æŠ¼ä¸ææ¬¾\"\u003eè´¨æŠ¼ä¸ææ¬¾\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-4895\"\u003eEIP-4895 è´¨æŠ¼ææ¬¾ï¼šä¸Šæµ·å‡çº§æ ¸å¿ƒï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7002\"\u003eEIP-7002 éƒ¨åˆ†ææ¬¾ä¸ä¸»åŠ¨é€€å‡ºï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-6110\"\u003eEIP-6110 é“¾ä¸Šè´¨æŠ¼å­˜æ¬¾ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"evmä¸æ‰§è¡Œå±‚æœªæ¥\"\u003eEVMä¸æ‰§è¡Œå±‚æœªæ¥\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7691\"\u003eEIP-7691 EOFï¼šEVMå®¹å™¨åŒ–é©å‘½ï¼ˆ2026ç›®æ ‡ï¼‰ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7623\"\u003eEIP-7623 æé«˜CALLDATAæˆæœ¬ä¸ºDankshardingé“ºè·¯ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-4444\"\u003eEIP-4444 å†å²æ•°æ®è¿‡æœŸæœºåˆ¶ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-5656\"\u003eEIP-5656 MCOPYæŒ‡ä»¤ï¼šé™ä½å†…å­˜æ‹·è´æˆæœ¬ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"æ•°æ®å¯ç”¨æ€§ä¸layer2\"\u003eæ•°æ®å¯ç”¨æ€§ä¸Layer2\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-4844\"\u003eEIP-4844 Blobäº¤æ˜“ä¸Dankshardingè·¯çº¿å›¾ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7594\"\u003eEIP-7594 PeerDASï¼šå¯¹ç­‰æ•°æ®å¯ç”¨æ€§é‡‡æ ·ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-6465\"\u003eEIP-6465/6466 Blobå†å²è¿‡æœŸæ–¹æ¡ˆï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å…¶ä»–æ­£åœ¨å…³æ³¨çš„eip\"\u003eå…¶ä»–æ­£åœ¨å…³æ³¨çš„EIP\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7732\"\u003eEIP-7732 EIP-7702+ERC-7730å®‰å…¨å¢å¼ºç‰ˆï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-2537\"\u003eEIP-2537 BLSé¢„ç¼–è¯‘ï¼šåŠ é€Ÿé›¶çŸ¥è¯†è¯æ˜ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-5920\"\u003eEIP-5920 PAY opcodeï¼šåŸç”Ÿè½¬è´¦æ–°æ–¹å¼ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-6780\"\u003eEIP-6780 è‡ªæ¯ä»…é™åˆ›å»ºäº¤æ˜“ï¼šæå‡çŠ¶æ€ç®¡ç†ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæ›´å¤šEIPä¸“æ–‡æŒç»­æ›´æ–°ä¸­\u003cbr\u003e\nç›®å‰ä»…EIP-4337å·²å®Œç¨¿ï¼Œå…¶ä½™é™†ç»­æ”¾å‡º\u003cbr\u003e\næ¯ä¸€ç¯‡éƒ½æ˜¯ä»¥å¤ªåŠè¿›åŒ–å²çš„çœŸå®æ³¨è„š\u003c/p\u003e","title":"EIP ç¬”è®°åˆé›†"},{"content":"æ‘˜è¦ å¼•å…¥ UserOperationï¼šä¸€ç§é«˜å±‚â€œä¼ªäº¤æ˜“å¯¹è±¡â€ï¼Œæ›¿ä»£ç›´æ¥åœ¨å…±è¯†å±‚æäº¤äº¤æ˜“\nç”¨æˆ·å°† UserOperation å‘é€åˆ°å•ç‹¬çš„ mempool\nBundler å°†å¤šä¸ª UserOperation æ‰“åŒ…ï¼Œé€šè¿‡ handleOps è°ƒç”¨ EntryPoint åˆçº¦ï¼Œå†æ‰“åŒ…è¿›åŒºå—\nç›®æ ‡æ˜¯åœ¨ä¸ä¿®æ”¹ä»¥å¤ªåŠåº•å±‚åè®®çš„æƒ…å†µä¸‹ï¼Œå®ç°è´¦æˆ·æŠ½è±¡\nåŠ¨æœº å®ç°è´¦æˆ·æŠ½è±¡\nå…è®¸ä½¿ç”¨æ™ºèƒ½åˆçº¦è´¦æˆ·ä½œä¸ºä¸»è´¦æˆ·ï¼Œæ”¯æŒä»»æ„éªŒè¯é€»è¾‘ã€‚ ç”¨æˆ·æ— éœ€æ‹¥æœ‰å¤–éƒ¨è´¦æˆ·ï¼ˆEOAï¼‰ã€‚ å»ä¸­å¿ƒåŒ–ä¸å¼€æ”¾å‚ä¸\nä»»ä½• bundler éƒ½å¯å‚ä¸äº¤æ˜“æ‰“åŒ…ã€‚ ä¾èµ–å…¬å…± mempoolï¼Œæ— éœ€ç”¨æˆ·ç›´æ¥çŸ¥æ™“ bundler åœ°å€ã€‚ ä¸å¢åŠ ä¿¡ä»»å‡è®¾ã€‚ æ— éœ€å…±è¯†å±‚ä¿®æ”¹\né¿å…åè®®å±‚æ”¹åŠ¨ï¼Œæé«˜å¿«é€Ÿéƒ¨ç½²çš„å¯èƒ½æ€§ã€‚ æ”¯æŒæ›´å¤šåº”ç”¨åœºæ™¯\néšç§ä¿æŠ¤å‹åº”ç”¨ åŸå­å¤šæ“ä½œ ä½¿ç”¨ ERC-20 ä»£å¸æ”¯ä»˜æ‰‹ç»­è´¹æˆ–å¼€å‘è€…ä»£ä»˜ çµæ´»çš„éªŒè¯é€»è¾‘ï¼ˆä¸åŒç­¾åæ–¹æ¡ˆã€å¤šç­¾ã€æ¢å¤æ–¹æ¡ˆï¼‰ çµæ´»çš„æ‰‹ç»­è´¹æ”¯ä»˜ï¼ˆç¬¬ä¸‰æ–¹æ”¯ä»˜ã€è·¨é“¾æ”¯ä»˜ï¼‰ æ‰¹é‡æ“ä½œä¸æ‰“åŒ…æ‰§è¡Œ æ€»ç»“ï¼šè¯¥ææ¡ˆé€šè¿‡ UserOperationã€Bundler å’Œ EntryPoint åˆçº¦å®ç°æ™ºèƒ½åˆçº¦è´¦æˆ·çš„å®Œå…¨æŠ½è±¡åŒ–ï¼Œæ”¯æŒå¤šç­¾ã€ä»£ä»˜å’Œæ‰¹é‡æ“ä½œï¼ŒåŒæ—¶æ— éœ€ä¿®æ”¹ä»¥å¤ªåŠå…±è¯†å±‚\nè§„èŒƒ æœ¯è¯­å®šä¹‰ æœ¯è¯­ å®šä¹‰ UserOperation ä¸€ç§æè¿°â€œä»£è¡¨ç”¨æˆ·å‘èµ·ä¸€ç¬”äº¤æ˜“â€çš„æ•°æ®ç»“æ„ã€‚ä¸ºé¿å…ä¸åŸç”Ÿäº¤æ˜“æ··æ·†ï¼Œç‰¹æ„ä¸å«â€œtransactionâ€ã€‚åƒäº¤æ˜“ä¸€æ ·ï¼Œå®ƒåŒ…å« toã€calldataã€maxFeePerGasã€maxPriorityFeePerGasã€nonceã€signatureã€‚ä¸åƒäº¤æ˜“ï¼Œå®ƒåŒ…å«ä»¥ä¸‹æ‰€è¿°çš„å‡ ä¸ªå…¶ä»–å­—æ®µã€‚ç‰¹åˆ«æ³¨æ„ï¼Œsignature å­—æ®µçš„ä½¿ç”¨ä¸ç”±åè®®å®šä¹‰ï¼Œè€Œæ˜¯ç”±æ™ºèƒ½åˆçº¦è´¦æˆ·å®ç°å®šä¹‰ Sender å‘èµ· UserOperation çš„æ™ºèƒ½åˆçº¦è´¦æˆ· EntryPoint ç”¨äºæ‰§è¡Œ UserOperation æ‰¹æ¬¡çš„å•ä¾‹åˆçº¦ã€‚Bundler åº”ç™½åå•æ”¯æŒçš„ EntryPoint Bundler ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆåŒºå—æ„å»ºè€…ï¼‰ï¼Œå®ƒèƒ½å¤„ç† UserOperationã€åˆ›å»ºæœ‰æ•ˆçš„ entryPoint.handleOps() äº¤æ˜“ï¼Œå¹¶åœ¨äº¤æ˜“ä»æœ‰æ•ˆæ—¶å°†å…¶æ·»åŠ åˆ°åŒºå—ä¸­ã€‚è¿™å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°ï¼šBundler å¯ä»¥è‡ªå·±å……å½“åŒºå—æ„å»ºè€…ã€‚å¦‚æœ bundler ä¸æ˜¯åŒºå—æ„å»ºè€…ï¼Œå®ƒåº”é€šè¿‡ mev-boost ç­‰åŸºç¡€è®¾æ–½æˆ–å…¶ä»–æè®®è€…-æ„å»ºè€…åˆ†ç¦»æœºåˆ¶ä¸åŒºå—æ„å»ºè€…åˆä½œ Paymaster åŒæ„ä»£æ›¿ sender æ”¯ä»˜äº¤æ˜“è´¹ç”¨çš„è¾…åŠ©åˆçº¦ Factory å¿…è¦æ—¶è´Ÿè´£éƒ¨ç½²æ–° sender åˆçº¦çš„è¾…åŠ©åˆçº¦ Aggregator ä¹Ÿç§°ä¸ºâ€œæˆæƒåˆçº¦â€ - ä¸€ä¸ªå…è®¸å¤šä¸ª UserOperation å…±äº«ä¸€æ¬¡éªŒè¯çš„åˆçº¦ã€‚æ­¤ç±»åˆçº¦çš„å®Œæ•´è®¾è®¡è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´ Canonical UserOperation mempool ä¸€ä¸ªå»ä¸­å¿ƒåŒ–ã€æ— è®¸å¯çš„ P2P ç½‘ç»œï¼Œbundler åœ¨å…¶ä¸­äº¤æ¢ç¬¦åˆåŒä¸€å¥—å…±äº«éªŒè¯è§„åˆ™çš„åˆæ³• UserOperationã€‚å…·ä½“è§„åˆ™çš„å®Œæ•´è§„èŒƒè¶…å‡ºæœ¬ææ¡ˆèŒƒå›´ Alternative UserOperation mempool ä»»ä½•å…¶ä»– P2P å†…å­˜æ± ï¼Œå…¶ä¸­ UserOperation çš„æœ‰æ•ˆæ€§ç”±ä¸åŒäºå…±äº«è§„åˆ™çš„è§„åˆ™å†³å®šï¼Œè¿™äº›è§„åˆ™ä»¥ä»»ä½•æ–¹å¼åº”ç”¨äºéªŒè¯ä»£ç  Deposit Sender æˆ– Paymaster åˆçº¦å‘ EntryPoint åˆçº¦è½¬å…¥çš„ä¸€ç¬”ä»¥å¤ªå¸ï¼ˆæˆ–ä»»ä½• L2 åŸç”Ÿè´§å¸ï¼‰ï¼Œç”¨äºæ”¯ä»˜æœªæ¥ UserOperation çš„ gas è´¹ç”¨ UserOperation ç»“æ„å®šä¹‰ å­—æ®µ ç±»å‹ æè¿° sender address å‘èµ· UserOperation çš„è´¦æˆ· nonce uint256 é˜²é‡æ”¾å‚æ•°ï¼ˆè¯¦è§â€œåŠæŠ½è±¡ Nonce æ”¯æŒâ€ï¼‰ factory address æ–°è´¦æˆ·çš„è´¦æˆ·å·¥å‚ OR 0x7702 æ ‡å¿—ç”¨äº EIP-7702 è´¦æˆ·ï¼Œå¦åˆ™ address(0) factoryData bytes å¦‚æœæä¾› factoryï¼Œåˆ™ä¸ºè´¦æˆ·å·¥å‚çš„æ•°æ® OR EIP-7702 åˆå§‹åŒ–æ•°æ®ï¼Œæˆ–ç©ºæ•°ç»„ callData bytes åœ¨ä¸»è¦æ‰§è¡Œè°ƒç”¨æœŸé—´ä¼ é€’ç»™ sender çš„æ•°æ® callGasLimit uint256 ä¸ºä¸»è¦æ‰§è¡Œè°ƒç”¨åˆ†é…çš„ gas é‡ verificationGasLimit uint256 ä¸ºéªŒè¯æ­¥éª¤åˆ†é…çš„ gas é‡ preVerificationGas uint256 é¢å¤– gas ç”¨äºæ”¯ä»˜ bundler maxFeePerGas uint256 æœ€å¤§ gas è´¹ï¼ˆç±»ä¼¼äº EIP-1559 max_fee_per_gasï¼‰ maxPriorityFeePerGas uint256 æœ€å¤§ä¼˜å…ˆè´¹ï¼ˆç±»ä¼¼äº EIP-1559 max_priority_fee_per_gasï¼‰ paymaster address paymaster åˆçº¦åœ°å€ï¼ˆæˆ–ç©ºï¼Œå¦‚æœ sender è‡ªå·±æ”¯ä»˜ gasï¼‰ paymasterVerificationGasLimit uint256 ä¸º paymaster éªŒè¯ä»£ç åˆ†é…çš„ gas é‡ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰ paymasterPostOpGasLimit uint256 ä¸º paymaster åæ“ä½œä»£ç åˆ†é…çš„ gas é‡ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰ paymasterData bytes paymaster çš„æ•°æ®ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰ signature bytes ä¼ å…¥ sender ä»¥éªŒè¯æˆæƒçš„æ•°æ® ä¸Šé“¾æ—¶éƒ¨åˆ†å­—æ®µä¼šè¢«æ‰“åŒ…ï¼Œè½¬å˜æˆ PackedUserOperation\nEntrypoint æ¥å£ PackedUserOperation ç»“æ„å®šä¹‰\nå­—æ®µ ç±»å‹ æè¿° sender address nonce uint256 initCode bytes factory åœ°å€å’Œ factoryData çš„è¿æ¥ï¼ˆæˆ–ç©ºï¼‰ï¼Œæˆ– EIP-7702 æ•°æ® callData bytes accountGasLimits bytes32 verificationGasLimitï¼ˆ16 å­—èŠ‚ï¼‰å’Œ callGasLimitï¼ˆ16 å­—èŠ‚ï¼‰çš„è¿æ¥ preVerificationGas uint256 gasFees bytes32 maxPriorityFeePerGasï¼ˆ16 å­—èŠ‚ï¼‰å’Œ maxFeePerGasï¼ˆ16 å­—èŠ‚ï¼‰çš„è¿æ¥ paymasterAndData bytes paymaster å­—æ®µçš„è¿æ¥ï¼ˆæˆ–ç©ºï¼‰ signature bytes EntryPoint åˆçº¦çš„æ ¸å¿ƒæ¥å£å¦‚ä¸‹ï¼š\nfunction handleOps(PackedUserOperation[] calldata ops, address payable beneficiary); beneficiary æ˜¯å°†æ”¶åˆ°æ‰¹æ¬¡æ‰§è¡ŒæœŸé—´æ”¶é›†çš„æ‰€æœ‰ gas è´¹çš„åœ°å€ã€‚\nSmart Contract Account æ¥å£ interface IAccount { function validateUserOp (PackedUserOperation calldata userOp, bytes32 userOpHash, uint256 missingAccountFunds) external returns (uint256 validationData); } userOpHash æ˜¯å¯¹ userOpï¼ˆé™¤ signatureï¼‰ã€entryPoint å’Œ chainId çš„å“ˆå¸Œ\néœ€å®ç°åŠŸèƒ½\nå¿…é¡»éªŒè¯è°ƒç”¨è€…æ˜¯å¯ä¿¡çš„ EntryPoint å¿…é¡»éªŒè¯ signature æ˜¯ userOpHash çš„æœ‰æ•ˆç­¾åï¼Œå¹¶åœ¨ç­¾åä¸åŒ¹é…æ—¶è¿”å› SIG_VALIDATION_FAILED (1) è€Œé revertã€‚ä»»ä½•å…¶ä»–é”™è¯¯å¿…é¡» revert åœ¨è¿”å› SIG_VALIDATION_FAILED (1) æ—¶ä¸åº”æå‰è¿”å›ã€‚ç›¸åï¼Œåº”å®Œæˆæ­£å¸¸æµç¨‹ä»¥å¯ç”¨éªŒè¯å‡½æ•°çš„ gas ä¼°ç®— å¿…é¡»æ”¯ä»˜ EntryPointï¼ˆè°ƒç”¨è€…ï¼‰è‡³å°‘ missingAccountFundsï¼ˆå¯èƒ½ä¸ºé›¶ï¼Œå¦‚æœå½“å‰ sender çš„å­˜æ¬¾è¶³å¤Ÿ/å­˜åœ¨ paymaster å«ä»˜ï¼‰ sender å¯ä»¥æ”¯ä»˜è¶…è¿‡æ­¤æœ€å°å€¼ä»¥è¦†ç›–æœªæ¥äº¤æ˜“ã€‚å®ƒä¹Ÿå¯ä»¥éšæ—¶è°ƒç”¨ withdrawTo æ¥å–å› è¿”å›å€¼å¿…é¡»æ‰“åŒ… aggregator/authorizerã€validUntil å’Œ validAfter æ—¶é—´æˆ³ aggregator/authorizer - 0 è¡¨ç¤ºæœ‰æ•ˆç­¾åï¼Œ1 è¡¨ç¤ºç­¾åå¤±è´¥ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¸º aggregator/authorizer åˆçº¦çš„åœ°å€ validUntil æ˜¯ 6 å­—èŠ‚æ—¶é—´æˆ³å€¼ï¼Œæˆ–é›¶è¡¨ç¤ºâ€œæ— é™â€ã€‚UserOperation ä»…åœ¨æ­¤æ—¶é—´ä¹‹å‰æœ‰æ•ˆ validAfter æ˜¯ 6 å­—èŠ‚æ—¶é—´æˆ³ã€‚UserOperation ä»…åœ¨æ­¤æ—¶é—´ä¹‹åæœ‰æ•ˆ ä¸ºäº†ä½¿ç”¨åŒºå—å·æŒ‡å®šæœ‰æ•ˆèŒƒå›´ï¼ŒvalidUntil å’Œ validAfter éƒ½éœ€è¦å°†å…¶æœ€é«˜ä½è®¾ç½®ä¸º 1 æ³¨æ„ï¼šæœ‰æ•ˆèŒƒå›´å¯ä»¥ç”¨ä¸¤ä¸ªåŒºå—æ—¶é—´æˆ³æˆ–ä¸¤ä¸ªåŒºå—å·è¡¨ç¤ºï¼Œä½†ä¸èƒ½åœ¨åŒä¸€ä¸ª UserOperation çš„æœ‰æ•ˆèŒƒå›´ä¸­æ··åˆä¸€ä¸ªæ—¶é—´æˆ³å’Œä¸€ä¸ªåŒºå—å·\nSmart Contract Account å¯ä»¥å®ç° IAccountExecute æ¥å£\ninterface IAccountExecute { function executeUserOp(PackedUserOperation calldata userOp, bytes32 userOpHash) external; } æ­¤æ–¹æ³•å°†ç”± EntryPoint ä½¿ç”¨å½“å‰ UserOperation è°ƒç”¨ï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨ sender ä¸Šæ‰§è¡Œ callData\nåŠæŠ½è±¡ Nonce æ”¯æŒ åœ¨ä»¥å¤ªåŠåè®®ä¸­ï¼Œé¡ºåºäº¤æ˜“ nonce å€¼ç”¨ä½œé˜²é‡æ”¾æ–¹æ³•ï¼Œä»¥åŠç¡®å®šäº¤æ˜“åŒ…å«åœ¨åŒºå—ä¸­çš„æœ‰æ•ˆé¡ºåº.\nå®ƒè¿˜è´¡çŒ®äºäº¤æ˜“å“ˆå¸Œçš„å”¯ä¸€æ€§ï¼Œå› ä¸ºåŒä¸€ sender çš„åŒä¸€ nonce äº¤æ˜“ä¸èƒ½ä¸¤æ¬¡åŒ…å«åœ¨é“¾ä¸­.\nç„¶è€Œï¼Œè¦æ±‚å•ä¸€é¡ºåº nonce å€¼é™åˆ¶äº† sender å®šä¹‰è‡ªå®šä¹‰äº¤æ˜“æ’åºå’Œé˜²é‡æ”¾é€»è¾‘çš„èƒ½åŠ›.\næˆ‘ä»¬å®ç°äº† nonce æœºåˆ¶ï¼Œä½¿ç”¨ UserOperation ä¸­çš„å•ä¸€ uint256 nonce å€¼ï¼Œä½†å°†å…¶è§†ä¸ºä¸¤ä¸ªå€¼ï¼š\n192 ä½â€œkeyâ€ 64 ä½â€œsequenceâ€ è¿™äº›å€¼åœ¨ EntryPoint åˆçº¦ä¸­é“¾ä¸Šè¡¨ç¤ºã€‚æˆ‘ä»¬åœ¨ EntryPoint æ¥å£ä¸­å®šä¹‰ä»¥ä¸‹æ–¹æ³•æ¥æš´éœ²è¿™äº›å€¼ï¼š\nfunction getNonce(address sender, uint192 key) external view returns (uint256 nonce); å¯¹äºæ¯ä¸ª keyï¼ŒEntryPoint ä¸ºæ¯ä¸ª UserOperation éªŒè¯ sequenceã€‚å¦‚æœ nonce éªŒè¯å¤±è´¥ï¼ŒUserOperation è¢«è§†ä¸ºæ— æ•ˆï¼Œæ‰¹æ¬¡ revertã€‚sequence å€¼ä¸º sender é¡ºåºä¸”å•è°ƒé€’å¢ã€‚æ–° key å¯ä»¥éšæ—¶å¼•å…¥ä»»æ„å€¼ï¼Œå…¶ sequence ä» 0 å¼€å§‹.\nè¿™ç§æ–¹æ³•åœ¨åè®®å±‚é¢ç»´æŠ¤äº†é“¾ä¸Š UserOperation å“ˆå¸Œå”¯ä¸€æ€§çš„ä¿è¯ï¼ŒåŒæ—¶å…è®¸è´¦æˆ·ä½¿ç”¨ 192 ä½â€œkeyâ€å­—æ®µå®ç°ä»»ä½•è‡ªå®šä¹‰é€»è¾‘ï¼ŒåŒæ—¶é€‚åˆ 32 å­—èŠ‚å­—.\nè¯»å–/éªŒè¯ nonce åœ¨å‡†å¤‡ UserOperation æ—¶ï¼Œbundler å¯ä»¥è°ƒç”¨æ­¤æ–¹æ³•æ¥ç¡®å®š nonce å­—æ®µçš„æœ‰æ•ˆå€¼.\nBundler å¯¹ UserOperation çš„éªŒè¯åº”ä»¥ getNonce å¼€å§‹ï¼Œä»¥ç¡®ä¿äº¤æ˜“å…·æœ‰æœ‰æ•ˆçš„ nonce å­—æ®µ.\nå¦‚æœ bundler æ„¿æ„æ¥å—åŒä¸€ sender çš„å¤šä¸ª UserOperation è¿›å…¥å…¶å†…å­˜æ± ï¼Œåˆ™ bundler åº”è·Ÿè¸ªå·²æ·»åŠ å†…å­˜æ± çš„ UserOperation çš„ key å’Œ sequence å¯¹.\nä½¿ç”¨ç¤ºä¾‹\nç»å…¸é¡ºåºé€’å¢ nonce ä¸ºäº†è¦æ±‚è´¦æˆ·å…·æœ‰ç»å…¸é¡ºåº nonceï¼ŒéªŒè¯å‡½æ•°å¿…é¡»æ‰§è¡Œï¼š\nrequire(userOp.nonce\u0026lt;type(uint64).max) æœ‰åºç®¡ç†äº‹ä»¶ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè´¦æˆ·å¯èƒ½éœ€è¦ä¸æ­£å¸¸æ“ä½œå¹¶è¡Œçš„â€œç®¡ç†â€æ“ä½œé€šé“.\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè´¦æˆ·å¯ä»¥åœ¨è°ƒç”¨è´¦æˆ·è‡ªèº«çš„æ–¹æ³•æ—¶ä½¿ç”¨ç‰¹å®š keyï¼š\nbytes4 sig = bytes4(userOp.callData[0 : 4]); uint key = userOp.nonce \u0026gt;\u0026gt; 64; if (sig == ADMIN_METHODSIG) { require(key == ADMIN_KEY, \u0026#34;wrong nonce-key for admin operation\u0026#34;); } else { require(key == 0, \u0026#34;wrong nonce-key for normal operation\u0026#34;); } EntryPoint åˆçº¦æ‰€éœ€åŠŸèƒ½ EntryPoint æ ¸å¿ƒæ–¹æ³•æ˜¯ handleOpsï¼Œå®ƒå¤„ç† UserOperation æ•°ç»„\nEntryPoint çš„ handleOps å‡½æ•°å¿…é¡»æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼ˆæˆ‘ä»¬é¦–å…ˆæè¿°æ›´ç®€å•çš„æ—  paymaster æƒ…å†µï¼‰ã€‚å®ƒå¿…é¡»è¿›è¡Œä¸¤ä¸ªå¾ªç¯ï¼ŒéªŒè¯å¾ªç¯å’Œæ‰§è¡Œå¾ªç¯ã€‚åœ¨éªŒè¯å¾ªç¯ä¸­ï¼ŒhandleOps è°ƒç”¨å¿…é¡»ä¸ºæ¯ä¸ª UserOperation æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š\nå¦‚æœ sender æ™ºèƒ½åˆçº¦è´¦æˆ·å°šä¸å­˜åœ¨ï¼Œä½¿ç”¨ UserOperation ä¸­æä¾›çš„ initcode åˆ›å»ºå®ƒ å¦‚æœ factory åœ°å€æ˜¯â€œ0x7702â€ï¼Œåˆ™ sender å¿…é¡»æ˜¯å…·æœ‰ EIP-7702 æˆæƒæŒ‡å®šçš„ EOAã€‚EntryPoint éªŒè¯æˆæƒåœ°å€ä¸ UserOperation signature ä¸­æŒ‡å®šçš„åœ°å€åŒ¹é…ï¼ˆè¯¦è§å¯¹ [EIP-7702] æˆæƒçš„æ”¯æŒï¼‰ å¦‚æœ sender ä¸å­˜åœ¨ï¼Œä¸” initcode ä¸ºç©ºï¼Œæˆ–æœªåœ¨â€œsenderâ€åœ°å€éƒ¨ç½²åˆçº¦ï¼Œåˆ™è°ƒç”¨å¿…é¡»å¤±è´¥ è­¦å‘Šï¼šå¦‚æœ sender å­˜åœ¨ï¼Œä¸” initcode ä¸ä¸ºç©ºï¼Œåˆ™å¿½ç•¥ initcodeã€‚\nåŸºäºéªŒè¯å’Œè°ƒç”¨ gas é™åˆ¶ä»¥åŠå½“å‰ gas å€¼è®¡ç®— sender éœ€è¦æ”¯ä»˜çš„æœ€å¤§å¯èƒ½è´¹ç”¨ è®¡ç®— sender å¿…é¡»æ·»åŠ åˆ° EntryPointâ€œdepositâ€çš„è´¹ç”¨ åœ¨ sender åˆçº¦ä¸Šè°ƒç”¨ validateUserOpï¼Œä¼ å…¥ UserOperationã€å…¶å“ˆå¸Œå’Œæ‰€éœ€è´¹ç”¨ã€‚å¦‚æœ sender è®¤ä¸º UserOperation æœ‰æ•ˆï¼Œæ™ºèƒ½åˆçº¦è´¦æˆ·å¿…é¡»éªŒè¯ UserOperation çš„ signature å‚æ•°å¹¶æ”¯ä»˜è´¹ç”¨ã€‚å¦‚æœä»»ä½• validateUserOp è°ƒç”¨å¤±è´¥ï¼ŒhandleOps å¿…é¡»è‡³å°‘è·³è¿‡è¯¥ UserOperation çš„æ‰§è¡Œï¼Œå¹¶å¯èƒ½å®Œå…¨ revert éªŒè¯ EntryPoint ä¸­è´¦æˆ·çš„ deposit è¶³å¤Ÿé«˜ä»¥è¦†ç›–æœ€å¤§å¯èƒ½æˆæœ¬ï¼ˆè¦†ç›–å·²å®Œæˆçš„éªŒè¯å’Œæœ€å¤§æ‰§è¡Œ gasï¼‰ æ‰§è¡Œæµç¨‹ ä½¿ç”¨ UserOperation çš„ calldata è°ƒç”¨è´¦æˆ·ã€‚è´¦æˆ·è‡ªè¡Œå†³å®šå¦‚ä½•è§£æ calldataï¼›é¢„æœŸå·¥ä½œæµæ˜¯è´¦æˆ·æœ‰ä¸€ä¸ª execute å‡½æ•°ï¼Œå°†å‰©ä½™ calldata è§£æä¸ºè´¦æˆ·åº”æ‰§è¡Œçš„ä¸€ä¸ªæˆ–å¤šä¸ªè°ƒç”¨åºåˆ— å¦‚æœ calldata ä»¥ IAccountExecute.executeUserOp çš„æ–¹æ³•ç­¾åå¼€å¤´ï¼Œåˆ™ EntryPoint å¿…é¡»é€šè¿‡ç¼–ç  executeUserOp(userOp,userOpHash) æ„å»º calldataï¼Œå¹¶ä½¿ç”¨è¯¥ calldata è°ƒç”¨è´¦æˆ· è°ƒç”¨åï¼Œç”¨é¢„æ”¶è´¹ç”¨çš„å¤šä½™ gas æˆæœ¬é€€è¿˜è´¦æˆ·çš„ deposit å¯¹ callGasLimit å’Œ paymasterPostOpGasLimit çš„å‰©ä½™æœªç”¨ gas æ–½åŠ  10%ï¼ˆUNUSED_GAS_PENALTY_PERCENTï¼‰çš„ç½šæ¬¾ã€‚ ä»…å½“å‰©ä½™æœªç”¨ gas é‡å¤§äºæˆ–ç­‰äº 40000ï¼ˆPENALTY_GAS_THRESHOLDï¼‰æ—¶æ‰æ–½åŠ æ­¤ç½šæ¬¾ æ­¤ç½šæ¬¾æ˜¯å¿…è¦çš„ï¼Œä»¥é˜²æ­¢ UserOperation é¢„ç•™æ‰¹æ¬¡ä¸­çš„å¤§é‡ gas ç©ºé—´ä½†æœªä½¿ç”¨ï¼Œä»è€Œé˜»æ­¢ bundler åŒ…å«å…¶ä»– UserOperation\næ‰§è¡Œæ‰€æœ‰è°ƒç”¨åï¼Œä»æ‰€æœ‰ UserOperation æ”¶é›†çš„è´¹ç”¨æ”¯ä»˜ç»™ bundler æä¾›çš„ beneficiary åœ°å€ åœ¨æ¥å— UserOperation ä¹‹å‰ï¼Œbundler åº”ä½¿ç”¨ RPC æ–¹æ³•æœ¬åœ°è°ƒç”¨ EntryPoint çš„ handleOps å‡½æ•°ï¼Œä»¥éªŒè¯ signature æ­£ç¡®ä¸” UserOperation å®é™…æ”¯ä»˜è´¹ç”¨ï¼›è¯¦è§ä¸‹æ–‡Simulation sectionéƒ¨åˆ†ã€‚èŠ‚ç‚¹/bundler å¿…é¡»æ‹’ç»éªŒè¯å¤±è´¥çš„ UserOperationï¼Œå³ä¸å°†å…¶æ·»åŠ åˆ°æœ¬åœ°å†…å­˜æ± ï¼Œä¹Ÿä¸ä¼ æ’­ç»™å…¶ä»–å¯¹ç­‰èŠ‚ç‚¹\nERC-4337 çš„ JSON-RPC API ä¸ºäº†æ”¯æŒå‘ bundler å‘é€ UserOperation å¯¹è±¡ï¼Œåè€…é€šè¿‡ P2P å†…å­˜æ± ä¼ æ’­å®ƒä»¬ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ç»„ JSON-RPC APIï¼ŒåŒ…æ‹¬ eth_sendUserOperation å’Œ eth_getUserOperationReceipt\næ–° JSON-RPC API çš„å®Œæ•´å®šä¹‰è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\nå¯¹ EIP-712 ç­¾åçš„æ”¯æŒ userOpHash è®¡ç®—ä¸º [EIP-712] ç±»å‹æ¶ˆæ¯å“ˆå¸Œï¼Œå…·æœ‰ä»¥ä¸‹å‚æ•°ï¼š\nbytes32 constant TYPE_HASH = keccak256( \u0026#34;EIP712Domain(string name,string version,uint256 chainId,address verifyingContract)\u0026#34; ); bytes32 constant PACKED_USEROP_TYPEHASH = keccak256( \u0026#34;PackedUserOperation(address sender,uint256 nonce,bytes initCode,bytes callData,bytes32 accountGasLimits,uint256 preVerificationGas,bytes32 gasFees,bytes paymasterAndData)\u0026#34; ); å¯¹ EIP-7702 æˆæƒçš„æ”¯æŒ åœ¨å¯ç”¨ EIP-7702 çš„ç½‘ç»œä¸Šï¼Œeth_sendUserOperation æ–¹æ³•æ¥å—é¢å¤–çš„ eip7702Auth å‚æ•°ã€‚å¦‚æœè®¾ç½®æ­¤å‚æ•°ï¼Œå®ƒå¿…é¡»æ˜¯æœ‰æ•ˆçš„ EIP-7702 æˆæƒå…ƒç»„ï¼Œå¹¶ç”± sender åœ°å€ç­¾åã€‚Bundler å¿…é¡»å°†æ‰¹æ¬¡ä¸­æ‰€æœ‰ UserOperation çš„æ‰€æœ‰æ‰€éœ€ eip7702Auth æ·»åŠ åˆ° authorizationListï¼Œå¹¶ä½¿ç”¨ SET_CODE_TX_TYPE äº¤æ˜“ç±»å‹æ‰§è¡Œæ‰¹æ¬¡ã€‚æ­¤å¤–ï¼ŒUserOperation å“ˆå¸Œè®¡ç®—æ›´æ–°ä»¥åŒ…å«æ‰€éœ€çš„ EIP-7702 å§”æ‰˜åœ°å€\nå¦‚æœ initCode å­—æ®µä»¥å³å¡«å…… 18 ä¸ªé›¶çš„ 0x7702 å¼€å¤´ï¼Œä¸”æ­¤è´¦æˆ·ä½¿ç”¨ EIP-7702 äº¤æ˜“éƒ¨ç½²ï¼Œåˆ™å“ˆå¸Œè®¡ç®—å¦‚ä¸‹ï¼š\nä¸ºå“ˆå¸Œè®¡ç®—ç›®çš„ï¼Œå°† UserOperation çš„ initCode å­—æ®µçš„å‰ 20 å­—èŠ‚è®¾ç½®ä¸ºè´¦æˆ·çš„ EIP-7702 å§”æ‰˜åœ°å€ï¼ˆä½¿ç”¨ EXTCODECOPY è·å–ï¼‰ initCode ä¸ç”¨äºè°ƒç”¨ factory åˆçº¦ å¦‚æœ initCode é•¿äº 20 å­—èŠ‚ï¼Œåˆ™å‰©ä½™ initCode ç”¨äºè°ƒç”¨è´¦æˆ·è‡ªèº«çš„åˆå§‹åŒ–å‡½æ•° æ³¨æ„ï¼šUserOperation å¯èƒ½ä»å¯åœ¨æ— æ­¤ç±» initCode çš„æƒ…å†µä¸‹æ‰§è¡Œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒEntryPoint ä¸å“ˆå¸Œå½“å‰ EIP-7702 å§”æ‰˜ï¼Œå¹¶å¯èƒ½é’ˆå¯¹ä¿®æ”¹åçš„è´¦æˆ·æ‰§è¡Œ\næ­¤å¤–ï¼ŒEIP-7702 å®šä¹‰æ‰§è¡Œæˆæƒçš„ gas æˆæœ¬ç­‰äº PER_EMPTY_ACCOUNT_COST = 25000ã€‚æ­¤ gas æ¶ˆè€—åœ¨ EntryPoint åˆçº¦é“¾ä¸Šä¸å¯è§‚å¯Ÿï¼Œå¿…é¡»åŒ…å«åœ¨ preVerificationGas å€¼ä¸­\næ‰©å±•ï¼špaymaster æˆ‘ä»¬æ‰©å±• EntryPoint é€»è¾‘ä»¥æ”¯æŒ paymaster èµåŠ©å…¶ä»–ç”¨æˆ·çš„äº¤æ˜“ã€‚æ­¤åŠŸèƒ½å¯ç”¨äºå…è®¸åº”ç”¨å¼€å‘è€…ä¸ºç”¨æˆ·è¡¥è´´è´¹ç”¨ã€å…è®¸ç”¨æˆ·ä½¿ç”¨ [ERC-20] ä»£å¸æ”¯ä»˜è´¹ç”¨ä»¥åŠè®¸å¤šå…¶ä»–ç”¨ä¾‹ã€‚å½“ UserOperation ä¸­çš„ paymasterAndData å­—æ®µéç©ºæ—¶ï¼ŒEntryPoint ä¸ºè¯¥ UserOperation å®ç°ä¸åŒçš„æµç¨‹ï¼š\nåœ¨éªŒè¯å¾ªç¯æœŸé—´ï¼Œé™¤äº†è°ƒç”¨ validateUserOpï¼ŒhandleOps æ‰§è¡Œè¿˜å¿…é¡»æ£€æŸ¥ paymaster åœ¨ EntryPoint æœ‰è¶³å¤Ÿçš„ ETH å­˜æ¬¾æ¥æ”¯ä»˜ UserOperationï¼Œç„¶åè°ƒç”¨ paymaster ä¸Šçš„ validatePaymasterUserOp ä»¥éªŒè¯ paymaster æ˜¯å¦æ„¿æ„æ”¯ä»˜ UserOperationã€‚è¯·æ³¨æ„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒvalidateUserOp ä»¥ missingAccountFunds ä¸º 0 è°ƒç”¨ï¼Œä»¥åæ˜ è´¦æˆ·çš„å­˜æ¬¾ä¸ç”¨äºæ­¤ UserOperation çš„æ”¯ä»˜\nå¦‚æœ paymaster çš„ validatePaymasterUserOp è¿”å›éç©º context å­—èŠ‚æ•°ç»„ï¼Œåˆ™ handleOps å¿…é¡»åœ¨ä¸»è¦æ‰§è¡Œè°ƒç”¨åè°ƒç”¨ paymaster ä¸Šçš„ postOpã€‚å¦åˆ™ï¼Œä¸è°ƒç”¨ postOp å‡½æ•°\næ¶æ„åˆ¶ä½œçš„ paymaster å¯èƒ½å¯¹ç³»ç»Ÿé€ æˆ DoS æ”»å‡»é£é™©ï¼Œbundler åº”é‡‡å–æ­¥éª¤ç¼“è§£ã€‚ä½œä¸ºç¼“è§£ï¼Œbundler åº”ä¸ºå…¶æœåŠ¡çš„åˆçº¦ä½¿ç”¨å£°èª‰ç³»ç»Ÿï¼Œä¸” paymaster å¿…é¡»é™åˆ¶å…¶å­˜å‚¨ä½¿ç”¨ï¼Œæˆ–åœ¨å£°èª‰ç³»ç»Ÿä¸­å­˜å…¥ stakeã€‚æ­¤ç±»å£°èª‰ç³»ç»Ÿçš„å®Œæ•´è§„èŒƒè¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\npaymasterAndData å­—æ®µç¼–ç å’Œ paymasterSignature paymasterAndData å­—æ®µæ˜¯ä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µçš„éæ ‡å‡†ç¼–ç ï¼š\npaymasterAddress - 20 å­—èŠ‚ â€” paymaster åˆçº¦åœ°å€\npaymasterVerificationGasLimit - 16 å­—èŠ‚ - éªŒè¯å‡½æ•°çš„ gas é™åˆ¶\npostOpGasLimit - 16 å­—èŠ‚ - postOp å‡½æ•°çš„ gas é™åˆ¶\npaymasterData - paymaster åˆçº¦å°†åœ¨ validatePaymasterUserOp è°ƒç”¨ä¸­æ¥æ”¶çš„æ•°æ® ä»¥ä¸‹æ•°æ®å¯ä»¥é€‰æ‹©é™„åŠ åˆ° paymasterAndData å­—æ®µï¼š\npaymasterSignature - paymaster åˆçº¦è¦æ£€æŸ¥çš„â€œsignatureâ€å€¼å­—èŠ‚æ•°ç»„ï¼›æ­¤å€¼å¯ä»¥æä¾›è€Œä¸å½±å“ UserOperation å“ˆå¸Œ\npaymasterSignatureLength - 2 å­—èŠ‚ - paymasterSignature å‚æ•°å­—èŠ‚æ•°ç»„çš„ç²¾ç¡®é•¿åº¦\nPAYMASTER_SIG_MAGIC (0x22e325a297439656) - é™„åŠ çš„é­”æœ¯å€¼ï¼Œè¡¨ç¤º UserOperation ä½¿ç”¨ paymasterSignature åŠŸèƒ½\næ³¨æ„ï¼Œç”±äº signature å’Œ paymasterSignature å­—æ®µéƒ½ä¸å½±å“ UserOperation å“ˆå¸Œï¼ŒSender å’Œ Paymaster çš„ç­¾åå¯ä»¥å¹¶è¡Œæ‰§è¡Œ\npaymaster æ¥å£å¦‚ä¸‹ï¼š\nfunction validatePaymasterUserOp (PackedUserOperation calldata userOp, bytes32 userOpHash, uint256 maxCost) external returns (bytes memory context, uint256 validationData); function postOp (PostOpMode mode, bytes calldata context, uint256 actualGasCost, uint256 actualUserOpFeePerGas) external; enum PostOpMode { opSucceeded, // UserOperation æˆåŠŸ opReverted // UserOperation revertã€‚paymaster ä»éœ€æ”¯ä»˜ gasã€‚ } EntryPoint å¿…é¡»å®ç°ä»¥ä¸‹ API ä»¥å…è®¸ paymaster ç­‰å®ä½“ stakeï¼Œä»è€Œåœ¨å­˜å‚¨è®¿é—®ä¸­å…·æœ‰æ›´å¤šçµæ´»æ€§ã€‚ // ä¸ºè°ƒç”¨å®ä½“æ·»åŠ  stake function addStake(uint32 _unstakeDelaySec) external payable; // è§£é” stakeï¼ˆå¿…é¡»ç­‰å¾… unstakeDelay æ‰èƒ½å–å›ï¼‰ function unlockStake() external; // å–å›è§£é”çš„ stake function withdrawStake(address payable withdrawAddress) external; paymaster è¿˜å¿…é¡»æœ‰ depositï¼ŒEntryPoint å°†ä»ä¸­æ”¶å– UserOperation æˆæœ¬ã€‚depositï¼ˆç”¨äºæ”¯ä»˜ gas è´¹ç”¨ï¼‰ä¸ stakeï¼ˆè¢«é”å®šï¼‰åˆ†å¼€ã€‚ EntryPoint å¿…é¡»å®ç°ä»¥ä¸‹æ¥å£ä»¥å…è®¸ Paymasterï¼ˆå¯é€‰åœ° Accountsï¼‰ç®¡ç†å…¶ depositï¼š\n// è¿”å›è´¦æˆ·çš„ deposit function balanceOf(address account) public view returns (uint256); // æ·»åŠ åˆ°ç»™å®šè´¦æˆ·çš„ deposit function depositTo(address account) public payable; // æ·»åŠ åˆ°è°ƒç”¨è´¦æˆ·çš„ deposit receive() external payable; // ä»å½“å‰è´¦æˆ·çš„ deposit å–å› function withdrawTo(address payable withdrawAddress, uint256 withdrawAmount) external; // è·å–å½“å‰æ‰§è¡Œçš„ UserOperation å“ˆå¸Œï¼Œæˆ–å¦‚æœä¸åœ¨æ‰§è¡ŒæœŸé—´è°ƒç”¨åˆ™ä¸º 0 function getCurrentUserOpHash() public view returns (bytes32); Bundler åœ¨æ”¶åˆ° UserOperation æ—¶çš„è¡Œä¸º ç±»ä¼¼äºä»¥å¤ªåŠäº¤æ˜“ï¼ŒUserOperation çš„é“¾å¤–æµç¨‹å¯ä»¥æè¿°å¦‚ä¸‹ï¼š\nå®¢æˆ·ç«¯é€šè¿‡ RPC è°ƒç”¨ eth_sendUserOperation å‘ bundler å‘é€ UserOperation åœ¨å°† UserOperation åŒ…å«åˆ°å†…å­˜æ± ä¹‹å‰ï¼Œbundler å¯¹æ–°æ”¶åˆ°çš„ UserOperation è¿è¡Œç¬¬ä¸€æ¬¡éªŒè¯ã€‚å¦‚æœ UserOperation éªŒè¯å¤±è´¥ï¼Œbundler ä¸¢å¼ƒå®ƒå¹¶åœ¨ eth_sendUserOperation å“åº”ä¸­è¿”å›é”™è¯¯ ç¨åï¼Œä¸€æ—¦æ„å»ºæ‰¹æ¬¡ï¼Œbundler ä»å†…å­˜æ± å–å‡º UserOperation å¹¶å¯¹æ¯ä¸ªè¿è¡Œå•ä¸ª UserOperation çš„ç¬¬äºŒæ¬¡éªŒè¯ã€‚å¦‚æœæˆåŠŸï¼Œåˆ™è®¡åˆ’åŒ…å«åœ¨ä¸‹ä¸€ä¸ªæ‰¹æ¬¡ä¸­ï¼Œå¦åˆ™ä¸¢å¼ƒ åœ¨é“¾ä¸Šæäº¤æ–°æ‰¹æ¬¡ä¹‹å‰ï¼Œbundler æ‰§è¡Œæ•´ä¸ª UserOperation æ‰¹æ¬¡çš„ç¬¬ä¸‰æ¬¡éªŒè¯ã€‚å¦‚æœä»»ä½• UserOperation éªŒè¯å¤±è´¥ï¼Œbundler ä¸¢å¼ƒå®ƒä»¬ã€‚bundler åº”è·Ÿè¸ªå¯¹ç­‰èŠ‚ç‚¹çš„å£°èª‰ã€‚æ­¤ç±»å£°èª‰ç³»ç»Ÿçš„å®Œæ•´è®¾è®¡è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´ å½“ bundler æ”¶åˆ° UserOperation æ—¶ï¼Œå®ƒå¿…é¡»é¦–å…ˆè¿è¡Œä¸€äº›åŸºæœ¬ sanity æ£€æŸ¥ï¼Œå³ï¼š\nsender æ˜¯ç°æœ‰åˆçº¦ï¼Œæˆ– initCode éç©ºï¼ˆä½†ä¸èƒ½ä¸¤è€…çš†æœ‰ï¼‰ å¦‚æœ initCode éç©ºï¼Œè§£æå…¶å‰ 20 å­—èŠ‚ä¸º factory åœ°å€æˆ– EIP-7702 æ ‡å¿— è®°å½• factory æ˜¯å¦ stakeï¼Œåœ¨åç»­æ¨¡æ‹Ÿè¡¨æ˜éœ€è¦æ—¶ã€‚å¦‚æœ factory è®¿é—®å…¨å±€çŠ¶æ€ï¼Œå®ƒå¿…é¡» stake verificationGasLimit å’Œ paymasterVerificationGasLimits ä½äº MAX_VERIFICATION_GAS (500000)ï¼Œä¸” preVerificationGas è¶³å¤Ÿé«˜ä»¥æ”¯ä»˜åºåˆ—åŒ– UserOperation çš„ calldata gas æˆæœ¬åŠ ä¸Š PRE_VERIFICATION_OVERHEAD_GAS (50000) paymasterAndData ä¸ºç©ºï¼Œæˆ–ä»¥ paymaster åœ°å€å¼€å¤´ï¼Œè¯¥åˆçº¦ (i) å½“å‰é“¾ä¸Šæœ‰éç©ºä»£ç ï¼Œ(ii) æœ‰è¶³å¤Ÿ deposit æ”¯ä»˜ UserOperationï¼Œ(iii) å½“å‰æœªè¢«ç¦ã€‚åœ¨æ¨¡æ‹ŸæœŸé—´ï¼Œè¿˜æ ¹æ®å…¶å­˜å‚¨ä½¿ç”¨æ£€æŸ¥ paymaster çš„ stake callGasLimit è‡³å°‘æ˜¯å…·æœ‰éé›¶å€¼çš„ CALL æˆæœ¬ maxFeePerGas å’Œ maxPriorityFeePerGas é«˜äº bundler æ„¿æ„æ¥å—çš„å¯é…ç½®æœ€å°å€¼ã€‚è‡³å°‘ï¼Œå®ƒä»¬è¶³å¤Ÿé«˜ä»¥åŒ…å«åœ¨å³å°†åˆ°æ¥çš„ block.basefee ä¸­ sender åœ¨å†…å­˜æ± ä¸­æ²¡æœ‰å¦ä¸€ä¸ª UserOperationï¼ˆæˆ–å®ƒæ›¿æ¢ç°æœ‰æ¡ç›®ï¼Œå…·æœ‰ç›¸åŒ sender å’Œ nonceï¼Œå…·æœ‰æ›´é«˜çš„ maxPriorityFeePerGas å’ŒåŒç­‰å¢åŠ çš„ maxFeePerGasï¼‰ã€‚å•ä¸ªæ‰¹æ¬¡ä¸­æ¯ä¸ª sender ä»…ä¸€ä¸ª UserOperationã€‚å¦‚æœ sender stakeï¼Œåˆ™å…é™¤æ­¤è§„åˆ™ï¼Œå¹¶å¯åœ¨å†…å­˜æ± å’Œæ‰¹æ¬¡ä¸­æœ‰å¤šä¸ª UserOperation UserOperation Simulation æˆ‘ä»¬å®šä¹‰ UserOperation æ¨¡æ‹Ÿï¼Œä½œä¸ºå¯¹ EntryPoint åˆçº¦çš„é“¾å¤–è§†å›¾è°ƒç”¨ï¼ˆæˆ–è·Ÿè¸ªè°ƒç”¨ï¼‰ä¸ UserOperationï¼Œä»¥åŠå¯¹éªŒè¯ä»£ç åº”ç”¨çš„å…±äº«è§„åˆ™é›†çš„å¼ºåˆ¶ï¼Œä½œä¸º UserOperation éªŒè¯çš„ä¸€éƒ¨åˆ†\nSimulation é€»è¾‘ä¾æ® è¦éªŒè¯æ­£å¸¸ä»¥å¤ªåŠäº¤æ˜“ txï¼Œbundler æ‰§è¡Œé™æ€æ£€æŸ¥ï¼Œå¦‚ï¼š\necrecover(tx.v, tx.r, tx.s) å¿…é¡»è¿”å›æœ‰æ•ˆ EOA tx.nonce å¿…é¡»æ˜¯æ¢å¤çš„ EOA çš„å½“å‰ nonce æ¢å¤çš„ EOA çš„ä½™é¢å¿…é¡»è¶³å¤Ÿæ”¯ä»˜äº¤æ˜“ tx.gasLimit å¿…é¡»è¶³å¤Ÿè¦†ç›–äº¤æ˜“çš„å†…åœ¨ gas æˆæœ¬ chainId å¿…é¡»åŒ¹é…å½“å‰é“¾ æ‰€æœ‰è¿™äº›æ£€æŸ¥ä¸ä¾èµ– EVM çŠ¶æ€ï¼Œä¸”ä¸èƒ½å—å…¶ä»–è´¦æˆ·äº¤æ˜“å½±å“\nç›¸åï¼ŒUserOperation éªŒè¯ä¾èµ– EVM çŠ¶æ€ï¼ˆå¯¹ validateUserOpã€validatePaymasterUserOp çš„è°ƒç”¨ï¼‰ï¼Œå¯è¢«å…¶ä»– UserOperationï¼ˆæˆ–æ­£å¸¸ä»¥å¤ªåŠäº¤æ˜“ï¼‰æ”¹å˜ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¼•å…¥æ¨¡æ‹Ÿä½œä¸ºæ£€æŸ¥å…¶æœ‰æ•ˆæ€§çš„æ–°æœºåˆ¶ã€‚ç›´è§‚åœ°è¯´ï¼Œæ¨¡æ‹Ÿçš„ç›®æ ‡æ˜¯ç¡®ä¿ UserOperation çš„é“¾ä¸ŠéªŒè¯ä»£ç è¢«æ²™ç®±åŒ–ï¼Œä¸åŒä¸€æ‰¹æ¬¡ä¸­çš„å…¶ä»– UserOperation éš”ç¦»\nSimulation è§„èŒƒï¼š è¦æ¨¡æ‹Ÿ UserOperation éªŒè¯ï¼Œbundler å¯¹ handleOps() æ–¹æ³•è¿›è¡Œè§†å›¾è°ƒç”¨ï¼Œä½¿ç”¨è¦æ£€æŸ¥çš„ UserOperation\næ¨¡æ‹Ÿåº”ä»…è¿è¡Œåœ¨ sender å’Œ paymaster çš„éªŒè¯éƒ¨åˆ†ï¼Œä¸”ä¸è¦æ±‚ UserOperation çš„æ‰§è¡Œã€‚Bundler å¯ä»¥å‘æ‰¹æ¬¡æ·»åŠ ç¬¬äºŒä¸ªâ€œæ€»æ˜¯å¤±è´¥â€çš„ UserOperationï¼Œä»¥ä¾¿æ¨¡æ‹Ÿåœ¨ç¬¬ä¸€ä¸ª UserOperation çš„éªŒè¯å®Œæˆåç»“æŸ\nå¦‚æœæ¨¡æ‹Ÿ revertï¼Œbundler å¿…é¡»ä¸¢å¼ƒ UserOperation\næ¨¡æ‹Ÿè°ƒç”¨æ‰§è¡Œå®Œæ•´éªŒè¯ï¼Œé€šè¿‡è°ƒç”¨ï¼š\nå¦‚æœå­˜åœ¨ initCodeï¼Œåˆ›å»º sender è´¦æˆ· account.validateUserOpã€‚ å¦‚æœæŒ‡å®š paymasterï¼špaymaster.validatePaymasterUserOp sender æˆ– paymaster å¯ä»¥è¿”å›æ—¶é—´èŒƒå›´ï¼ˆvalidAfter/validUntilï¼‰ã€‚UserOperation åœ¨å½“å‰æ—¶é—´å¿…é¡»æœ‰æ•ˆæ‰èƒ½è¢«è§†ä¸ºæœ‰æ•ˆï¼Œå®šä¹‰ä¸º validAfter\u0026lt;=block.timestamp\nBundler å¿…é¡»ä¸¢å¼ƒè¿‡æœŸå¤ªå¿«ä¸”å¯èƒ½åœ¨ä¸‹ä¸€ä¸ªåŒºå—å‰å¤±æ•ˆçš„ UserOperationã€‚è¦è§£ç è¿”å›çš„æ—¶é—´èŒƒå›´ï¼Œbundler å¿…é¡»ä½¿ç”¨è·Ÿè¸ªè¿è¡ŒéªŒè¯ï¼Œä»¥ä» validateUserOp å’Œ validatePaymasterUserOp æ–¹æ³•è§£ç è¿”å›å€¼\nä¸ºäº†é˜²æ­¢å¯¹ bundler çš„ DoS æ”»å‡»ï¼Œå®ƒä»¬å¿…é¡»ç¡®ä¿ä¸Šè¿°éªŒè¯æ–¹æ³•é€šè¿‡éªŒè¯è§„åˆ™ï¼Œè¿™äº›è§„åˆ™çº¦æŸå…¶ opcode å’Œå­˜å‚¨çš„ä½¿ç”¨ã€‚æ­¤ç±»å…±äº«è§„åˆ™é›†çš„å®Œæ•´è®¾è®¡è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\nEstimate preVerificationGas æœ¬æ–‡æ¡£ä¸æŒ‡å®šä¼°ç®—æ­¤å€¼çš„è§„èŒƒæ–¹å¼ï¼Œå› ä¸ºå®ƒå–å†³äºéæ°¸ä¹…ç½‘ç»œå±æ€§ï¼Œå¦‚æ“ä½œå’Œæ•°æ® gas å®šä»·ä»¥åŠé¢„æœŸæ‰¹æ¬¡å¤§å°ã€‚\nç„¶è€Œï¼Œè¦æ±‚ä¼°ç®—å€¼è¶³å¤Ÿè¦†ç›–ä»¥ä¸‹æˆæœ¬ï¼š\nåŸºæœ¬æ‰¹æ¬¡äº¤æ˜“æˆæœ¬ã€‚åœ¨ä»¥å¤ªåŠä¸Šï¼Œ21000 gas é™¤ä»¥ UserOperation æ•°é‡ã€‚ ä¸ UserOperation ç›¸å…³çš„ calldata gas æˆæœ¬ï¼Œå¦‚ EIP-2028 å®šä¹‰ã€‚ é™æ€ EntryPoint åˆçº¦ä»£ç æ‰§è¡Œã€‚ åŠ è½½ UserOperation çš„å›ºå®šå¤§å°å­—æ®µåˆ° EVM å†…å­˜çš„é™æ€å†…å­˜æˆæœ¬ ç”±äº paymaster validatePaymasterUserOp å‡½æ•°è¿”å›çš„ context å¯¼è‡´çš„å†…å­˜æˆæœ¬ï¼ˆåŒ…æ‹¬æ‰©å±•æˆæœ¬ï¼‰ï¼Œå¦‚æœç›¸å…³ã€‚ åˆ° innerHandleOp() å‡½æ•°çš„å¤–éƒ¨è°ƒç”¨ï¼Œè¿™æ˜¯ EntryPoint å®ç°çš„ä¸»è¦éƒ¨åˆ†ã€‚è¯·æ³¨æ„ï¼Œæ­¤å€¼éé™æ€ï¼Œå–å†³äº UserOperation åœ¨æ‰¹æ¬¡ä¸­çš„ä½ç½®ã€‚ [EIP-7702] æˆæƒæˆæœ¬ï¼Œå¦‚æœæœ‰ã€‚ EIP-7623 calldata åº•ä»·å¢åŠ ä¼°ç®—å¦‚ä¸‹ï¼š åº”ç”¨ tx.gasUsed çš„æ–°å…¬å¼ï¼Œç”¨æ­¤ UserOperation çš„ä¼°ç®—å€¼æ›¿æ¢ execution_gas_used å€¼ã€‚ ä¼°ç®—æ˜¯æ¨¡æ‹ŸæœŸé—´ä½¿ç”¨çš„æ‰€æœ‰éªŒè¯ gasï¼ˆè´¦æˆ·åˆ›å»ºã€éªŒè¯å’Œ paymaster éªŒè¯ï¼‰çš„æ€»å’ŒåŠ ä¸Šæ‰§è¡Œå’Œ postOp gas é™åˆ¶æ€»å’Œçš„ 10%ã€‚ Bundler å¿…é¡»è¦æ±‚ PreVerificationGas å€¼æœ‰ slack(æ¾å¼›å€¼)ï¼Œä»¥é€‚åº”æœªæ¥æ‰¹æ¬¡ä¸­çš„å†…å­˜æ‰©å±•æˆæœ¬ï¼Œä»¥åŠ UserOperation åœ¨å…¶ä¸­çš„é¢„æœŸä½ç½®\nPaymaster Paymaster åˆçº¦å…è®¸ gas æŠ½è±¡ï¼šæœ‰ä¸€ä¸ªåˆçº¦ï¼Œä¸æ˜¯äº¤æ˜“çš„ senderï¼Œæ¥æ”¯ä»˜äº¤æ˜“è´¹ç”¨\nPaymaster æ¶æ„å…è®¸å®ƒä»¬éµå¾ªâ€œé¢„æ”¶è´¹ï¼Œåé€€æ¬¾â€çš„æ¨¡å‹ã€‚ä¾‹å¦‚ï¼Œtoken-paymaster å¯ä»¥ç”¨äº¤æ˜“çš„æœ€å¤§å¯èƒ½ä»·æ ¼é¢„æ”¶è´¹ç”¨æˆ·ï¼Œå¹¶åœ¨ä¹‹åé€€æ¬¾å¤šä½™éƒ¨åˆ†\né¦–æ¬¡æ™ºèƒ½åˆçº¦è´¦æˆ·åˆ›å»º æ³¨æ„ï¼šå¯¹äºä½¿ç”¨ EIP-7702 çš„åˆçº¦ï¼Œæ­¤æµç¨‹åœ¨å¯¹ [EIP-7702] æˆæƒçš„æ”¯æŒä¸­æè¿°\næœ¬ææ¡ˆçš„é‡è¦è®¾è®¡ç›®æ ‡æ˜¯å¤åˆ¶ EOA çš„å…³é”®å±æ€§ï¼Œå³ç”¨æˆ·æ— éœ€æ‰§è¡Œè‡ªå®šä¹‰æ“ä½œæˆ–ä¾èµ–ç°æœ‰ç”¨æˆ·åˆ›å»ºå…¶æ™ºèƒ½åˆçº¦è´¦æˆ·ï¼›ä»–ä»¬å¯ä»¥æœ¬åœ°ç”Ÿæˆåœ°å€å¹¶ç«‹å³å¼€å§‹æ¥å—èµ„é‡‘\næ™ºèƒ½åˆçº¦è´¦æˆ·åˆ›å»ºæœ¬èº«ç”±â€œfactoryâ€åˆçº¦å®Œæˆï¼Œå¸¦æœ‰ä¸€äº›è´¦æˆ·ç‰¹å®šæ•°æ®ã€‚Factory é¢„æœŸä½¿ç”¨ CREATE2 0xF5ï¼ˆè€Œé CREATE 0xF0ï¼‰åˆ›å»ºè´¦æˆ·ï¼Œä»¥ä¾¿è´¦æˆ·åˆ›å»ºé¡ºåºä¸å¹²æ‰°ç”Ÿæˆåœ°å€ã€‚initCode å­—æ®µï¼ˆå¦‚æœéé›¶é•¿åº¦ï¼‰è§£æä¸º 20 å­—èŠ‚ factory åœ°å€ï¼Œåè·Ÿä¼ é€’ç»™æ­¤åœ°å€çš„ calldataã€‚æ­¤æ–¹æ³•è°ƒç”¨é¢„æœŸåˆ›å»ºè´¦æˆ·å¹¶è¿”å›å…¶åœ°å€ã€‚å¦‚æœ factory ä½¿ç”¨ CREATE2 0xF5 æˆ–å…¶ä»–ç¡®å®šæ€§æ–¹æ³•åˆ›å»ºè´¦æˆ·ï¼Œé¢„æœŸå³ä½¿å·²åˆ›å»ºä¹Ÿè¿”å›è´¦æˆ·åœ°å€ã€‚è¿™ä½¿å¾— bundler æ›´å®¹æ˜“æŸ¥è¯¢åœ°å€ï¼Œè€Œæ— éœ€çŸ¥é“è´¦æˆ·æ˜¯å¦å·²éƒ¨ç½²ï¼Œé€šè¿‡æ¨¡æ‹Ÿè°ƒç”¨ entryPoint.getSenderAddress()ï¼Œå®ƒåœ¨åº•å±‚è°ƒç”¨ factoryã€‚å½“æŒ‡å®š initCode æ—¶ï¼Œå¦‚æœ sender åœ°å€æŒ‡å‘ç°æœ‰åˆçº¦æˆ–è°ƒç”¨ initCode å sender åœ°å€ä»ä¸å­˜åœ¨ï¼Œåˆ™æ“ä½œä¸­æ­¢ã€‚initCode ä¸å¾—ç›´æ¥ä» EntryPoint è°ƒç”¨ï¼Œè€Œä»å¦ä¸€ä¸ªåœ°å€è°ƒç”¨ã€‚æ­¤ factory æ–¹æ³•åˆ›å»ºçš„åˆçº¦å¿…é¡»æ¥å— validateUserOp è°ƒç”¨ä»¥éªŒè¯ UserOperation çš„ç­¾åã€‚å¦‚æœ factory è®¿é—®å…¨å±€å­˜å‚¨ï¼Œåˆ™å¿…é¡» stakeã€‚æ³¨æ„ï¼šä¸ºäº†è®©é’±åŒ…åº”ç”¨åœ¨åˆ›å»ºå‰ç¡®å®šè´¦æˆ·çš„â€œåäº‹å®â€åœ°å€ï¼Œå®ƒåº”é™æ€è°ƒç”¨ entryPoint.getSenderAddress()\nå®‰å…¨è€ƒé‡ Factory åˆçº¦ æ‰€æœ‰ factory åˆçº¦å¿…é¡»æ£€æŸ¥å¯¹ createAccount() å‡½æ•°çš„æ‰€æœ‰è°ƒç”¨æºäº entryPoint.senderCreator() åœ°å€\nPaymaster åˆçº¦ æ‰€æœ‰ paymaster åˆçº¦å¿…é¡»æ£€æŸ¥å¯¹ validatePaymasterUserOp() å’Œ postOp() å‡½æ•°çš„æ‰€æœ‰è°ƒç”¨æºäº EntryPoint\nAggregator åˆçº¦ æ‰€æœ‰ aggregator åˆçº¦å¿…é¡»æ£€æŸ¥å¯¹ validateSignatures() å‡½æ•°çš„æ‰€æœ‰è°ƒç”¨æºäº EntryPoint\nEIP-7702 å§”æ‰˜æ™ºèƒ½åˆçº¦è´¦æˆ· æ‰€æœ‰ EIP-7702 å§”æ‰˜æ™ºèƒ½åˆçº¦è´¦æˆ·å®ç°å¿…é¡»æ£€æŸ¥å¯¹åˆå§‹åŒ–å‡½æ•°çš„æ‰€æœ‰è°ƒç”¨æºäº entryPoint.senderCreator() åœ°å€\nEntryPoint åˆçº¦æ— æ³•çŸ¥é“ EIP-7702 è´¦æˆ·æ˜¯å¦å·²åˆå§‹åŒ–ï¼Œå› æ­¤ EIP-7702 è´¦æˆ·åˆå§‹åŒ–ä»£ç å¯ä»¥é€šè¿‡ EntryPoint å¤šæ¬¡è°ƒç”¨ã€‚è´¦æˆ·ä»£ç åº”ä»…å…è®¸è°ƒç”¨ä¸€æ¬¡ï¼Œä¸”é’±åŒ…åº”ç”¨ä¸åº”é‡å¤ä¼ é€’ initCode\n","permalink":"http://localhost:1313/web3/eip/eip-4337/","summary":"\u003ch1 id=\"æ‘˜è¦\"\u003eæ‘˜è¦\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eå¼•å…¥ UserOperationï¼šä¸€ç§é«˜å±‚â€œä¼ªäº¤æ˜“å¯¹è±¡â€ï¼Œæ›¿ä»£ç›´æ¥åœ¨å…±è¯†å±‚æäº¤äº¤æ˜“\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç”¨æˆ·å°† UserOperation å‘é€åˆ°å•ç‹¬çš„ mempool\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eBundler å°†å¤šä¸ª UserOperation æ‰“åŒ…ï¼Œé€šè¿‡ handleOps è°ƒç”¨ EntryPoint åˆçº¦ï¼Œå†æ‰“åŒ…è¿›åŒºå—\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç›®æ ‡æ˜¯åœ¨ä¸ä¿®æ”¹ä»¥å¤ªåŠåº•å±‚åè®®çš„æƒ…å†µä¸‹ï¼Œå®ç°è´¦æˆ·æŠ½è±¡\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"åŠ¨æœº\"\u003eåŠ¨æœº\u003c/h1\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eå®ç°è´¦æˆ·æŠ½è±¡\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå…è®¸ä½¿ç”¨æ™ºèƒ½åˆçº¦è´¦æˆ·ä½œä¸ºä¸»è´¦æˆ·ï¼Œæ”¯æŒä»»æ„éªŒè¯é€»è¾‘ã€‚\u003c/li\u003e\n\u003cli\u003eç”¨æˆ·æ— éœ€æ‹¥æœ‰å¤–éƒ¨è´¦æˆ·ï¼ˆEOAï¼‰ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eå»ä¸­å¿ƒåŒ–ä¸å¼€æ”¾å‚ä¸\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä»»ä½• bundler éƒ½å¯å‚ä¸äº¤æ˜“æ‰“åŒ…ã€‚\u003c/li\u003e\n\u003cli\u003eä¾èµ–å…¬å…± mempoolï¼Œæ— éœ€ç”¨æˆ·ç›´æ¥çŸ¥æ™“ bundler åœ°å€ã€‚\u003c/li\u003e\n\u003cli\u003eä¸å¢åŠ ä¿¡ä»»å‡è®¾ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eæ— éœ€å…±è¯†å±‚ä¿®æ”¹\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eé¿å…åè®®å±‚æ”¹åŠ¨ï¼Œæé«˜å¿«é€Ÿéƒ¨ç½²çš„å¯èƒ½æ€§ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eæ”¯æŒæ›´å¤šåº”ç”¨åœºæ™¯\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eéšç§ä¿æŠ¤å‹åº”ç”¨\u003c/li\u003e\n\u003cli\u003eåŸå­å¤šæ“ä½œ\u003c/li\u003e\n\u003cli\u003eä½¿ç”¨ ERC-20 ä»£å¸æ”¯ä»˜æ‰‹ç»­è´¹æˆ–å¼€å‘è€…ä»£ä»˜\u003c/li\u003e\n\u003cli\u003eçµæ´»çš„éªŒè¯é€»è¾‘ï¼ˆä¸åŒç­¾åæ–¹æ¡ˆã€å¤šç­¾ã€æ¢å¤æ–¹æ¡ˆï¼‰\u003c/li\u003e\n\u003cli\u003eçµæ´»çš„æ‰‹ç»­è´¹æ”¯ä»˜ï¼ˆç¬¬ä¸‰æ–¹æ”¯ä»˜ã€è·¨é“¾æ”¯ä»˜ï¼‰\u003c/li\u003e\n\u003cli\u003eæ‰¹é‡æ“ä½œä¸æ‰“åŒ…æ‰§è¡Œ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cstrong\u003eæ€»ç»“\u003c/strong\u003eï¼šè¯¥ææ¡ˆé€šè¿‡ UserOperationã€Bundler å’Œ EntryPoint åˆçº¦å®ç°æ™ºèƒ½åˆçº¦è´¦æˆ·çš„å®Œå…¨æŠ½è±¡åŒ–ï¼Œæ”¯æŒå¤šç­¾ã€ä»£ä»˜å’Œæ‰¹é‡æ“ä½œï¼ŒåŒæ—¶æ— éœ€ä¿®æ”¹ä»¥å¤ªåŠå…±è¯†å±‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"è§„èŒƒ\"\u003eè§„èŒƒ\u003c/h2\u003e\n\u003ch3 id=\"æœ¯è¯­å®šä¹‰\"\u003eæœ¯è¯­å®šä¹‰\u003c/h3\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæœ¯è¯­\u003c/th\u003e\n          \u003cth\u003eå®šä¹‰\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eUserOperation\u003c/td\u003e\n          \u003ctd\u003eä¸€ç§æè¿°â€œä»£è¡¨ç”¨æˆ·å‘èµ·ä¸€ç¬”äº¤æ˜“â€çš„æ•°æ®ç»“æ„ã€‚ä¸ºé¿å…ä¸åŸç”Ÿäº¤æ˜“æ··æ·†ï¼Œç‰¹æ„ä¸å«â€œtransactionâ€ã€‚åƒäº¤æ˜“ä¸€æ ·ï¼Œå®ƒåŒ…å« toã€calldataã€maxFeePerGasã€maxPriorityFeePerGasã€nonceã€signatureã€‚ä¸åƒäº¤æ˜“ï¼Œå®ƒåŒ…å«ä»¥ä¸‹æ‰€è¿°çš„å‡ ä¸ªå…¶ä»–å­—æ®µã€‚ç‰¹åˆ«æ³¨æ„ï¼Œsignature å­—æ®µçš„ä½¿ç”¨ä¸ç”±åè®®å®šä¹‰ï¼Œè€Œæ˜¯ç”±æ™ºèƒ½åˆçº¦è´¦æˆ·å®ç°å®šä¹‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eSender\u003c/td\u003e\n          \u003ctd\u003eå‘èµ· UserOperation çš„æ™ºèƒ½åˆçº¦è´¦æˆ·\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eEntryPoint\u003c/td\u003e\n          \u003ctd\u003eç”¨äºæ‰§è¡Œ UserOperation æ‰¹æ¬¡çš„å•ä¾‹åˆçº¦ã€‚Bundler åº”ç™½åå•æ”¯æŒçš„ EntryPoint\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eBundler\u003c/td\u003e\n          \u003ctd\u003eä¸€ä¸ªèŠ‚ç‚¹ï¼ˆåŒºå—æ„å»ºè€…ï¼‰ï¼Œå®ƒèƒ½å¤„ç† UserOperationã€åˆ›å»ºæœ‰æ•ˆçš„ entryPoint.handleOps() äº¤æ˜“ï¼Œå¹¶åœ¨äº¤æ˜“ä»æœ‰æ•ˆæ—¶å°†å…¶æ·»åŠ åˆ°åŒºå—ä¸­ã€‚è¿™å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°ï¼šBundler å¯ä»¥è‡ªå·±å……å½“åŒºå—æ„å»ºè€…ã€‚å¦‚æœ bundler ä¸æ˜¯åŒºå—æ„å»ºè€…ï¼Œå®ƒåº”é€šè¿‡ mev-boost ç­‰åŸºç¡€è®¾æ–½æˆ–å…¶ä»–æè®®è€…-æ„å»ºè€…åˆ†ç¦»æœºåˆ¶ä¸åŒºå—æ„å»ºè€…åˆä½œ\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ePaymaster\u003c/td\u003e\n          \u003ctd\u003eåŒæ„ä»£æ›¿ sender æ”¯ä»˜äº¤æ˜“è´¹ç”¨çš„è¾…åŠ©åˆçº¦\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eFactory\u003c/td\u003e\n          \u003ctd\u003eå¿…è¦æ—¶è´Ÿè´£éƒ¨ç½²æ–° sender åˆçº¦çš„è¾…åŠ©åˆçº¦\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eAggregator\u003c/td\u003e\n          \u003ctd\u003eä¹Ÿç§°ä¸ºâ€œæˆæƒåˆçº¦â€ - ä¸€ä¸ªå…è®¸å¤šä¸ª UserOperation å…±äº«ä¸€æ¬¡éªŒè¯çš„åˆçº¦ã€‚æ­¤ç±»åˆçº¦çš„å®Œæ•´è®¾è®¡è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eCanonical UserOperation mempool\u003c/td\u003e\n          \u003ctd\u003eä¸€ä¸ªå»ä¸­å¿ƒåŒ–ã€æ— è®¸å¯çš„ P2P ç½‘ç»œï¼Œbundler åœ¨å…¶ä¸­äº¤æ¢ç¬¦åˆåŒä¸€å¥—å…±äº«éªŒè¯è§„åˆ™çš„åˆæ³• UserOperationã€‚å…·ä½“è§„åˆ™çš„å®Œæ•´è§„èŒƒè¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eAlternative UserOperation mempool\u003c/td\u003e\n          \u003ctd\u003eä»»ä½•å…¶ä»– P2P å†…å­˜æ± ï¼Œå…¶ä¸­ UserOperation çš„æœ‰æ•ˆæ€§ç”±ä¸åŒäºå…±äº«è§„åˆ™çš„è§„åˆ™å†³å®šï¼Œè¿™äº›è§„åˆ™ä»¥ä»»ä½•æ–¹å¼åº”ç”¨äºéªŒè¯ä»£ç \u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eDeposit\u003c/td\u003e\n          \u003ctd\u003eSender æˆ– Paymaster åˆçº¦å‘ EntryPoint åˆçº¦è½¬å…¥çš„ä¸€ç¬”ä»¥å¤ªå¸ï¼ˆæˆ–ä»»ä½• L2 åŸç”Ÿè´§å¸ï¼‰ï¼Œç”¨äºæ”¯ä»˜æœªæ¥ UserOperation çš„ gas è´¹ç”¨\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch3 id=\"useroperation-ç»“æ„å®šä¹‰\"\u003e\u003ccode\u003eUserOperation\u003c/code\u003e ç»“æ„å®šä¹‰\u003c/h3\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eå­—æ®µ\u003c/th\u003e\n          \u003cth\u003eç±»å‹\u003c/th\u003e\n          \u003cth\u003eæè¿°\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003esender\u003c/td\u003e\n          \u003ctd\u003eaddress\u003c/td\u003e\n          \u003ctd\u003eå‘èµ· UserOperation çš„è´¦æˆ·\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003enonce\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eé˜²é‡æ”¾å‚æ•°ï¼ˆè¯¦è§â€œåŠæŠ½è±¡ Nonce æ”¯æŒâ€ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003efactory\u003c/td\u003e\n          \u003ctd\u003eaddress\u003c/td\u003e\n          \u003ctd\u003eæ–°è´¦æˆ·çš„è´¦æˆ·å·¥å‚ OR 0x7702 æ ‡å¿—ç”¨äº EIP-7702 è´¦æˆ·ï¼Œå¦åˆ™ address(0)\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003efactoryData\u003c/td\u003e\n          \u003ctd\u003ebytes\u003c/td\u003e\n          \u003ctd\u003eå¦‚æœæä¾› factoryï¼Œåˆ™ä¸ºè´¦æˆ·å·¥å‚çš„æ•°æ® OR EIP-7702 åˆå§‹åŒ–æ•°æ®ï¼Œæˆ–ç©ºæ•°ç»„\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ecallData\u003c/td\u003e\n          \u003ctd\u003ebytes\u003c/td\u003e\n          \u003ctd\u003eåœ¨ä¸»è¦æ‰§è¡Œè°ƒç”¨æœŸé—´ä¼ é€’ç»™ sender çš„æ•°æ®\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ecallGasLimit\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eä¸ºä¸»è¦æ‰§è¡Œè°ƒç”¨åˆ†é…çš„ gas é‡\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003everificationGasLimit\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eä¸ºéªŒè¯æ­¥éª¤åˆ†é…çš„ gas é‡\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epreVerificationGas\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eé¢å¤– gas ç”¨äºæ”¯ä»˜ bundler\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003emaxFeePerGas\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eæœ€å¤§ gas è´¹ï¼ˆç±»ä¼¼äº EIP-1559 max_fee_per_gasï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003emaxPriorityFeePerGas\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eæœ€å¤§ä¼˜å…ˆè´¹ï¼ˆç±»ä¼¼äº EIP-1559 max_priority_fee_per_gasï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epaymaster\u003c/td\u003e\n          \u003ctd\u003eaddress\u003c/td\u003e\n          \u003ctd\u003epaymaster åˆçº¦åœ°å€ï¼ˆæˆ–ç©ºï¼Œå¦‚æœ sender è‡ªå·±æ”¯ä»˜ gasï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epaymasterVerificationGasLimit\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eä¸º paymaster éªŒè¯ä»£ç åˆ†é…çš„ gas é‡ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epaymasterPostOpGasLimit\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eä¸º paymaster åæ“ä½œä»£ç åˆ†é…çš„ gas é‡ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epaymasterData\u003c/td\u003e\n          \u003ctd\u003ebytes\u003c/td\u003e\n          \u003ctd\u003epaymaster çš„æ•°æ®ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003esignature\u003c/td\u003e\n          \u003ctd\u003ebytes\u003c/td\u003e\n          \u003ctd\u003eä¼ å…¥ sender ä»¥éªŒè¯æˆæƒçš„æ•°æ®\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cblockquote\u003e\n\u003cp\u003eä¸Šé“¾æ—¶éƒ¨åˆ†å­—æ®µä¼šè¢«æ‰“åŒ…ï¼Œè½¬å˜æˆ \u003ccode\u003ePackedUserOperation\u003c/code\u003e\u003c/p\u003e","title":"EIP-4337"},{"content":" Promise ä¸ Event Loopï¼šåˆ†æ­¥æ·±å…¥æŒ‡å— ç®€ä»‹ JavaScript æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œå´è¦å¤„ç†å¤§é‡å¼‚æ­¥æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€å®šæ—¶å™¨ã€ç”¨æˆ·äº¤äº’ç­‰ï¼‰ã€‚ä¸ºäº†æ—¢ä¸é˜»å¡ä¸»çº¿ç¨‹ã€åˆèƒ½ä¿è¯å›è°ƒæŒ‰é¢„æœŸé¡ºåºæ‰§è¡Œï¼Œè¯­è¨€å’Œè¿è¡Œæ—¶å…±åŒæä¾›äº†ä¸¤å¥—æ ¸å¿ƒæœºåˆ¶ï¼š\nPromise â€”â€” ä»£è¡¨ä¸€ä¸ªâ€œæœªæ¥ä¼šç»“æŸâ€çš„å¼‚æ­¥æ“ä½œï¼Œæä¾›äº†çŠ¶æ€ç®¡ç†ã€é“¾å¼è°ƒç”¨ã€é”™è¯¯ä¼ æ’­ç­‰è¯­ä¹‰ï¼Œæ˜¯ç°ä»£å¼‚æ­¥ç¼–ç¨‹çš„åŸºçŸ³ Event Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ â€”â€” JavaScript è¿è¡Œæ—¶çœŸæ­£çš„è°ƒåº¦ä¸­å¿ƒï¼Œå®ƒå†³å®šäº†åŒæ­¥ä»£ç ã€Promise å›è°ƒï¼ˆå¾®ä»»åŠ¡ï¼‰ã€setTimeout/IO ç­‰ï¼ˆå®ä»»åŠ¡ï¼‰åˆ°åº•åœ¨ä»€ä¹ˆæ—¶æœºè¢«æ¨å…¥è°ƒç”¨æ ˆæ‰§è¡Œ è¿™ä¸¤è€…ç´§å¯†åä½œï¼š\nPromise çš„ .then / .catch / await åç»­å…¨éƒ¨å±äºå¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰ å¾®ä»»åŠ¡ä¸å®ä»»åŠ¡ï¼ˆmacrotaskï¼‰åœ¨ Event Loop ä¸­æœ‰ä¸¥æ ¼çš„ä¼˜å…ˆçº§ï¼šæ¯æ‰§è¡Œå®Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œå¿…é¡»å…ˆæ¸…ç©ºå…¨éƒ¨å¾®ä»»åŠ¡ï¼Œæ‰ä¼šè¿›è¡Œæ¸²æŸ“å¹¶è¿›å…¥ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ æŒæ¡ Promise çš„çŠ¶æ€æœºç»†èŠ‚ + Event Loop çš„å¾®/å®ä»»åŠ¡æ‰§è¡Œé¡ºåºï¼Œå°±ç­‰äºæ‹¿åˆ°äº† JavaScript å¼‚æ­¥ä¸–ç•Œçš„å®Œæ•´â€œæ—¶åºåœ°å›¾â€\næ‰§è¡Œé¡ºåºè¡¨\næ‰§è¡Œé¡ºåº ç±»å‹ å…¸å‹ä»£è¡¨ è§¦å‘æ—¶æœº åŒæ­¥ä»£ç (åŒ…å«Promise executor) console.logã€å˜é‡èµ‹å€¼ã€å‡½æ•°è°ƒç”¨ ç«‹å³æ‰§è¡Œ å¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰ .then/.catchã€await åç»­ã€queueMicrotaskã€MutationObserver å½“å‰å®ä»»åŠ¡ç»“æŸåã€æ¸²æŸ“å‰å…¨éƒ¨æ¸…ç©º æ¸²æŸ“ï¼ˆæµè§ˆå™¨ï¼‰ é¡µé¢é‡ç»˜ã€å¸ƒå±€ å¾®ä»»åŠ¡æ¸…ç©ºåï¼ˆå¯èƒ½è·³è¿‡ï¼‰ å®ä»»åŠ¡ï¼ˆmacrotaskï¼‰ setTimeoutã€setIntervalã€I/Oã€UI äº‹ä»¶ æ¯è½® Event Loop æ‰§è¡Œä¸€ä¸ª Promise æ ¸å¿ƒæœºåˆ¶\nPromise çš„ä¸‰ä¸ªçŠ¶æ€\npending â†’ fulfilled (æˆåŠŸï¼Œè¿”å› value) â†’ rejected (å¤±è´¥ï¼Œè¿”å› reason) æ„é€ å™¨ executor æ˜¯åŒæ­¥æ‰§è¡Œçš„\nnew Promise((resolve, reject) =\u0026gt; { console.log(\u0026#39;executor start\u0026#39;); // ç«‹åˆ»æ‰“å° setTimeout(() =\u0026gt; resolve(100), 3000); console.log(\u0026#39;executor end\u0026#39;); // ç«‹åˆ»æ‰“å° }); ä¸ºä»€ä¹ˆå¿…é¡»åŒæ­¥ï¼Ÿ\nä¸ºäº†è®©ä½ å¯ä»¥åœ¨åˆ›å»º Promise æ—¶ç«‹åˆ»åšåˆå§‹åŒ–ã€å‚æ•°æ ¡éªŒã€æŠ›é”™ç­‰æ“ä½œ\nå†…éƒ¨æ§½ä½\næ§½ä½å å†…å®¹è¯´æ˜ [[PromiseState]] pending / fulfilled / rejected [[PromiseResult]] æˆåŠŸå€¼æˆ–å¤±è´¥åŸå›  [[PromiseFulfillReactions]] å­˜æ”¾æ‰€æœ‰ onFulfilled å›è°ƒ [[PromiseRejectReactions]] å­˜æ”¾æ‰€æœ‰ onRejected å›è°ƒ resolve/reject ç¬¬ä¸€æ¬¡è°ƒç”¨æˆåŠŸåï¼Œåç»­å…¨éƒ¨å¿½ç•¥\nexecutor æŠ›é”™ = è‡ªåŠ¨ reject\nnew Promise(() =\u0026gt; { throw new Error(\u0026#39;boom\u0026#39;); }) .catch(e =\u0026gt; console.log(e.message)); // boom thenable ä¸æ‰å¹³åŒ–\nPromise.resolve({ then(onFulfilled) { setTimeout(() =\u0026gt; onFulfilled(42), 1000); } }).then(console.log); // 1ç§’åæ‰“å° 42 è§„èŒƒä¼šï¼š\nå–å‡º x.then è°ƒç”¨ then.call(x, resolvePromise, rejectPromise) resolvePromise/rejectPromise æ˜¯åŒ…è£…è¿‡çš„â€œåªå…è®¸è°ƒç”¨ä¸€æ¬¡â€çš„å‡½æ•° è¿™å°±æ˜¯é“¾å¼è°ƒç”¨ä¸ä¼šæ— é™åµŒå¥—çš„æ ¹æœ¬åŸå› \nthen / catch / finally ä¸é“¾å¼è°ƒç”¨\nPromise.resolve(1) .then(x =\u0026gt; x + 1) // è¿”å›æ™®é€šå€¼ â†’ æ–° Promise fulfilled(2) .then(x =\u0026gt; new Promise(r =\u0026gt; setTimeout(() =\u0026gt; r(x + 1), 100))) // è¿”å› Promise â†’ ç­‰å¾…å¹¶é‡‡ç”¨ .then(console.log) // æ‰“å°æœ€ç»ˆç»“æœ .catch(console.error) .finally(() =\u0026gt; console.log(\u0026#39;done\u0026#39;)); .catch = .then(undefined, onRejected)\n.finally ä¸ä¼ å€¼ï¼Œå¼‚å¸¸ä¼šç»§ç»­å‘ä¸‹æŠ›\nasync / await æœ¬è´¨\nasync function foo() { console.log(\u0026#39;1\u0026#39;); const a = await 111; console.log(\u0026#39;2\u0026#39;); const b = await 222; console.log(\u0026#39;3\u0026#39;); return a + b; } V8 ç¼–è¯‘åç­‰ä»·äºï¼š\nfunction foo() { console.log(\u0026#39;1\u0026#39;); return Promise.resolve(111).then(a =\u0026gt; { console.log(\u0026#39;2\u0026#39;); return Promise.resolve(222).then(b =\u0026gt; { console.log(\u0026#39;3\u0026#39;); return a + b; }); }); } ç»“è®ºï¼š\nasync function æ°¸è¿œè¿”å› Promise æ¯ä¸€ä¸ª await = æŠŠåé¢çš„ä»£ç åˆ‡å‡ºå»ï¼ŒåŒ…è£…æˆ .then() å›è°ƒ await å³ä¾§ä¸æ˜¯ Promise ä¹Ÿä¼šè¢« Promise.resolve() åŒ…è£… Promise é™æ€æ–¹æ³•å…¨å®¶æ¡¶\næ–¹æ³• è¡Œä¸º æœ€ä½³å®è·µåœºæ™¯ Promise.all å…¨éƒ¨æˆåŠŸæ‰æˆåŠŸï¼Œä»»ä¸€å¤±è´¥ç«‹å³å¤±è´¥ å¹¶å‘è¯·æ±‚å¤šä¸ªå¿…é¡»æˆåŠŸçš„æ¥å£ Promise.allSettled æ°¸è¿œæˆåŠŸï¼Œè¿”å›æ¯ä¸ªç»“æœçš„çŠ¶æ€å’Œå€¼ æ‰¹é‡æ“ä½œã€ç»Ÿè®¡ä¸ŠæŠ¥ã€ä¸æ€•éƒ¨åˆ†å¤±è´¥ Promise.any ç¬¬ä¸€ä¸ªæˆåŠŸå°±æˆåŠŸï¼Œå…¨å¤±è´¥æ‰å¤±è´¥ å¤š CDN åŠ è½½èµ„æºï¼Œè°å¿«ç”¨è° Promise.race ç¬¬ä¸€ä¸ªæœ‰çŠ¶æ€ï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰å°±è¿”å› è¶…æ—¶æ§åˆ¶ã€é˜²è¶…æ—¶ // å¹¶å‘ + ç»“æ„èµ‹å€¼ const [user, posts] = await Promise.all([ fetch(\u0026#39;/user\u0026#39;), fetch(\u0026#39;/posts\u0026#39;) ]); // è¯·æ±‚è¶…æ—¶æ¨¡æ¿ const withTimeout = (p, ms) =\u0026gt; Promise.race([ p, new Promise((_ , reject) =\u0026gt; setTimeout(() =\u0026gt; reject(\u0026#39;è¶…æ—¶\u0026#39;), ms)) ]); Event Loop å®Œæ•´æµç¨‹ï¼ˆæµè§ˆå™¨ç¯å¢ƒï¼‰\næ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆscript æ•´ä½“ã€setTimeout å›è°ƒã€ç‚¹å‡»äº‹ä»¶ç­‰ï¼‰ æ‰§è¡Œå®Œå½“å‰å®ä»»åŠ¡ â†’ è°ƒç”¨æ ˆæ¸…ç©º æ¸…ç©ºå½“å‰æ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆ.thenã€await åç»­ã€queueMicrotask ç­‰ï¼‰ ï¼ˆæµè§ˆå™¨ï¼‰å¯èƒ½è¿›è¡Œæ¸²æŸ“æ›´æ–° ä»å®ä»»åŠ¡é˜Ÿåˆ—å–ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ é‡å¤ä»¥ä¸Šæ­¥éª¤ Node.js å°åŒºåˆ«\nprocess.nextTick æ¯”å¾®ä»»åŠ¡è¿˜ä¼˜å…ˆ setImmediate æ˜¯ Node ç‰¹æœ‰çš„å®ä»»åŠ¡ ç»å…¸ç»¼åˆä¾‹é¢˜\nconsole.log(\u0026#39;start\u0026#39;); setTimeout(() =\u0026gt; console.log(\u0026#39;timeout\u0026#39;), 0); Promise.resolve() .then(() =\u0026gt; console.log(\u0026#39;p1\u0026#39;)) .then(() =\u0026gt; console.log(\u0026#39;p2\u0026#39;)); queueMicrotask(() =\u0026gt; console.log(\u0026#39;micro\u0026#39;)); (async () =\u0026gt; { console.log(\u0026#39;async start\u0026#39;); await 1; console.log(\u0026#39;await after\u0026#39;); })(); console.log(\u0026#39;end\u0026#39;); è¾“å‡ºé¡ºåºï¼š\ns a e p m a p t t s n 1 i w 2 i a y d c a m r n r i e t c o t o u s a t t f a t r e t r å¸¸è§é™·é˜± \u0026amp; æœ€ä½³å®è·µ\né™·é˜± æ­£ç¡®åšæ³• è¯¯ä»¥ä¸º await é˜»å¡ä¸»çº¿ç¨‹ ä¸é˜»å¡ï¼Œåªæ˜¯æš‚åœå½“å‰ async å‡½æ•° å¤šä¸ªç‹¬ç«‹è¯·æ±‚å†™æˆä¸²è¡Œ await å¹¶è¡Œå‘èµ· â†’ Promise.all èšåˆ å¾®ä»»åŠ¡æ— é™è‡ªæˆ‘è°ƒåº¦ é¿å… then(() =\u0026gt; then(...)) æ— é™å¾ªç¯ æ²¡å¤„ç† rejected Promise å…¨å±€ç›‘å¬ unhandledrejection è¿”å› thenable å¯¼è‡´æ„å¤–æ‰å¹³åŒ– æ˜ç¡®çŸ¥é“è‡ªå·±åœ¨å¹²ä»€ä¹ˆ ","permalink":"http://localhost:1313/findings/promisetoeventloop/","summary":"\u003chr\u003e\n\u003ch1 id=\"promise-ä¸-event-loopåˆ†æ­¥æ·±å…¥æŒ‡å—\"\u003ePromise ä¸ Event Loopï¼šåˆ†æ­¥æ·±å…¥æŒ‡å—\u003c/h1\u003e\n\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eJavaScript æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œå´è¦å¤„ç†å¤§é‡å¼‚æ­¥æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€å®šæ—¶å™¨ã€ç”¨æˆ·äº¤äº’ç­‰ï¼‰ã€‚ä¸ºäº†æ—¢ä¸é˜»å¡ä¸»çº¿ç¨‹ã€åˆèƒ½ä¿è¯å›è°ƒæŒ‰é¢„æœŸé¡ºåºæ‰§è¡Œï¼Œè¯­è¨€å’Œè¿è¡Œæ—¶å…±åŒæä¾›äº†ä¸¤å¥—æ ¸å¿ƒæœºåˆ¶ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePromise\u003c/strong\u003e â€”â€” ä»£è¡¨ä¸€ä¸ªâ€œæœªæ¥ä¼šç»“æŸâ€çš„å¼‚æ­¥æ“ä½œï¼Œæä¾›äº†çŠ¶æ€ç®¡ç†ã€é“¾å¼è°ƒç”¨ã€é”™è¯¯ä¼ æ’­ç­‰è¯­ä¹‰ï¼Œæ˜¯ç°ä»£å¼‚æ­¥ç¼–ç¨‹çš„åŸºçŸ³\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eEvent Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰\u003c/strong\u003e â€”â€” JavaScript è¿è¡Œæ—¶çœŸæ­£çš„è°ƒåº¦ä¸­å¿ƒï¼Œå®ƒå†³å®šäº†åŒæ­¥ä»£ç ã€Promise å›è°ƒï¼ˆå¾®ä»»åŠ¡ï¼‰ã€setTimeout/IO ç­‰ï¼ˆå®ä»»åŠ¡ï¼‰åˆ°åº•åœ¨ä»€ä¹ˆæ—¶æœºè¢«æ¨å…¥è°ƒç”¨æ ˆæ‰§è¡Œ\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eè¿™ä¸¤è€…ç´§å¯†åä½œï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePromise çš„ \u003ccode\u003e.then\u003c/code\u003e / \u003ccode\u003e.catch\u003c/code\u003e / \u003ccode\u003eawait\u003c/code\u003e åç»­å…¨éƒ¨å±äº\u003cstrong\u003eå¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eå¾®ä»»åŠ¡ä¸å®ä»»åŠ¡ï¼ˆmacrotaskï¼‰åœ¨ Event Loop ä¸­æœ‰ä¸¥æ ¼çš„ä¼˜å…ˆçº§ï¼š\u003cstrong\u003eæ¯æ‰§è¡Œå®Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œå¿…é¡»å…ˆæ¸…ç©ºå…¨éƒ¨å¾®ä»»åŠ¡ï¼Œæ‰ä¼šè¿›è¡Œæ¸²æŸ“å¹¶è¿›å…¥ä¸‹ä¸€ä¸ªå®ä»»åŠ¡\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæŒæ¡ Promise çš„çŠ¶æ€æœºç»†èŠ‚ + Event Loop çš„å¾®/å®ä»»åŠ¡æ‰§è¡Œé¡ºåºï¼Œå°±ç­‰äºæ‹¿åˆ°äº† JavaScript å¼‚æ­¥ä¸–ç•Œçš„å®Œæ•´â€œæ—¶åºåœ°å›¾â€\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eæ‰§è¡Œé¡ºåºè¡¨\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ‰§è¡Œé¡ºåº\u003c/th\u003e\n          \u003cth\u003eç±»å‹\u003c/th\u003e\n          \u003cth\u003eå…¸å‹ä»£è¡¨\u003c/th\u003e\n          \u003cth\u003eè§¦å‘æ—¶æœº\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003eåŒæ­¥ä»£ç (åŒ…å«Promise executor)\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003econsole.log\u003c/code\u003eã€å˜é‡èµ‹å€¼ã€å‡½æ•°è°ƒç”¨\u003c/td\u003e\n          \u003ctd\u003eç«‹å³æ‰§è¡Œ\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003eå¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e.then/.catch\u003c/code\u003eã€\u003ccode\u003eawait\u003c/code\u003e åç»­ã€\u003ccode\u003equeueMicrotask\u003c/code\u003eã€\u003ccode\u003eMutationObserver\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eå½“å‰å®ä»»åŠ¡ç»“æŸåã€æ¸²æŸ“å‰å…¨éƒ¨æ¸…ç©º\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003eæ¸²æŸ“ï¼ˆæµè§ˆå™¨ï¼‰\u003c/td\u003e\n          \u003ctd\u003eé¡µé¢é‡ç»˜ã€å¸ƒå±€\u003c/td\u003e\n          \u003ctd\u003eå¾®ä»»åŠ¡æ¸…ç©ºåï¼ˆå¯èƒ½è·³è¿‡ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003eå®ä»»åŠ¡ï¼ˆmacrotaskï¼‰\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003esetTimeout\u003c/code\u003eã€\u003ccode\u003esetInterval\u003c/code\u003eã€\u003ccode\u003eI/O\u003c/code\u003eã€\u003ccode\u003eUI äº‹ä»¶\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæ¯è½® Event Loop æ‰§è¡Œä¸€ä¸ª\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003cp\u003ePromise æ ¸å¿ƒæœºåˆ¶\u003c/p\u003e\n\u003cp\u003ePromise çš„ä¸‰ä¸ªçŠ¶æ€\u003c/p\u003e","title":"Promise ä¸ Event Loop çš„è”ç³»ä¸ç†è§£"},{"content":" æ¨¡å—æ¦‚è§ˆ ğŸ‘‰ æ¨¡å—ä»£ç ä»“åº“ï¼ˆwalletManagementï¼‰\né¡¹ç›® å†…å®¹ æ¨¡å—åç§° é’±åŒ…ç®¡ç†ï¼ˆWallet Managementï¼‰ è·¯ç”±è·¯å¾„ /walletManagement åŠŸèƒ½èŒƒå›´ éšæœº HD é’±åŒ…ç”Ÿæˆã€åŠ©è®°è¯å±•ç¤ºã€é’±åŒ…åŠ å¯†/è§£å¯†ã€åŠ å¯†é’±åŒ…ä¸åœ°å€æœ¬åœ°æŒä¹…åŒ–ï¼ˆIndexedDBï¼‰ è®¿é—®æƒé™ ä¾èµ–æœ¬åœ°ç”¨æˆ·å¯†ç è®°å½•ï¼ˆuserManagement æ¨¡å—ï¼‰ï¼›è‹¥æ— ç”¨æˆ·è®°å½•åˆ™é‡å®šå‘ /userManagement ç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£ app/walletManagement/ â”œâ”€â”€ components â”‚ â”œâ”€â”€ GenerateWallet.tsx | â”œâ”€â”€ ImportWallet.tsx â”œâ”€â”€ lib â”‚ â”œâ”€â”€ cryptoWallet.ts â”‚ â”œâ”€â”€ generateWallet.ts | â”œâ”€â”€ importWallet.ts â”‚ â”œâ”€â”€ saveAddress.ts â”‚ â””â”€â”€ saveWallet.ts â”œâ”€â”€ page.tsx â””â”€â”€ test-cryptoWallet.ts æ–‡ä»¶è·¯å¾„ èŒè´£è¯¦è§£ page.tsx è·¯ç”±å…¥å£ï¼Œæ¸²æŸ“ GenerateWallet ç»„ä»¶ï¼ˆé¡µé¢æœ¬èº«ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼‰ components/GenerateWallet.tsx æ ¸å¿ƒ UI ä¸äº¤äº’ï¼šå¯†ç æ ¡éªŒ â†’ ç”Ÿæˆé’±åŒ… â†’ åŠ å¯† â†’ ä¿å­˜ â†’ åŠ©è®°è¯å±•ç¤ºï¼›åŒ…å«ç”¨æˆ·å‹å¥½æç¤ºä¸é”™è¯¯å¤„ç† lib/generateWallet.ts ä½¿ç”¨ ethers + bip39 ç”Ÿæˆéšæœº HD é’±åŒ…ã€è‹±æ–‡ä¸ä¸­æ–‡åŠ©è®°è¯å¹¶åšä¸€è‡´æ€§æ ¡éªŒ lib/cryptoWallet.ts æä¾›é’±åŒ…åŠ å¯†/è§£å¯†æ¥å£ï¼Œå®šä¹‰ IEncryptedWallet ç±»å‹ï¼ˆè´Ÿè´£ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿå¯†é’¥å¯¹ wallet è¿›è¡Œ AES-GCM åŠ å¯†ï¼‰ lib/saveWallet.ts IndexedDB å°è£…ï¼šå¯¹ Wallets è¡¨ï¼ˆæˆ– storeï¼‰è¿›è¡Œä¿å­˜/è¯»å–/åˆ é™¤/åˆ—å‡º lib/saveAddress.ts IndexedDB å°è£…ï¼šå¯¹ Addresses è¡¨ä¿å­˜åœ°å€è®°å½•ã€è¯»å–ã€åˆ é™¤ã€åˆ—å‡º test-cryptoWallet.ts å•å…ƒæµ‹è¯•ï¼šéªŒè¯åŠ å¯†/è§£å¯†ã€å¯†é’¥æ´¾ç”Ÿä¸€è‡´æ€§ã€å¼‚å¸¸åœºæ™¯ï¼ˆè§£å¯†å¤±è´¥ã€ç¯¡æ”¹æ£€æµ‹ï¼‰ lib/importWallet.ts ä½¿ç”¨ bip39 å’Œ ethers ä»è‹±æ–‡æˆ–ä¸­æ–‡åŠ©è®°è¯å¯¼å…¥ HDNodeWalletï¼ˆä¸­æ–‡å…ˆè½¬æ¢ä¸ºè‹±æ–‡åŠ©è®°è¯å†å¯¼å…¥ï¼‰ 1. è¯¦ç»†äº¤äº’æµç¨‹ 1.1 é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥ ç”¨æˆ·è®¿é—® /walletManagement\npage.tsx æ¸²æŸ“ GenerateWallet\nç»„ä»¶åŠ è½½æ—¶ä¼šæ£€æŸ¥æœ¬åœ°æ˜¯å¦å·²å­˜åœ¨ç”¨æˆ·å¯†ç è®°å½•ï¼ˆé€šè¿‡ userManagement çš„ getUserRecord()ï¼‰\nè‹¥æ— ç”¨æˆ·è®°å½•ï¼šé‡å®šå‘åˆ° /userManagement è¦æ±‚å…ˆè®¾ç½®æœ¬åœ°å¯†ç ï¼ˆé¦–æ¬¡åˆå§‹åŒ–ï¼‰ è‹¥æœ‰ç”¨æˆ·è®°å½•ï¼šç»§ç»­æ˜¾ç¤ºç”Ÿæˆé’±åŒ…æµç¨‹ï¼ˆéœ€ç”¨æˆ·è¾“å…¥æœ¬åœ°å¯†ç ç”¨äºéªŒè¯ï¼‰ 1.2 é’±åŒ…ç”Ÿæˆä¸å¯¼å…¥æµç¨‹ æ­¥éª¤ ç”Ÿæˆé’±åŒ…ï¼ˆGenerateï¼‰ å¯¼å…¥é’±åŒ…ï¼ˆImportï¼‰ 1 ç”¨æˆ·è¾“å…¥æœ¬åœ°å¯†ç  â†’ ç‚¹å‡»ã€Œç”Ÿæˆé’±åŒ…ã€ ç”¨æˆ·è¾“å…¥æœ¬åœ°å¯†ç  â†’ å¡«å†™/ç²˜è´´åŠ©è®°è¯ â†’ ç‚¹å‡»ã€Œå¯¼å…¥é’±åŒ…ã€ 2 å®¢æˆ·ç«¯å¯¹å¯†ç è¿›è¡Œ SHA-256 å“ˆå¸Œï¼Œä¸æœ¬åœ° userRecord.passwordHash æ¯”å¯¹ åŒå·¦ï¼Œå®Œå…¨ä¸€è‡´çš„å¯†ç æ ¡éªŒé€»è¾‘ 3 æ ¡éªŒé€šè¿‡ â†’ è°ƒç”¨ generateWallet()\nâ†’ ä½¿ç”¨ crypto.getRandomValues ç”Ÿæˆéšæœºç†µ\nâ†’ åŒæ—¶ç”Ÿæˆè‹±æ–‡ + ä¸­æ–‡åŠ©è®°è¯\nâ†’ è¿”å› WalletResultï¼ˆå« HDNodeWalletã€è‹±æ–‡åŠ©è®°è¯ã€ä¸­æ–‡åŠ©è®°è¯ï¼‰ æ ¡éªŒé€šè¿‡ â†’ è¯»å–ç”¨æˆ·å¡«å†™çš„åŠ©è®°è¯ï¼ˆæ”¯æŒ 12/24 è¯ã€è‡ªåŠ¨è¯†åˆ«ä¸­è‹±æ–‡ï¼‰\nâ†’ è°ƒç”¨ importWallet_en() æˆ– importWallet_zh()ï¼ˆä¸­æ–‡ä¼šå…ˆè½¬ç†µå†è½¬è‹±æ–‡ï¼‰\nâ†’ å¾—åˆ°ç­‰ä»·çš„ HDNodeWallet å®ä¾‹ 4 è°ƒç”¨ encryptWallet(wallet, password)\nâ†’ PBKDF2 æ´¾ç”Ÿå¯†é’¥ + AES-256-GCM åŠ å¯†æ•´ä¸ªé’±åŒ…å¯¹è±¡ å®Œå…¨ç›¸åŒï¼šencryptWallet(wallet, password)ï¼ˆä»£ç å¤ç”¨ 100%ï¼‰ 5 å¹¶è¡Œæ‰§è¡Œï¼š\nâ€¢ countWallet() æŸ¥è¯¢å·²æœ‰é’±åŒ…æ•°é‡\nâ€¢ åŠ å¯†é’±åŒ… åŒå·¦ï¼šå¹¶è¡Œæ‰§è¡Œ encryptWallet() ä¸ countWallet() 6 æ ¹æ®æ•°é‡å†³å®š keyPathï¼š\n0 ä¸ª â†’ '0'ï¼Œå…¶ä½™ â†’ crypto.randomUUID() å®Œå…¨ä¸€è‡´çš„ keyPath ç­–ç•¥ 7 å¹¶è¡Œä¿å­˜ï¼š\nâ€¢ saveWallet(keyPath, encryptedWallet)\nâ€¢ saveAddress(addressRecord) å®Œå…¨ç›¸åŒçš„å¹¶è¡Œå†™å…¥é€»è¾‘ï¼ˆWallets + Addresses è¡¨ï¼‰ 8 æ¸…ç†å†…å­˜ä¸­çš„æ˜æ–‡åŠ©è®°è¯ä¸ç§é’¥\næ˜¾ç¤ºã€Œç”ŸæˆæˆåŠŸã€\næä¾›å¯åˆ‡æ¢çš„è‹±æ–‡/ä¸­æ–‡åŠ©è®°è¯å±•ç¤ºï¼ˆä»…ç”¨äºå¤‡ä»½ï¼‰ æ¸…ç†è¾“å…¥æ¡†\næ˜¾ç¤ºã€Œå¯¼å…¥æˆåŠŸã€\næä¾›ç›¸åŒçš„åŠ©è®°è¯æ ¸å¯¹ç•Œé¢ï¼ˆè‹±æ–‡ â†” ä¸­æ–‡å¯åˆ‡æ¢ï¼‰ 9 ç”¨æˆ·æ‰‹åŠ¨å¤‡ä»½åŠ©è®°è¯ â†’ ç‚¹å‡»ã€Œå›åˆ°ä¸»é¡µã€ ç”¨æˆ·æ ¸å¯¹åŠ©è®°è¯æ— è¯¯ â†’ ç‚¹å‡»ã€Œå›åˆ°ä¸»é¡µã€æˆ–ã€Œå‰å¾€ç™»å½•ã€ 1.3 å¼‚å¸¸/è¾¹ç•Œåœºæ™¯ å¯†ç ä¸ºç©ºæˆ–æ ¡éªŒå¤±è´¥ï¼šé˜»æ­¢ç”Ÿæˆå¹¶å±•ç¤ºé”™è¯¯æç¤º åŠ å¯†ä¿å­˜å¤±è´¥ï¼ˆIO/Quotaï¼‰ï¼šå›æ»šæˆ–æ¸…ç†å·²å†™å…¥çš„éƒ¨åˆ†æ•°æ®ï¼Œæç¤ºç”¨æˆ·å¹¶è®°å½•é”™è¯¯æ—¥å¿—ï¼ˆå¯é€‰ä¸ŠæŠ¥ï¼‰ åŠ©è®°è¯ä¸€è‡´æ€§æ£€æŸ¥å¤±è´¥ï¼ˆç†è®ºä¸Šåœ¨ generateWallet å·²æ ¡éªŒï¼‰ï¼šæŠ›å‡ºå¼‚å¸¸å¹¶æç¤ºé‡æ–°ç”Ÿæˆ é‡å¤ä¿å­˜/é‡å¤æŒ‰é’®ç‚¹å‡»ï¼šä½¿ç”¨ loading çŠ¶æ€ç¦æ­¢é‡å¤æ“ä½œ 2. æ•°æ®æ¨¡å‹ï¼ˆIndexedDB è¡¨ç»“æ„ï¼‰ Wallets è¡¨ï¼ˆTABLE_WALLETS = 'Wallets'ï¼‰ key: stringï¼ˆå½“å‰å®ç°ä»¥ count() ä½œä¸ºè‡ªå¢ keyï¼Œå†è½¬ String å­˜å‚¨ï¼‰ value (IEncryptedWallet)ï¼ˆå»ºè®®ç¤ºä¾‹ï¼‰ interface IEncryptedWallet { version: number; // ç‰ˆæœ¬å·ï¼Œæ–¹ä¾¿æ—¥åè¿ç§» cipher: \u0026#39;AES-GCM\u0026#39;; // åŠ å¯†ç®—æ³•è¯´æ˜ iv: string; // base64/hex salt: string; // ç”¨äº KDF çš„ salt ciphertext: string; // åŠ å¯†åçš„ payloadï¼ˆå¯èƒ½åŒ…å«ç§é’¥ã€pathã€address ç­‰ï¼‰ meta?: { createdAt: string; // ISO æ—¶é—´ address?: string; } } Addresses è¡¨ï¼ˆTABLE_ADDRESSES = 'Addresses'ï¼‰ key: stringï¼ˆåŒä¸Šï¼‰ value (AddressRecord) interface AddressRecord { wallet: { type: string; // \u0026#39;HDNodeWallet\u0026#39; KeyPath: string; // æŒ‡å‘ Wallets è¡¨çš„ keyï¼ˆStringï¼‰ }; address: string; // 0x... } æ³¨æ„ï¼šå½“å‰å®ç°ä½¿ç”¨ storage.count() ä½œä¸ºè‡ªå¢é”®ï¼ˆkey = countï¼‰ï¼Œä¼˜ç‚¹ç®€å•ï¼›ç¼ºç‚¹æ˜¯åœ¨åˆ é™¤åå¯èƒ½å‡ºç° key ç¼éš™ã€å¹¶å‘å†™å…¥é£é™©ã€‚å¯è€ƒè™‘åç»­æ”¹ä¸º UUID æˆ–è‡ªå¢ sequence ç®¡ç†ã€‚\n3. æ ¸å¿ƒåº“è¯´æ˜ï¼ˆlib/*.tsï¼‰ generateWallet.ts åŠŸèƒ½ï¼šåŸºäº ethers.Wallet.createRandom() ç”Ÿæˆ HD é’±åŒ…ï¼Œè¯»å–è‹±æ–‡åŠ©è®°è¯ entropyï¼Œä½¿ç”¨ bip39 ä¸­æ–‡è¯åº“ç”Ÿæˆä¸­æ–‡åŠ©è®°è¯ï¼Œå¹¶åš entropy ä¸€è‡´æ€§æ ¡éªŒ è¿”å›ï¼šWalletResult { wallet: HDNodeWallet, mnemonic_en, mnemonic_zh } cryptoWallet.ts åŠŸèƒ½ï¼šé’±åŒ…åŠ å¯†ä¸è§£å¯†é€»è¾‘ï¼ˆAES-GCMï¼‰ä¸å¯†é’¥æ´¾ç”Ÿï¼ˆåº”ä½¿ç”¨ PBKDF2 / scrypt / argon2 ç±»å®‰å…¨ KDFï¼Œè‡³å°‘å¸¦ salt ä¸å¤šè½®æ¬¡ï¼‰ã€‚\nå¯¼å‡ºï¼š\nencryptWallet(wallet: HDNodeWallet, password: string): Promise\u0026lt;IEncryptedWallet\u0026gt; decryptWallet(enc: IEncryptedWallet, password: string): Promise\u0026lt;HDNodeWallet\u0026gt; æµ‹è¯•ç‚¹ï¼šè§£å¯†åé’±åŒ…åœ°å€ä¸åŠ å¯†å‰ä¸€è‡´ï¼›ç¯¡æ”¹ ciphertext/iv/salt å¯¼è‡´è§£å¯†å¤±è´¥ï¼ˆé”™è¯¯æŠ›å‡ºï¼‰\nsaveWallet.ts / saveAddress.ts åŠŸèƒ½ï¼šIndexedDB CRUD å°è£…ï¼ˆsave, get, delete, keys, values, count ç­‰ï¼‰ çº¦å®šï¼šsave* è¿”å›æ•°å­— keyï¼ˆå½“å‰å®ç°ä¸º count()ï¼‰ï¼Œget* è¿”å›ç›¸åº”è®°å½•æˆ– null/undefined 4. å®‰å…¨è®¾è®¡åŸåˆ™ å¯†ç æ°¸ä¸æ˜æ–‡å­˜ç›˜ï¼šä»…å­˜å‚¨å¯†ç çš„ SHA-256 å“ˆå¸Œï¼ˆç”¨äºç™»å½•/æ ¡éªŒï¼‰ï¼Œç”¨äºæ´¾ç”Ÿå¯†é’¥çš„ salt ä¸æ´¾ç”Ÿå‚æ•°ä¹Ÿåº”å­˜å‚¨ï¼Œä½†ä¸ä¿å­˜æ˜æ–‡å¯†ç  åŠ©è®°è¯/ç§é’¥æœ€å°ä¿ç•™æ—¶é—´ï¼šåŠ©è®°è¯ä¸ç§é’¥ä»…åœ¨å†…å­˜ä¸­å­˜åœ¨å¹¶åœ¨ä½¿ç”¨åç«‹å³è¦†ç›–/é‡Šæ”¾ï¼ˆå°½é‡é¿å…é•¿æ—¶é©»ç•™ï¼‰ åŠ å¯†å­˜å‚¨ï¼šæ‰€æœ‰æ•æ„Ÿ payload ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿå¯†é’¥ï¼ˆKDFï¼‰è¿›è¡Œ AES-GCM åŠ å¯†å¹¶å­˜å‚¨ï¼›åŠ å¯†å…ƒä¿¡æ¯ï¼ˆsalt, ivï¼‰å¯ä¸ ciphertext ä¸€èµ·å­˜ é˜²æ­¢ä¾§ä¿¡é“æ³„éœ²ï¼šé¿å…åœ¨æ§åˆ¶å°/æ—¥å¿—æ‰“å°åŠ©è®°è¯ã€ç§é’¥æˆ–å®Œæ•´è§£å¯† payload ä¸€é”®åˆ é™¤æœ¬åœ°æ•°æ®ï¼šæä¾›å¿˜è®°å¯†ç /é‡ç½®åŠŸèƒ½ï¼Œå½»åº•åˆ é™¤ Walletsã€Addressesã€user record ç‰ˆæœ¬ä¸è¿ç§»ï¼šåŠ å¯†æ•°æ®å¸¦ version å­—æ®µï¼Œä¾¿äºå°†æ¥æ›´æ¢åŠ å¯†ç­–ç•¥æˆ– KDF å‚æ•°æ—¶è¿›è¡Œè¿ç§» æœ€å°æƒé™ï¼šæ¨¡å—ä»…åšæœ¬åœ°ç®¡ç†ï¼Œä¸è¿›è¡Œç½‘ç»œåŒæ­¥ï¼ˆé™¤éç”¨æˆ·æ˜¾å¼å¯¼å‡ºå¹¶ä¸Šä¼ ï¼‰ï¼Œé¿å…è¿œç«¯æ³„éœ²é£é™© ","permalink":"http://localhost:1313/projects/0907wallet/walletmanagement/","summary":"\u003chr\u003e\n\u003ch1 id=\"æ¨¡å—æ¦‚è§ˆ\"\u003eæ¨¡å—æ¦‚è§ˆ\u003c/h1\u003e\n\u003cp\u003eğŸ‘‰ \u003ca href=\"https://github.com/cgcj0907/0907-Wallet/tree/main/app/walletManagement\"\u003eæ¨¡å—ä»£ç ä»“åº“ï¼ˆwalletManagementï¼‰\u003c/a\u003e\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eé¡¹ç›®\u003c/th\u003e\n          \u003cth\u003eå†…å®¹\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eæ¨¡å—åç§°\u003c/td\u003e\n          \u003ctd\u003eé’±åŒ…ç®¡ç†ï¼ˆWallet Managementï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè·¯ç”±è·¯å¾„\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e/walletManagement\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eåŠŸèƒ½èŒƒå›´\u003c/td\u003e\n          \u003ctd\u003eéšæœº HD é’±åŒ…ç”Ÿæˆã€åŠ©è®°è¯å±•ç¤ºã€é’±åŒ…åŠ å¯†/è§£å¯†ã€åŠ å¯†é’±åŒ…ä¸åœ°å€æœ¬åœ°æŒä¹…åŒ–ï¼ˆIndexedDBï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè®¿é—®æƒé™\u003c/td\u003e\n          \u003ctd\u003eä¾èµ–æœ¬åœ°ç”¨æˆ·å¯†ç è®°å½•ï¼ˆuserManagement æ¨¡å—ï¼‰ï¼›è‹¥æ— ç”¨æˆ·è®°å½•åˆ™é‡å®šå‘ \u003ccode\u003e/userManagement\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2 id=\"ç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£\"\u003eç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£\u003c/h2\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-cosole\" data-lang=\"cosole\"\u003eapp/walletManagement/\nâ”œâ”€â”€ components\nâ”‚   â”œâ”€â”€ GenerateWallet.tsx\n|   â”œâ”€â”€ ImportWallet.tsx\nâ”œâ”€â”€ lib\nâ”‚   â”œâ”€â”€ cryptoWallet.ts\nâ”‚   â”œâ”€â”€ generateWallet.ts\n|   â”œâ”€â”€ importWallet.ts\nâ”‚   â”œâ”€â”€ saveAddress.ts\nâ”‚   â””â”€â”€ saveWallet.ts\nâ”œâ”€â”€ page.tsx\nâ””â”€â”€ test-cryptoWallet.ts\n\u003c/code\u003e\u003c/pre\u003e\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ–‡ä»¶è·¯å¾„\u003c/th\u003e\n          \u003cth\u003eèŒè´£è¯¦è§£\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003epage.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eè·¯ç”±å…¥å£ï¼Œæ¸²æŸ“ GenerateWallet ç»„ä»¶ï¼ˆé¡µé¢æœ¬èº«ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003ecomponents/GenerateWallet.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæ ¸å¿ƒ UI ä¸äº¤äº’ï¼šå¯†ç æ ¡éªŒ â†’ ç”Ÿæˆé’±åŒ… â†’ åŠ å¯† â†’ ä¿å­˜ â†’ åŠ©è®°è¯å±•ç¤ºï¼›åŒ…å«ç”¨æˆ·å‹å¥½æç¤ºä¸é”™è¯¯å¤„ç†\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/generateWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eä½¿ç”¨ ethers + bip39 ç”Ÿæˆéšæœº HD é’±åŒ…ã€è‹±æ–‡ä¸ä¸­æ–‡åŠ©è®°è¯å¹¶åšä¸€è‡´æ€§æ ¡éªŒ\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/cryptoWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæä¾›é’±åŒ…åŠ å¯†/è§£å¯†æ¥å£ï¼Œå®šä¹‰ \u003ccode\u003eIEncryptedWallet\u003c/code\u003e ç±»å‹ï¼ˆè´Ÿè´£ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿå¯†é’¥å¯¹ wallet è¿›è¡Œ AES-GCM åŠ å¯†ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/saveWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eIndexedDB å°è£…ï¼šå¯¹ \u003ccode\u003eWallets\u003c/code\u003e è¡¨ï¼ˆæˆ– storeï¼‰è¿›è¡Œä¿å­˜/è¯»å–/åˆ é™¤/åˆ—å‡º\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/saveAddress.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eIndexedDB å°è£…ï¼šå¯¹ \u003ccode\u003eAddresses\u003c/code\u003e è¡¨ä¿å­˜åœ°å€è®°å½•ã€è¯»å–ã€åˆ é™¤ã€åˆ—å‡º\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003etest-cryptoWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eå•å…ƒæµ‹è¯•ï¼šéªŒè¯åŠ å¯†/è§£å¯†ã€å¯†é’¥æ´¾ç”Ÿä¸€è‡´æ€§ã€å¼‚å¸¸åœºæ™¯ï¼ˆè§£å¯†å¤±è´¥ã€ç¯¡æ”¹æ£€æµ‹ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/importWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eä½¿ç”¨ bip39 å’Œ ethers ä»è‹±æ–‡æˆ–ä¸­æ–‡åŠ©è®°è¯å¯¼å…¥ HDNodeWalletï¼ˆä¸­æ–‡å…ˆè½¬æ¢ä¸ºè‹±æ–‡åŠ©è®°è¯å†å¯¼å…¥ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-è¯¦ç»†äº¤äº’æµç¨‹\"\u003e1. è¯¦ç»†äº¤äº’æµç¨‹\u003c/h2\u003e\n\u003ch3 id=\"11-é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥\"\u003e1.1 é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eç”¨æˆ·è®¿é—® \u003ccode\u003e/walletManagement\u003c/code\u003e\u003c/p\u003e","title":"0907 Wallet é’±åŒ…ç®¡ç†æ¨¡å—è®¾è®¡"},{"content":"ç®€ä»‹ åœ¨åšå¯†ç å­˜å‚¨çš„æ—¶å€™ï¼Œæˆ‘é‡åˆ°äº†ä¸‰ç§å¸¸è§çš„æ•°æ®è¡¨ç¤ºæ–¹å¼ï¼šSHA256ã€Base64 å’Œ Uint8Arrayï¼ˆç®€ç§° Uint8ï¼‰ã€‚å®ƒä»¬å„æœ‰ç”¨é€”å’Œç‰¹ç‚¹ï¼Œäºæ˜¯å†™ä¸‹è¿™ç¯‡æ–‡ç« æ¥æ€»ç»“ä¸€ä¸‹ã€‚\nSHA256 SHA256 æ˜¯ç°ä»£äº’è”ç½‘å¹¿æ³›ä½¿ç”¨çš„åŠ å¯†å“ˆå¸Œç®—æ³•ï¼Œä¾‹å¦‚åœ¨åŒºå—é“¾ã€å¯†ç å­˜å‚¨å’Œæ•°æ®å®Œæ•´æ€§éªŒè¯ä¸­éƒ½å¾ˆå¸¸è§ã€‚\nç‰¹ç‚¹ï¼š\nå°†ä»»æ„é•¿åº¦çš„è¾“å…¥æ•°æ®ç»è¿‡æ•°å­¦è¿ç®—åï¼Œè¾“å‡º 256 ä½äºŒè¿›åˆ¶æ•°ï¼ˆ32 å­—èŠ‚ï¼‰ã€‚\nå‡ ä¹ä¸å¯é€†ï¼Œæ„å‘³ç€å³ä½¿æ‹¿åˆ° SHA256 çš„è¾“å‡ºï¼Œä¹Ÿå¾ˆéš¾åæ¨å‡ºåŸå§‹è¾“å…¥ã€‚\nç¤ºä¾‹è¾“å‡ºï¼ˆä»¥åå…­è¿›åˆ¶è¡¨ç¤ºï¼‰ï¼š\ne 3 b 0 c 4 4 2 9 8 f c 1 c 1 4 9 a f b f 4 c 8 9 9 6 f b 9 2 4 2 7 a e 4 1 e 4 6 4 9 b 9 3 4 c a 4 9 5 9 9 1 b 7 8 5 2 b 8 5 5 ç¼ºç‚¹ï¼šå¯è¯»æ€§å·®ï¼Œå°¤å…¶æ˜¯åœ¨å‰ç«¯éœ€è¦æ˜¾ç¤ºæˆ–ä¼ è¾“æ—¶ä¸æ–¹ä¾¿ã€‚\nå› æ­¤ï¼Œé€šå¸¸ä¼šé…åˆ Base64 æˆ–åå…­è¿›åˆ¶è¡¨ç¤ºæ¥æ–¹ä¾¿å­˜å‚¨å’Œå±•ç¤ºã€‚\nBase64 Base64 æ˜¯ä¸€ç§å°†äºŒè¿›åˆ¶æ•°æ®ç¼–ç ä¸ºå¯æ‰“å° ASCII å­—ç¬¦çš„æ–¹å¼ã€‚\nç‰¹ç‚¹ï¼š\næ¯ 6 ä½äºŒè¿›åˆ¶æ•°æ˜ å°„ä¸ºä¸€ä¸ªå­—ç¬¦ï¼Œå­—ç¬¦é›†åŒ…å«ï¼š\nA - Z , a - z , 0 - 9 , + , / ä»¥åŠ = ç”¨ä½œå¡«å……ï¼Œä½¿é•¿åº¦ä¸º 4 çš„å€æ•°ã€‚\nå¯ä»¥å°† SHA256 çš„ 32 å­—èŠ‚ï¼ˆ256 ä½ï¼‰è¾“å‡ºç¼–ç ä¸º 44 ä¸ª Base64 å­—ç¬¦ã€‚\nä¸ºä»€ä¹ˆæ˜¯ 44 ä¸ªè€Œä¸æ˜¯ 43 ä¸ªï¼ŸåŸå› å¦‚ä¸‹ï¼š\nBase64 æŒ‰ æ¯ 3 ä¸ªå­—èŠ‚ï¼ˆ24 ä½ï¼‰ä¸ºä¸€ç»„ æ¥ç¼–ç ï¼Œæ¯ç»„ä¼šç”Ÿæˆ 4 ä¸ª Base64 å­—ç¬¦ã€‚\nSHA256 è¾“å‡º 32 å­—èŠ‚ â†’ å¯ä»¥åˆ†ä¸º 10 ç»„å®Œæ•´çš„ 3 å­—èŠ‚ + å‰©ä½™ 2 å­—èŠ‚ã€‚\nå‰©ä½™ 2 å­—èŠ‚ä¼šç”Ÿæˆ 3 ä¸ª Base64 å­—ç¬¦ï¼Œæœ€åç”¨ = å¡«å……åˆ° 4 ä¸ªå­—ç¬¦ã€‚\næ€»é•¿åº¦ = 10Ã—4 + 4 = 44\nç¤ºä¾‹è¾“å‡ºï¼ˆBase64 ç¼–ç ï¼‰ï¼š\n4 7 D E Q p j 8 H B S a + / T I m W + 5 J C e u Q e R k m 5 N M p J W Z G 3 h S u F U = ä¼˜ç‚¹ï¼šé•¿åº¦æ›´çŸ­ã€å¯è¯»æ€§é«˜ã€é€‚åˆå‰ç«¯æ˜¾ç¤ºå’Œä¼ è¾“ã€‚\nUint8Arrayï¼ˆUint8ï¼‰ Uint8Array æ˜¯ JavaScript ä¸­çš„ å­—èŠ‚æ•°ç»„ç±»å‹ã€‚\nç‰¹ç‚¹ï¼š\næ¯ä¸ªå…ƒç´ å ç”¨ 8 ä½ï¼ˆ1 å­—èŠ‚ï¼‰\nç”¨äºå­˜å‚¨åŸå§‹äºŒè¿›åˆ¶æ•°æ®ï¼Œä¾‹å¦‚ SHA256 è¾“å‡ºã€æ–‡ä»¶ã€åŠ å¯†å¯†é’¥ç­‰\nä¸ Base64 ä¸åŒï¼Œå®ƒä¸æ˜¯ä¸ºäº†æ˜¾ç¤ºï¼Œè€Œæ˜¯ä¸ºäº†é«˜æ•ˆå­˜å‚¨å’Œè®¡ç®—\nç¤ºä¾‹ï¼š\nconst hash = new Uint8Array([227, 176, 196, 66, 152, 252, ...]); ä¸ Base64 çš„è½¬æ¢ï¼š\nSHA256 è¾“å‡º â†’ Uint8Array â†’ Base64ï¼ˆå¯æ˜¾ç¤ºï¼‰\nBase64 â†’ Uint8Arrayï¼ˆå¯è§£ç å›åŸå§‹äºŒè¿›åˆ¶ï¼‰\næ€»ç»“å¯¹æ¯” ç±»å‹ å•ä½ ç”¨é€” å¯è¯»æ€§ å¤§å° SHA256 256 bit å®‰å…¨å“ˆå¸Œã€æ•°æ®å®Œæ•´æ€§ å·® å›ºå®š 32 å­—èŠ‚ Base64 6 bit/å­—ç¬¦ å±•ç¤ºã€ä¼ è¾“ã€å‹ç¼©é•¿åº¦ é«˜ 44 å­—ç¬¦ï¼ˆå¡«å……ï¼‰ Uint8Array 8 bit/å­—èŠ‚ å†…å­˜æ“ä½œã€åŠ å¯†è¿ç®— ä½ 32 å­—èŠ‚ ","permalink":"http://localhost:1313/findings/sha256-base64-uint8/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eåœ¨åšå¯†ç å­˜å‚¨çš„æ—¶å€™ï¼Œæˆ‘é‡åˆ°äº†ä¸‰ç§å¸¸è§çš„æ•°æ®è¡¨ç¤ºæ–¹å¼ï¼š\u003ccode\u003eSHA256\u003c/code\u003eã€\u003ccode\u003eBase64\u003c/code\u003e å’Œ \u003ccode\u003eUint8Array\u003c/code\u003eï¼ˆç®€ç§° \u003ccode\u003eUint8\u003c/code\u003eï¼‰ã€‚å®ƒä»¬å„æœ‰ç”¨é€”å’Œç‰¹ç‚¹ï¼Œäºæ˜¯å†™ä¸‹è¿™ç¯‡æ–‡ç« æ¥æ€»ç»“ä¸€ä¸‹ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"sha256\"\u003eSHA256\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003eSHA256\u003c/code\u003e æ˜¯ç°ä»£äº’è”ç½‘å¹¿æ³›ä½¿ç”¨çš„åŠ å¯†å“ˆå¸Œç®—æ³•ï¼Œä¾‹å¦‚åœ¨åŒºå—é“¾ã€å¯†ç å­˜å‚¨å’Œæ•°æ®å®Œæ•´æ€§éªŒè¯ä¸­éƒ½å¾ˆå¸¸è§ã€‚\u003c/p\u003e\n\u003cp\u003eç‰¹ç‚¹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eå°†ä»»æ„é•¿åº¦çš„è¾“å…¥æ•°æ®ç»è¿‡æ•°å­¦è¿ç®—åï¼Œè¾“å‡º \u003cstrong\u003e256 ä½äºŒè¿›åˆ¶æ•°\u003c/strong\u003eï¼ˆ32 å­—èŠ‚ï¼‰ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eå‡ ä¹ä¸å¯é€†ï¼Œæ„å‘³ç€å³ä½¿æ‹¿åˆ° SHA256 çš„è¾“å‡ºï¼Œä¹Ÿå¾ˆéš¾åæ¨å‡ºåŸå§‹è¾“å…¥ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç¤ºä¾‹è¾“å‡ºï¼ˆä»¥åå…­è¿›åˆ¶è¡¨ç¤ºï¼‰ï¼š\u003c/p\u003e\n\n\n\n\u003cdiv class=\"goat svg-container \"\u003e\n  \n    \u003csvg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      font-family=\"Menlo,Lucida Console,monospace\"\n      \n        viewBox=\"0 0 520 25\"\n      \u003e\n      \u003cg transform='translate(8,16)'\u003e\n\u003ctext text-anchor='middle' x='0' y='4' fill='currentColor' style='font-size:1em'\u003ee\u003c/text\u003e\n\u003ctext text-anchor='middle' x='8' y='4' fill='currentColor' style='font-size:1em'\u003e3\u003c/text\u003e\n\u003ctext text-anchor='middle' x='16' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='24' y='4' fill='currentColor' style='font-size:1em'\u003e0\u003c/text\u003e\n\u003ctext text-anchor='middle' x='32' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='40' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='48' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='56' y='4' fill='currentColor' style='font-size:1em'\u003e2\u003c/text\u003e\n\u003ctext text-anchor='middle' x='64' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='72' y='4' fill='currentColor' style='font-size:1em'\u003e8\u003c/text\u003e\n\u003ctext text-anchor='middle' x='80' y='4' fill='currentColor' style='font-size:1em'\u003ef\u003c/text\u003e\n\u003ctext text-anchor='middle' x='88' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='96' y='4' fill='currentColor' style='font-size:1em'\u003e1\u003c/text\u003e\n\u003ctext text-anchor='middle' x='104' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='112' y='4' fill='currentColor' style='font-size:1em'\u003e1\u003c/text\u003e\n\u003ctext text-anchor='middle' x='120' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='128' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='136' y='4' fill='currentColor' style='font-size:1em'\u003ea\u003c/text\u003e\n\u003ctext text-anchor='middle' x='144' y='4' fill='currentColor' style='font-size:1em'\u003ef\u003c/text\u003e\n\u003ctext text-anchor='middle' x='152' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='160' y='4' fill='currentColor' style='font-size:1em'\u003ef\u003c/text\u003e\n\u003ctext text-anchor='middle' x='168' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='176' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='184' y='4' fill='currentColor' style='font-size:1em'\u003e8\u003c/text\u003e\n\u003ctext text-anchor='middle' x='192' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='200' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='208' y='4' fill='currentColor' style='font-size:1em'\u003e6\u003c/text\u003e\n\u003ctext text-anchor='middle' x='216' y='4' fill='currentColor' style='font-size:1em'\u003ef\u003c/text\u003e\n\u003ctext text-anchor='middle' x='224' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='232' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='240' y='4' fill='currentColor' style='font-size:1em'\u003e2\u003c/text\u003e\n\u003ctext text-anchor='middle' x='248' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='256' y='4' fill='currentColor' style='font-size:1em'\u003e2\u003c/text\u003e\n\u003ctext text-anchor='middle' x='264' y='4' fill='currentColor' style='font-size:1em'\u003e7\u003c/text\u003e\n\u003ctext text-anchor='middle' x='272' y='4' fill='currentColor' style='font-size:1em'\u003ea\u003c/text\u003e\n\u003ctext text-anchor='middle' x='280' y='4' fill='currentColor' style='font-size:1em'\u003ee\u003c/text\u003e\n\u003ctext text-anchor='middle' x='288' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='296' y='4' fill='currentColor' style='font-size:1em'\u003e1\u003c/text\u003e\n\u003ctext text-anchor='middle' x='304' y='4' fill='currentColor' style='font-size:1em'\u003ee\u003c/text\u003e\n\u003ctext text-anchor='middle' x='312' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='320' y='4' fill='currentColor' style='font-size:1em'\u003e6\u003c/text\u003e\n\u003ctext text-anchor='middle' x='328' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='336' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='344' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='352' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='360' y='4' fill='currentColor' style='font-size:1em'\u003e3\u003c/text\u003e\n\u003ctext text-anchor='middle' x='368' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='376' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='384' y='4' fill='currentColor' style='font-size:1em'\u003ea\u003c/text\u003e\n\u003ctext text-anchor='middle' x='392' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='400' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='408' y='4' fill='currentColor' style='font-size:1em'\u003e5\u003c/text\u003e\n\u003ctext text-anchor='middle' x='416' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='424' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='432' y='4' fill='currentColor' style='font-size:1em'\u003e1\u003c/text\u003e\n\u003ctext text-anchor='middle' x='440' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='448' y='4' fill='currentColor' style='font-size:1em'\u003e7\u003c/text\u003e\n\u003ctext text-anchor='middle' x='456' y='4' fill='currentColor' style='font-size:1em'\u003e8\u003c/text\u003e\n\u003ctext text-anchor='middle' x='464' y='4' fill='currentColor' style='font-size:1em'\u003e5\u003c/text\u003e\n\u003ctext text-anchor='middle' x='472' y='4' fill='currentColor' style='font-size:1em'\u003e2\u003c/text\u003e\n\u003ctext text-anchor='middle' x='480' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='488' y='4' fill='currentColor' style='font-size:1em'\u003e8\u003c/text\u003e\n\u003ctext text-anchor='middle' x='496' y='4' fill='currentColor' style='font-size:1em'\u003e5\u003c/text\u003e\n\u003ctext text-anchor='middle' x='504' y='4' fill='currentColor' style='font-size:1em'\u003e5\u003c/text\u003e\n\u003c/g\u003e\n\n    \u003c/svg\u003e\n  \n\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç¼ºç‚¹ï¼š\u003cstrong\u003eå¯è¯»æ€§å·®\u003c/strong\u003eï¼Œå°¤å…¶æ˜¯åœ¨å‰ç«¯éœ€è¦æ˜¾ç¤ºæˆ–ä¼ è¾“æ—¶ä¸æ–¹ä¾¿ã€‚\u003c/p\u003e","title":"SHA256ã€Base64 ä¸ Uint8Array çš„å¯¹æ¯”ä¸ç†è§£"},{"content":"æ¨¡å—æ¦‚è§ˆ ğŸ‘‰ æ¨¡å—ä»£ç ä»“åº“\né¡¹ç›® å†…å®¹ æ¨¡å—åç§° ç”¨æˆ·ç®¡ç†ï¼ˆUser Managementï¼‰ è·¯ç”±è·¯å¾„ /userManagement åŠŸèƒ½èŒƒå›´ å¯†ç è®¾ç½®ã€å·²æœ‰é’±åŒ…ç™»å½•ã€æœ¬åœ°åŠ å¯†å­˜å‚¨ è®¿é—®æƒé™ æœªç™»å½•çŠ¶æ€ä¸‹å¼ºåˆ¶è·³è½¬åˆ°æ­¤é¡µé¢ï¼Œå·²ç™»å½•æ”¾è¡Œ ç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£ app/userManage/ â”œâ”€â”€ components/ â”‚ â”œâ”€â”€ Login.tsx â”‚ â””â”€â”€ Register.tsx â”œâ”€â”€ lib/ â”‚ â””â”€â”€ savePassword.ts â””â”€â”€ page.tsx æ–‡ä»¶è·¯å¾„ èŒè´£è¯¦è§£ page.tsx 1. è·¯ç”±å…¥å£\n2. æ£€æµ‹ IndexedDB æ˜¯å¦å·²æœ‰é’±åŒ…è®°å½•\n3. å·²ç™»å½• â†’ è·³è½¬ /ï¼ˆé¦–é¡µï¼‰\n4. æœªç™»å½• â†’ æ¸²æŸ“ç™»å½•/æ³¨å†Œåˆ‡æ¢ç•Œé¢ components/Login.tsx çº¯å±•ç¤ºç»„ä»¶ï¼š\nâ€¢ å¯†ç è¾“å…¥è§£é”æœ¬åœ°é’±åŒ…\nâ€¢ â€œå¿˜è®°å¯†ç â€åˆ é™¤æœ¬åœ°æ•°æ® components/Register.tsx 1. è®¾ç½®å¯†ç ï¼ˆå¼ºåº¦æ ¡éªŒï¼‰\n2. åŠ å¯†å­˜å‚¨ lib/savePassword.ts æ ¸å¿ƒåŠ å¯†é€»è¾‘ï¼š\nâ€¢ å°†å¯†ç è¿›è¡Œ SHA256 å¤„ç†\nâ€¢ å­˜å…¥ IndexedDB 1. è¯¦ç»†äº¤äº’æµç¨‹ 1.1 é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥ è®¿é—®ä»»æ„é¡µé¢ â†’ AuthGuard æ£€æµ‹æœªç™»å½• â†’ é‡å®šå‘è‡³ /userManagement page.tsx æ£€æŸ¥ IndexedDB æ—  user:current æ•°æ® â†’ é»˜è®¤å±•ç¤º Register.tsx 1.2 åˆå§‹åŒ–å¯†ç æµç¨‹ é¦–æ¬¡ç™»å½•/å¿˜è®°å¯†ç  æ£€æŸ¥ IndexedDB æœ‰æ—  user:current, è‹¥æœ‰åˆ™åˆ é™¤æœ¬åœ° IndexedDB æ•°æ®åº“ç”¨æˆ·å’Œé’±åŒ…ç›¸å…³å†…å®¹ äºŒæ¬¡ç¡®è®¤å¯†ç åŠ å¯†å­˜å‚¨è‡³ IndexedDB 2. å®‰å…¨è®¾è®¡åŸåˆ™ å¯†ç æ°¸ä¸ä»¥æ˜æ–‡å½¢å¼å‡ºç°åœ¨å†…å­˜ã€ç½‘ç»œã€æ—¥å¿—ä¸­ åŠ©è®°è¯/ç§é’¥åªåœ¨å†…å­˜ä¸­çŸ­æ—¶å­˜åœ¨ï¼Œè§£å¯†åç«‹å³è¦†ç›– æ‰€æœ‰æ•æ„Ÿæ•°æ®å‡ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿçš„å¯†é’¥è¿›è¡Œ AES-GCM åŠ å¯†å­˜å‚¨ æä¾›â€œä¸€é”®åˆ é™¤æœ¬åœ°æ•°æ®â€åŠŸèƒ½ï¼ˆå¯¹åº”â€œå¿˜è®°å¯†ç â€åœºæ™¯ï¼‰ ","permalink":"http://localhost:1313/projects/0907wallet/usermanagement/","summary":"\u003ch1 id=\"æ¨¡å—æ¦‚è§ˆ\"\u003eæ¨¡å—æ¦‚è§ˆ\u003c/h1\u003e\n\u003cp\u003eğŸ‘‰ \u003ca href=\"https://github.com/cgcj0907/0907-Wallet/tree/main/app/userManagement\"\u003eæ¨¡å—ä»£ç ä»“åº“\u003c/a\u003e\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eé¡¹ç›®\u003c/th\u003e\n          \u003cth\u003eå†…å®¹\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eæ¨¡å—åç§°\u003c/td\u003e\n          \u003ctd\u003eç”¨æˆ·ç®¡ç†ï¼ˆUser Managementï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè·¯ç”±è·¯å¾„\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e/userManagement\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eåŠŸèƒ½èŒƒå›´\u003c/td\u003e\n          \u003ctd\u003eå¯†ç è®¾ç½®ã€å·²æœ‰é’±åŒ…ç™»å½•ã€æœ¬åœ°åŠ å¯†å­˜å‚¨\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè®¿é—®æƒé™\u003c/td\u003e\n          \u003ctd\u003eæœªç™»å½•çŠ¶æ€ä¸‹å¼ºåˆ¶è·³è½¬åˆ°æ­¤é¡µé¢ï¼Œå·²ç™»å½•æ”¾è¡Œ\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cul\u003e\n\u003cli\u003eç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eapp/userManage/\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”œâ”€â”€ components/\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”‚   â”œâ”€â”€ Login.tsx       \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”‚   â””â”€â”€ Register.tsx    \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”œâ”€â”€ lib/\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”‚   â””â”€â”€ savePassword.ts  \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ””â”€â”€ page.tsx            \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ–‡ä»¶è·¯å¾„\u003c/th\u003e\n          \u003cth\u003eèŒè´£è¯¦è§£\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003epage.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e1. è·¯ç”±å…¥å£\u003cbr\u003e2. æ£€æµ‹ IndexedDB æ˜¯å¦å·²æœ‰é’±åŒ…è®°å½•\u003cbr\u003e3. å·²ç™»å½• â†’ è·³è½¬ \u003ccode\u003e/\u003c/code\u003eï¼ˆé¦–é¡µï¼‰\u003cbr\u003e4. æœªç™»å½• â†’ æ¸²æŸ“ç™»å½•/æ³¨å†Œåˆ‡æ¢ç•Œé¢\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003ecomponents/Login.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eçº¯å±•ç¤ºç»„ä»¶ï¼š\u003cbr\u003eâ€¢ å¯†ç è¾“å…¥è§£é”æœ¬åœ°é’±åŒ…\u003cbr\u003eâ€¢ â€œå¿˜è®°å¯†ç â€åˆ é™¤æœ¬åœ°æ•°æ®\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003ecomponents/Register.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e1. è®¾ç½®å¯†ç ï¼ˆå¼ºåº¦æ ¡éªŒï¼‰\u003cbr\u003e2. åŠ å¯†å­˜å‚¨\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/savePassword.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæ ¸å¿ƒåŠ å¯†é€»è¾‘ï¼š\u003cbr\u003eâ€¢ å°†å¯†ç è¿›è¡Œ SHA256 å¤„ç†\u003cbr\u003eâ€¢ å­˜å…¥ IndexedDB\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2 id=\"1-è¯¦ç»†äº¤äº’æµç¨‹\"\u003e1. è¯¦ç»†äº¤äº’æµç¨‹\u003c/h2\u003e\n\u003ch3 id=\"11-é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥\"\u003e1.1 é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eè®¿é—®ä»»æ„é¡µé¢ â†’ \u003ccode\u003eAuthGuard\u003c/code\u003e æ£€æµ‹æœªç™»å½• â†’ é‡å®šå‘è‡³ \u003ccode\u003e/userManagement\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epage.tsx\u003c/code\u003e æ£€æŸ¥ IndexedDB æ—  \u003ccode\u003euser:current\u003c/code\u003e æ•°æ® â†’ é»˜è®¤å±•ç¤º \u003ccode\u003eRegister.tsx\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"12-åˆå§‹åŒ–å¯†ç æµç¨‹\"\u003e1.2 åˆå§‹åŒ–å¯†ç æµç¨‹\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eé¦–æ¬¡ç™»å½•/å¿˜è®°å¯†ç \u003c/li\u003e\n\u003cli\u003eæ£€æŸ¥ IndexedDB æœ‰æ—  \u003ccode\u003euser:current\u003c/code\u003e, è‹¥æœ‰åˆ™åˆ é™¤æœ¬åœ° IndexedDB æ•°æ®åº“ç”¨æˆ·å’Œé’±åŒ…ç›¸å…³å†…å®¹\u003c/li\u003e\n\u003cli\u003eäºŒæ¬¡ç¡®è®¤å¯†ç åŠ å¯†å­˜å‚¨è‡³ IndexedDB\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"2-å®‰å…¨è®¾è®¡åŸåˆ™\"\u003e2. å®‰å…¨è®¾è®¡åŸåˆ™\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eå¯†ç \u003cstrong\u003eæ°¸ä¸\u003c/strong\u003eä»¥æ˜æ–‡å½¢å¼å‡ºç°åœ¨å†…å­˜ã€ç½‘ç»œã€æ—¥å¿—ä¸­\u003c/li\u003e\n\u003cli\u003eåŠ©è®°è¯/ç§é’¥\u003cstrong\u003eåªåœ¨å†…å­˜ä¸­çŸ­æ—¶å­˜åœ¨\u003c/strong\u003eï¼Œè§£å¯†åç«‹å³è¦†ç›–\u003c/li\u003e\n\u003cli\u003eæ‰€æœ‰æ•æ„Ÿæ•°æ®å‡ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿçš„å¯†é’¥è¿›è¡Œ AES-GCM åŠ å¯†å­˜å‚¨\u003c/li\u003e\n\u003cli\u003eæä¾›â€œä¸€é”®åˆ é™¤æœ¬åœ°æ•°æ®â€åŠŸèƒ½ï¼ˆå¯¹åº”â€œå¿˜è®°å¯†ç â€åœºæ™¯ï¼‰\u003c/li\u003e\n\u003c/ul\u003e","title":"0907 Wallet ç”¨æˆ·ç®¡ç†æ¨¡å—è®¾è®¡"},{"content":"æ¨¡å—æ¦‚è§ˆ app â”œâ”€â”€ components â”‚ â”œâ”€â”€ AuthGuard.tsx â”‚ â”œâ”€â”€ InitProvider.tsx â”‚ â””â”€â”€ Logo.tsx â”œâ”€â”€ globals.css â”œâ”€â”€ layout.tsx â”œâ”€â”€ lib â”œâ”€â”€ auth.ts â”œâ”€â”€ storage.ts â””â”€â”€ transform.ts å…¬ç”¨åº“( lib ) auth hash storage å…¬ç”¨ç»„ä»¶( components ) AuthGuard Initialer Logo 1. å…¬ç”¨åº“è®¾è®¡ auth.ts // app/lib/auth.ts /** * @file é’±åŒ…è®¤è¯ä¸è´¦æˆ·ç®¡ç†æ ¸å¿ƒæ¨¡å— * @description è´Ÿè´£é’±åŒ…è¿æ¥ã€ç­¾åéªŒè¯ã€ç™»å½•çŠ¶æ€æŒä¹…åŒ–ã€ç™»å‡ºç­‰å®Œæ•´è®¤è¯æµç¨‹ * æ”¯æŒ MetaMaskã€WalletConnectã€Coinbase Wallet ç­‰ä¸»æµé’±åŒ… * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-08-16 */ export const LOGIN_FLAG_KEY = \u0026#39;isLoggedIn\u0026#39;; export const LOGIN_EXPIRES_KEY = \u0026#39;loginExpiresAt\u0026#39;; const DEFAULT_EXPIRE_MINUTES = 10; /**è·å–è¿‡æœŸæ—¶é—´ */ export function getLoginExpiresAt(): number | null {} /**æ£€æŸ¥ç™»å½•çŠ¶æ€æ˜¯å¦åˆæ³• */ export function isLoggedInLocal(): boolean {} /** åˆ·æ–°è¿‡æœŸæ—¶é—´ï¼ˆé»˜è®¤ +10 åˆ†é’Ÿï¼‰å¹¶ç¡®ä¿ flag = \u0026#39;1\u0026#39; */ export function refreshLoginExpiry(minutes = DEFAULT_EXPIRE_MINUTES) {} /** é€€å‡ºç™»å½•ï¼ˆæœ¬åœ°æ¸…ç†ï¼‰ */ export function logoutLocal() {} transform.ts // @/app/lib/hash.ts /** * @file å¯†ç å“ˆå¸Œä¸ ArrayBuffer/Base64 äº’è½¬å·¥å…· * @description æä¾›å®‰å…¨çš„å¯†ç  SHA-256 å“ˆå¸Œï¼ˆè¿”å› Base64ï¼‰å’Œé«˜æ€§èƒ½çš„äºŒè¿›åˆ¶ â†” Base64 è½¬æ¢å·¥å…· * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-11-27 */ /** * å°† ArrayBuffer è½¬æ¢ä¸º Base64 å­—ç¬¦ä¸² * * ä½¿ç”¨ Uint8Array + btoa çš„ç»å…¸å†™æ³•ï¼Œæ¯” Buffer.toString(\u0026#39;base64\u0026#39;) æ›´å…¼å®¹æµè§ˆå™¨ç¯å¢ƒ * * @param buffer è¦è½¬æ¢çš„ ArrayBuffer * @returns Base64 ç¼–ç å­—ç¬¦ä¸² * @example * const b64 = arrayBufferToBase64(hashBuffer); */ export function arrayBufferToBase64(buffer: ArrayBuffer): string {} /** * å°† Base64 å­—ç¬¦ä¸²è½¬æ¢ä¸º Uint8Array * * @param base64 Base64 ç¼–ç çš„å­—ç¬¦ä¸² * @returns å¯¹åº”çš„ Uint8Array * @example * const uint8 = base64ToUint8Array(storedHash); */ export function base64ToUint8Array(base64: string): Uint8Array {} /** * å¯¹æ˜æ–‡å¯†ç è¿›è¡Œå®‰å…¨çš„ SHA-256 å“ˆå¸Œï¼Œå¹¶è¿”å› Base64 ç¼–ç ç»“æœ * * ä½¿ç”¨ Web Crypto APIï¼ˆcrypto.subtleï¼‰ï¼Œåœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ä¸­å‡ä¸ºåŸç”Ÿå®ç°ï¼Œå®‰å…¨ä¸”é«˜æ€§èƒ½ã€‚ * * @param password æ˜æ–‡å¯†ç  * @returns SHA-256 å“ˆå¸Œåçš„ Base64 å­—ç¬¦ä¸²ï¼ˆå›ºå®š 44 å­—ç¬¦ï¼‰ * @example * const hashed = await hashPassword(\u0026#39;mySecret123\u0026#39;); * // â†’ \u0026#34;iOcJ9qP3b...==\u0026#34; */ export async function hashPassword(password: string): Promise\u0026lt;string\u0026gt; {} storage.ts ğŸ‘‰ å…³äº IndexedDB çš„ä½¿ç”¨æ–¹æ³•è¯·è§ï¼šIndexedDB æµè§ˆå™¨æ•°æ®åº“\n// app/lib/storage.ts /** * @file IndexedDB è½»é‡å°è£…å·¥å…·ï¼ˆæŒ‰éœ€æ‡’åˆ›å»º objectStoreï¼‰ * @description æä¾›ç±»ä¼¼ localStorage çš„ç®€æ´ APIï¼Œæ”¯æŒè‡ªåŠ¨å‡çº§ç‰ˆæœ¬åˆ›å»ºè¡¨ï¼Œé¿å…é¢„è®¾ schema * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-11-27 */ import { openDB, IDBPDatabase } from \u0026#39;idb\u0026#39;; const DB_NAME = \u0026#39;0907wallet-db\u0026#39;; const DEFAULT_STORE_NAME = \u0026#39;users\u0026#39;; /** * åˆå§‹åŒ–ï¼ˆæˆ–æ‰“å¼€ï¼‰IndexedDB æ•°æ®åº“ * * æ•°æ®åº“ä¸å­˜åœ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºç‰ˆæœ¬ 1ï¼Œä¸”ä¸é¢„åˆ›å»ºä»»ä½• objectStoreï¼Œ * æ‰€æœ‰è¡¨éƒ½é€šè¿‡ ensureStore æŒ‰éœ€æ‡’åˆ›å»ºï¼Œä¿æŒæœ€å°çš„åˆå§‹ schemaã€‚ * * @returns IndexedDB æ•°æ®åº“å®ä¾‹ * @example * const db = await initDB(); */ export async function initDB(): Promise\u0026lt;IDBPDatabase\u0026gt; {} /** * ç¡®ä¿æŒ‡å®šåç§°çš„ objectStore å­˜åœ¨ï¼ˆå†…éƒ¨ç§æœ‰å‡½æ•°ï¼‰ * * å¦‚æœè¡¨ä¸å­˜åœ¨ï¼Œä¼šå…³é—­å½“å‰è¿æ¥ â†’ ç‰ˆæœ¬ +1 â†’ åœ¨ upgrade äº‹åŠ¡ä¸­åˆ›å»ºè¡¨ã€‚ * è¿™æ˜¯ IndexedDB çš„ç¡¬æ€§é™åˆ¶ï¼šåªæœ‰ versionchange äº‹åŠ¡æ‰èƒ½åˆ›å»º/åˆ é™¤ objectStoreã€‚ * * @param db å½“å‰æ•°æ®åº“å®ä¾‹ * @param storeName è¦ç¡®ä¿å­˜åœ¨çš„è¡¨å * @returns åŒ…å«è¯¥è¡¨çš„æœ€æ–°æ•°æ®åº“å®ä¾‹ */ async function ensureObjectStoreExists( db: IDBPDatabase, storeName: string, ): Promise\u0026lt;IDBPDatabase\u0026gt; {} /** * æ ¹æ® key ä»æŒ‡å®šè¡¨ä¸­è¯»å–æ•°æ® * * @param key é”®å * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @returns å¯¹åº”çš„å€¼ï¼Œè‹¥ä¸å­˜åœ¨è¿”å› undefined * @example * const user = await get(\u0026#39;currentUser\u0026#39;); */ export async function get\u0026lt;T = unknown\u0026gt;( key: string, table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;T | undefined\u0026gt; {} /** * å‘æŒ‡å®šè¡¨ä¸­å†™å…¥æˆ–æ›´æ–°æ•°æ® * * @param key é”®å * @param value è¦å­˜å‚¨çš„å€¼ï¼ˆå¿…é¡»æ”¯æŒç»“æ„åŒ–å…‹éš†ï¼‰ * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @example * await set(\u0026#39;currentUser\u0026#39;, { address: \u0026#39;0x...\u0026#39;, name: \u0026#39;Alice\u0026#39; }); */ export async function set\u0026lt;T = unknown\u0026gt;( key: string, value: T, table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;void\u0026gt; {} /** * æ ¹æ® key åˆ é™¤æŒ‡å®šè¡¨ä¸­çš„è®°å½• * * @param key é”®å * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; */ export async function del( key: string, table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;void\u0026gt; {} /** * æ¸…ç©ºæŒ‡å®šè¡¨çš„æ‰€æœ‰è®°å½• * * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; */ export async function clear(table: string = DEFAULT_STORE_NAME): Promise\u0026lt;void\u0026gt; {} /** * è·å–æŒ‡å®šè¡¨ä¸­æ‰€æœ‰ key * * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @returns key æ•°ç»„ */ export async function keys( table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;IDBValidKey[]\u0026gt; {} /** * è·å–æŒ‡å®šè¡¨ä¸­æ‰€æœ‰å€¼ï¼ˆä¸åŒ…å« keyï¼‰ * * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @returns å€¼æ•°ç»„ */ export async function values\u0026lt;T = unknown\u0026gt;( table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;T[]\u0026gt; {} /** * è·å–æŒ‡å®šè¡¨çš„è®°å½•æ€»æ•° * * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @returns è®°å½•æ•°é‡ */ export async function count(table: string = DEFAULT_STORE_NAME): Promise\u0026lt;number\u0026gt; {} 2. å…¬ç”¨ç»„ä»¶è®¾è®¡ AuthGard.tsx // app/components/AuthGuard.tsx /** * @file å…¨å±€è·¯ç”±æƒé™å®ˆå«ï¼ˆå®¢æˆ·ç«¯ç»„ä»¶ï¼‰ * @description * 1. æœªç™»å½• â†’ å¼ºåˆ¶è·³è½¬ /userLoginï¼ˆå…¬å¼€é¡µé™¤å¤–ï¼‰ * 2. å·²ç™»å½•ä½†æ— é’±åŒ… â†’ å¼ºåˆ¶è·³è½¬ /generateWallet * 3. å…¨éƒ¨é€šè¿‡ â†’ æ”¾è¡Œå¹¶è‡ªåŠ¨åˆ·æ–°ç™»å½•æœ‰æ•ˆæœŸ * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-11-27 */ \u0026#39;use client\u0026#39;; import React, { useEffect, useState } from \u0026#39;react\u0026#39;; import { useRouter, usePathname } from \u0026#39;next/navigation\u0026#39;; import { count } from \u0026#39;@/app/lib/storage\u0026#39;; import * as auth from \u0026#39;@/app/lib/auth\u0026#39;; interface AuthGuardProps { /** è¦æ¸²æŸ“çš„å­å†…å®¹ï¼ˆå—ä¿æŠ¤çš„é¡µé¢ï¼‰ */ children: React.ReactNode; } // å…¬å¼€è·¯å¾„ï¼šæ— éœ€ç™»å½•å³å¯è®¿é—® const PUBLIC_PATHS = [\u0026#39;/userLogin\u0026#39;, \u0026#39;/generateWallet\u0026#39;] as const; // é’±åŒ…å­˜å‚¨è¡¨åï¼ˆé¿å…é­”æ³•å€¼ï¼‰ const WALLETS_STORE_NAME = \u0026#39;Wallets\u0026#39;; export default function AuthGuard({ children }: AuthGuardProps): React.ReactElement { const router = useRouter(); const pathname = usePathname(); const [isChecking, setIsChecking] = useState\u0026lt;boolean\u0026gt;(true); useEffect(() =\u0026gt; { let isMounted = true; /** * æ ¸å¿ƒé‰´æƒé€»è¾‘ * ä¸ºä»€ä¹ˆæ”¾åœ¨ useEffect é‡Œå•ç‹¬æ‰§è¡Œï¼Ÿ * - é¿å…é˜»å¡æ¸²æŸ“ * - éœ€è¦ async/await å¿…é¡»å°è£…åœ¨å‡½æ•°å†… * - é…åˆ isMounted é˜²æ­¢å†…å­˜æ³„æ¼ */ async function performAuthCheck(): Promise\u0026lt;void\u0026gt; { try { // pathname å¯èƒ½ä¸º nullï¼ˆNext.js æŸäº›è¾¹ç¼˜æƒ…å†µï¼‰ if (!pathname) { if (isMounted) setIsChecking(false); return; } const isPublicPath = PUBLIC_PATHS.includes(pathname as any); // Step 1: æ£€æŸ¥æœ¬åœ°ç™»å½•æ€ï¼ˆåŒæ­¥å¿«é€Ÿï¼‰ const isLoggedIn = auth.isLoggedInLocal(); if (!isLoggedIn \u0026amp;\u0026amp; !isPublicPath) { router.replace(\u0026#39;/userLogin\u0026#39;); if (isMounted) setIsChecking(false); return; } // Step 2: å·²ç™»å½• â†’ æ£€æŸ¥æ˜¯å¦å·²åˆ›å»ºé’±åŒ… if (isLoggedIn) { const walletCount = await count(WALLETS_STORE_NAME); // count è¿”å› numberï¼Œ0 è¡¨ç¤ºæ— é’±åŒ… const hasWallet = walletCount \u0026gt; 0; if (!hasWallet \u0026amp;\u0026amp; pathname !== \u0026#39;/generateWallet\u0026#39;) { router.replace(\u0026#39;/generateWallet\u0026#39;); if (isMounted) setIsChecking(false); return; } } // Step 3: å…¨éƒ¨é€šè¿‡ â†’ åˆ·æ–°ç™»å½•æœ‰æ•ˆæœŸå¹¶æ”¾è¡Œ if (isMounted) { auth.refreshLoginExpiry(); // å»¶é•¿æœ¬åœ°ç™»å½•æ€è¿‡æœŸæ—¶é—´ setIsChecking(false); } } catch (error) { // ä¸ºä»€ä¹ˆ catch åç›´æ¥è·³è½¬ç™»å½•ï¼Ÿ // IndexedDB å¼‚å¸¸ã€æœ¬åœ°å­˜å‚¨æŸåç­‰éƒ½è§†ä¸ºâ€œä¸å®‰å…¨çŠ¶æ€â€ï¼Œå¿…é¡»é‡æ–°ç™»å½• console.error(\u0026#39;[AuthGuard] é‰´æƒè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸:\u0026#39;, error); if (isMounted) { setIsChecking(false); router.replace(\u0026#39;/userLogin\u0026#39;); } } } performAuthCheck(); // æ¸…ç†å‡½æ•° return () =\u0026gt; { isMounted = false; }; }, [pathname, router]); // Loading çŠ¶æ€ï¼šå…¨å±å±…ä¸­åŠ¨æ•ˆ if (isChecking) { return ( \u0026lt;div className=\u0026#34;min-h-screen flex flex-col items-center justify-center bg-gray-50\u0026#34;\u0026gt; \u0026lt;p className=\u0026#34;text-gray-600 text-lg mb-4 animate-pulse\u0026#34;\u0026gt; æ­£åœ¨éªŒè¯æˆæƒ... \u0026lt;/p\u0026gt; \u0026lt;div className=\u0026#34;w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin\u0026#34; /\u0026gt; \u0026lt;/div\u0026gt; ); } // é‰´æƒé€šè¿‡ï¼šæ¸²æŸ“å­å†…å®¹ return \u0026lt;\u0026gt;{children}\u0026lt;/\u0026gt;; } InitProvider.tsx \u0026#39;use client\u0026#39; import { useState } from \u0026#39;react\u0026#39;; import clsx from \u0026#39;clsx\u0026#39;; /** * @file Logo ç»„ä»¶ï¼ˆé¦–é¡µ/å¯¼èˆªæ ä¸» Logoï¼‰ * @description å¸¦æ‚¬åœäº¤äº’çš„åœ†å½¢ Logoï¼Œé¼ æ ‡æ‚¬åœæ—¶å‘ä¸Šæµ®èµ·å¹¶å±•ç¤ºæ–‡å­—è¯´æ˜ï¼Œæ”¯æŒç¼“æ…¢å¼¹è·³åŠ¨ç”» * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-11-27 */ /** * ä¸» Logo ç»„ä»¶ * - é»˜è®¤çŠ¶æ€ï¼šLogo å‘ä¸‹ä½ç§»ä¸€åŠï¼Œé®æŒ¡ä¸‹æ–¹æ–‡å­—åŒºåŸŸï¼ˆè§†è§‰ä¸Šå½¢æˆâ€œåŠéšè—â€æ•ˆæœï¼‰ * - æ‚¬åœçŠ¶æ€ï¼šLogo ä¸Šç§»è‡³æ­£å¸¸ä½ç½®ï¼ŒåŒæ—¶ä¸‹æ–¹æ–‡å­—å¡ç‰‡ä» 0 é«˜åº¦å±•å¼€ * - ä½¿ç”¨ z-[-1]/z-[-2] ä¿è¯å›¾ç‰‡å§‹ç»ˆåœ¨æ–‡å­—å¡ç‰‡ä¸Šæ–¹ï¼Œä½†æ•´ä½“è¢«å¤–éƒ¨å®¹å™¨è£å‰ª */ export default function Logo() { // hover çŠ¶æ€æ§åˆ¶æ•´ä¸ªäº¤äº’åŠ¨ç”»çš„å¼€å¯ä¸å…³é—­ const [hover, setHover] = useState(false); return ( // å¤–å±‚å®¹å™¨ï¼šç›¸å¯¹å®šä½ï¼Œç”¨äºæ§åˆ¶å­å…ƒç´ çš„ç»å¯¹/å›ºå®šå®šä½åŸºå‡†ï¼ŒåŒæ—¶å‚ç›´å±…ä¸­æ’åˆ— \u0026lt;div className=\u0026#34;relative flex flex-col items-center\u0026#34; onMouseEnter={() =\u0026gt; setHover(true)} onMouseLeave={() =\u0026gt; setHover(false)} \u0026gt; {/* å›¾ç‰‡ Logoï¼ˆä¸»è§†è§‰å…ƒç´ ï¼‰ */} \u0026lt;div className={clsx( // è´Ÿ z-index è®©å›¾ç‰‡åœ¨æ–‡å­—å¡ç‰‡ä¹‹ä¸‹ï¼Œä½†é€šè¿‡ translate-y åˆ¶é€ â€œæµ®åœ¨å‰é¢â€çš„è§†è§‰é”™ä½ // w-86/h-86 â‰ˆ 344pxï¼ˆTailwind è‡ªå®šä¹‰å•ä½ï¼‰ï¼Œåœ†å½¢è£å‰ª + æº¢å‡ºéšè— + é˜´å½± + å¹³æ»‘ä½ç§»åŠ¨ç”» \u0026#34;z-[-1] w-86 h-86 rounded-full overflow-hidden cursor-pointer shadow-lg transition-transform duration-300\u0026#34;, // æœªæ‚¬åœæ—¶å‘ä¸‹ä½ç§» 48ï¼ˆ192pxï¼‰ï¼Œåˆšå¥½é®ä½ä¸‹æ–¹æ–‡å­—å¡ç‰‡ä¸€åŠï¼Œå½¢æˆæ‚¬å¿µæ„Ÿ // æ‚¬åœæ—¶æ¢å¤åŸä½ï¼Œè§†è§‰ä¸Šåƒâ€œLogo å‘ä¸Šæµ®èµ·â€ hover ? \u0026#34;translate-y-0\u0026#34; : \u0026#34;translate-y-48\u0026#34; )} \u0026gt; {/* Logo å›¾ç‰‡è‡ªé€‚åº”é“ºæ»¡å®¹å™¨ï¼Œä¿æŒåŸå§‹æ¯”ä¾‹ä¸è¢«æ‹‰ä¼¸ */} \u0026lt;img src=\u0026#34;/logo.png\u0026#34; alt=\u0026#34;Logo\u0026#34; className=\u0026#34;w-full h-full object-cover\u0026#34; /\u0026gt; \u0026lt;/div\u0026gt; {/* æ–‡å­—è¯´æ˜å¡ç‰‡åŒºåŸŸï¼ˆé»˜è®¤å®Œå…¨æ”¶èµ·ï¼Œæ‚¬åœæ—¶é€šè¿‡ max-h å±•å¼€ï¼‰ */} \u0026lt;div className={clsx( // ä½¿ç”¨ overflow-hidden + max-h å®ç°å¹³æ»‘çš„å±•å¼€/æ”¶èµ·åŠ¨ç”» // mt-2 ç»™å¡ç‰‡ç•™å‡ºä¸€ç‚¹ä¸Šè¾¹è·ï¼Œé¿å…ç´§è´´ Logo \u0026#34;z-[-2] overflow-hidden transition-all duration-300 mt-2\u0026#34;, hover ? \u0026#34;max-h-40\u0026#34; : \u0026#34;max-h-0\u0026#34; )} \u0026gt; {/* æ–‡å­—å¡ç‰‡æœ¬ä½“ï¼šåœ†è§’èƒŒæ™¯ + å†…è¾¹è· + å›ºå®šå®½åº¦ + æ–‡å­—å±…ä¸­ + ç¼“æ…¢å¼¹è·³åŠ¨ç”» */} \u0026lt;div className=\u0026#34;rounded-2xl p-3 w-40 text-center flex flex-col items-center gap-1 animate-bounce-slow\u0026#34;\u0026gt; {/* ä¸»æ ‡é¢˜ */} \u0026lt;p className=\u0026#34;text-sm font-semibold text-blue-500 flex items-center justify-center gap-1\u0026#34;\u0026gt; 0907 Wallet \u0026lt;/p\u0026gt; {/* å‰¯æ ‡é¢˜ï¼ˆæŠ€æœ¯æ”¯æŒå£°æ˜ï¼‰ */} \u0026lt;p className=\u0026#34;text-xs text-blue-300\u0026#34;\u0026gt;Supported by SST\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ); } ","permalink":"http://localhost:1313/projects/0907wallet/public/","summary":"\u003ch1 id=\"æ¨¡å—æ¦‚è§ˆ\"\u003eæ¨¡å—æ¦‚è§ˆ\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ components\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â”œâ”€â”€ AuthGuard.tsx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â”œâ”€â”€ InitProvider.tsx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â””â”€â”€ Logo.tsx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ globals.css\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ layout.tsx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ lib\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    â”œâ”€â”€ auth.ts\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    â”œâ”€â”€ storage.ts\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    â””â”€â”€ transform.ts\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eå…¬ç”¨åº“( lib )\n\u003cul\u003e\n\u003cli\u003eauth\u003c/li\u003e\n\u003cli\u003ehash\u003c/li\u003e\n\u003cli\u003estorage\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eå…¬ç”¨ç»„ä»¶( components )\n\u003cul\u003e\n\u003cli\u003eAuthGuard\u003c/li\u003e\n\u003cli\u003eInitialer\u003c/li\u003e\n\u003cli\u003eLogo\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"1-å…¬ç”¨åº“è®¾è®¡\"\u003e1. å…¬ç”¨åº“è®¾è®¡\u003c/h2\u003e\n\u003ch3 id=\"authts\"\u003eauth.ts\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// app/lib/auth.ts\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @file é’±åŒ…è®¤è¯ä¸è´¦æˆ·ç®¡ç†æ ¸å¿ƒæ¨¡å—\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @description è´Ÿè´£é’±åŒ…è¿æ¥ã€ç­¾åéªŒè¯ã€ç™»å½•çŠ¶æ€æŒä¹…åŒ–ã€ç™»å‡ºç­‰å®Œæ•´è®¤è¯æµç¨‹\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *              æ”¯æŒ MetaMaskã€WalletConnectã€Coinbase Wallet ç­‰ä¸»æµé’±åŒ…\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @author Guangyang Zhong | github: https://github.com/cgcj0907\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @date 2025-08-16\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eLOGIN_FLAG_KEY\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;isLoggedIn\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eLOGIN_EXPIRES_KEY\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;loginExpiresAt\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eDEFAULT_EXPIRE_MINUTES\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**è·å–è¿‡æœŸæ—¶é—´ */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003egetLoginExpiresAt\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003enumber\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**æ£€æŸ¥ç™»å½•çŠ¶æ€æ˜¯å¦åˆæ³• */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eisLoggedInLocal\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"kr\"\u003eboolean\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/** åˆ·æ–°è¿‡æœŸæ—¶é—´ï¼ˆé»˜è®¤ +10 åˆ†é’Ÿï¼‰å¹¶ç¡®ä¿ flag = \u0026#39;1\u0026#39; */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003erefreshLoginExpiry\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eminutes\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eDEFAULT_EXPIRE_MINUTES\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/** é€€å‡ºç™»å½•ï¼ˆæœ¬åœ°æ¸…ç†ï¼‰ */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003elogoutLocal() {\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"transformts\"\u003etransform.ts\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// @/app/lib/hash.ts\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @file å¯†ç å“ˆå¸Œä¸ ArrayBuffer/Base64 äº’è½¬å·¥å…·\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @description æä¾›å®‰å…¨çš„å¯†ç  SHA-256 å“ˆå¸Œï¼ˆè¿”å› Base64ï¼‰å’Œé«˜æ€§èƒ½çš„äºŒè¿›åˆ¶ â†” Base64 è½¬æ¢å·¥å…·\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @author Guangyang Zhong | github: https://github.com/cgcj0907\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @date 2025-11-27\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * å°† ArrayBuffer è½¬æ¢ä¸º Base64 å­—ç¬¦ä¸²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * ä½¿ç”¨ Uint8Array + btoa çš„ç»å…¸å†™æ³•ï¼Œæ¯” Buffer.toString(\u0026#39;base64\u0026#39;) æ›´å…¼å®¹æµè§ˆå™¨ç¯å¢ƒ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param buffer è¦è½¬æ¢çš„ ArrayBuffer\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @returns Base64 ç¼–ç å­—ç¬¦ä¸²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @example\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * const b64 = arrayBufferToBase64(hashBuffer);\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003earrayBufferToBase64\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ebuffer\u003c/span\u003e: \u003cspan class=\"kt\"\u003eArrayBuffer\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * å°† Base64 å­—ç¬¦ä¸²è½¬æ¢ä¸º Uint8Array\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param base64 Base64 ç¼–ç çš„å­—ç¬¦ä¸²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @returns å¯¹åº”çš„ Uint8Array\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @example\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * const uint8 = base64ToUint8Array(storedHash);\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003ebase64ToUint8Array\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ebase64\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003eUint8Array\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * å¯¹æ˜æ–‡å¯†ç è¿›è¡Œå®‰å…¨çš„ SHA-256 å“ˆå¸Œï¼Œå¹¶è¿”å› Base64 ç¼–ç ç»“æœ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * ä½¿ç”¨ Web Crypto APIï¼ˆcrypto.subtleï¼‰ï¼Œåœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ä¸­å‡ä¸ºåŸç”Ÿå®ç°ï¼Œå®‰å…¨ä¸”é«˜æ€§èƒ½ã€‚\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param password æ˜æ–‡å¯†ç \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @returns SHA-256 å“ˆå¸Œåçš„ Base64 å­—ç¬¦ä¸²ï¼ˆå›ºå®š 44 å­—ç¬¦ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @example\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * const hashed = await hashPassword(\u0026#39;mySecret123\u0026#39;);\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * // â†’ \u0026#34;iOcJ9qP3b...==\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kr\"\u003easync\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003ehashPassword\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003epassword\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003ePromise\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"storagets\"\u003estorage.ts\u003c/h3\u003e\n\u003cp\u003eğŸ‘‰ \u003ca href=\"/toolkits/indexedDB\"\u003eå…³äº IndexedDB çš„ä½¿ç”¨æ–¹æ³•è¯·è§ï¼šIndexedDB æµè§ˆå™¨æ•°æ®åº“\u003c/a\u003e\u003c/p\u003e","title":"0907 Wallet ç³»ç»Ÿå…¬ç”¨å±‚è®¾è®¡"},{"content":"ç®€ä»‹ Vector æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½æ—¥å¿—ä¸æŒ‡æ ‡é‡‡é›†ä»£ç†ï¼Œå®ƒä»å„ç§ source æ”¶é›†æ•°æ®ï¼Œç»è¿‡ transform å¤„ç†åå‘é€åˆ° sinkï¼ˆå¦‚ Lokiã€ClickHouseã€Kafkaã€Elasticsearch ç­‰ï¼‰\nå®ƒçš„ç‰¹ç‚¹æ˜¯é«˜ååã€ä½å»¶è¿Ÿã€æ— éœ€ä¾èµ– JVMã€è½»é‡å¥½éƒ¨ç½²ï¼Œéå¸¸é€‚åˆè¾¹ç¼˜èŠ‚ç‚¹å’Œå®¹å™¨ç¯å¢ƒ æœ¬æ–‡ä¸»è¦è®²è¿° Events å’Œ Compnents\n1. é…ç½®ç»“æ„æ¦‚è§ˆ Vector æœ‰ä¸¤ç§æ•°æ®æ¨¡å‹ (Data Model), åˆç§°äº‹ä»¶(Events):\nLogs: ç”¨äºè¡¨ç¤ºç»“æ„åŒ–æˆ–éç»“æ„åŒ–æ—¥å¿—æ•°æ® metrics: ç”¨äºè¡¨ç¤ºæŒ‡æ ‡æ•°æ® Vector çš„é…ç½®ç”±ä¸‰ä¸ªæ ¸å¿ƒéƒ¨åˆ† (Compnets) ç»„æˆï¼š\nsourcesï¼šæ•°æ®é‡‡é›†æº transformsï¼šæ•°æ®å¤„ç†ä¸è§£æ sinksï¼šè¾“å‡ºç›®æ ‡ 2. Data model(events) Log events Hereâ€™s an example representation of a log event (as JSON):\n{ \u0026#34;log\u0026#34;: { \u0026#34;custom\u0026#34;: \u0026#34;field\u0026#34;, \u0026#34;host\u0026#34;: \u0026#34;my.host.com\u0026#34;, \u0026#34;message\u0026#34;: \u0026#34;Hello world\u0026#34;, \u0026#34;timestamp\u0026#34;: \u0026#34;2020-11-01T21:15:47+00:00\u0026#34; } } Metric event æ­¤å¤„ç•™ç»™ä»¥åæ’°å†™\n3. Compnents 3.1 source è¯¦ç»†é…ç½®è¯·è§ ğŸ‘‰ Sources reference\næ­¤å¤„åªè¯¦ç»†ä»‹ç»ä»¥ File ä¸º source\nExample configurations(é…ç½®æ–‡ä»¶å‡ä¸º toml, ä¸‹åŒ)\n# minimal [sources.my_source_id] type = \u0026#34;file\u0026#34; include = [ \u0026#34;/var/log/**/*.log\u0026#34; ] 3.2 transform è¯¦ç»†é…ç½®è¯·è§ ğŸ‘‰ Sources reference\næ­¤å¤„åªè¯¦ç»†ä»‹ç» Remap with VRL(å³é‡æ–°åŒ¹é…)\n3.2.1 Parse key/value (logfmt) logs ä»¥ key/value å½¢å¼çš„æ—¥å¿—ä¸ºä¾‹\næ³¨æ„ä¸‹é¢çš„æ•°æ®æ ¼å¼ç»è¿‡ source å¤„ç†è¿‡ (ä¼šåŠ ä¸Š log å’Œ message åŒ…è£¹), æˆ‘ä»¬å†™å…¥çš„æ—¥å¿—æ–‡ä»¶ä¸­ä¸å¿…åœ¨å¤–é¢åŠ ä¸Š log å’Œ message åŒ…è£¹, ä¸ç„¶ä¼šå¯¼è‡´äºŒæ¬¡åŒ…è£¹, transform æ‰¾ä¸åˆ°æˆ‘ä»¬çœŸæ­£çš„æ—¥å¿—æ•°æ®\n{ \u0026#34;log\u0026#34;: { \u0026#34;message\u0026#34;: \u0026#34;@timestamp=\\\u0026#34;Sun Jan 10 16:47:39 EST 2021\\\u0026#34; level=info msg=\\\u0026#34;Stopping all fetchers\\\u0026#34; tag#production=stopping_fetchers id=ConsumerFetcherManager-1382721708341 module=kafka.consumer.ConsumerFetcherManager\u0026#34; } } Example configurations\n[transforms.my_transform_id] type = \u0026#34;remap\u0026#34; inputs = [ \u0026#34;my-source-or-transform-id\u0026#34; ] source = \u0026#34;. = parse_key_value!(.message)\u0026#34; 3.2.2 Parse custom logs å¦‚æœæœ‰æ•°æ®ç±»å‹çš„éœ€è¦, è¿˜éœ€è¦åœ¨é…ç½®ä¸­è¿›è¡Œæ•°æ®è½¬æ¢, å› ä¸ºé»˜è®¤è§£æå‡ºæ¥çš„æ˜¯ string Example configurations\n# Coerce parsed fields .timestamp = parse_timestamp(.timestamp, \u0026#34;%Y/%m/%d %H:%M:%S %z\u0026#34;) ?? now() .pid = to_int!(.pid) .tid = to_int!(.tid) 3.3 sink è¯¦ç»†é…ç½®è¯·è§ ğŸ‘‰ Sources reference\næ­¤å¤„åªè¯¦ç»†ä»‹ç»å¦‚ä½•è¾“å‡ºåˆ° ClickHouse Example configurations\n[sinks.my_sink_id] type = \u0026#34;clickhouse\u0026#34; inputs = [ \u0026#34;my-source-or-transform-id\u0026#34; ] endpoint = \u0026#34;http://localhost:8123\u0026#34; table = \u0026#34;mytable\u0026#34; å¦‚æœè¿˜éœ€è¦è®¤è¯ç™»å½•, æ­¤å¤„ä»¥ç”¨æˆ·å¯†ç ç™»å½•ä¸ºä¾‹\n[sinks.my_sink_id.auth] strategy = \u0026#34;basic\u0026#34; user = \u0026#34;default\u0026#34; password = \u0026#34;your_password\u0026#34; å…³äº ClickHouse æ•°æ®åº“çš„ä½¿ç”¨è§ç¬”è®° ğŸ‘‰é«˜æ€§èƒ½æ•°æ®åº“ ClickHouse\n","permalink":"http://localhost:1313/toolkits/vector/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eVector æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½æ—¥å¿—ä¸æŒ‡æ ‡é‡‡é›†ä»£ç†ï¼Œå®ƒä»å„ç§ source æ”¶é›†æ•°æ®ï¼Œç»è¿‡ transform å¤„ç†åå‘é€åˆ° sinkï¼ˆå¦‚ Lokiã€ClickHouseã€Kafkaã€Elasticsearch ç­‰ï¼‰\u003cbr\u003e\nå®ƒçš„ç‰¹ç‚¹æ˜¯é«˜ååã€ä½å»¶è¿Ÿã€æ— éœ€ä¾èµ– JVMã€è½»é‡å¥½éƒ¨ç½²ï¼Œéå¸¸é€‚åˆè¾¹ç¼˜èŠ‚ç‚¹å’Œå®¹å™¨ç¯å¢ƒ\næœ¬æ–‡ä¸»è¦è®²è¿° \u003ccode\u003eEvents\u003c/code\u003e å’Œ \u003ccode\u003eCompnents\u003c/code\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-é…ç½®ç»“æ„æ¦‚è§ˆ\"\u003e1. é…ç½®ç»“æ„æ¦‚è§ˆ\u003c/h2\u003e\n\u003cp\u003eVector æœ‰ä¸¤ç§æ•°æ®æ¨¡å‹ (Data Model), åˆç§°äº‹ä»¶(Events):\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eLogs\u003c/strong\u003e: ç”¨äºè¡¨ç¤ºç»“æ„åŒ–æˆ–éç»“æ„åŒ–æ—¥å¿—æ•°æ®\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003emetrics\u003c/strong\u003e: ç”¨äºè¡¨ç¤ºæŒ‡æ ‡æ•°æ®\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eVector çš„é…ç½®ç”±ä¸‰ä¸ªæ ¸å¿ƒéƒ¨åˆ† (Compnets) ç»„æˆï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003esources\u003c/strong\u003eï¼šæ•°æ®é‡‡é›†æº\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003etransforms\u003c/strong\u003eï¼šæ•°æ®å¤„ç†ä¸è§£æ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003esinks\u003c/strong\u003eï¼šè¾“å‡ºç›®æ ‡\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"2-data-modelevents\"\u003e2. Data model(events)\u003c/h2\u003e\n\u003cp\u003e\u003cimg alt=\"Data model\" loading=\"lazy\" src=\"/Toolkits/vector/Data_model.webp\"\u003e\u003c/p\u003e\n\u003ch3 id=\"log-events\"\u003eLog events\u003c/h3\u003e\n\u003cp\u003eHereâ€™s an example representation of a log event (as JSON):\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-log\" data-lang=\"log\"\u003e{\n  \u0026#34;log\u0026#34;: {\n    \u0026#34;custom\u0026#34;: \u0026#34;field\u0026#34;,\n    \u0026#34;host\u0026#34;: \u0026#34;my.host.com\u0026#34;,\n    \u0026#34;message\u0026#34;: \u0026#34;Hello world\u0026#34;,\n    \u0026#34;timestamp\u0026#34;: \u0026#34;2020-11-01T21:15:47+00:00\u0026#34;\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"metric-event\"\u003eMetric event\u003c/h3\u003e\n\u003cp\u003eæ­¤å¤„ç•™ç»™ä»¥åæ’°å†™\u003c/p\u003e\n\u003ch2 id=\"3-compnents\"\u003e3. Compnents\u003c/h2\u003e\n\u003ch3 id=\"31-source\"\u003e3.1 source\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003eè¯¦ç»†é…ç½®è¯·è§ ğŸ‘‰ \u003ca href=\"https://vector.dev/docs/reference/configuration/sources/\"\u003eSources reference\u003c/a\u003e\u003c/p\u003e","title":"Vector æ—¥å¿—é‡‡é›†ä¸å¤„ç†"},{"content":"ClickHouse é«˜æ€§èƒ½æ•°æ®åº“ ClickHouse æ˜¯ä¸€æ¬¾ å¼€æºã€é«˜æ€§èƒ½çš„åˆ—å¼æ•°æ®åº“ï¼Œä¸»è¦ç”¨äº å¤§è§„æ¨¡æ•°æ®åˆ†æ (OLAP) å’Œ å®æ—¶æŸ¥è¯¢ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼š\nåˆ—å¼å­˜å‚¨ï¼Œè¯»å–æŒ‡å®šåˆ—éå¸¸å¿« æ”¯æŒé«˜å¹¶å‘å†™å…¥å’ŒæŸ¥è¯¢ å¼ºå¤§çš„èšåˆåŠŸèƒ½ï¼Œé€‚åˆæŠ¥è¡¨å’Œæ—¥å¿—åˆ†æ æ”¯æŒ SQL æŸ¥è¯¢ï¼Œæ˜“ä¸Šæ‰‹ 1ï¸. å®‰è£…ä¸å¿«é€Ÿå¼€å§‹ å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£æˆ–ç¤¾åŒºæ•™ç¨‹ ğŸ‘‰ClickHouse å®˜æ–¹æ–‡æ¡£\n1.1 å®‰è£… curl https://clickhouse.com/ | sh sudo ./clickhouse install 1.2 è¿è¡Œ $ clickhouse-client --host server ClickHouse client version 24.12.2.29 (official build). Connecting to server:9000 as user default. Connected to ClickHouse server version 24.12.2. :) Specify additional connection details as necessary:\nOption Description --port \u0026lt;port\u0026gt; The port ClickHouse server is accepting connections on. The default ports are 9440 (TLS) and 9000 (no TLS). Note that ClickHouse Client uses the native protocol and not HTTP(S). -s [--secure] Whether to use TLS (usually autodetected). -u [--user] \u0026lt;username\u0026gt; The database user to connect as. Connects as the default user by default. --password \u0026lt;password\u0026gt; The password of the database user. You can also specify the password for a connection in the configuration file. If you do not specify the password, the client will ask for it. -c [--config] \u0026lt;path-to-file\u0026gt; The location of the configuration file for ClickHouse Client, if it is not at one of the default locations. See Configuration Files. 1.3 é€€å‡º To exit the client, press Ctrl+D, or enter one of the following instead of a query:\nexit or exit; quit or quit; q, Q or :q logout or logout; 2. åº“å’Œè¡¨çš„åˆ›å»º åœ¨ ClickHouse ä¸­ï¼Œæ•°æ®å­˜å‚¨çš„åŸºæœ¬å•å…ƒæ˜¯ æ•°æ®åº“ï¼ˆDatabaseï¼‰ å’Œ è¡¨ï¼ˆTableï¼‰ã€‚\nä¸‹é¢æ˜¯åˆ›å»ºåº“å’Œè¡¨çš„ç¤ºä¾‹ï¼š\n2.1 åˆ›å»ºæ•°æ®åº“ CREATE DATABASE IF NOT EXISTS analytics; IF NOT EXISTS â†’ é¿å…æ•°æ®åº“å·²å­˜åœ¨æ—¶æŠ¥é”™\nanalytics â†’ æ•°æ®åº“åç§°ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡è‡ªå®šä¹‰\n2.2 åˆ›å»ºè¡¨ CREATE TABLE IF NOT EXISTS analytics.visits ( user_id UInt32, page_id UInt32, timestamp DateTime ) ENGINE = MergeTree() ORDER BY timestamp; MergeTree() â†’ é«˜æ€§èƒ½è¡¨å¼•æ“\nORDER BY timestamp â†’ æŒ‰æ—¶é—´åˆ—æ’åºä¼˜åŒ–æŸ¥è¯¢\nIF NOT EXISTS â†’ é¿å…è¡¨å·²å­˜åœ¨æ—¶æŠ¥é”™\n3. æ•°æ®å†™å…¥ä¸æŸ¥è¯¢ æ­¤å¤„ä»¥åæ’°å†™\n","permalink":"http://localhost:1313/toolkits/clickhouse/","summary":"\u003ch1 id=\"clickhouse-é«˜æ€§èƒ½æ•°æ®åº“\"\u003eClickHouse é«˜æ€§èƒ½æ•°æ®åº“\u003c/h1\u003e\n\u003cp\u003eClickHouse æ˜¯ä¸€æ¬¾ \u003cstrong\u003eå¼€æºã€é«˜æ€§èƒ½çš„åˆ—å¼æ•°æ®åº“\u003c/strong\u003eï¼Œä¸»è¦ç”¨äº \u003cstrong\u003eå¤§è§„æ¨¡æ•°æ®åˆ†æ (OLAP)\u003c/strong\u003e å’Œ \u003cstrong\u003eå®æ—¶æŸ¥è¯¢\u003c/strong\u003eã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåˆ—å¼å­˜å‚¨ï¼Œè¯»å–æŒ‡å®šåˆ—éå¸¸å¿«\u003c/li\u003e\n\u003cli\u003eæ”¯æŒé«˜å¹¶å‘å†™å…¥å’ŒæŸ¥è¯¢\u003c/li\u003e\n\u003cli\u003eå¼ºå¤§çš„èšåˆåŠŸèƒ½ï¼Œé€‚åˆæŠ¥è¡¨å’Œæ—¥å¿—åˆ†æ\u003c/li\u003e\n\u003cli\u003eæ”¯æŒ SQL æŸ¥è¯¢ï¼Œæ˜“ä¸Šæ‰‹\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-å®‰è£…ä¸å¿«é€Ÿå¼€å§‹\"\u003e1ï¸. å®‰è£…ä¸å¿«é€Ÿå¼€å§‹\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£æˆ–ç¤¾åŒºæ•™ç¨‹ ğŸ‘‰\u003ca href=\"https://clickhouse.com/docs/\"\u003eClickHouse å®˜æ–¹æ–‡æ¡£\u003c/a\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003ch3 id=\"11-å®‰è£…\"\u003e1.1 å®‰è£…\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ecurl https://clickhouse.com/ \u003cspan class=\"p\"\u003e|\u003c/span\u003e sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo ./clickhouse install\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"12-è¿è¡Œ\"\u003e1.2 è¿è¡Œ\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ clickhouse-client --host server\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eClickHouse client version 24.12.2.29 \u003cspan class=\"o\"\u003e(\u003c/span\u003eofficial build\u003cspan class=\"o\"\u003e)\u003c/span\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eConnecting to server:9000 as user default.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eConnected to ClickHouse server version 24.12.2.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e:\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eSpecify additional connection details as necessary:\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eOption\u003c/th\u003e\n          \u003cth\u003eDescription\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e--port \u0026lt;port\u0026gt;\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eThe port ClickHouse server is accepting connections on. The default ports are 9440 (TLS) and 9000 (no TLS). Note that ClickHouse Client uses the native protocol and not HTTP(S).\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-s [--secure]\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eWhether to use TLS (usually autodetected).\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-u [--user] \u0026lt;username\u0026gt;\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eThe database user to connect as. Connects as the default user by default.\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e--password \u0026lt;password\u0026gt;\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eThe password of the database user. You can also specify the password for a connection in the configuration file. If you do not specify the password, the client will ask for it.\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-c [--config] \u0026lt;path-to-file\u0026gt;\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eThe location of the configuration file for ClickHouse Client, if it is not at one of the default locations. See Configuration Files.\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch3 id=\"13-é€€å‡º\"\u003e1.3 é€€å‡º\u003c/h3\u003e\n\u003cp\u003eTo exit the client, press Ctrl+D, or enter one of the following instead of a query:\u003c/p\u003e","title":"ClickHouse é«˜æ€§èƒ½æ•°æ®åº“"},{"content":"ç®€ä»‹ qr-scanner æ˜¯ä¸€æ¬¾çº¯å‰ç«¯ã€é›¶ä¾èµ–çš„ JavaScript äºŒç»´ç æ‰«æåº“ï¼Œå®Œå…¨åœ¨æµè§ˆå™¨ç«¯è¿è¡Œï¼Œæ— éœ€åç«¯é…åˆã€‚å®ƒåŒæ—¶æ”¯æŒï¼š\næ‘„åƒå¤´å®æ—¶æ‰«ç  é™æ€å›¾ç‰‡/æ–‡ä»¶ç¦»çº¿æ‰«ç ï¼ˆæ”¯æŒ \u0026lt;img\u0026gt;ã€\u0026lt;canvas\u0026gt;ã€\u0026lt;video\u0026gt;ã€Fileã€Blob ç­‰å¤šç§æ¥æºï¼‰ åº•å±‚ä½¿ç”¨ WebAssembly åŠ é€Ÿè§£ç ï¼Œè¯†åˆ«é€Ÿåº¦å¿«ã€å‡†ç¡®ç‡é«˜ï¼Œåœ¨æ‰‹æœºç«¯è¡¨ç°å°¤ä¸ºä¼˜ç§€ï¼Œæ˜¯ç›®å‰æœ€æ¨èçš„å‰ç«¯äºŒç»´ç æ‰«ææ–¹æ¡ˆ\næœ¬æ–‡ä»¥ React + Next.js æ¡†æ¶ä¸ºä¾‹\n1. å®‰è£… npm install qr-scanner æˆ–ä½¿ç”¨ yarnï¼š\nyarn add qr-scanner æ³¨æ„ï¼šå·²ä¸å†æ¨èç›´æ¥ç”¨ \u0026lt;script\u0026gt; æ ‡ç­¾å¼•å…¥ï¼Œç°ä»£é¡¹ç›®è¯·é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…\n2. åŸºæœ¬å¼•å…¥æ–¹å¼ import QrScanner from \u0026#39;qr-scanner\u0026#39;; 3. æ ¸å¿ƒç±»ï¼šQrScanner 3.1 æ‘„åƒå¤´å®æ—¶æ‰«ç  const videoElement = document.getElementById(\u0026#39;video\u0026#39;) as HTMLVideoElement; const scanner = new QrScanner( videoElement, (result) =\u0026gt; { console.log(\u0026#39;æ‰«ç æˆåŠŸ:\u0026#39;, result.data); // result.cornerPoints å¯ç”¨æ¥åšè¾¹æ¡†åŠ¨ç”» }, { returnDetailedScanResult: true, // è¿”å›å®Œæ•´å¯¹è±¡è€Œéä»…å­—ç¬¦ä¸² highlightScanRegion: true, // æ˜¾ç¤ºæ‰«æåŒºåŸŸé®ç½© highlightCodeOutline: true, // é«˜äº®äºŒç»´ç è½®å»“ } ); // å¯åŠ¨æ‘„åƒå¤´ await scanner.start(); // åœæ­¢æ‰«æ scanner.stop(); å¸¸ç”¨é…ç½®é¡¹ å‚æ•° è¯´æ˜ returnDetailedScanResult true æ—¶è¿”å› { data, cornerPoints } å¯¹è±¡ highlightScanRegion æ˜¾ç¤ºåŠé€æ˜æ‰«æåŒºåŸŸæ¡† highlightCodeOutline å®æ—¶ç»˜åˆ¶äºŒç»´ç å››è§’è½®å»“ 3.2 ç¦»çº¿æ‰«æå›¾ç‰‡æ–‡ä»¶ const file: File = æ–‡ä»¶è¾“å…¥æ¡†.files[0]; const result = await QrScanner.scanImage(file, { returnDetailedScanResult: true }); console.log(\u0026#39;äºŒç»´ç å†…å®¹:\u0026#39;, result.data); æ”¯æŒæ‰€æœ‰å›¾ç‰‡æºï¼šFileã€Blobã€HTMLImageElementã€HTMLCanvasElementã€URL ç­‰\n4. å¸¸ç”¨åœºæ™¯ç¤ºä¾‹ 4.1 æ‘„åƒå¤´æ‰«ç è‡ªåŠ¨å¡«å……åœ°å€ const scanner = new QrScanner(videoRef.current!, (result) =\u0026gt; { const match = result.data.match(/0x[a-fA-F0-9]{40}/i); if (match) { setAddress(match[0] as `0x${string}`); scanner.stop(); // æ‰«åˆ°å³åœæ­¢ onClose(); // å…³é—­å¼¹çª— } }); await scanner.start(); 4.2 ä¸Šä¼ å›¾ç‰‡æ‰«ç  const handleUpload = async (file: File) =\u0026gt; { try { const result = await QrScanner.scanImage(file); setAddress(result.data); message.success(\u0026#39;æ‰«ç æˆåŠŸ\u0026#39;); } catch (e) { message.error(\u0026#39;æœªè¯†åˆ«åˆ°äºŒç»´ç \u0026#39;); } }; 4.3 æ­£ç¡®é”€æ¯å®ä¾‹ï¼ˆå¾ˆé‡è¦ï¼ï¼‰ // React useEffect æ¸…ç†ç¤ºä¾‹ useEffect(() =\u0026gt; { return () =\u0026gt; { scanner?.stop(); scanner?.destroy(); scanner = null; }; }, []); ä¸é”€æ¯ä¼šå¯¼è‡´æ‘„åƒå¤´ä¸€ç›´è¢«å ç”¨ã€å†…å­˜æ³„æ¼\n5. React é¡¹ç›®æ³¨æ„äº‹é¡¹ video å…ƒç´ å¿…é¡»é€šè¿‡ useRef ç»‘å®šï¼Œä¸èƒ½ç›´æ¥ç”¨ document.getElementById å»ºè®®åœ¨å¼¹çª—/æŠ½å±‰æ‰“å¼€æ—¶æ‰ start()ï¼Œå…³é—­æ—¶ç«‹å³ stop + destroy start() æ˜¯å¼‚æ­¥çš„ï¼Œå»ºè®®åŠ  await å¹¶ try/catch å¤„ç†æƒé™é—®é¢˜ è¯†åˆ«ä»¥å¤ªåŠåœ°å€æ¨èæ­£åˆ™ï¼š/0x[a-fA-F0-9]{40}/i æä¾›ã€Œä¸Šä¼ å›¾ç‰‡æ‰«ç ã€ä½œä¸ºæ‘„åƒå¤´å¤±è´¥çš„å…œåº•æ–¹æ¡ˆ 6. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ é—®é¢˜ è§£å†³æ–¹æ¡ˆ æ‘„åƒå¤´é»‘å±/æ— æ³•å¼€å¯ å¿…é¡» HTTPS æˆ– localhostï¼›æ£€æŸ¥æ˜¯å¦å·²æˆæƒæ‘„åƒå¤´ start() æŠ¥é”™ ç¡®ä¿ videoRef.current å·²æœ‰å€¼ï¼Œä¸”ä¸Šä¸€ä¸ª scanner å·² destroy æ‰«ä¸åˆ°ç  å…‰çº¿è¦å……è¶³ã€äºŒç»´ç è¦å®Œæ•´ï¼›å¯æç¤ºç”¨æˆ·ã€Œæ”¯æŒä¸Šä¼ å›¾ç‰‡æ‰«ç ã€ åˆ‡æ¢é¡µé¢åæ‘„åƒå¤´ä»å ç”¨ ç»„ä»¶å¸è½½å¿…é¡»æ‰§è¡Œ stop() + destroy() æ‰‹æœºç«¯è¯†åˆ«æ…¢ qr-scanner å·²ä½¿ç”¨ WASMï¼Œå±äºç›®å‰æœ€å¿«æ–¹æ¡ˆï¼›ä»å»ºè®®ä¿æŒäºŒç»´ç å å± 1/3 ä»¥ä¸Šå¤§å° 7. æ€»ç»“ å®æ—¶æ‘„åƒå¤´æ‰«ç  + ç¦»çº¿å›¾ç‰‡æ‰«ç ä¸€æŠŠæŠ“ è¯†åˆ«é€Ÿåº¦å¿«ã€å‡†ç¡®ç‡é«˜ã€æ‰‹æœºç«¯è¡¨ç°ä¼˜ç§€ æä¾›æ‰«æåŒºåŸŸé«˜äº®ã€äºŒç»´ç è½®å»“é«˜äº®ã€è§’ç‚¹æ•°æ®ç­‰é«˜çº§åŠŸèƒ½ React ä½¿ç”¨æ—¶é…åˆ useRef + useEffect ç”Ÿå‘½å‘¨æœŸç®¡ç†å³å¯ å¼ºçƒˆå»ºè®®æ­é…ã€Œä¸Šä¼ å›¾ç‰‡æ‰«ç ã€ä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆï¼Œç”¨æˆ·ä½“éªŒæ›´ä½³ ","permalink":"http://localhost:1313/toolkits/qr-scanner/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003e\u003ccode\u003eqr-scanner\u003c/code\u003e æ˜¯ä¸€æ¬¾çº¯å‰ç«¯ã€é›¶ä¾èµ–çš„ JavaScript äºŒç»´ç æ‰«æåº“ï¼Œå®Œå…¨åœ¨æµè§ˆå™¨ç«¯è¿è¡Œï¼Œæ— éœ€åç«¯é…åˆã€‚å®ƒåŒæ—¶æ”¯æŒï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæ‘„åƒå¤´å®æ—¶æ‰«ç \u003c/li\u003e\n\u003cli\u003eé™æ€å›¾ç‰‡/æ–‡ä»¶ç¦»çº¿æ‰«ç ï¼ˆæ”¯æŒ \u003ccode\u003e\u0026lt;img\u0026gt;\u003c/code\u003eã€\u003ccode\u003e\u0026lt;canvas\u0026gt;\u003c/code\u003eã€\u003ccode\u003e\u0026lt;video\u0026gt;\u003c/code\u003eã€Fileã€Blob ç­‰å¤šç§æ¥æºï¼‰\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eåº•å±‚ä½¿ç”¨ WebAssembly åŠ é€Ÿè§£ç ï¼Œè¯†åˆ«é€Ÿåº¦å¿«ã€å‡†ç¡®ç‡é«˜ï¼Œåœ¨æ‰‹æœºç«¯è¡¨ç°å°¤ä¸ºä¼˜ç§€ï¼Œæ˜¯ç›®å‰æœ€æ¨èçš„å‰ç«¯äºŒç»´ç æ‰«ææ–¹æ¡ˆ\u003c/p\u003e\n\u003cp\u003eæœ¬æ–‡ä»¥ \u003ccode\u003eReact + Next.js\u003c/code\u003e æ¡†æ¶ä¸ºä¾‹\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-å®‰è£…\"\u003e1. å®‰è£…\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003enpm install qr-scanner\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæˆ–ä½¿ç”¨ yarnï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eyarn add qr-scanner\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003eæ³¨æ„ï¼šå·²ä¸å†æ¨èç›´æ¥ç”¨ \u003ccode\u003e\u0026lt;script\u0026gt;\u003c/code\u003e æ ‡ç­¾å¼•å…¥ï¼Œç°ä»£é¡¹ç›®è¯·é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…\u003c/p\u003e\u003c/blockquote\u003e\n\u003chr\u003e\n\u003ch2 id=\"2-åŸºæœ¬å¼•å…¥æ–¹å¼\"\u003e2. åŸºæœ¬å¼•å…¥æ–¹å¼\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eQrScanner\u003c/span\u003e \u003cspan class=\"kr\"\u003efrom\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;qr-scanner\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"3-æ ¸å¿ƒç±»qrscanner\"\u003e3. æ ¸å¿ƒç±»ï¼šQrScanner\u003c/h2\u003e\n\u003ch3 id=\"31-æ‘„åƒå¤´å®æ—¶æ‰«ç \"\u003e3.1 æ‘„åƒå¤´å®æ—¶æ‰«ç \u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003evideoElement\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003edocument\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetElementById\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;video\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"kr\"\u003eas\u003c/span\u003e \u003cspan class=\"nx\"\u003eHTMLVideoElement\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003escanner\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eQrScanner\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003evideoElement\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;æ‰«ç æˆåŠŸ:\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// result.cornerPoints å¯ç”¨æ¥åšè¾¹æ¡†åŠ¨ç”»\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e  \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nx\"\u003ereturnDetailedScanResult\u003c/span\u003e: \u003cspan class=\"kt\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"c1\"\u003e// è¿”å›å®Œæ•´å¯¹è±¡è€Œéä»…å­—ç¬¦ä¸²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003ehighlightScanRegion\u003c/span\u003e: \u003cspan class=\"kt\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e      \u003cspan class=\"c1\"\u003e// æ˜¾ç¤ºæ‰«æåŒºåŸŸé®ç½©\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003ehighlightCodeOutline\u003c/span\u003e: \u003cspan class=\"kt\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e     \u003cspan class=\"c1\"\u003e// é«˜äº®äºŒç»´ç è½®å»“\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// å¯åŠ¨æ‘„åƒå¤´\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003escanner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estart\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// åœæ­¢æ‰«æ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"nx\"\u003escanner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estop\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"å¸¸ç”¨é…ç½®é¡¹\"\u003eå¸¸ç”¨é…ç½®é¡¹\u003c/h4\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eå‚æ•°\u003c/th\u003e\n          \u003cth\u003eè¯´æ˜\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ereturnDetailedScanResult\u003c/td\u003e\n          \u003ctd\u003etrue æ—¶è¿”å› { data, cornerPoints } å¯¹è±¡\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ehighlightScanRegion\u003c/td\u003e\n          \u003ctd\u003eæ˜¾ç¤ºåŠé€æ˜æ‰«æåŒºåŸŸæ¡†\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ehighlightCodeOutline\u003c/td\u003e\n          \u003ctd\u003eå®æ—¶ç»˜åˆ¶äºŒç»´ç å››è§’è½®å»“\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch3 id=\"32-ç¦»çº¿æ‰«æå›¾ç‰‡æ–‡ä»¶\"\u003e3.2 ç¦»çº¿æ‰«æå›¾ç‰‡æ–‡ä»¶\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003efile\u003c/span\u003e: \u003cspan class=\"kt\"\u003eFile\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"err\"\u003eæ–‡ä»¶è¾“å…¥æ¡†\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efiles\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eQrScanner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003escanImage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efile\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003ereturnDetailedScanResult\u003c/span\u003e: \u003cspan class=\"kt\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;äºŒç»´ç å†…å®¹:\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæ”¯æŒæ‰€æœ‰å›¾ç‰‡æºï¼šFileã€Blobã€HTMLImageElementã€HTMLCanvasElementã€URL ç­‰\u003c/p\u003e","title":"QR Scanner ä½¿ç”¨æŒ‡å—"},{"content":"ç®€ä»‹ æœ¬æ–‡æ¡£æ€»ç»“äº†åœ¨ Hugo + PaperMod ä¸»é¢˜ ä¸‹è‡ªå®šä¹‰åšå®¢æ¨¡æ¿çš„é…ç½®æ–¹æ³•ï¼ŒåŒ…æ‹¬é™æ€èµ„æºä¼˜åŒ–ã€Nginx éƒ¨ç½²ã€ç¼“å­˜ç­–ç•¥å’Œå›¾ç‰‡åŠ é€ŸæŠ€å·§\n","permalink":"http://localhost:1313/toolkits/hugo_papermod/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eæœ¬æ–‡æ¡£æ€»ç»“äº†åœ¨ \u003cstrong\u003eHugo + PaperMod ä¸»é¢˜\u003c/strong\u003e ä¸‹è‡ªå®šä¹‰åšå®¢æ¨¡æ¿çš„é…ç½®æ–¹æ³•ï¼ŒåŒ…æ‹¬é™æ€èµ„æºä¼˜åŒ–ã€Nginx éƒ¨ç½²ã€ç¼“å­˜ç­–ç•¥å’Œå›¾ç‰‡åŠ é€ŸæŠ€å·§\u003c/p\u003e\n\u003chr\u003e","title":"Hugo-PaperMod è‡ªå®šä¹‰åšå®¢æ¨¡æ¿"},{"content":"","permalink":"http://localhost:1313/toolkits/indexeddb/","summary":"","title":"IndexedDB æµè§ˆå™¨æ•°æ®åº“"},{"content":"ç¼–ç¨‹å­¦ä¹  åœ¨å¤§å­¦æœŸé—´ï¼Œæˆ‘ä¸»è¦å­¦ä¹ äº†ä»¥ä¸‹ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯ï¼š\nPythonï¼šç”¨äºæ•°æ®åˆ†æã€è„šæœ¬è‡ªåŠ¨åŒ– Javaï¼šé¢å‘å¯¹è±¡è®¾è®¡å’Œå¤§å‹é¡¹ç›®å¼€å‘ C/C++ï¼šç³»ç»Ÿç¼–ç¨‹å’Œç®—æ³•å®ç° Web å¼€å‘ï¼šHTMLã€CSSã€JavaScriptï¼Œæ­å»ºä¸ªäººé¡¹ç›®ç½‘ç«™ é¡¹ç›®å®è·µ Web3 å®éªŒé¡¹ç›®ï¼šä½¿ç”¨åŒºå—é“¾ç›¸å…³æŠ€æœ¯å®ç°ç®€å•çš„å»ä¸­å¿ƒåŒ–åº”ç”¨ æ•°æ®åˆ†æé¡¹ç›®ï¼šPython + Pandas å¯¹å®éªŒæ•°æ®è¿›è¡Œå¤„ç†ä¸å¯è§†åŒ– è¯¾è®¾ä¸å®éªŒï¼šå›¢é˜Ÿåä½œå®Œæˆ Java å’Œ C++ é¡¹ç›®ï¼Œç§¯ç´¯ç‰ˆæœ¬æ§åˆ¶ç»éªŒ å­¦ä¹ å¿ƒå¾— ç†è®ºå­¦ä¹ å’Œå®è·µç»“åˆï¼ŒåŠ¨æ‰‹åšé¡¹ç›®æ‰èƒ½åŠ æ·±ç†è§£ å­¦ä¼šåˆ©ç”¨ Git/GitHub è¿›è¡Œç‰ˆæœ¬æ§åˆ¶å’Œåä½œ å¤šåšç¬”è®°ï¼Œè®°å½•å­¦ä¹ è¿‡ç¨‹ä¸­çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ å…³æ³¨æ–°æŠ€æœ¯åŠ¨æ€ï¼Œä¾‹å¦‚ Web3ã€AIã€äº‘è®¡ç®—ç­‰ æŠ€æœ¯åˆ†äº«è®¡åˆ’ å®šæœŸåœ¨åšå®¢å‘å¸ƒå­¦ä¹ ç¬”è®°ä¸é¡¹ç›®æ€»ç»“ åˆ†äº«ä»£ç ç¤ºä¾‹å’Œå®éªŒæ•™ç¨‹ï¼Œä¾¿äºåŒå­¦å‚è€ƒ æŒç»­æ›´æ–°æŠ€æœ¯æ ˆï¼Œè®°å½•æˆé•¿è¿‡ç¨‹ ","permalink":"http://localhost:1313/uestc/intro/","summary":"\u003ch2 id=\"ç¼–ç¨‹å­¦ä¹ \"\u003eç¼–ç¨‹å­¦ä¹ \u003c/h2\u003e\n\u003cp\u003eåœ¨å¤§å­¦æœŸé—´ï¼Œæˆ‘ä¸»è¦å­¦ä¹ äº†ä»¥ä¸‹ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePython\u003c/strong\u003eï¼šç”¨äºæ•°æ®åˆ†æã€è„šæœ¬è‡ªåŠ¨åŒ–\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eJava\u003c/strong\u003eï¼šé¢å‘å¯¹è±¡è®¾è®¡å’Œå¤§å‹é¡¹ç›®å¼€å‘\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eC/C++\u003c/strong\u003eï¼šç³»ç»Ÿç¼–ç¨‹å’Œç®—æ³•å®ç°\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eWeb å¼€å‘\u003c/strong\u003eï¼šHTMLã€CSSã€JavaScriptï¼Œæ­å»ºä¸ªäººé¡¹ç›®ç½‘ç«™\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"é¡¹ç›®å®è·µ\"\u003eé¡¹ç›®å®è·µ\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eWeb3 å®éªŒé¡¹ç›®\u003c/strong\u003eï¼šä½¿ç”¨åŒºå—é“¾ç›¸å…³æŠ€æœ¯å®ç°ç®€å•çš„å»ä¸­å¿ƒåŒ–åº”ç”¨\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæ•°æ®åˆ†æé¡¹ç›®\u003c/strong\u003eï¼šPython + Pandas å¯¹å®éªŒæ•°æ®è¿›è¡Œå¤„ç†ä¸å¯è§†åŒ–\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eè¯¾è®¾ä¸å®éªŒ\u003c/strong\u003eï¼šå›¢é˜Ÿåä½œå®Œæˆ Java å’Œ C++ é¡¹ç›®ï¼Œç§¯ç´¯ç‰ˆæœ¬æ§åˆ¶ç»éªŒ\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å­¦ä¹ å¿ƒå¾—\"\u003eå­¦ä¹ å¿ƒå¾—\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eç†è®ºå­¦ä¹ å’Œå®è·µç»“åˆï¼ŒåŠ¨æ‰‹åšé¡¹ç›®æ‰èƒ½åŠ æ·±ç†è§£\u003c/li\u003e\n\u003cli\u003eå­¦ä¼šåˆ©ç”¨ Git/GitHub è¿›è¡Œç‰ˆæœ¬æ§åˆ¶å’Œåä½œ\u003c/li\u003e\n\u003cli\u003eå¤šåšç¬”è®°ï¼Œè®°å½•å­¦ä¹ è¿‡ç¨‹ä¸­çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ\u003c/li\u003e\n\u003cli\u003eå…³æ³¨æ–°æŠ€æœ¯åŠ¨æ€ï¼Œä¾‹å¦‚ Web3ã€AIã€äº‘è®¡ç®—ç­‰\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"æŠ€æœ¯åˆ†äº«è®¡åˆ’\"\u003eæŠ€æœ¯åˆ†äº«è®¡åˆ’\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eå®šæœŸåœ¨åšå®¢å‘å¸ƒå­¦ä¹ ç¬”è®°ä¸é¡¹ç›®æ€»ç»“\u003c/li\u003e\n\u003cli\u003eåˆ†äº«ä»£ç ç¤ºä¾‹å’Œå®éªŒæ•™ç¨‹ï¼Œä¾¿äºåŒå­¦å‚è€ƒ\u003c/li\u003e\n\u003cli\u003eæŒç»­æ›´æ–°æŠ€æœ¯æ ˆï¼Œè®°å½•æˆé•¿è¿‡ç¨‹\u003c/li\u003e\n\u003c/ul\u003e","title":"UESTC ç®€ä»‹"},{"content":"Welcome to Web3! Web3ä»£è¡¨äº’è”ç½‘ä¸‹ä¸€ä¸ªæ—¶ä»£ä»¥åŒºå—é“¾ä¸ºæ ¸å¿ƒå®ç°å»ä¸­å¿ƒåŒ–ç”¨æˆ·æŒæ§æ•°æ®å’Œèµ„äº§é€šè¿‡æ™ºèƒ½åˆçº¦è‡ªåŠ¨åŒ–äº¤äº’æ‘†è„±ä¸­å¿ƒåŒ–å¹³å°æ§åˆ¶\nsecurity Web3å®‰å…¨èšç„¦é¢„é˜²é»‘å®¢æ”»å‡»å’Œæ¼æ´åˆ©ç”¨\né‡‡ç”¨å¤šå±‚é˜²å¾¡ç­–ç•¥åŒ…æ‹¬æ™ºèƒ½åˆçº¦å®¡è®¡è®¿é—®æ§åˆ¶å®æ—¶ç›‘æ§\nä½¿ç”¨Slither Mythrilæ£€æµ‹é‡å…¥æ”»å‡»æ•´æ•°æº¢å‡ºæƒé™é—®é¢˜\næœ€ä½³å®è·µå¼ºè°ƒç§é’¥ç®¡ç†å¤šç­¾åé’±åŒ…ç´§æ€¥æš‚åœæœºåˆ¶\n2025å¹´ä¸»è¦å¨èƒåŒ…æ‹¬é—ªè´·æ²»ç†æ”»å‡»è·¨é“¾æ¡¥æ¼æ´é’“é±¼æ”»å‡»\nå¼ºè°ƒå®‰å…¨å³ä»£ç ä»è®¾è®¡é˜¶æ®µæ•´åˆå½¢å¼éªŒè¯AIé©±åŠ¨ç›‘æ§\nå¼€æºåº“OpenZeppelinæä¾›å®‰å…¨åˆçº¦æ¨¡æ¿å‡å°‘å¸¸è§é”™è¯¯\næœºæ„çº§é¡¹ç›®éœ€æŒç»­å®¡è®¡æ¼æ´èµé‡‘è®¡åˆ’æ„å»ºä¿¡ä»»\nwallet é’±åŒ…æ˜¯Web3å…¥å£ç®¡ç†ç§é’¥å’Œèµ„äº§äº¤äº’\nåˆ†ä¸ºçƒ­é’±åŒ…å’Œå†·é’±åŒ…\nçƒ­é’±åŒ…å¦‚MetaMaskæµè§ˆå™¨æ‰©å±•æ–¹ä¾¿dAppè¿æ¥ä½†æ˜“å—ç½‘ç»œæ”»å‡»\nå†·é’±åŒ…åŒ…æ‹¬Ledgerç¡¬ä»¶é’±åŒ…å’Œçº¸é’±åŒ…ç¦»çº¿å­˜å‚¨æ›´å®‰å…¨é€‚åˆå¤§é¢æŒæœ‰\néæ‰˜ç®¡é’±åŒ…ç”¨æˆ·å®Œå…¨æ§åˆ¶å¯†é’¥\næ‰˜ç®¡é’±åŒ…å¦‚Coinbaseç®€åŒ–ä½†ä¾èµ–å¹³å°\nERC-4337è´¦æˆ·æŠ½è±¡æå‡ç”¨æˆ·ä½“éªŒæ”¯æŒç¤¾äº¤æ¢å¤æ°”ä½“èµåŠ©\nå¤šé“¾é’±åŒ…å¦‚Rainbowæ”¯æŒLayer2é™ä½è´¹ç”¨\nå®‰å…¨æç¤ºå¿…é¡»ä½¿ç”¨ç¡¬ä»¶ç­¾åç»ä¸æ³„éœ²ç§å­çŸ­è¯­å®šæœŸå¤‡ä»½\neip ğŸ‘‰ EIP ç¬”è®°åˆé›†\nEIPæ˜¯ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆæ ‡å‡†åŒ–å¹³å°å˜æ›´\næ¶µç›–æ ¸å¿ƒåè®®å®¢æˆ·ç«¯APIåˆçº¦è§„èŒƒ\nä»»ä½•äººå¯æäº¤è‰æ¡ˆç»ç¤¾åŒºè®¨è®ºç¼–è¾‘å®¡æŸ¥è¿›å…¥æœ€ç»ˆçŠ¶æ€\næ ¸å¿ƒEIPéœ€å…¨ç½‘å…±è¯†å¯èƒ½å¼•å‘ç¡¬åˆ†å‰\nå¦‚EIP-1559å¼•å…¥åŸºç¡€è´¹å¸‚åœº\nERCæ˜¯EIPå­é›†ä¸“æ³¨åº”ç”¨å±‚æ ‡å‡†\nEIPè¿‡ç¨‹ç¡®ä¿é€æ˜åŒ…å®¹\nä»è‰ç¨¿åˆ°æœ€åè°ƒç”¨å†åˆ°æœ€ç»ˆå®æ–½\nEIP-4844å¼•å…¥blobæ•°æ®å¤§å¹…é™ä½Layer2æˆæœ¬\næœªæ¥EIPèšç„¦å¯æ‰©å±•æ€§éšç§å¦‚Verkleæ ‘\nerc ERCæ˜¯ä»¥å¤ªåŠè¯·æ±‚è¯„è®ºå®šä¹‰ä»£å¸å’Œåº”ç”¨æ ‡å‡†\nERC20ç”¨äºå¯äº’æ¢ä»£å¸å¦‚USDTæ”¯æŒè½¬ç§»æ‰¹å‡†ä½™é¢æŸ¥è¯¢\nERC721åˆ›å»ºéåŒè´¨åŒ–ä»£å¸NFTå”¯ä¸€æ ‡è¯†æ‰€æœ‰æƒå¦‚CryptoKitties\nERC1155å¤šä»£å¸æ ‡å‡†å•ä¸€åˆçº¦ç®¡ç†å¯äº’æ¢éåŒè´¨åŒ–åŠåŒè´¨åŒ–èµ„äº§\né«˜æ•ˆæ‰¹é‡è½¬ç§»èŠ‚çœæ°”ä½“é€‚ç”¨äºæ¸¸æˆç‰©å“ç¥¨åŠ¡\nè¿™äº›æ ‡å‡†ç¡®ä¿å…¨ç”Ÿæ€äº’æ“ä½œæ€§\nå¼€å‘è€…å¯ç›´æ¥æ„å»ºå…¼å®¹é¡¹ç›®\nERC20ä¸»å¯¼DeFi\nERC721æ¨åŠ¨NFTå¸‚åœº\nERC1155ä¼˜åŒ–å¤æ‚ç”¨ä¾‹\ncodeLanuage æ™ºèƒ½åˆçº¦è¯­è¨€æœ€ç»ˆç¼–è¯‘ä¸ºEVMå­—èŠ‚ç \nSolidityä¸»æµç±»JavaScriptæ”¯æŒç»§æ‰¿ä¿®é¥°ç¬¦åº“ç”Ÿæ€æœ€ä¸°å¯Œ\nVyper Pythoné£æ ¼æ•…æ„å»é™¤ç»§æ‰¿æ— é™å¾ªç¯æå‡å¯å®¡è®¡æ€§å®‰å…¨æ€§\nYulä¸­é—´è¯­è¨€ç”¨äºç²¾ç»†æ°”ä½“ä¼˜åŒ–\nRustä¸»è¦ç”¨äºSolanaéEVMé“¾\nEthereumç”Ÿæ€ä»ä»¥Solidityå’ŒVyperä¸ºä¸»\nå­¦ä¹ Solidityæ¨èä»Remix IDEå¼€å§‹\nVyperå¼ºè°ƒäººç±»å¯è¯»ä»£ç å‡å°‘æ”»å‡»é¢\né€‰æ‹©è¯­è¨€å–å†³äºé¡¹ç›®å¤æ‚åº¦å’Œå®‰å…¨ä¼˜å…ˆçº§\nevm EVMæ˜¯ä»¥å¤ªåŠè™šæ‹Ÿæœºå»ä¸­å¿ƒåŒ–è®¡ç®—å¼•æ“\næ‰§è¡Œæ™ºèƒ½åˆçº¦å­—èŠ‚ç é‡‡ç”¨æ ˆåŸºæ¶æ„æ·±åº¦1024\næ¯æ“ä½œç æ¶ˆè€—æ°”ä½“é˜²æ­¢æ»¥ç”¨\nTuringå®Œå¤‡æ”¯æŒä»»æ„é€»è¾‘ä½†æœ‰æ°”ä½“ä¸Šé™é¿å…æ— é™å¾ªç¯\nEVMè´Ÿè´£çŠ¶æ€è½¬æ¢æ›´æ–°è´¦æˆ·ä½™é¢å­˜å‚¨\næ‰€æœ‰èŠ‚ç‚¹ä¸€è‡´æ‰§è¡Œä¿è¯ç¡®å®šæ€§éš”ç¦»\nå…¼å®¹é“¾å¦‚Polygon Arbitrumå…±äº«EVMå®ç°æ— ç¼ç§»æ¤\næœªæ¥å‡çº§EOFå¼•å…¥å®¹å™¨åŒ–ä»£ç æå‡æ•ˆç‡\nEVMæ˜¯æ•´ä¸ªä»¥å¤ªåŠç”Ÿæ€çš„è®¡ç®—æ ¸å¿ƒ\nframework(é¡¹ç›®æ¡†æ¶) Web3å¼€å‘æ¡†æ¶å¤§å¹…ç®€åŒ–åˆçº¦æ„å»ºæµ‹è¯•éƒ¨ç½²\nHardhat JavaScriptåŸºç¡€æ’ä»¶åŒ–æ”¯æŒæ§åˆ¶å°æ—¥å¿—è‡ªå®šä¹‰ä»»åŠ¡æ·±åº¦é›†æˆEthers.js\nTruffleè€ç‰Œå¥—ä»¶è‡ªå¸¦Ganacheæœ¬åœ°é“¾Mochaæµ‹è¯•é€‚åˆæ–°æ‰‹\nFoundry Rustç¼–å†™è¶…å¿«ç¼–è¯‘é“¸é€ Anvilåˆ†å‰ä¸»ç½‘ç”¨Solidityå†™æµ‹è¯•æ”¯æŒæ¨¡ç³Šæµ‹è¯•\nå½“å‰ä¸»æµé€‰æ‹©\nHardhatçµæ´»åº¦æœ€é«˜\nTruffleæœ€é€‚åˆæ•™å­¦\nFoundryæ€§èƒ½æè‡´é€‚åˆé«˜çº§å¼€å‘è€…\næ­é…VS Code Solidityæ‰©å±•å¼€å‘ä½“éªŒæœ€ä½³\n","permalink":"http://localhost:1313/web3/intro/","summary":"\u003ch1 id=\"welcome-to-web3\"\u003eWelcome to Web3!\u003c/h1\u003e\n\u003cp\u003eWeb3ä»£è¡¨äº’è”ç½‘ä¸‹ä¸€ä¸ªæ—¶ä»£ä»¥åŒºå—é“¾ä¸ºæ ¸å¿ƒå®ç°å»ä¸­å¿ƒåŒ–ç”¨æˆ·æŒæ§æ•°æ®å’Œèµ„äº§é€šè¿‡æ™ºèƒ½åˆçº¦è‡ªåŠ¨åŒ–äº¤äº’æ‘†è„±ä¸­å¿ƒåŒ–å¹³å°æ§åˆ¶\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"security\"\u003esecurity\u003c/h2\u003e\n\u003cp\u003eWeb3å®‰å…¨èšç„¦é¢„é˜²é»‘å®¢æ”»å‡»å’Œæ¼æ´åˆ©ç”¨\u003cbr\u003e\né‡‡ç”¨å¤šå±‚é˜²å¾¡ç­–ç•¥åŒ…æ‹¬æ™ºèƒ½åˆçº¦å®¡è®¡è®¿é—®æ§åˆ¶å®æ—¶ç›‘æ§\u003cbr\u003e\nä½¿ç”¨Slither Mythrilæ£€æµ‹é‡å…¥æ”»å‡»æ•´æ•°æº¢å‡ºæƒé™é—®é¢˜\u003cbr\u003e\næœ€ä½³å®è·µå¼ºè°ƒç§é’¥ç®¡ç†å¤šç­¾åé’±åŒ…ç´§æ€¥æš‚åœæœºåˆ¶\u003cbr\u003e\n2025å¹´ä¸»è¦å¨èƒåŒ…æ‹¬é—ªè´·æ²»ç†æ”»å‡»è·¨é“¾æ¡¥æ¼æ´é’“é±¼æ”»å‡»\u003cbr\u003e\nå¼ºè°ƒå®‰å…¨å³ä»£ç ä»è®¾è®¡é˜¶æ®µæ•´åˆå½¢å¼éªŒè¯AIé©±åŠ¨ç›‘æ§\u003cbr\u003e\nå¼€æºåº“OpenZeppelinæä¾›å®‰å…¨åˆçº¦æ¨¡æ¿å‡å°‘å¸¸è§é”™è¯¯\u003cbr\u003e\næœºæ„çº§é¡¹ç›®éœ€æŒç»­å®¡è®¡æ¼æ´èµé‡‘è®¡åˆ’æ„å»ºä¿¡ä»»\u003c/p\u003e\n\u003ch2 id=\"wallet\"\u003ewallet\u003c/h2\u003e\n\u003cp\u003eé’±åŒ…æ˜¯Web3å…¥å£ç®¡ç†ç§é’¥å’Œèµ„äº§äº¤äº’\u003cbr\u003e\nåˆ†ä¸ºçƒ­é’±åŒ…å’Œå†·é’±åŒ…\u003cbr\u003e\nçƒ­é’±åŒ…å¦‚MetaMaskæµè§ˆå™¨æ‰©å±•æ–¹ä¾¿dAppè¿æ¥ä½†æ˜“å—ç½‘ç»œæ”»å‡»\u003cbr\u003e\nå†·é’±åŒ…åŒ…æ‹¬Ledgerç¡¬ä»¶é’±åŒ…å’Œçº¸é’±åŒ…ç¦»çº¿å­˜å‚¨æ›´å®‰å…¨é€‚åˆå¤§é¢æŒæœ‰\u003cbr\u003e\néæ‰˜ç®¡é’±åŒ…ç”¨æˆ·å®Œå…¨æ§åˆ¶å¯†é’¥\u003cbr\u003e\næ‰˜ç®¡é’±åŒ…å¦‚Coinbaseç®€åŒ–ä½†ä¾èµ–å¹³å°\u003cbr\u003e\nERC-4337è´¦æˆ·æŠ½è±¡æå‡ç”¨æˆ·ä½“éªŒæ”¯æŒç¤¾äº¤æ¢å¤æ°”ä½“èµåŠ©\u003cbr\u003e\nå¤šé“¾é’±åŒ…å¦‚Rainbowæ”¯æŒLayer2é™ä½è´¹ç”¨\u003cbr\u003e\nå®‰å…¨æç¤ºå¿…é¡»ä½¿ç”¨ç¡¬ä»¶ç­¾åç»ä¸æ³„éœ²ç§å­çŸ­è¯­å®šæœŸå¤‡ä»½\u003c/p\u003e\n\u003ch2 id=\"eip\"\u003eeip\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eğŸ‘‰ \u003ca href=\"/web3/eip/intro\"\u003eEIP ç¬”è®°åˆé›†\u003c/a\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003eEIPæ˜¯ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆæ ‡å‡†åŒ–å¹³å°å˜æ›´\u003cbr\u003e\næ¶µç›–æ ¸å¿ƒåè®®å®¢æˆ·ç«¯APIåˆçº¦è§„èŒƒ\u003cbr\u003e\nä»»ä½•äººå¯æäº¤è‰æ¡ˆç»ç¤¾åŒºè®¨è®ºç¼–è¾‘å®¡æŸ¥è¿›å…¥æœ€ç»ˆçŠ¶æ€\u003cbr\u003e\næ ¸å¿ƒEIPéœ€å…¨ç½‘å…±è¯†å¯èƒ½å¼•å‘ç¡¬åˆ†å‰\u003cbr\u003e\nå¦‚EIP-1559å¼•å…¥åŸºç¡€è´¹å¸‚åœº\u003cbr\u003e\nERCæ˜¯EIPå­é›†ä¸“æ³¨åº”ç”¨å±‚æ ‡å‡†\u003cbr\u003e\nEIPè¿‡ç¨‹ç¡®ä¿é€æ˜åŒ…å®¹\u003cbr\u003e\nä»è‰ç¨¿åˆ°æœ€åè°ƒç”¨å†åˆ°æœ€ç»ˆå®æ–½\u003cbr\u003e\nEIP-4844å¼•å…¥blobæ•°æ®å¤§å¹…é™ä½Layer2æˆæœ¬\u003cbr\u003e\næœªæ¥EIPèšç„¦å¯æ‰©å±•æ€§éšç§å¦‚Verkleæ ‘\u003c/p\u003e\n\u003ch2 id=\"erc\"\u003eerc\u003c/h2\u003e\n\u003cp\u003eERCæ˜¯ä»¥å¤ªåŠè¯·æ±‚è¯„è®ºå®šä¹‰ä»£å¸å’Œåº”ç”¨æ ‡å‡†\u003cbr\u003e\nERC20ç”¨äºå¯äº’æ¢ä»£å¸å¦‚USDTæ”¯æŒè½¬ç§»æ‰¹å‡†ä½™é¢æŸ¥è¯¢\u003cbr\u003e\nERC721åˆ›å»ºéåŒè´¨åŒ–ä»£å¸NFTå”¯ä¸€æ ‡è¯†æ‰€æœ‰æƒå¦‚CryptoKitties\u003cbr\u003e\nERC1155å¤šä»£å¸æ ‡å‡†å•ä¸€åˆçº¦ç®¡ç†å¯äº’æ¢éåŒè´¨åŒ–åŠåŒè´¨åŒ–èµ„äº§\u003cbr\u003e\né«˜æ•ˆæ‰¹é‡è½¬ç§»èŠ‚çœæ°”ä½“é€‚ç”¨äºæ¸¸æˆç‰©å“ç¥¨åŠ¡\u003cbr\u003e\nè¿™äº›æ ‡å‡†ç¡®ä¿å…¨ç”Ÿæ€äº’æ“ä½œæ€§\u003cbr\u003e\nå¼€å‘è€…å¯ç›´æ¥æ„å»ºå…¼å®¹é¡¹ç›®\u003cbr\u003e\nERC20ä¸»å¯¼DeFi\u003cbr\u003e\nERC721æ¨åŠ¨NFTå¸‚åœº\u003cbr\u003e\nERC1155ä¼˜åŒ–å¤æ‚ç”¨ä¾‹\u003c/p\u003e\n\u003ch2 id=\"codelanuage\"\u003ecodeLanuage\u003c/h2\u003e\n\u003cp\u003eæ™ºèƒ½åˆçº¦è¯­è¨€æœ€ç»ˆç¼–è¯‘ä¸ºEVMå­—èŠ‚ç \u003cbr\u003e\nSolidityä¸»æµç±»JavaScriptæ”¯æŒç»§æ‰¿ä¿®é¥°ç¬¦åº“ç”Ÿæ€æœ€ä¸°å¯Œ\u003cbr\u003e\nVyper Pythoné£æ ¼æ•…æ„å»é™¤ç»§æ‰¿æ— é™å¾ªç¯æå‡å¯å®¡è®¡æ€§å®‰å…¨æ€§\u003cbr\u003e\nYulä¸­é—´è¯­è¨€ç”¨äºç²¾ç»†æ°”ä½“ä¼˜åŒ–\u003cbr\u003e\nRustä¸»è¦ç”¨äºSolanaéEVMé“¾\u003cbr\u003e\nEthereumç”Ÿæ€ä»ä»¥Solidityå’ŒVyperä¸ºä¸»\u003cbr\u003e\nå­¦ä¹ Solidityæ¨èä»Remix IDEå¼€å§‹\u003cbr\u003e\nVyperå¼ºè°ƒäººç±»å¯è¯»ä»£ç å‡å°‘æ”»å‡»é¢\u003cbr\u003e\né€‰æ‹©è¯­è¨€å–å†³äºé¡¹ç›®å¤æ‚åº¦å’Œå®‰å…¨ä¼˜å…ˆçº§\u003c/p\u003e\n\u003ch2 id=\"evm\"\u003eevm\u003c/h2\u003e\n\u003cp\u003eEVMæ˜¯ä»¥å¤ªåŠè™šæ‹Ÿæœºå»ä¸­å¿ƒåŒ–è®¡ç®—å¼•æ“\u003cbr\u003e\næ‰§è¡Œæ™ºèƒ½åˆçº¦å­—èŠ‚ç é‡‡ç”¨æ ˆåŸºæ¶æ„æ·±åº¦1024\u003cbr\u003e\næ¯æ“ä½œç æ¶ˆè€—æ°”ä½“é˜²æ­¢æ»¥ç”¨\u003cbr\u003e\nTuringå®Œå¤‡æ”¯æŒä»»æ„é€»è¾‘ä½†æœ‰æ°”ä½“ä¸Šé™é¿å…æ— é™å¾ªç¯\u003cbr\u003e\nEVMè´Ÿè´£çŠ¶æ€è½¬æ¢æ›´æ–°è´¦æˆ·ä½™é¢å­˜å‚¨\u003cbr\u003e\næ‰€æœ‰èŠ‚ç‚¹ä¸€è‡´æ‰§è¡Œä¿è¯ç¡®å®šæ€§éš”ç¦»\u003cbr\u003e\nå…¼å®¹é“¾å¦‚Polygon Arbitrumå…±äº«EVMå®ç°æ— ç¼ç§»æ¤\u003cbr\u003e\næœªæ¥å‡çº§EOFå¼•å…¥å®¹å™¨åŒ–ä»£ç æå‡æ•ˆç‡\u003cbr\u003e\nEVMæ˜¯æ•´ä¸ªä»¥å¤ªåŠç”Ÿæ€çš„è®¡ç®—æ ¸å¿ƒ\u003c/p\u003e","title":"Web3 ç®€ä»‹"},{"content":"é¡¹ç›®ç®€ä»‹ é¡¹ç›®åç§°ï¼š0907 Wallet\nç³»ç»Ÿç±»å‹ï¼šåŸºäºæµè§ˆå™¨çš„ Web3 å»ä¸­å¿ƒåŒ–é’±åŒ…\nç³»ç»Ÿå®šä½ï¼šè½»é‡åŒ–ã€æœ¬åœ°åŒ–ã€è‡ªæ‰˜ç®¡çš„é’±åŒ…ç³»ç»Ÿ\nç³»ç»Ÿä»£ç æ¡†æ¶: React + Next.js\næ ¸å¿ƒç›®æ ‡\næä¾›å®‰å…¨å¯é çš„é’±åŒ…è´¦æˆ·ç”Ÿæˆä¸ç®¡ç†èƒ½åŠ›\næ”¯æŒåŸºæœ¬çš„è½¬è´¦ã€æ¶ˆæ¯ç­¾åä¸èµ„äº§æŸ¥çœ‹åŠŸèƒ½\nå®ç°å®Œæ•´çš„æœ¬åœ°åŒ–å­˜å‚¨ï¼Œå…¨æµç¨‹ä¸ä¸Šä¼ ç§é’¥\néç›®æ ‡è¯´æ˜ï¼ˆå¯é€‰ï¼‰\nä¸æ„å»ºé“¾ä¸‹åç«¯æœåŠ¡\nä¸æä¾›ä¸­å¿ƒåŒ–è´¦æˆ·ä½“ç³»\nä¸æ‰˜ç®¡ä»»ä½•ç”¨æˆ·èµ„äº§\n1. ä»£ç è§„èŒƒ 1.1 ä»£ç å‘½åè§„èŒƒ 1.1.1 ç»„ä»¶å‘½åï¼ˆReact ç»„ä»¶ã€é¡µé¢ï¼‰ è§„åˆ™ï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰ æ–‡ä»¶å‘½åï¼šåŒå .tsx æ–‡ä»¶ä¹Ÿå¿…é¡» PascalCase ç¤ºä¾‹ï¼š AccountCard.tsx â†’ æ­£ç¡® UserProfile.tsx â†’ æ­£ç¡® account-card.tsx â†’ é”™è¯¯ 1.1.2 æ¥å£ã€ç±»å‹ã€æšä¸¾å‘½å è§„åˆ™ï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰ å»ºè®®ï¼šæ¥å£å¯åŠ  I å‰ç¼€ï¼ˆå›¢é˜Ÿç»Ÿä¸€å³å¯ï¼‰ï¼Œç±»å‹å¯åŠ  T å‰ç¼€ï¼ˆå¯é€‰ï¼‰ ç¤ºä¾‹ï¼š interface UserInfo { ... } interface IUserInfo { ... } // ä¹Ÿå¯ type NetworkConfig = { ... } type TResponse\u0026lt;T\u0026gt; = { ... } enum ChainId { Ethereum = 1, Sepolia = 11155111 } 1.1.3 å¸¸é‡å‘½åï¼ˆå…¨å±€é…ç½®ã€é­”æ³•å€¼ï¼‰ è§„åˆ™ï¼šå…¨å¤§å†™ + ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆSCREAMING_SNAKE_CASEï¼‰ ç¤ºä¾‹ï¼š const API_BASE_URL = \u0026#34;https://api.0907wallet.com\u0026#34;; const DEFAULT_CHAIN_ID = 1; const MAX_RETRY_COUNT = 5; const SUPPORTED_CHAINS = [1, 5, 11155111]; 1.1.4 æ™®é€šå˜é‡ã€å‡½æ•°ã€å±æ€§å‘½å è§„åˆ™ï¼šå°é©¼å³°ï¼ˆcamelCaseï¼‰ å¸ƒå°”å€¼å»ºè®®ï¼šä»¥ isã€hasã€shouldã€can å¼€å¤´ ç¤ºä¾‹ï¼š const walletAddress = \u0026#34;0x1234...abcd\u0026#34;; let isConnected = false; const hasBalance = balance \u0026gt; 0; function connectWallet() { ... } async function fetchUserInfo() { ... } 1.1.5 æ–‡ä»¶ä¸æ–‡ä»¶å¤¹å‘½å ç±»å‹ å‘½åè§„åˆ™ ç¤ºä¾‹ ç»„ä»¶ / é¡µé¢ PascalCase AccountCard.tsxã€settings/page.tsx å·¥å…·å‡½æ•° kebab-case æˆ– camelCase storage.tsã€format-address.ts hooks ä»¥ use å¼€å¤´ useWallet.tsã€useDebounce.ts æ ·å¼ ä¸ç»„ä»¶åŒå AccountCard.module.css å¸¸é‡/é…ç½® kebab-case chains.config.ts 1.2 ä»£ç æ³¨é‡Šè§„èŒƒ 1.2.1 æ–‡ä»¶å¤´æ³¨é‡Šï¼ˆæ¯ä¸ªæ–‡ä»¶å¿…é¡»ï¼‰ /** * @file æ–‡ä»¶ç®€è¦æè¿°ï¼ˆä¸€å¥è¯ï¼‰ * @description æ›´è¯¦ç»†è¯´æ˜ï¼ˆå¯é€‰ï¼‰ * @author å¼ ä¸‰ï¼ˆgithub: zhangsanï¼‰ * @date 2025-04-05 */ 1.2.2 å¯¼å‡ºå‡½æ•° / ç»„ä»¶ / Hook å¿…é¡»å†™ JSDoc /** * åˆå§‹åŒ– IndexedDB æ•°æ®åº“ï¼ˆæ”¯æŒè‡ªåŠ¨æŒ‰éœ€å»ºè¡¨ï¼‰ * * @returns IndexedDB å®ä¾‹ * @example const db = await initDB(); */ export async function initDB(): Promise\u0026lt;IDBPDatabase\u0026gt; { ... } /** * è´¦æˆ·å¡ç‰‡ç»„ä»¶ï¼ˆå¸¦æ‚¬åœå¤åˆ¶åŠ¨ç”»ï¼‰ * * @param address - é’±åŒ…åœ°å€ï¼ˆ0x...ï¼‰ * @param name - å¯é€‰è´¦æˆ·åˆ«å */ export default function AccountCard({ address, name }: { address: string; name?: string; }) { ... } 1.2.3 å¤æ‚é€»è¾‘å¿…é¡»è§£é‡Šã€Œä¸ºä»€ä¹ˆã€ // ä¸ºä»€ä¹ˆå…³é—­å†å‡çº§ï¼Ÿ // IndexedDB åªæœ‰åœ¨ versionchange äº‹åŠ¡ä¸­æ‰èƒ½åˆ›å»º objectStoreï¼Œ // å½“å‰è¿æ¥æ— æ³•åˆ›å»ºæ–°è¡¨ï¼Œå¿…é¡»å…³é—­åä»¥æ–°ç‰ˆæœ¬é‡æ–°æ‰“å¼€ db.close(); 1.2.4 TODO / FIXME ç»Ÿä¸€æ ¼å¼ // TODO: [é«˜] æ”¯æŒå¤šç­¾é’±åŒ…ï¼ˆ@æå››ï¼Œ2025-07-01ï¼‰ // FIXME: å¿«é€Ÿç§»å…¥ç§»å‡ºä¼šå¯¼è‡´å¤šä¸ª setTimeout æ®‹ç•™ 1.2.5 ç¦æ­¢çš„æ³¨é‡Šï¼ˆç›´æ¥æ‰“å›ï¼‰ // é”™è¯¯ç¤ºä¾‹ï¼ˆè§£é‡Šã€Œåšä»€ä¹ˆã€è€Œä¸æ˜¯ã€Œä¸ºä»€ä¹ˆã€ï¼‰ const a = 1; // å®šä¹‰å˜é‡ a setLoading(true); // è®¾ç½® loading ä¸º true // é”™è¯¯ï¼šè¿‡æ—¶æ³¨é‡Š const MAX_RETRY = 3; // æœ€å¤§é‡è¯•æ¬¡æ•° 5 æ¬¡ï¼ˆå®é™…æ˜¯ 3ï¼‰ 1.3 å…¶ä»–å¼ºåˆ¶è§„èŒƒï¼ˆå¿«é€Ÿè®°å¿†ç‰ˆï¼‰ é¡¹ç›® è¦æ±‚ ç±»å‹ä¼˜å…ˆ èƒ½ç”¨ TypeScript è§£å†³çš„ç»ä¸å†™æ³¨é‡Š props ç±»å‹ å¿…é¡»æ˜¾å¼å£°æ˜ interface/typeï¼Œç¦æ­¢ any è‡ªå®šä¹‰ Hook å¿…é¡»ä»¥ use å¼€å¤´ï¼Œæ–‡ä»¶åä¹Ÿå¿…é¡»æ˜¯ useXxx.ts async å‡½æ•° å¿…é¡» try-catch æˆ–è¿”å›é”™è¯¯çŠ¶æ€ console.log ä¸Šçº¿å‰å¿…é¡»åˆ é™¤æˆ–æ”¹ä¸º logger é­”æ³•å€¼ å…¨éƒ¨æå–ä¸ºå¸¸é‡ï¼ˆå‚è€ƒ 1.1.3ï¼‰ 2. ç³»ç»ŸåŠŸèƒ½èŒƒå›´ï¼ˆScopeï¼‰ 2.1 åŸºç¡€åŠŸèƒ½ ç”¨æˆ·å¯†ç åˆ›å»ºä¸éªŒè¯\nåŠ©è®°è¯ç”Ÿæˆä¸å±•ç¤º\nç§é’¥ç”Ÿæˆä¸å¯¼å…¥\nå¤šè´¦æˆ·ç®¡ç†\né“¾ä¸Šèµ„äº§ï¼ˆETHï¼‰ä½™é¢æŸ¥è¯¢\näº¤æ˜“å‘é€ï¼ˆè½¬è´¦ï¼‰\nåŸºæœ¬æ¶ˆæ¯ç­¾ååŠŸèƒ½\n2.2 æ‰©å±•åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰ å¤šè¯­è¨€æ”¯æŒï¼ˆä¸­/è‹±æ–‡ï¼‰\né’±åŒ…é”å®š / è§£é”\né’±åŒ…æ•°æ®å¯¼å‡ºï¼ˆåŠ©è®°è¯ / ç§é’¥ï¼‰\nå‹å¥½çš„é”™è¯¯åé¦ˆä¸åŸºç¡€æ ¡éªŒ\n3. ç³»ç»Ÿæ•´ä½“ç»“æ„ï¼ˆSystem Overviewï¼‰ ç³»ç»Ÿæ•´ä½“ç”±ä»¥ä¸‹å››ä¸ªä¸»è¦æ¨¡å—ç»„æˆï¼Œå„æ¨¡å—èŒè´£æ¸…æ™°ã€è¾¹ç•Œæ˜ç¡®ï¼Œé€šè¿‡æ ‡å‡†åŒ–æ¥å£è¿›è¡Œåä½œï¼š\n3.0 ç³»ç»Ÿå…¬ç”¨æ¨¡å— ğŸ‘‰ è¯¦ç»†è®¾è®¡è¯·è§ï¼š0907 Wallet ç³»ç»Ÿå…¬ç”¨å±‚è®¾è®¡\n3.1 ç”¨æˆ·ç®¡ç†æ¨¡å— ğŸ‘‰ è¯¦ç»†è®¾è®¡è¯·è§ï¼š0907 Wallet ç”¨æˆ·ç®¡ç†æ¨¡å—è®¾è®¡\n3.2 é’±åŒ…ç®¡ç†æ¨¡å— ğŸ‘‰ è¯¦ç»†è®¾è®¡è¯·è§ï¼š0907 Wallet é’±åŒ…ç®¡ç†æ¨¡å—è®¾è®¡\n3.3 ç½‘ç»œç®¡ç†æ¨¡å— 3.4 åŒºå—é“¾äº¤äº’æ¨¡å— 4. å®‰å…¨ç­–ç•¥æ¦‚è¿° 4.1 æ•°æ®å¤„ç†åŸåˆ™ æ‰€æœ‰æ•æ„Ÿæ•°æ®ä»…å­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°\nç³»ç»Ÿä¸ä¼šä¸Šä¼ ã€å¤‡ä»½æˆ–æ‰˜ç®¡ä»»ä½•ç§é’¥ä¿¡æ¯\n4.2 å¯†ç ç­–ç•¥ ç”¨æˆ·å¯†ç ä»…åœ¨æœ¬åœ°ç”Ÿæ•ˆ\nå¯†ç ç”¨äºæ§åˆ¶é’±åŒ…è§£é”ä¸ç§é’¥è®¿é—®æƒé™\n4.3 äº¤äº’å®‰å…¨æ€§ å¼•å¯¼ç”¨æˆ·åŠæ—¶å¤‡ä»½åŠ©è®°è¯\nè½¬è´¦ç­‰æ•æ„Ÿæ“ä½œéœ€è¿›è¡Œç¡®è®¤æç¤º\n5. å‰ç«¯ç•Œé¢ä¸ä½¿ç”¨æµç¨‹æ¦‚è¿° 5.1 é¡µé¢ç»“æ„ æ¬¢è¿ / åˆå§‹é¡µé¢\nå¯†ç è®¾ç½®é¡µé¢\nåˆ›å»ºé’±åŒ… / å¯¼å…¥é’±åŒ…é¡µé¢\né’±åŒ…ä¸»é¡µï¼ˆè´¦æˆ·ä¸èµ„äº§ï¼‰\nè½¬è´¦é¡µé¢\nè®¾ç½®é¡µé¢\n5.2 UI ä½¿ç”¨æµç¨‹ é¦–æ¬¡ä½¿ç”¨ï¼šåˆå§‹é¡µé¢ â†’ è®¾ç½®å¯†ç  â†’ åˆ›å»º/å¯¼å…¥é’±åŒ… â†’ è¿›å…¥ä¸»é¡µ\nå·²æœ‰é’±åŒ…ç”¨æˆ·ï¼šè¾“å…¥å¯†ç  â†’ è§£é”é’±åŒ… â†’ è¿›å…¥ä¸»é¡µ\n6. ç³»ç»Ÿè¾¹ç•Œï¼ˆSystem Boundariesï¼‰ 6.1 ç³»ç»Ÿå†…çš„å†…å®¹ æ‰€æœ‰å‰ç«¯é’±åŒ…ä¸šåŠ¡é€»è¾‘\næœ¬åœ°ç§é’¥ç”Ÿæˆä¸ç®¡ç†\nä¸åŒºå—é“¾èŠ‚ç‚¹çš„ç›´æ¥äº¤äº’\n6.2 ç³»ç»Ÿå¤–çš„å†…å®¹ åç«¯æœåŠ¡ï¼ˆé“¾ä¸‹åç«¯ï¼‰\næ•°æ®åº“ï¼ˆé“¾ä¸‹å­˜å‚¨ï¼‰\nå¤–éƒ¨é’±åŒ…æ’ä»¶ï¼ˆMetaMask ç­‰ï¼‰\nå¤–éƒ¨ä»·æ ¼æœåŠ¡\nåŒºå—é“¾æµè§ˆå™¨\n7. éåŠŸèƒ½æ€§è¦æ±‚ï¼ˆNFRï¼‰æ¦‚è¿° 7.1 å®‰å…¨æ€§ ç§é’¥ä¸ä¼šé€šè¿‡ç½‘ç»œä¼ è¾“\nç”¨æˆ·å¯†ç éœ€å—åˆ°é€‚å½“ä¿æŠ¤\n7.2 å¯ç”¨æ€§ é¡µé¢ç»“æ„ç®€æ´æ¸…æ™°\næä¾›å¿…è¦çš„é”™è¯¯æç¤º\n7.3 å¯ç»´æŠ¤æ€§ æ ¸å¿ƒé’±åŒ…æ¨¡å—ä¸ UI åˆ†å±‚\næ¨¡å—åŠŸèƒ½è¾¹ç•Œæ˜ç¡®\n7.4 æ‰©å±•æ€§ æ”¯æŒæœªæ¥æ‰©å±•å¤šé“¾èƒ½åŠ›\næ”¯æŒæ–°å¢è´¦æˆ·æˆ–èµ„äº§ç±»å‹\n8. é™åˆ¶ä¸å·²çŸ¥é—®é¢˜ï¼ˆKnown Limitationsï¼‰ æµè§ˆå™¨ç¯å¢ƒå®‰å…¨æ€§ä¾èµ–ç”¨æˆ·è®¾å¤‡æœ¬èº«\nIndexedDB æ•°æ®å¯èƒ½å› æµè§ˆå™¨æ¸…ç†è€Œä¸¢å¤±\nç§é’¥æ³„éœ²åä¸å¯æ¢å¤\n9. åç»­è§„åˆ’ï¼ˆRoadmapï¼‰ 9.1 1.0 ç‰ˆæœ¬ï¼šå•é“¾é’±åŒ… + åŸºç¡€è½¬è´¦/ç­¾ååŠŸèƒ½ å®ç°ä»¥å¤ªåŠä¸»ç½‘åŸºç¡€åŠŸèƒ½ï¼ŒåŒ…æ‹¬è´¦æˆ·ç®¡ç†ã€ETH è½¬è´¦ã€æ¶ˆæ¯ç­¾åç­‰æ ¸å¿ƒèƒ½åŠ›ã€‚\n9.2 2.0 ç‰ˆæœ¬ï¼šå¤šé“¾æ”¯æŒã€NFT åŸºç¡€å±•ç¤º æ‰©å±•è‡³å¤šé“¾æ¶æ„ï¼Œæ”¯æŒ BSCã€Polygon ç­‰ EVM å…¼å®¹é“¾ï¼Œå¹¶å¢åŠ  NFT èµ„äº§å±•ç¤ºåŠŸèƒ½ã€‚\n9.3 3.0 ç‰ˆæœ¬ï¼šDApp è¿æ¥ï¼ˆInject Providerï¼‰ å®ç° EIP-1193 æ ‡å‡† Provider æ³¨å…¥ï¼Œæ”¯æŒè¿æ¥å¤–éƒ¨ DAppï¼Œæä¾› MetaMask å…¼å®¹çš„äº¤äº’ä½“éªŒã€‚\n9.4 3.5 ç‰ˆæœ¬ï¼šç§»åŠ¨ç«¯é€‚é… ä¼˜åŒ–ç§»åŠ¨ç«¯å“åº”å¼å¸ƒå±€ï¼Œå¢åŠ  PWA æ”¯æŒï¼Œæå‡ç§»åŠ¨ç«¯ç”¨æˆ·ä½“éªŒã€‚\n9.5 4.0 ç‰ˆæœ¬ï¼šæ”¯æŒç¡¬ä»¶é’±åŒ… é›†æˆ Ledgerã€Trezor ç­‰ç¡¬ä»¶é’±åŒ…ï¼Œæä¾›ç¡¬ä»¶çº§ç§é’¥ä¿æŠ¤èƒ½åŠ›ã€‚\n","permalink":"http://localhost:1313/projects/0907wallet/","summary":"\u003ch1 id=\"é¡¹ç›®ç®€ä»‹\"\u003eé¡¹ç›®ç®€ä»‹\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eé¡¹ç›®åç§°\u003c/strong\u003eï¼š0907 Wallet\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eç³»ç»Ÿç±»å‹\u003c/strong\u003eï¼šåŸºäºæµè§ˆå™¨çš„ Web3 å»ä¸­å¿ƒåŒ–é’±åŒ…\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eç³»ç»Ÿå®šä½\u003c/strong\u003eï¼šè½»é‡åŒ–ã€æœ¬åœ°åŒ–ã€è‡ªæ‰˜ç®¡çš„é’±åŒ…ç³»ç»Ÿ\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eç³»ç»Ÿä»£ç æ¡†æ¶\u003c/strong\u003e: React + Next.js\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eæ ¸å¿ƒç›®æ ‡\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eæä¾›å®‰å…¨å¯é çš„é’±åŒ…è´¦æˆ·ç”Ÿæˆä¸ç®¡ç†èƒ½åŠ›\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eæ”¯æŒåŸºæœ¬çš„è½¬è´¦ã€æ¶ˆæ¯ç­¾åä¸èµ„äº§æŸ¥çœ‹åŠŸèƒ½\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eå®ç°å®Œæ•´çš„æœ¬åœ°åŒ–å­˜å‚¨ï¼Œå…¨æµç¨‹ä¸ä¸Šä¼ ç§é’¥\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eéç›®æ ‡è¯´æ˜ï¼ˆå¯é€‰ï¼‰\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eä¸æ„å»ºé“¾ä¸‹åç«¯æœåŠ¡\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eä¸æä¾›ä¸­å¿ƒåŒ–è´¦æˆ·ä½“ç³»\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eä¸æ‰˜ç®¡ä»»ä½•ç”¨æˆ·èµ„äº§\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch1 id=\"1-ä»£ç è§„èŒƒ\"\u003e1. ä»£ç è§„èŒƒ\u003c/h1\u003e\n\u003ch2 id=\"11-ä»£ç å‘½åè§„èŒƒ\"\u003e1.1 ä»£ç å‘½åè§„èŒƒ\u003c/h2\u003e\n\u003ch3 id=\"111-ç»„ä»¶å‘½åreact-ç»„ä»¶é¡µé¢\"\u003e1.1.1 ç»„ä»¶å‘½åï¼ˆReact ç»„ä»¶ã€é¡µé¢ï¼‰\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè§„åˆ™\u003c/strong\u003eï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæ–‡ä»¶å‘½å\u003c/strong\u003eï¼šåŒå \u003ccode\u003e.tsx\u003c/code\u003e æ–‡ä»¶ä¹Ÿå¿…é¡» PascalCase\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç¤ºä¾‹\u003c/strong\u003eï¼š\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eAccountCard\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etsx\u003c/span\u003e        \u003cspan class=\"err\"\u003eâ†’\u003c/span\u003e \u003cspan class=\"err\"\u003eæ­£ç¡®\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eUserProfile\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etsx\u003c/span\u003e        \u003cspan class=\"err\"\u003eâ†’\u003c/span\u003e \u003cspan class=\"err\"\u003eæ­£ç¡®\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eaccount\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"nx\"\u003ecard\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etsx\u003c/span\u003e       \u003cspan class=\"err\"\u003eâ†’\u003c/span\u003e \u003cspan class=\"err\"\u003eé”™è¯¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"112-æ¥å£ç±»å‹æšä¸¾å‘½å\"\u003e1.1.2 æ¥å£ã€ç±»å‹ã€æšä¸¾å‘½å\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè§„åˆ™\u003c/strong\u003eï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå»ºè®®\u003c/strong\u003eï¼šæ¥å£å¯åŠ  \u003ccode\u003eI\u003c/code\u003e å‰ç¼€ï¼ˆå›¢é˜Ÿç»Ÿä¸€å³å¯ï¼‰ï¼Œç±»å‹å¯åŠ  \u003ccode\u003eT\u003c/code\u003e å‰ç¼€ï¼ˆå¯é€‰ï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç¤ºä¾‹\u003c/strong\u003eï¼š\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003einterface\u003c/span\u003e \u003cspan class=\"nx\"\u003eUserInfo\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003einterface\u003c/span\u003e \u003cspan class=\"nx\"\u003eIUserInfo\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e      \u003cspan class=\"c1\"\u003e// ä¹Ÿå¯\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kr\"\u003etype\u003c/span\u003e \u003cspan class=\"nx\"\u003eNetworkConfig\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003etype\u003c/span\u003e \u003cspan class=\"nx\"\u003eTResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eenum\u003c/span\u003e \u003cspan class=\"nx\"\u003eChainId\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003eEthereum\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eSepolia\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e11155111\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"113-å¸¸é‡å‘½åå…¨å±€é…ç½®é­”æ³•å€¼\"\u003e1.1.3 å¸¸é‡å‘½åï¼ˆå…¨å±€é…ç½®ã€é­”æ³•å€¼ï¼‰\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè§„åˆ™\u003c/strong\u003eï¼šå…¨å¤§å†™ + ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆSCREAMING_SNAKE_CASEï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç¤ºä¾‹\u003c/strong\u003eï¼š\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eAPI_BASE_URL\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;https://api.0907wallet.com\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eDEFAULT_CHAIN_ID\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eMAX_RETRY_COUNT\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eSUPPORTED_CHAINS\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e11155111\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"114-æ™®é€šå˜é‡å‡½æ•°å±æ€§å‘½å\"\u003e1.1.4 æ™®é€šå˜é‡ã€å‡½æ•°ã€å±æ€§å‘½å\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè§„åˆ™\u003c/strong\u003eï¼šå°é©¼å³°ï¼ˆcamelCaseï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå¸ƒå°”å€¼å»ºè®®\u003c/strong\u003eï¼šä»¥ \u003ccode\u003eis\u003c/code\u003eã€\u003ccode\u003ehas\u003c/code\u003eã€\u003ccode\u003eshould\u003c/code\u003eã€\u003ccode\u003ecan\u003c/code\u003e å¼€å¤´\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç¤ºä¾‹\u003c/strong\u003eï¼š\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ewalletAddress\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;0x1234...abcd\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eisConnected\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kc\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ehasBalance\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ebalance\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003econnectWallet() {\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003easync\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003efetchUserInfo() {\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"115-æ–‡ä»¶ä¸æ–‡ä»¶å¤¹å‘½å\"\u003e1.1.5 æ–‡ä»¶ä¸æ–‡ä»¶å¤¹å‘½å\u003c/h3\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eç±»å‹\u003c/th\u003e\n          \u003cth\u003eå‘½åè§„åˆ™\u003c/th\u003e\n          \u003cth\u003eç¤ºä¾‹\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eç»„ä»¶ / é¡µé¢\u003c/td\u003e\n          \u003ctd\u003ePascalCase\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003eAccountCard.tsx\u003c/code\u003eã€\u003ccode\u003esettings/page.tsx\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eå·¥å…·å‡½æ•°\u003c/td\u003e\n          \u003ctd\u003ekebab-case æˆ– camelCase\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003estorage.ts\u003c/code\u003eã€\u003ccode\u003eformat-address.ts\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ehooks\u003c/td\u003e\n          \u003ctd\u003eä»¥ \u003ccode\u003euse\u003c/code\u003e å¼€å¤´\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003euseWallet.ts\u003c/code\u003eã€\u003ccode\u003euseDebounce.ts\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eæ ·å¼\u003c/td\u003e\n          \u003ctd\u003eä¸ç»„ä»¶åŒå\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003eAccountCard.module.css\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eå¸¸é‡/é…ç½®\u003c/td\u003e\n          \u003ctd\u003ekebab-case\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003echains.config.ts\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"12-ä»£ç æ³¨é‡Šè§„èŒƒ\"\u003e1.2 ä»£ç æ³¨é‡Šè§„èŒƒ\u003c/h2\u003e\n\u003ch3 id=\"121-æ–‡ä»¶å¤´æ³¨é‡Šæ¯ä¸ªæ–‡ä»¶å¿…é¡»\"\u003e1.2.1 æ–‡ä»¶å¤´æ³¨é‡Šï¼ˆæ¯ä¸ªæ–‡ä»¶å¿…é¡»ï¼‰\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @file æ–‡ä»¶ç®€è¦æè¿°ï¼ˆä¸€å¥è¯ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @description æ›´è¯¦ç»†è¯´æ˜ï¼ˆå¯é€‰ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @author å¼ ä¸‰ï¼ˆgithub: zhangsanï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @date 2025-04-05\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"122-å¯¼å‡ºå‡½æ•°--ç»„ä»¶--hook-å¿…é¡»å†™-jsdoc\"\u003e1.2.2 å¯¼å‡ºå‡½æ•° / ç»„ä»¶ / Hook å¿…é¡»å†™ JSDoc\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * åˆå§‹åŒ– IndexedDB æ•°æ®åº“ï¼ˆæ”¯æŒè‡ªåŠ¨æŒ‰éœ€å»ºè¡¨ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @returns IndexedDB å®ä¾‹\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @example const db = await initDB();\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kr\"\u003easync\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003einitDB\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003ePromise\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eIDBPDatabase\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * è´¦æˆ·å¡ç‰‡ç»„ä»¶ï¼ˆå¸¦æ‚¬åœå¤åˆ¶åŠ¨ç”»ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param address - é’±åŒ…åœ°å€ï¼ˆ0x...ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param name    - å¯é€‰è´¦æˆ·åˆ«å\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eAccountCard\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003eaddress\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003ename\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003eaddress\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003ename?\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e})\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"123-å¤æ‚é€»è¾‘å¿…é¡»è§£é‡Šä¸ºä»€ä¹ˆ\"\u003e1.2.3 å¤æ‚é€»è¾‘å¿…é¡»è§£é‡Šã€Œä¸ºä»€ä¹ˆã€\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// ä¸ºä»€ä¹ˆå…³é—­å†å‡çº§ï¼Ÿ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// IndexedDB åªæœ‰åœ¨ versionchange äº‹åŠ¡ä¸­æ‰èƒ½åˆ›å»º objectStoreï¼Œ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// å½“å‰è¿æ¥æ— æ³•åˆ›å»ºæ–°è¡¨ï¼Œå¿…é¡»å…³é—­åä»¥æ–°ç‰ˆæœ¬é‡æ–°æ‰“å¼€\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eclose\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"124-todo--fixme-ç»Ÿä¸€æ ¼å¼\"\u003e1.2.4 TODO / FIXME ç»Ÿä¸€æ ¼å¼\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// TODO: [é«˜] æ”¯æŒå¤šç­¾é’±åŒ…ï¼ˆ@æå››ï¼Œ2025-07-01ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// FIXME: å¿«é€Ÿç§»å…¥ç§»å‡ºä¼šå¯¼è‡´å¤šä¸ª setTimeout æ®‹ç•™\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"125-ç¦æ­¢çš„æ³¨é‡Šç›´æ¥æ‰“å›\"\u003e1.2.5 ç¦æ­¢çš„æ³¨é‡Šï¼ˆç›´æ¥æ‰“å›ï¼‰\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// é”™è¯¯ç¤ºä¾‹ï¼ˆè§£é‡Šã€Œåšä»€ä¹ˆã€è€Œä¸æ˜¯ã€Œä¸ºä»€ä¹ˆã€ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ea\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e           \u003cspan class=\"c1\"\u003e// å®šä¹‰å˜é‡ a\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"nx\"\u003esetLoading\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e      \u003cspan class=\"c1\"\u003e// è®¾ç½® loading ä¸º true\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// é”™è¯¯ï¼šè¿‡æ—¶æ³¨é‡Š\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eMAX_RETRY\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e   \u003cspan class=\"c1\"\u003e// æœ€å¤§é‡è¯•æ¬¡æ•° 5 æ¬¡ï¼ˆå®é™…æ˜¯ 3ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"13-å…¶ä»–å¼ºåˆ¶è§„èŒƒå¿«é€Ÿè®°å¿†ç‰ˆ\"\u003e1.3 å…¶ä»–å¼ºåˆ¶è§„èŒƒï¼ˆå¿«é€Ÿè®°å¿†ç‰ˆï¼‰\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eé¡¹ç›®\u003c/th\u003e\n          \u003cth\u003eè¦æ±‚\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eç±»å‹ä¼˜å…ˆ\u003c/td\u003e\n          \u003ctd\u003eèƒ½ç”¨ TypeScript è§£å†³çš„ç»ä¸å†™æ³¨é‡Š\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eprops ç±»å‹\u003c/td\u003e\n          \u003ctd\u003eå¿…é¡»æ˜¾å¼å£°æ˜ interface/typeï¼Œç¦æ­¢ any\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè‡ªå®šä¹‰ Hook\u003c/td\u003e\n          \u003ctd\u003eå¿…é¡»ä»¥ \u003ccode\u003euse\u003c/code\u003e å¼€å¤´ï¼Œæ–‡ä»¶åä¹Ÿå¿…é¡»æ˜¯ \u003ccode\u003euseXxx.ts\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003easync å‡½æ•°\u003c/td\u003e\n          \u003ctd\u003eå¿…é¡» try-catch æˆ–è¿”å›é”™è¯¯çŠ¶æ€\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003econsole.log\u003c/td\u003e\n          \u003ctd\u003eä¸Šçº¿å‰å¿…é¡»åˆ é™¤æˆ–æ”¹ä¸º logger\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eé­”æ³•å€¼\u003c/td\u003e\n          \u003ctd\u003eå…¨éƒ¨æå–ä¸ºå¸¸é‡ï¼ˆå‚è€ƒ 1.1.3ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"2-ç³»ç»ŸåŠŸèƒ½èŒƒå›´scope\"\u003e2. ç³»ç»ŸåŠŸèƒ½èŒƒå›´ï¼ˆScopeï¼‰\u003c/h2\u003e\n\u003ch3 id=\"21-åŸºç¡€åŠŸèƒ½\"\u003e2.1 åŸºç¡€åŠŸèƒ½\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eç”¨æˆ·å¯†ç åˆ›å»ºä¸éªŒè¯\u003c/p\u003e","title":"0907 Wallet"},{"content":"IDE Integrated Development Environmentï¼ˆé›†æˆå¼€å‘ç¯å¢ƒï¼‰\nå¸¸ç”¨çš„å¼€å‘ä¸è°ƒè¯•å·¥å…·\nVS Codeï¼šè½»é‡çº§é€šç”¨ç¼–è¾‘å™¨ IntelliJ IDEAï¼šJava é¡¹ç›®å¼€å‘ PyCharmï¼šPython é¡¹ç›®å¼€å‘ ç‰ˆæœ¬æ§åˆ¶ ç”¨äºä»£ç åä½œã€å†å²ç®¡ç†ä¸è‡ªåŠ¨åŒ–æµç¨‹\nGit / GitHubï¼šåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ä¸åä½œ GitHub Actionsï¼šè‡ªåŠ¨åŒ– CI/CD å·¥ä½œæµ GitKrakenï¼šå¯è§†åŒ– Git æ“ä½œå®¢æˆ·ç«¯ å®¹å™¨éƒ¨ç½² Dockerï¼šåº”ç”¨å®¹å™¨åŒ–ä¸ç¯å¢ƒä¸€è‡´æ€§ Docker Composeï¼šå¤šå®¹å™¨å¼€å‘ç¯å¢ƒ Kubernetesï¼ˆå¯é€‰ï¼‰ï¼šåº”ç”¨ç¼–æ’ä¸å¤§è§„æ¨¡éƒ¨ç½² å‰ç«¯å¼€å‘ Node.js / npm / pnpmï¼šå‰ç«¯æ„å»ºç¯å¢ƒ Vue / Reactï¼šå¸¸ç”¨å‰ç«¯æ¡†æ¶ Viteï¼šå¿«é€Ÿæ„å»ºå·¥å…· TailwindCSSï¼šå®ç”¨åŒ– CSS æ¡†æ¶ åç«¯å¼€å‘ Spring Bootï¼šç°ä»£åŒ– Java åç«¯å¼€å‘æ¡†æ¶ MyBatis / JPAï¼šæ•°æ®åº“ ORM Redisï¼šç¼“å­˜ä¸­é—´ä»¶ OpenAPI / Swaggerï¼šæ¥å£æ–‡æ¡£ç”Ÿæˆ è¿ç»´å¼€å‘ æ—¥å¿—ç®¡ç† Lokiï¼šåˆ†å¸ƒå¼æ—¥å¿—ç³»ç»Ÿ Vectorï¼šæ—¥å¿—é‡‡é›†ä¸å¤„ç† ğŸ‘‰ ç›¸å…³ç¬”è®°ï¼šVector æ—¥å¿—é‡‡é›†ä¸å¤„ç† LogstashEncoderï¼šç»“æ„åŒ– JSON æ—¥å¿— ç³»ç»Ÿç›‘æ§ Prometheusï¼šæ—¶åºç›‘æ§ä¸æŠ¥è­¦ Grafanaï¼šå¯è§†åŒ–ç›‘æ§é¢æ¿ åº”ç”¨æµ‹è¯• Postmanï¼šæ¥å£æµ‹è¯• JMeterï¼šå‹æµ‹å·¥å…· æ•°æ®å­˜å‚¨ ClickHouse: é«˜æ€§èƒ½åˆ—å¼æ•°æ®åº“ ğŸ‘‰ ç›¸å…³ç¬”è®°ï¼šClickHouse é«˜æ€§èƒ½æ•°æ®åº“ å­¦ä¹ ä¸æ•ˆç‡å·¥å…· å¸®åŠ©çŸ¥è¯†ç®¡ç†ã€é¡¹ç›®æ•´ç†ä¸å†™ä½œ\nNotionï¼šçŸ¥è¯†åº“ä¸ä»»åŠ¡ç®¡ç† Obsidianï¼šMarkdown åŒé“¾ç¬”è®° Hugo + PaperModï¼šä¸ªäººåšå®¢ç”Ÿæˆå™¨ å›¾åƒå¤„ç† Photopeaï¼šåœ¨çº¿ PS GIMPï¼šå¼€æºå›¾åƒå¤„ç† Pixelmator / Affinityï¼ˆå¯é€‰ï¼‰ï¼šè½»é‡ PS æ›¿ä»£å“ ","permalink":"http://localhost:1313/toolkits/intro/","summary":"\u003ch2 id=\"ide\"\u003eIDE\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIntegrated Development Environmentï¼ˆé›†æˆå¼€å‘ç¯å¢ƒï¼‰\u003cbr\u003e\nå¸¸ç”¨çš„å¼€å‘ä¸è°ƒè¯•å·¥å…·\u003c/p\u003e\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eVS Code\u003c/strong\u003eï¼šè½»é‡çº§é€šç”¨ç¼–è¾‘å™¨\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eIntelliJ IDEA\u003c/strong\u003eï¼šJava é¡¹ç›®å¼€å‘\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePyCharm\u003c/strong\u003eï¼šPython é¡¹ç›®å¼€å‘\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"ç‰ˆæœ¬æ§åˆ¶\"\u003eç‰ˆæœ¬æ§åˆ¶\u003c/h2\u003e\n\u003cp\u003eç”¨äºä»£ç åä½œã€å†å²ç®¡ç†ä¸è‡ªåŠ¨åŒ–æµç¨‹\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eGit / GitHub\u003c/strong\u003eï¼šåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ä¸åä½œ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGitHub Actions\u003c/strong\u003eï¼šè‡ªåŠ¨åŒ– CI/CD å·¥ä½œæµ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGitKraken\u003c/strong\u003eï¼šå¯è§†åŒ– Git æ“ä½œå®¢æˆ·ç«¯\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å®¹å™¨éƒ¨ç½²\"\u003eå®¹å™¨éƒ¨ç½²\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eDocker\u003c/strong\u003eï¼šåº”ç”¨å®¹å™¨åŒ–ä¸ç¯å¢ƒä¸€è‡´æ€§\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDocker Compose\u003c/strong\u003eï¼šå¤šå®¹å™¨å¼€å‘ç¯å¢ƒ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eKubernetesï¼ˆå¯é€‰ï¼‰\u003c/strong\u003eï¼šåº”ç”¨ç¼–æ’ä¸å¤§è§„æ¨¡éƒ¨ç½²\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å‰ç«¯å¼€å‘\"\u003eå‰ç«¯å¼€å‘\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eNode.js / npm / pnpm\u003c/strong\u003eï¼šå‰ç«¯æ„å»ºç¯å¢ƒ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVue / React\u003c/strong\u003eï¼šå¸¸ç”¨å‰ç«¯æ¡†æ¶\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVite\u003c/strong\u003eï¼šå¿«é€Ÿæ„å»ºå·¥å…·\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTailwindCSS\u003c/strong\u003eï¼šå®ç”¨åŒ– CSS æ¡†æ¶\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"åç«¯å¼€å‘\"\u003eåç«¯å¼€å‘\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eSpring Boot\u003c/strong\u003eï¼šç°ä»£åŒ– Java åç«¯å¼€å‘æ¡†æ¶\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMyBatis / JPA\u003c/strong\u003eï¼šæ•°æ®åº“ ORM\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eRedis\u003c/strong\u003eï¼šç¼“å­˜ä¸­é—´ä»¶\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eOpenAPI / Swagger\u003c/strong\u003eï¼šæ¥å£æ–‡æ¡£ç”Ÿæˆ\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"è¿ç»´å¼€å‘\"\u003eè¿ç»´å¼€å‘\u003c/h2\u003e\n\u003ch3 id=\"æ—¥å¿—ç®¡ç†\"\u003eæ—¥å¿—ç®¡ç†\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eLoki\u003c/strong\u003eï¼šåˆ†å¸ƒå¼æ—¥å¿—ç³»ç»Ÿ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVector\u003c/strong\u003eï¼šæ—¥å¿—é‡‡é›†ä¸å¤„ç†  ğŸ‘‰ \u003ca href=\"/toolkits/vector\"\u003eç›¸å…³ç¬”è®°ï¼šVector æ—¥å¿—é‡‡é›†ä¸å¤„ç†\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLogstashEncoder\u003c/strong\u003eï¼šç»“æ„åŒ– JSON æ—¥å¿—\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ç³»ç»Ÿç›‘æ§\"\u003eç³»ç»Ÿç›‘æ§\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePrometheus\u003c/strong\u003eï¼šæ—¶åºç›‘æ§ä¸æŠ¥è­¦\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGrafana\u003c/strong\u003eï¼šå¯è§†åŒ–ç›‘æ§é¢æ¿\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"åº”ç”¨æµ‹è¯•\"\u003eåº”ç”¨æµ‹è¯•\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePostman\u003c/strong\u003eï¼šæ¥å£æµ‹è¯•\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eJMeter\u003c/strong\u003eï¼šå‹æµ‹å·¥å…·\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"æ•°æ®å­˜å‚¨\"\u003eæ•°æ®å­˜å‚¨\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eClickHouse\u003c/strong\u003e: é«˜æ€§èƒ½åˆ—å¼æ•°æ®åº“\nğŸ‘‰ \u003ca href=\"/toolkits/clickhouse\"\u003eç›¸å…³ç¬”è®°ï¼šClickHouse é«˜æ€§èƒ½æ•°æ®åº“\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å­¦ä¹ ä¸æ•ˆç‡å·¥å…·\"\u003eå­¦ä¹ ä¸æ•ˆç‡å·¥å…·\u003c/h2\u003e\n\u003cp\u003eå¸®åŠ©çŸ¥è¯†ç®¡ç†ã€é¡¹ç›®æ•´ç†ä¸å†™ä½œ\u003c/p\u003e","title":"Toolkits ç®€ä»‹"},{"content":"EIP ç´¢å¼•æ€»è§ˆ è¿™é‡Œæ”¶å½•æ‰€æœ‰å€¼å¾—å•ç‹¬æˆæ–‡çš„é‡Œç¨‹ç¢‘çº§EIP\næ¯ç¯‡æ·±åº¦æ‹†è§£ä¸€ä»½EIPçš„è¯ç”ŸèƒŒæ™¯æŠ€æœ¯ç»†èŠ‚å®‰å…¨å½±å“è½åœ°å†ç¨‹ç¤¾åŒºäº‰è®®åŠåç»­æ¼”è¿›\nç‚¹å‡»æ ‡é¢˜ç›´è¾¾å¯¹åº”ä¸“æ–‡\nç®€ä»‹ EIPï¼ˆEthereum Improvement Proposalï¼‰æ˜¯ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆ\nä»»ä½•äººéƒ½èƒ½æäº¤çš„æ ‡å‡†åŒ–æ–‡æ¡£\né©±åŠ¨ä»¥å¤ªåŠä»åˆ›ä¸–åŒºå—åˆ°ä»Šå¤©çš„å”¯ä¸€æ­£å¼æœºåˆ¶\nERCåªæ˜¯EIPçš„åº”ç”¨å±‚å­é›†\næ‰€æœ‰ç¡¬åˆ†å‰å‡çº§Layer2å˜é©è´¦æˆ·æŠ½è±¡éƒ½æºäºEIP\nè´¦æˆ·æŠ½è±¡æ—¶ä»£ EIP-4337 æ— ç§é’¥è´¦æˆ·æŠ½è±¡ï¼š2023å¹´çœŸæ­£è½åœ°ç‰ˆæœ¬ï¼ˆå·²å®Œç¨¿ï¼‰ EIP-3074 AUTHä¸AUTHCALLï¼šè¢«åºŸå¼ƒçš„è´¦æˆ·æŠ½è±¡å…ˆé©±ï¼ˆå¾…æ’°å†™ï¼‰ EIP-5003 ä»£ç æ³¨å…¥å¼è´¦æˆ·æŠ½è±¡ï¼ˆå¾…æ’°å†™ï¼‰ EIP-7702 æ–°è´¦æˆ·æŠ½è±¡ç»ˆææ–¹æ¡ˆï¼ˆ2025è¿›è¡Œä¸­ï¼‰ï¼ˆå¾…æ’°å†™ï¼‰ è´¹ç”¨å¸‚åœºä¸é€šç¼© EIP-1559 åŸºç¡€è´¹ç‡ƒçƒ§ï¼šè®©ETHæˆä¸ºè¶…å£°æ³¢è´§å¸ï¼ˆå¾…æ’°å†™ï¼‰ EIP-4844 Proto-Dankshardingï¼šRollupè´¹ç”¨æš´è·Œ90%ï¼ˆå¾…æ’°å†™ï¼‰ EIP-7514 å‡ç¼“è´¨æŠ¼å¢é•¿ï¼šä¿æŠ¤å»ä¸­å¿ƒåŒ–ï¼ˆå¾…æ’°å†™ï¼‰ è´¨æŠ¼ä¸ææ¬¾ EIP-4895 è´¨æŠ¼ææ¬¾ï¼šä¸Šæµ·å‡çº§æ ¸å¿ƒï¼ˆå¾…æ’°å†™ï¼‰ EIP-7002 éƒ¨åˆ†ææ¬¾ä¸ä¸»åŠ¨é€€å‡ºï¼ˆå¾…æ’°å†™ï¼‰ EIP-6110 é“¾ä¸Šè´¨æŠ¼å­˜æ¬¾ï¼ˆå¾…æ’°å†™ï¼‰ EVMä¸æ‰§è¡Œå±‚æœªæ¥ EIP-7691 EOFï¼šEVMå®¹å™¨åŒ–é©å‘½ï¼ˆ2026ç›®æ ‡ï¼‰ï¼ˆå¾…æ’°å†™ï¼‰ EIP-7623 æé«˜CALLDATAæˆæœ¬ä¸ºDankshardingé“ºè·¯ï¼ˆå¾…æ’°å†™ï¼‰ EIP-4444 å†å²æ•°æ®è¿‡æœŸæœºåˆ¶ï¼ˆå¾…æ’°å†™ï¼‰ EIP-5656 MCOPYæŒ‡ä»¤ï¼šé™ä½å†…å­˜æ‹·è´æˆæœ¬ï¼ˆå¾…æ’°å†™ï¼‰ æ•°æ®å¯ç”¨æ€§ä¸Layer2 EIP-4844 Blobäº¤æ˜“ä¸Dankshardingè·¯çº¿å›¾ï¼ˆå¾…æ’°å†™ï¼‰ EIP-7594 PeerDASï¼šå¯¹ç­‰æ•°æ®å¯ç”¨æ€§é‡‡æ ·ï¼ˆå¾…æ’°å†™ï¼‰ EIP-6465/6466 Blobå†å²è¿‡æœŸæ–¹æ¡ˆï¼ˆå¾…æ’°å†™ï¼‰ å…¶ä»–æ­£åœ¨å…³æ³¨çš„EIP EIP-7732 EIP-7702+ERC-7730å®‰å…¨å¢å¼ºç‰ˆï¼ˆå¾…æ’°å†™ï¼‰ EIP-2537 BLSé¢„ç¼–è¯‘ï¼šåŠ é€Ÿé›¶çŸ¥è¯†è¯æ˜ï¼ˆå¾…æ’°å†™ï¼‰ EIP-5920 PAY opcodeï¼šåŸç”Ÿè½¬è´¦æ–°æ–¹å¼ï¼ˆå¾…æ’°å†™ï¼‰ EIP-6780 è‡ªæ¯ä»…é™åˆ›å»ºäº¤æ˜“ï¼šæå‡çŠ¶æ€ç®¡ç†ï¼ˆå¾…æ’°å†™ï¼‰ æ›´å¤šEIPä¸“æ–‡æŒç»­æ›´æ–°ä¸­\nç›®å‰ä»…EIP-4337å·²å®Œç¨¿ï¼Œå…¶ä½™é™†ç»­æ”¾å‡º\næ¯ä¸€ç¯‡éƒ½æ˜¯ä»¥å¤ªåŠè¿›åŒ–å²çš„çœŸå®æ³¨è„š\n","permalink":"http://localhost:1313/web3/eip/intro/","summary":"\u003ch1 id=\"eip-ç´¢å¼•æ€»è§ˆ\"\u003eEIP ç´¢å¼•æ€»è§ˆ\u003c/h1\u003e\n\u003cp\u003eè¿™é‡Œæ”¶å½•æ‰€æœ‰å€¼å¾—å•ç‹¬æˆæ–‡çš„é‡Œç¨‹ç¢‘çº§EIP\u003cbr\u003e\næ¯ç¯‡æ·±åº¦æ‹†è§£ä¸€ä»½EIPçš„è¯ç”ŸèƒŒæ™¯æŠ€æœ¯ç»†èŠ‚å®‰å…¨å½±å“è½åœ°å†ç¨‹ç¤¾åŒºäº‰è®®åŠåç»­æ¼”è¿›\u003cbr\u003e\nç‚¹å‡»æ ‡é¢˜ç›´è¾¾å¯¹åº”ä¸“æ–‡\u003c/p\u003e\n\u003ch2 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eEIPï¼ˆEthereum Improvement Proposalï¼‰æ˜¯ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆ\u003cbr\u003e\nä»»ä½•äººéƒ½èƒ½æäº¤çš„æ ‡å‡†åŒ–æ–‡æ¡£\u003cbr\u003e\né©±åŠ¨ä»¥å¤ªåŠä»åˆ›ä¸–åŒºå—åˆ°ä»Šå¤©çš„å”¯ä¸€æ­£å¼æœºåˆ¶\u003cbr\u003e\nERCåªæ˜¯EIPçš„åº”ç”¨å±‚å­é›†\u003cbr\u003e\næ‰€æœ‰ç¡¬åˆ†å‰å‡çº§Layer2å˜é©è´¦æˆ·æŠ½è±¡éƒ½æºäºEIP\u003c/p\u003e\n\u003ch2 id=\"è´¦æˆ·æŠ½è±¡æ—¶ä»£\"\u003eè´¦æˆ·æŠ½è±¡æ—¶ä»£\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/web3/eip/eip-4337\"\u003eEIP-4337 æ— ç§é’¥è´¦æˆ·æŠ½è±¡ï¼š2023å¹´çœŸæ­£è½åœ°ç‰ˆæœ¬ï¼ˆå·²å®Œç¨¿ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-3074\"\u003eEIP-3074 AUTHä¸AUTHCALLï¼šè¢«åºŸå¼ƒçš„è´¦æˆ·æŠ½è±¡å…ˆé©±ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-5003\"\u003eEIP-5003 ä»£ç æ³¨å…¥å¼è´¦æˆ·æŠ½è±¡ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7702\"\u003eEIP-7702 æ–°è´¦æˆ·æŠ½è±¡ç»ˆææ–¹æ¡ˆï¼ˆ2025è¿›è¡Œä¸­ï¼‰ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"è´¹ç”¨å¸‚åœºä¸é€šç¼©\"\u003eè´¹ç”¨å¸‚åœºä¸é€šç¼©\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-1559\"\u003eEIP-1559 åŸºç¡€è´¹ç‡ƒçƒ§ï¼šè®©ETHæˆä¸ºè¶…å£°æ³¢è´§å¸ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-4844\"\u003eEIP-4844 Proto-Dankshardingï¼šRollupè´¹ç”¨æš´è·Œ90%ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7514\"\u003eEIP-7514 å‡ç¼“è´¨æŠ¼å¢é•¿ï¼šä¿æŠ¤å»ä¸­å¿ƒåŒ–ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"è´¨æŠ¼ä¸ææ¬¾\"\u003eè´¨æŠ¼ä¸ææ¬¾\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-4895\"\u003eEIP-4895 è´¨æŠ¼ææ¬¾ï¼šä¸Šæµ·å‡çº§æ ¸å¿ƒï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7002\"\u003eEIP-7002 éƒ¨åˆ†ææ¬¾ä¸ä¸»åŠ¨é€€å‡ºï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-6110\"\u003eEIP-6110 é“¾ä¸Šè´¨æŠ¼å­˜æ¬¾ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"evmä¸æ‰§è¡Œå±‚æœªæ¥\"\u003eEVMä¸æ‰§è¡Œå±‚æœªæ¥\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7691\"\u003eEIP-7691 EOFï¼šEVMå®¹å™¨åŒ–é©å‘½ï¼ˆ2026ç›®æ ‡ï¼‰ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7623\"\u003eEIP-7623 æé«˜CALLDATAæˆæœ¬ä¸ºDankshardingé“ºè·¯ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-4444\"\u003eEIP-4444 å†å²æ•°æ®è¿‡æœŸæœºåˆ¶ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-5656\"\u003eEIP-5656 MCOPYæŒ‡ä»¤ï¼šé™ä½å†…å­˜æ‹·è´æˆæœ¬ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"æ•°æ®å¯ç”¨æ€§ä¸layer2\"\u003eæ•°æ®å¯ç”¨æ€§ä¸Layer2\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-4844\"\u003eEIP-4844 Blobäº¤æ˜“ä¸Dankshardingè·¯çº¿å›¾ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7594\"\u003eEIP-7594 PeerDASï¼šå¯¹ç­‰æ•°æ®å¯ç”¨æ€§é‡‡æ ·ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-6465\"\u003eEIP-6465/6466 Blobå†å²è¿‡æœŸæ–¹æ¡ˆï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å…¶ä»–æ­£åœ¨å…³æ³¨çš„eip\"\u003eå…¶ä»–æ­£åœ¨å…³æ³¨çš„EIP\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7732\"\u003eEIP-7732 EIP-7702+ERC-7730å®‰å…¨å¢å¼ºç‰ˆï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-2537\"\u003eEIP-2537 BLSé¢„ç¼–è¯‘ï¼šåŠ é€Ÿé›¶çŸ¥è¯†è¯æ˜ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-5920\"\u003eEIP-5920 PAY opcodeï¼šåŸç”Ÿè½¬è´¦æ–°æ–¹å¼ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-6780\"\u003eEIP-6780 è‡ªæ¯ä»…é™åˆ›å»ºäº¤æ˜“ï¼šæå‡çŠ¶æ€ç®¡ç†ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæ›´å¤šEIPä¸“æ–‡æŒç»­æ›´æ–°ä¸­\u003cbr\u003e\nç›®å‰ä»…EIP-4337å·²å®Œç¨¿ï¼Œå…¶ä½™é™†ç»­æ”¾å‡º\u003cbr\u003e\næ¯ä¸€ç¯‡éƒ½æ˜¯ä»¥å¤ªåŠè¿›åŒ–å²çš„çœŸå®æ³¨è„š\u003c/p\u003e","title":"EIP ç¬”è®°åˆé›†"},{"content":"æ‘˜è¦ å¼•å…¥ UserOperationï¼šä¸€ç§é«˜å±‚â€œä¼ªäº¤æ˜“å¯¹è±¡â€ï¼Œæ›¿ä»£ç›´æ¥åœ¨å…±è¯†å±‚æäº¤äº¤æ˜“\nç”¨æˆ·å°† UserOperation å‘é€åˆ°å•ç‹¬çš„ mempool\nBundler å°†å¤šä¸ª UserOperation æ‰“åŒ…ï¼Œé€šè¿‡ handleOps è°ƒç”¨ EntryPoint åˆçº¦ï¼Œå†æ‰“åŒ…è¿›åŒºå—\nç›®æ ‡æ˜¯åœ¨ä¸ä¿®æ”¹ä»¥å¤ªåŠåº•å±‚åè®®çš„æƒ…å†µä¸‹ï¼Œå®ç°è´¦æˆ·æŠ½è±¡\nåŠ¨æœº å®ç°è´¦æˆ·æŠ½è±¡\nå…è®¸ä½¿ç”¨æ™ºèƒ½åˆçº¦è´¦æˆ·ä½œä¸ºä¸»è´¦æˆ·ï¼Œæ”¯æŒä»»æ„éªŒè¯é€»è¾‘ã€‚ ç”¨æˆ·æ— éœ€æ‹¥æœ‰å¤–éƒ¨è´¦æˆ·ï¼ˆEOAï¼‰ã€‚ å»ä¸­å¿ƒåŒ–ä¸å¼€æ”¾å‚ä¸\nä»»ä½• bundler éƒ½å¯å‚ä¸äº¤æ˜“æ‰“åŒ…ã€‚ ä¾èµ–å…¬å…± mempoolï¼Œæ— éœ€ç”¨æˆ·ç›´æ¥çŸ¥æ™“ bundler åœ°å€ã€‚ ä¸å¢åŠ ä¿¡ä»»å‡è®¾ã€‚ æ— éœ€å…±è¯†å±‚ä¿®æ”¹\né¿å…åè®®å±‚æ”¹åŠ¨ï¼Œæé«˜å¿«é€Ÿéƒ¨ç½²çš„å¯èƒ½æ€§ã€‚ æ”¯æŒæ›´å¤šåº”ç”¨åœºæ™¯\néšç§ä¿æŠ¤å‹åº”ç”¨ åŸå­å¤šæ“ä½œ ä½¿ç”¨ ERC-20 ä»£å¸æ”¯ä»˜æ‰‹ç»­è´¹æˆ–å¼€å‘è€…ä»£ä»˜ çµæ´»çš„éªŒè¯é€»è¾‘ï¼ˆä¸åŒç­¾åæ–¹æ¡ˆã€å¤šç­¾ã€æ¢å¤æ–¹æ¡ˆï¼‰ çµæ´»çš„æ‰‹ç»­è´¹æ”¯ä»˜ï¼ˆç¬¬ä¸‰æ–¹æ”¯ä»˜ã€è·¨é“¾æ”¯ä»˜ï¼‰ æ‰¹é‡æ“ä½œä¸æ‰“åŒ…æ‰§è¡Œ æ€»ç»“ï¼šè¯¥ææ¡ˆé€šè¿‡ UserOperationã€Bundler å’Œ EntryPoint åˆçº¦å®ç°æ™ºèƒ½åˆçº¦è´¦æˆ·çš„å®Œå…¨æŠ½è±¡åŒ–ï¼Œæ”¯æŒå¤šç­¾ã€ä»£ä»˜å’Œæ‰¹é‡æ“ä½œï¼ŒåŒæ—¶æ— éœ€ä¿®æ”¹ä»¥å¤ªåŠå…±è¯†å±‚\nè§„èŒƒ æœ¯è¯­å®šä¹‰ æœ¯è¯­ å®šä¹‰ UserOperation ä¸€ç§æè¿°â€œä»£è¡¨ç”¨æˆ·å‘èµ·ä¸€ç¬”äº¤æ˜“â€çš„æ•°æ®ç»“æ„ã€‚ä¸ºé¿å…ä¸åŸç”Ÿäº¤æ˜“æ··æ·†ï¼Œç‰¹æ„ä¸å«â€œtransactionâ€ã€‚åƒäº¤æ˜“ä¸€æ ·ï¼Œå®ƒåŒ…å« toã€calldataã€maxFeePerGasã€maxPriorityFeePerGasã€nonceã€signatureã€‚ä¸åƒäº¤æ˜“ï¼Œå®ƒåŒ…å«ä»¥ä¸‹æ‰€è¿°çš„å‡ ä¸ªå…¶ä»–å­—æ®µã€‚ç‰¹åˆ«æ³¨æ„ï¼Œsignature å­—æ®µçš„ä½¿ç”¨ä¸ç”±åè®®å®šä¹‰ï¼Œè€Œæ˜¯ç”±æ™ºèƒ½åˆçº¦è´¦æˆ·å®ç°å®šä¹‰ Sender å‘èµ· UserOperation çš„æ™ºèƒ½åˆçº¦è´¦æˆ· EntryPoint ç”¨äºæ‰§è¡Œ UserOperation æ‰¹æ¬¡çš„å•ä¾‹åˆçº¦ã€‚Bundler åº”ç™½åå•æ”¯æŒçš„ EntryPoint Bundler ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆåŒºå—æ„å»ºè€…ï¼‰ï¼Œå®ƒèƒ½å¤„ç† UserOperationã€åˆ›å»ºæœ‰æ•ˆçš„ entryPoint.handleOps() äº¤æ˜“ï¼Œå¹¶åœ¨äº¤æ˜“ä»æœ‰æ•ˆæ—¶å°†å…¶æ·»åŠ åˆ°åŒºå—ä¸­ã€‚è¿™å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°ï¼šBundler å¯ä»¥è‡ªå·±å……å½“åŒºå—æ„å»ºè€…ã€‚å¦‚æœ bundler ä¸æ˜¯åŒºå—æ„å»ºè€…ï¼Œå®ƒåº”é€šè¿‡ mev-boost ç­‰åŸºç¡€è®¾æ–½æˆ–å…¶ä»–æè®®è€…-æ„å»ºè€…åˆ†ç¦»æœºåˆ¶ä¸åŒºå—æ„å»ºè€…åˆä½œ Paymaster åŒæ„ä»£æ›¿ sender æ”¯ä»˜äº¤æ˜“è´¹ç”¨çš„è¾…åŠ©åˆçº¦ Factory å¿…è¦æ—¶è´Ÿè´£éƒ¨ç½²æ–° sender åˆçº¦çš„è¾…åŠ©åˆçº¦ Aggregator ä¹Ÿç§°ä¸ºâ€œæˆæƒåˆçº¦â€ - ä¸€ä¸ªå…è®¸å¤šä¸ª UserOperation å…±äº«ä¸€æ¬¡éªŒè¯çš„åˆçº¦ã€‚æ­¤ç±»åˆçº¦çš„å®Œæ•´è®¾è®¡è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´ Canonical UserOperation mempool ä¸€ä¸ªå»ä¸­å¿ƒåŒ–ã€æ— è®¸å¯çš„ P2P ç½‘ç»œï¼Œbundler åœ¨å…¶ä¸­äº¤æ¢ç¬¦åˆåŒä¸€å¥—å…±äº«éªŒè¯è§„åˆ™çš„åˆæ³• UserOperationã€‚å…·ä½“è§„åˆ™çš„å®Œæ•´è§„èŒƒè¶…å‡ºæœ¬ææ¡ˆèŒƒå›´ Alternative UserOperation mempool ä»»ä½•å…¶ä»– P2P å†…å­˜æ± ï¼Œå…¶ä¸­ UserOperation çš„æœ‰æ•ˆæ€§ç”±ä¸åŒäºå…±äº«è§„åˆ™çš„è§„åˆ™å†³å®šï¼Œè¿™äº›è§„åˆ™ä»¥ä»»ä½•æ–¹å¼åº”ç”¨äºéªŒè¯ä»£ç  Deposit Sender æˆ– Paymaster åˆçº¦å‘ EntryPoint åˆçº¦è½¬å…¥çš„ä¸€ç¬”ä»¥å¤ªå¸ï¼ˆæˆ–ä»»ä½• L2 åŸç”Ÿè´§å¸ï¼‰ï¼Œç”¨äºæ”¯ä»˜æœªæ¥ UserOperation çš„ gas è´¹ç”¨ UserOperation ç»“æ„å®šä¹‰ å­—æ®µ ç±»å‹ æè¿° sender address å‘èµ· UserOperation çš„è´¦æˆ· nonce uint256 é˜²é‡æ”¾å‚æ•°ï¼ˆè¯¦è§â€œåŠæŠ½è±¡ Nonce æ”¯æŒâ€ï¼‰ factory address æ–°è´¦æˆ·çš„è´¦æˆ·å·¥å‚ OR 0x7702 æ ‡å¿—ç”¨äº EIP-7702 è´¦æˆ·ï¼Œå¦åˆ™ address(0) factoryData bytes å¦‚æœæä¾› factoryï¼Œåˆ™ä¸ºè´¦æˆ·å·¥å‚çš„æ•°æ® OR EIP-7702 åˆå§‹åŒ–æ•°æ®ï¼Œæˆ–ç©ºæ•°ç»„ callData bytes åœ¨ä¸»è¦æ‰§è¡Œè°ƒç”¨æœŸé—´ä¼ é€’ç»™ sender çš„æ•°æ® callGasLimit uint256 ä¸ºä¸»è¦æ‰§è¡Œè°ƒç”¨åˆ†é…çš„ gas é‡ verificationGasLimit uint256 ä¸ºéªŒè¯æ­¥éª¤åˆ†é…çš„ gas é‡ preVerificationGas uint256 é¢å¤– gas ç”¨äºæ”¯ä»˜ bundler maxFeePerGas uint256 æœ€å¤§ gas è´¹ï¼ˆç±»ä¼¼äº EIP-1559 max_fee_per_gasï¼‰ maxPriorityFeePerGas uint256 æœ€å¤§ä¼˜å…ˆè´¹ï¼ˆç±»ä¼¼äº EIP-1559 max_priority_fee_per_gasï¼‰ paymaster address paymaster åˆçº¦åœ°å€ï¼ˆæˆ–ç©ºï¼Œå¦‚æœ sender è‡ªå·±æ”¯ä»˜ gasï¼‰ paymasterVerificationGasLimit uint256 ä¸º paymaster éªŒè¯ä»£ç åˆ†é…çš„ gas é‡ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰ paymasterPostOpGasLimit uint256 ä¸º paymaster åæ“ä½œä»£ç åˆ†é…çš„ gas é‡ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰ paymasterData bytes paymaster çš„æ•°æ®ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰ signature bytes ä¼ å…¥ sender ä»¥éªŒè¯æˆæƒçš„æ•°æ® ä¸Šé“¾æ—¶éƒ¨åˆ†å­—æ®µä¼šè¢«æ‰“åŒ…ï¼Œè½¬å˜æˆ PackedUserOperation\nEntrypoint æ¥å£ PackedUserOperation ç»“æ„å®šä¹‰\nå­—æ®µ ç±»å‹ æè¿° sender address nonce uint256 initCode bytes factory åœ°å€å’Œ factoryData çš„è¿æ¥ï¼ˆæˆ–ç©ºï¼‰ï¼Œæˆ– EIP-7702 æ•°æ® callData bytes accountGasLimits bytes32 verificationGasLimitï¼ˆ16 å­—èŠ‚ï¼‰å’Œ callGasLimitï¼ˆ16 å­—èŠ‚ï¼‰çš„è¿æ¥ preVerificationGas uint256 gasFees bytes32 maxPriorityFeePerGasï¼ˆ16 å­—èŠ‚ï¼‰å’Œ maxFeePerGasï¼ˆ16 å­—èŠ‚ï¼‰çš„è¿æ¥ paymasterAndData bytes paymaster å­—æ®µçš„è¿æ¥ï¼ˆæˆ–ç©ºï¼‰ signature bytes EntryPoint åˆçº¦çš„æ ¸å¿ƒæ¥å£å¦‚ä¸‹ï¼š\nfunction handleOps(PackedUserOperation[] calldata ops, address payable beneficiary); beneficiary æ˜¯å°†æ”¶åˆ°æ‰¹æ¬¡æ‰§è¡ŒæœŸé—´æ”¶é›†çš„æ‰€æœ‰ gas è´¹çš„åœ°å€ã€‚\nSmart Contract Account æ¥å£ interface IAccount { function validateUserOp (PackedUserOperation calldata userOp, bytes32 userOpHash, uint256 missingAccountFunds) external returns (uint256 validationData); } userOpHash æ˜¯å¯¹ userOpï¼ˆé™¤ signatureï¼‰ã€entryPoint å’Œ chainId çš„å“ˆå¸Œ\néœ€å®ç°åŠŸèƒ½\nå¿…é¡»éªŒè¯è°ƒç”¨è€…æ˜¯å¯ä¿¡çš„ EntryPoint å¿…é¡»éªŒè¯ signature æ˜¯ userOpHash çš„æœ‰æ•ˆç­¾åï¼Œå¹¶åœ¨ç­¾åä¸åŒ¹é…æ—¶è¿”å› SIG_VALIDATION_FAILED (1) è€Œé revertã€‚ä»»ä½•å…¶ä»–é”™è¯¯å¿…é¡» revert åœ¨è¿”å› SIG_VALIDATION_FAILED (1) æ—¶ä¸åº”æå‰è¿”å›ã€‚ç›¸åï¼Œåº”å®Œæˆæ­£å¸¸æµç¨‹ä»¥å¯ç”¨éªŒè¯å‡½æ•°çš„ gas ä¼°ç®— å¿…é¡»æ”¯ä»˜ EntryPointï¼ˆè°ƒç”¨è€…ï¼‰è‡³å°‘ missingAccountFundsï¼ˆå¯èƒ½ä¸ºé›¶ï¼Œå¦‚æœå½“å‰ sender çš„å­˜æ¬¾è¶³å¤Ÿ/å­˜åœ¨ paymaster å«ä»˜ï¼‰ sender å¯ä»¥æ”¯ä»˜è¶…è¿‡æ­¤æœ€å°å€¼ä»¥è¦†ç›–æœªæ¥äº¤æ˜“ã€‚å®ƒä¹Ÿå¯ä»¥éšæ—¶è°ƒç”¨ withdrawTo æ¥å–å› è¿”å›å€¼å¿…é¡»æ‰“åŒ… aggregator/authorizerã€validUntil å’Œ validAfter æ—¶é—´æˆ³ aggregator/authorizer - 0 è¡¨ç¤ºæœ‰æ•ˆç­¾åï¼Œ1 è¡¨ç¤ºç­¾åå¤±è´¥ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¸º aggregator/authorizer åˆçº¦çš„åœ°å€ validUntil æ˜¯ 6 å­—èŠ‚æ—¶é—´æˆ³å€¼ï¼Œæˆ–é›¶è¡¨ç¤ºâ€œæ— é™â€ã€‚UserOperation ä»…åœ¨æ­¤æ—¶é—´ä¹‹å‰æœ‰æ•ˆ validAfter æ˜¯ 6 å­—èŠ‚æ—¶é—´æˆ³ã€‚UserOperation ä»…åœ¨æ­¤æ—¶é—´ä¹‹åæœ‰æ•ˆ ä¸ºäº†ä½¿ç”¨åŒºå—å·æŒ‡å®šæœ‰æ•ˆèŒƒå›´ï¼ŒvalidUntil å’Œ validAfter éƒ½éœ€è¦å°†å…¶æœ€é«˜ä½è®¾ç½®ä¸º 1 æ³¨æ„ï¼šæœ‰æ•ˆèŒƒå›´å¯ä»¥ç”¨ä¸¤ä¸ªåŒºå—æ—¶é—´æˆ³æˆ–ä¸¤ä¸ªåŒºå—å·è¡¨ç¤ºï¼Œä½†ä¸èƒ½åœ¨åŒä¸€ä¸ª UserOperation çš„æœ‰æ•ˆèŒƒå›´ä¸­æ··åˆä¸€ä¸ªæ—¶é—´æˆ³å’Œä¸€ä¸ªåŒºå—å·\nSmart Contract Account å¯ä»¥å®ç° IAccountExecute æ¥å£\ninterface IAccountExecute { function executeUserOp(PackedUserOperation calldata userOp, bytes32 userOpHash) external; } æ­¤æ–¹æ³•å°†ç”± EntryPoint ä½¿ç”¨å½“å‰ UserOperation è°ƒç”¨ï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨ sender ä¸Šæ‰§è¡Œ callData\nåŠæŠ½è±¡ Nonce æ”¯æŒ åœ¨ä»¥å¤ªåŠåè®®ä¸­ï¼Œé¡ºåºäº¤æ˜“ nonce å€¼ç”¨ä½œé˜²é‡æ”¾æ–¹æ³•ï¼Œä»¥åŠç¡®å®šäº¤æ˜“åŒ…å«åœ¨åŒºå—ä¸­çš„æœ‰æ•ˆé¡ºåº.\nå®ƒè¿˜è´¡çŒ®äºäº¤æ˜“å“ˆå¸Œçš„å”¯ä¸€æ€§ï¼Œå› ä¸ºåŒä¸€ sender çš„åŒä¸€ nonce äº¤æ˜“ä¸èƒ½ä¸¤æ¬¡åŒ…å«åœ¨é“¾ä¸­.\nç„¶è€Œï¼Œè¦æ±‚å•ä¸€é¡ºåº nonce å€¼é™åˆ¶äº† sender å®šä¹‰è‡ªå®šä¹‰äº¤æ˜“æ’åºå’Œé˜²é‡æ”¾é€»è¾‘çš„èƒ½åŠ›.\næˆ‘ä»¬å®ç°äº† nonce æœºåˆ¶ï¼Œä½¿ç”¨ UserOperation ä¸­çš„å•ä¸€ uint256 nonce å€¼ï¼Œä½†å°†å…¶è§†ä¸ºä¸¤ä¸ªå€¼ï¼š\n192 ä½â€œkeyâ€ 64 ä½â€œsequenceâ€ è¿™äº›å€¼åœ¨ EntryPoint åˆçº¦ä¸­é“¾ä¸Šè¡¨ç¤ºã€‚æˆ‘ä»¬åœ¨ EntryPoint æ¥å£ä¸­å®šä¹‰ä»¥ä¸‹æ–¹æ³•æ¥æš´éœ²è¿™äº›å€¼ï¼š\nfunction getNonce(address sender, uint192 key) external view returns (uint256 nonce); å¯¹äºæ¯ä¸ª keyï¼ŒEntryPoint ä¸ºæ¯ä¸ª UserOperation éªŒè¯ sequenceã€‚å¦‚æœ nonce éªŒè¯å¤±è´¥ï¼ŒUserOperation è¢«è§†ä¸ºæ— æ•ˆï¼Œæ‰¹æ¬¡ revertã€‚sequence å€¼ä¸º sender é¡ºåºä¸”å•è°ƒé€’å¢ã€‚æ–° key å¯ä»¥éšæ—¶å¼•å…¥ä»»æ„å€¼ï¼Œå…¶ sequence ä» 0 å¼€å§‹.\nè¿™ç§æ–¹æ³•åœ¨åè®®å±‚é¢ç»´æŠ¤äº†é“¾ä¸Š UserOperation å“ˆå¸Œå”¯ä¸€æ€§çš„ä¿è¯ï¼ŒåŒæ—¶å…è®¸è´¦æˆ·ä½¿ç”¨ 192 ä½â€œkeyâ€å­—æ®µå®ç°ä»»ä½•è‡ªå®šä¹‰é€»è¾‘ï¼ŒåŒæ—¶é€‚åˆ 32 å­—èŠ‚å­—.\nè¯»å–/éªŒè¯ nonce åœ¨å‡†å¤‡ UserOperation æ—¶ï¼Œbundler å¯ä»¥è°ƒç”¨æ­¤æ–¹æ³•æ¥ç¡®å®š nonce å­—æ®µçš„æœ‰æ•ˆå€¼.\nBundler å¯¹ UserOperation çš„éªŒè¯åº”ä»¥ getNonce å¼€å§‹ï¼Œä»¥ç¡®ä¿äº¤æ˜“å…·æœ‰æœ‰æ•ˆçš„ nonce å­—æ®µ.\nå¦‚æœ bundler æ„¿æ„æ¥å—åŒä¸€ sender çš„å¤šä¸ª UserOperation è¿›å…¥å…¶å†…å­˜æ± ï¼Œåˆ™ bundler åº”è·Ÿè¸ªå·²æ·»åŠ å†…å­˜æ± çš„ UserOperation çš„ key å’Œ sequence å¯¹.\nä½¿ç”¨ç¤ºä¾‹\nç»å…¸é¡ºåºé€’å¢ nonce ä¸ºäº†è¦æ±‚è´¦æˆ·å…·æœ‰ç»å…¸é¡ºåº nonceï¼ŒéªŒè¯å‡½æ•°å¿…é¡»æ‰§è¡Œï¼š\nrequire(userOp.nonce\u0026lt;type(uint64).max) æœ‰åºç®¡ç†äº‹ä»¶ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè´¦æˆ·å¯èƒ½éœ€è¦ä¸æ­£å¸¸æ“ä½œå¹¶è¡Œçš„â€œç®¡ç†â€æ“ä½œé€šé“.\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè´¦æˆ·å¯ä»¥åœ¨è°ƒç”¨è´¦æˆ·è‡ªèº«çš„æ–¹æ³•æ—¶ä½¿ç”¨ç‰¹å®š keyï¼š\nbytes4 sig = bytes4(userOp.callData[0 : 4]); uint key = userOp.nonce \u0026gt;\u0026gt; 64; if (sig == ADMIN_METHODSIG) { require(key == ADMIN_KEY, \u0026#34;wrong nonce-key for admin operation\u0026#34;); } else { require(key == 0, \u0026#34;wrong nonce-key for normal operation\u0026#34;); } EntryPoint åˆçº¦æ‰€éœ€åŠŸèƒ½ EntryPoint æ ¸å¿ƒæ–¹æ³•æ˜¯ handleOpsï¼Œå®ƒå¤„ç† UserOperation æ•°ç»„\nEntryPoint çš„ handleOps å‡½æ•°å¿…é¡»æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼ˆæˆ‘ä»¬é¦–å…ˆæè¿°æ›´ç®€å•çš„æ—  paymaster æƒ…å†µï¼‰ã€‚å®ƒå¿…é¡»è¿›è¡Œä¸¤ä¸ªå¾ªç¯ï¼ŒéªŒè¯å¾ªç¯å’Œæ‰§è¡Œå¾ªç¯ã€‚åœ¨éªŒè¯å¾ªç¯ä¸­ï¼ŒhandleOps è°ƒç”¨å¿…é¡»ä¸ºæ¯ä¸ª UserOperation æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š\nå¦‚æœ sender æ™ºèƒ½åˆçº¦è´¦æˆ·å°šä¸å­˜åœ¨ï¼Œä½¿ç”¨ UserOperation ä¸­æä¾›çš„ initcode åˆ›å»ºå®ƒ å¦‚æœ factory åœ°å€æ˜¯â€œ0x7702â€ï¼Œåˆ™ sender å¿…é¡»æ˜¯å…·æœ‰ EIP-7702 æˆæƒæŒ‡å®šçš„ EOAã€‚EntryPoint éªŒè¯æˆæƒåœ°å€ä¸ UserOperation signature ä¸­æŒ‡å®šçš„åœ°å€åŒ¹é…ï¼ˆè¯¦è§å¯¹ [EIP-7702] æˆæƒçš„æ”¯æŒï¼‰ å¦‚æœ sender ä¸å­˜åœ¨ï¼Œä¸” initcode ä¸ºç©ºï¼Œæˆ–æœªåœ¨â€œsenderâ€åœ°å€éƒ¨ç½²åˆçº¦ï¼Œåˆ™è°ƒç”¨å¿…é¡»å¤±è´¥ è­¦å‘Šï¼šå¦‚æœ sender å­˜åœ¨ï¼Œä¸” initcode ä¸ä¸ºç©ºï¼Œåˆ™å¿½ç•¥ initcodeã€‚\nåŸºäºéªŒè¯å’Œè°ƒç”¨ gas é™åˆ¶ä»¥åŠå½“å‰ gas å€¼è®¡ç®— sender éœ€è¦æ”¯ä»˜çš„æœ€å¤§å¯èƒ½è´¹ç”¨ è®¡ç®— sender å¿…é¡»æ·»åŠ åˆ° EntryPointâ€œdepositâ€çš„è´¹ç”¨ åœ¨ sender åˆçº¦ä¸Šè°ƒç”¨ validateUserOpï¼Œä¼ å…¥ UserOperationã€å…¶å“ˆå¸Œå’Œæ‰€éœ€è´¹ç”¨ã€‚å¦‚æœ sender è®¤ä¸º UserOperation æœ‰æ•ˆï¼Œæ™ºèƒ½åˆçº¦è´¦æˆ·å¿…é¡»éªŒè¯ UserOperation çš„ signature å‚æ•°å¹¶æ”¯ä»˜è´¹ç”¨ã€‚å¦‚æœä»»ä½• validateUserOp è°ƒç”¨å¤±è´¥ï¼ŒhandleOps å¿…é¡»è‡³å°‘è·³è¿‡è¯¥ UserOperation çš„æ‰§è¡Œï¼Œå¹¶å¯èƒ½å®Œå…¨ revert éªŒè¯ EntryPoint ä¸­è´¦æˆ·çš„ deposit è¶³å¤Ÿé«˜ä»¥è¦†ç›–æœ€å¤§å¯èƒ½æˆæœ¬ï¼ˆè¦†ç›–å·²å®Œæˆçš„éªŒè¯å’Œæœ€å¤§æ‰§è¡Œ gasï¼‰ æ‰§è¡Œæµç¨‹ ä½¿ç”¨ UserOperation çš„ calldata è°ƒç”¨è´¦æˆ·ã€‚è´¦æˆ·è‡ªè¡Œå†³å®šå¦‚ä½•è§£æ calldataï¼›é¢„æœŸå·¥ä½œæµæ˜¯è´¦æˆ·æœ‰ä¸€ä¸ª execute å‡½æ•°ï¼Œå°†å‰©ä½™ calldata è§£æä¸ºè´¦æˆ·åº”æ‰§è¡Œçš„ä¸€ä¸ªæˆ–å¤šä¸ªè°ƒç”¨åºåˆ— å¦‚æœ calldata ä»¥ IAccountExecute.executeUserOp çš„æ–¹æ³•ç­¾åå¼€å¤´ï¼Œåˆ™ EntryPoint å¿…é¡»é€šè¿‡ç¼–ç  executeUserOp(userOp,userOpHash) æ„å»º calldataï¼Œå¹¶ä½¿ç”¨è¯¥ calldata è°ƒç”¨è´¦æˆ· è°ƒç”¨åï¼Œç”¨é¢„æ”¶è´¹ç”¨çš„å¤šä½™ gas æˆæœ¬é€€è¿˜è´¦æˆ·çš„ deposit å¯¹ callGasLimit å’Œ paymasterPostOpGasLimit çš„å‰©ä½™æœªç”¨ gas æ–½åŠ  10%ï¼ˆUNUSED_GAS_PENALTY_PERCENTï¼‰çš„ç½šæ¬¾ã€‚ ä»…å½“å‰©ä½™æœªç”¨ gas é‡å¤§äºæˆ–ç­‰äº 40000ï¼ˆPENALTY_GAS_THRESHOLDï¼‰æ—¶æ‰æ–½åŠ æ­¤ç½šæ¬¾ æ­¤ç½šæ¬¾æ˜¯å¿…è¦çš„ï¼Œä»¥é˜²æ­¢ UserOperation é¢„ç•™æ‰¹æ¬¡ä¸­çš„å¤§é‡ gas ç©ºé—´ä½†æœªä½¿ç”¨ï¼Œä»è€Œé˜»æ­¢ bundler åŒ…å«å…¶ä»– UserOperation\næ‰§è¡Œæ‰€æœ‰è°ƒç”¨åï¼Œä»æ‰€æœ‰ UserOperation æ”¶é›†çš„è´¹ç”¨æ”¯ä»˜ç»™ bundler æä¾›çš„ beneficiary åœ°å€ åœ¨æ¥å— UserOperation ä¹‹å‰ï¼Œbundler åº”ä½¿ç”¨ RPC æ–¹æ³•æœ¬åœ°è°ƒç”¨ EntryPoint çš„ handleOps å‡½æ•°ï¼Œä»¥éªŒè¯ signature æ­£ç¡®ä¸” UserOperation å®é™…æ”¯ä»˜è´¹ç”¨ï¼›è¯¦è§ä¸‹æ–‡Simulation sectionéƒ¨åˆ†ã€‚èŠ‚ç‚¹/bundler å¿…é¡»æ‹’ç»éªŒè¯å¤±è´¥çš„ UserOperationï¼Œå³ä¸å°†å…¶æ·»åŠ åˆ°æœ¬åœ°å†…å­˜æ± ï¼Œä¹Ÿä¸ä¼ æ’­ç»™å…¶ä»–å¯¹ç­‰èŠ‚ç‚¹\nERC-4337 çš„ JSON-RPC API ä¸ºäº†æ”¯æŒå‘ bundler å‘é€ UserOperation å¯¹è±¡ï¼Œåè€…é€šè¿‡ P2P å†…å­˜æ± ä¼ æ’­å®ƒä»¬ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ç»„ JSON-RPC APIï¼ŒåŒ…æ‹¬ eth_sendUserOperation å’Œ eth_getUserOperationReceipt\næ–° JSON-RPC API çš„å®Œæ•´å®šä¹‰è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\nå¯¹ EIP-712 ç­¾åçš„æ”¯æŒ userOpHash è®¡ç®—ä¸º [EIP-712] ç±»å‹æ¶ˆæ¯å“ˆå¸Œï¼Œå…·æœ‰ä»¥ä¸‹å‚æ•°ï¼š\nbytes32 constant TYPE_HASH = keccak256( \u0026#34;EIP712Domain(string name,string version,uint256 chainId,address verifyingContract)\u0026#34; ); bytes32 constant PACKED_USEROP_TYPEHASH = keccak256( \u0026#34;PackedUserOperation(address sender,uint256 nonce,bytes initCode,bytes callData,bytes32 accountGasLimits,uint256 preVerificationGas,bytes32 gasFees,bytes paymasterAndData)\u0026#34; ); å¯¹ EIP-7702 æˆæƒçš„æ”¯æŒ åœ¨å¯ç”¨ EIP-7702 çš„ç½‘ç»œä¸Šï¼Œeth_sendUserOperation æ–¹æ³•æ¥å—é¢å¤–çš„ eip7702Auth å‚æ•°ã€‚å¦‚æœè®¾ç½®æ­¤å‚æ•°ï¼Œå®ƒå¿…é¡»æ˜¯æœ‰æ•ˆçš„ EIP-7702 æˆæƒå…ƒç»„ï¼Œå¹¶ç”± sender åœ°å€ç­¾åã€‚Bundler å¿…é¡»å°†æ‰¹æ¬¡ä¸­æ‰€æœ‰ UserOperation çš„æ‰€æœ‰æ‰€éœ€ eip7702Auth æ·»åŠ åˆ° authorizationListï¼Œå¹¶ä½¿ç”¨ SET_CODE_TX_TYPE äº¤æ˜“ç±»å‹æ‰§è¡Œæ‰¹æ¬¡ã€‚æ­¤å¤–ï¼ŒUserOperation å“ˆå¸Œè®¡ç®—æ›´æ–°ä»¥åŒ…å«æ‰€éœ€çš„ EIP-7702 å§”æ‰˜åœ°å€\nå¦‚æœ initCode å­—æ®µä»¥å³å¡«å…… 18 ä¸ªé›¶çš„ 0x7702 å¼€å¤´ï¼Œä¸”æ­¤è´¦æˆ·ä½¿ç”¨ EIP-7702 äº¤æ˜“éƒ¨ç½²ï¼Œåˆ™å“ˆå¸Œè®¡ç®—å¦‚ä¸‹ï¼š\nä¸ºå“ˆå¸Œè®¡ç®—ç›®çš„ï¼Œå°† UserOperation çš„ initCode å­—æ®µçš„å‰ 20 å­—èŠ‚è®¾ç½®ä¸ºè´¦æˆ·çš„ EIP-7702 å§”æ‰˜åœ°å€ï¼ˆä½¿ç”¨ EXTCODECOPY è·å–ï¼‰ initCode ä¸ç”¨äºè°ƒç”¨ factory åˆçº¦ å¦‚æœ initCode é•¿äº 20 å­—èŠ‚ï¼Œåˆ™å‰©ä½™ initCode ç”¨äºè°ƒç”¨è´¦æˆ·è‡ªèº«çš„åˆå§‹åŒ–å‡½æ•° æ³¨æ„ï¼šUserOperation å¯èƒ½ä»å¯åœ¨æ— æ­¤ç±» initCode çš„æƒ…å†µä¸‹æ‰§è¡Œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒEntryPoint ä¸å“ˆå¸Œå½“å‰ EIP-7702 å§”æ‰˜ï¼Œå¹¶å¯èƒ½é’ˆå¯¹ä¿®æ”¹åçš„è´¦æˆ·æ‰§è¡Œ\næ­¤å¤–ï¼ŒEIP-7702 å®šä¹‰æ‰§è¡Œæˆæƒçš„ gas æˆæœ¬ç­‰äº PER_EMPTY_ACCOUNT_COST = 25000ã€‚æ­¤ gas æ¶ˆè€—åœ¨ EntryPoint åˆçº¦é“¾ä¸Šä¸å¯è§‚å¯Ÿï¼Œå¿…é¡»åŒ…å«åœ¨ preVerificationGas å€¼ä¸­\næ‰©å±•ï¼špaymaster æˆ‘ä»¬æ‰©å±• EntryPoint é€»è¾‘ä»¥æ”¯æŒ paymaster èµåŠ©å…¶ä»–ç”¨æˆ·çš„äº¤æ˜“ã€‚æ­¤åŠŸèƒ½å¯ç”¨äºå…è®¸åº”ç”¨å¼€å‘è€…ä¸ºç”¨æˆ·è¡¥è´´è´¹ç”¨ã€å…è®¸ç”¨æˆ·ä½¿ç”¨ [ERC-20] ä»£å¸æ”¯ä»˜è´¹ç”¨ä»¥åŠè®¸å¤šå…¶ä»–ç”¨ä¾‹ã€‚å½“ UserOperation ä¸­çš„ paymasterAndData å­—æ®µéç©ºæ—¶ï¼ŒEntryPoint ä¸ºè¯¥ UserOperation å®ç°ä¸åŒçš„æµç¨‹ï¼š\nåœ¨éªŒè¯å¾ªç¯æœŸé—´ï¼Œé™¤äº†è°ƒç”¨ validateUserOpï¼ŒhandleOps æ‰§è¡Œè¿˜å¿…é¡»æ£€æŸ¥ paymaster åœ¨ EntryPoint æœ‰è¶³å¤Ÿçš„ ETH å­˜æ¬¾æ¥æ”¯ä»˜ UserOperationï¼Œç„¶åè°ƒç”¨ paymaster ä¸Šçš„ validatePaymasterUserOp ä»¥éªŒè¯ paymaster æ˜¯å¦æ„¿æ„æ”¯ä»˜ UserOperationã€‚è¯·æ³¨æ„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒvalidateUserOp ä»¥ missingAccountFunds ä¸º 0 è°ƒç”¨ï¼Œä»¥åæ˜ è´¦æˆ·çš„å­˜æ¬¾ä¸ç”¨äºæ­¤ UserOperation çš„æ”¯ä»˜\nå¦‚æœ paymaster çš„ validatePaymasterUserOp è¿”å›éç©º context å­—èŠ‚æ•°ç»„ï¼Œåˆ™ handleOps å¿…é¡»åœ¨ä¸»è¦æ‰§è¡Œè°ƒç”¨åè°ƒç”¨ paymaster ä¸Šçš„ postOpã€‚å¦åˆ™ï¼Œä¸è°ƒç”¨ postOp å‡½æ•°\næ¶æ„åˆ¶ä½œçš„ paymaster å¯èƒ½å¯¹ç³»ç»Ÿé€ æˆ DoS æ”»å‡»é£é™©ï¼Œbundler åº”é‡‡å–æ­¥éª¤ç¼“è§£ã€‚ä½œä¸ºç¼“è§£ï¼Œbundler åº”ä¸ºå…¶æœåŠ¡çš„åˆçº¦ä½¿ç”¨å£°èª‰ç³»ç»Ÿï¼Œä¸” paymaster å¿…é¡»é™åˆ¶å…¶å­˜å‚¨ä½¿ç”¨ï¼Œæˆ–åœ¨å£°èª‰ç³»ç»Ÿä¸­å­˜å…¥ stakeã€‚æ­¤ç±»å£°èª‰ç³»ç»Ÿçš„å®Œæ•´è§„èŒƒè¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\npaymasterAndData å­—æ®µç¼–ç å’Œ paymasterSignature paymasterAndData å­—æ®µæ˜¯ä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µçš„éæ ‡å‡†ç¼–ç ï¼š\npaymasterAddress - 20 å­—èŠ‚ â€” paymaster åˆçº¦åœ°å€\npaymasterVerificationGasLimit - 16 å­—èŠ‚ - éªŒè¯å‡½æ•°çš„ gas é™åˆ¶\npostOpGasLimit - 16 å­—èŠ‚ - postOp å‡½æ•°çš„ gas é™åˆ¶\npaymasterData - paymaster åˆçº¦å°†åœ¨ validatePaymasterUserOp è°ƒç”¨ä¸­æ¥æ”¶çš„æ•°æ® ä»¥ä¸‹æ•°æ®å¯ä»¥é€‰æ‹©é™„åŠ åˆ° paymasterAndData å­—æ®µï¼š\npaymasterSignature - paymaster åˆçº¦è¦æ£€æŸ¥çš„â€œsignatureâ€å€¼å­—èŠ‚æ•°ç»„ï¼›æ­¤å€¼å¯ä»¥æä¾›è€Œä¸å½±å“ UserOperation å“ˆå¸Œ\npaymasterSignatureLength - 2 å­—èŠ‚ - paymasterSignature å‚æ•°å­—èŠ‚æ•°ç»„çš„ç²¾ç¡®é•¿åº¦\nPAYMASTER_SIG_MAGIC (0x22e325a297439656) - é™„åŠ çš„é­”æœ¯å€¼ï¼Œè¡¨ç¤º UserOperation ä½¿ç”¨ paymasterSignature åŠŸèƒ½\næ³¨æ„ï¼Œç”±äº signature å’Œ paymasterSignature å­—æ®µéƒ½ä¸å½±å“ UserOperation å“ˆå¸Œï¼ŒSender å’Œ Paymaster çš„ç­¾åå¯ä»¥å¹¶è¡Œæ‰§è¡Œ\npaymaster æ¥å£å¦‚ä¸‹ï¼š\nfunction validatePaymasterUserOp (PackedUserOperation calldata userOp, bytes32 userOpHash, uint256 maxCost) external returns (bytes memory context, uint256 validationData); function postOp (PostOpMode mode, bytes calldata context, uint256 actualGasCost, uint256 actualUserOpFeePerGas) external; enum PostOpMode { opSucceeded, // UserOperation æˆåŠŸ opReverted // UserOperation revertã€‚paymaster ä»éœ€æ”¯ä»˜ gasã€‚ } EntryPoint å¿…é¡»å®ç°ä»¥ä¸‹ API ä»¥å…è®¸ paymaster ç­‰å®ä½“ stakeï¼Œä»è€Œåœ¨å­˜å‚¨è®¿é—®ä¸­å…·æœ‰æ›´å¤šçµæ´»æ€§ã€‚ // ä¸ºè°ƒç”¨å®ä½“æ·»åŠ  stake function addStake(uint32 _unstakeDelaySec) external payable; // è§£é” stakeï¼ˆå¿…é¡»ç­‰å¾… unstakeDelay æ‰èƒ½å–å›ï¼‰ function unlockStake() external; // å–å›è§£é”çš„ stake function withdrawStake(address payable withdrawAddress) external; paymaster è¿˜å¿…é¡»æœ‰ depositï¼ŒEntryPoint å°†ä»ä¸­æ”¶å– UserOperation æˆæœ¬ã€‚depositï¼ˆç”¨äºæ”¯ä»˜ gas è´¹ç”¨ï¼‰ä¸ stakeï¼ˆè¢«é”å®šï¼‰åˆ†å¼€ã€‚ EntryPoint å¿…é¡»å®ç°ä»¥ä¸‹æ¥å£ä»¥å…è®¸ Paymasterï¼ˆå¯é€‰åœ° Accountsï¼‰ç®¡ç†å…¶ depositï¼š\n// è¿”å›è´¦æˆ·çš„ deposit function balanceOf(address account) public view returns (uint256); // æ·»åŠ åˆ°ç»™å®šè´¦æˆ·çš„ deposit function depositTo(address account) public payable; // æ·»åŠ åˆ°è°ƒç”¨è´¦æˆ·çš„ deposit receive() external payable; // ä»å½“å‰è´¦æˆ·çš„ deposit å–å› function withdrawTo(address payable withdrawAddress, uint256 withdrawAmount) external; // è·å–å½“å‰æ‰§è¡Œçš„ UserOperation å“ˆå¸Œï¼Œæˆ–å¦‚æœä¸åœ¨æ‰§è¡ŒæœŸé—´è°ƒç”¨åˆ™ä¸º 0 function getCurrentUserOpHash() public view returns (bytes32); Bundler åœ¨æ”¶åˆ° UserOperation æ—¶çš„è¡Œä¸º ç±»ä¼¼äºä»¥å¤ªåŠäº¤æ˜“ï¼ŒUserOperation çš„é“¾å¤–æµç¨‹å¯ä»¥æè¿°å¦‚ä¸‹ï¼š\nå®¢æˆ·ç«¯é€šè¿‡ RPC è°ƒç”¨ eth_sendUserOperation å‘ bundler å‘é€ UserOperation åœ¨å°† UserOperation åŒ…å«åˆ°å†…å­˜æ± ä¹‹å‰ï¼Œbundler å¯¹æ–°æ”¶åˆ°çš„ UserOperation è¿è¡Œç¬¬ä¸€æ¬¡éªŒè¯ã€‚å¦‚æœ UserOperation éªŒè¯å¤±è´¥ï¼Œbundler ä¸¢å¼ƒå®ƒå¹¶åœ¨ eth_sendUserOperation å“åº”ä¸­è¿”å›é”™è¯¯ ç¨åï¼Œä¸€æ—¦æ„å»ºæ‰¹æ¬¡ï¼Œbundler ä»å†…å­˜æ± å–å‡º UserOperation å¹¶å¯¹æ¯ä¸ªè¿è¡Œå•ä¸ª UserOperation çš„ç¬¬äºŒæ¬¡éªŒè¯ã€‚å¦‚æœæˆåŠŸï¼Œåˆ™è®¡åˆ’åŒ…å«åœ¨ä¸‹ä¸€ä¸ªæ‰¹æ¬¡ä¸­ï¼Œå¦åˆ™ä¸¢å¼ƒ åœ¨é“¾ä¸Šæäº¤æ–°æ‰¹æ¬¡ä¹‹å‰ï¼Œbundler æ‰§è¡Œæ•´ä¸ª UserOperation æ‰¹æ¬¡çš„ç¬¬ä¸‰æ¬¡éªŒè¯ã€‚å¦‚æœä»»ä½• UserOperation éªŒè¯å¤±è´¥ï¼Œbundler ä¸¢å¼ƒå®ƒä»¬ã€‚bundler åº”è·Ÿè¸ªå¯¹ç­‰èŠ‚ç‚¹çš„å£°èª‰ã€‚æ­¤ç±»å£°èª‰ç³»ç»Ÿçš„å®Œæ•´è®¾è®¡è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´ å½“ bundler æ”¶åˆ° UserOperation æ—¶ï¼Œå®ƒå¿…é¡»é¦–å…ˆè¿è¡Œä¸€äº›åŸºæœ¬ sanity æ£€æŸ¥ï¼Œå³ï¼š\nsender æ˜¯ç°æœ‰åˆçº¦ï¼Œæˆ– initCode éç©ºï¼ˆä½†ä¸èƒ½ä¸¤è€…çš†æœ‰ï¼‰ å¦‚æœ initCode éç©ºï¼Œè§£æå…¶å‰ 20 å­—èŠ‚ä¸º factory åœ°å€æˆ– EIP-7702 æ ‡å¿— è®°å½• factory æ˜¯å¦ stakeï¼Œåœ¨åç»­æ¨¡æ‹Ÿè¡¨æ˜éœ€è¦æ—¶ã€‚å¦‚æœ factory è®¿é—®å…¨å±€çŠ¶æ€ï¼Œå®ƒå¿…é¡» stake verificationGasLimit å’Œ paymasterVerificationGasLimits ä½äº MAX_VERIFICATION_GAS (500000)ï¼Œä¸” preVerificationGas è¶³å¤Ÿé«˜ä»¥æ”¯ä»˜åºåˆ—åŒ– UserOperation çš„ calldata gas æˆæœ¬åŠ ä¸Š PRE_VERIFICATION_OVERHEAD_GAS (50000) paymasterAndData ä¸ºç©ºï¼Œæˆ–ä»¥ paymaster åœ°å€å¼€å¤´ï¼Œè¯¥åˆçº¦ (i) å½“å‰é“¾ä¸Šæœ‰éç©ºä»£ç ï¼Œ(ii) æœ‰è¶³å¤Ÿ deposit æ”¯ä»˜ UserOperationï¼Œ(iii) å½“å‰æœªè¢«ç¦ã€‚åœ¨æ¨¡æ‹ŸæœŸé—´ï¼Œè¿˜æ ¹æ®å…¶å­˜å‚¨ä½¿ç”¨æ£€æŸ¥ paymaster çš„ stake callGasLimit è‡³å°‘æ˜¯å…·æœ‰éé›¶å€¼çš„ CALL æˆæœ¬ maxFeePerGas å’Œ maxPriorityFeePerGas é«˜äº bundler æ„¿æ„æ¥å—çš„å¯é…ç½®æœ€å°å€¼ã€‚è‡³å°‘ï¼Œå®ƒä»¬è¶³å¤Ÿé«˜ä»¥åŒ…å«åœ¨å³å°†åˆ°æ¥çš„ block.basefee ä¸­ sender åœ¨å†…å­˜æ± ä¸­æ²¡æœ‰å¦ä¸€ä¸ª UserOperationï¼ˆæˆ–å®ƒæ›¿æ¢ç°æœ‰æ¡ç›®ï¼Œå…·æœ‰ç›¸åŒ sender å’Œ nonceï¼Œå…·æœ‰æ›´é«˜çš„ maxPriorityFeePerGas å’ŒåŒç­‰å¢åŠ çš„ maxFeePerGasï¼‰ã€‚å•ä¸ªæ‰¹æ¬¡ä¸­æ¯ä¸ª sender ä»…ä¸€ä¸ª UserOperationã€‚å¦‚æœ sender stakeï¼Œåˆ™å…é™¤æ­¤è§„åˆ™ï¼Œå¹¶å¯åœ¨å†…å­˜æ± å’Œæ‰¹æ¬¡ä¸­æœ‰å¤šä¸ª UserOperation UserOperation Simulation æˆ‘ä»¬å®šä¹‰ UserOperation æ¨¡æ‹Ÿï¼Œä½œä¸ºå¯¹ EntryPoint åˆçº¦çš„é“¾å¤–è§†å›¾è°ƒç”¨ï¼ˆæˆ–è·Ÿè¸ªè°ƒç”¨ï¼‰ä¸ UserOperationï¼Œä»¥åŠå¯¹éªŒè¯ä»£ç åº”ç”¨çš„å…±äº«è§„åˆ™é›†çš„å¼ºåˆ¶ï¼Œä½œä¸º UserOperation éªŒè¯çš„ä¸€éƒ¨åˆ†\nSimulation é€»è¾‘ä¾æ® è¦éªŒè¯æ­£å¸¸ä»¥å¤ªåŠäº¤æ˜“ txï¼Œbundler æ‰§è¡Œé™æ€æ£€æŸ¥ï¼Œå¦‚ï¼š\necrecover(tx.v, tx.r, tx.s) å¿…é¡»è¿”å›æœ‰æ•ˆ EOA tx.nonce å¿…é¡»æ˜¯æ¢å¤çš„ EOA çš„å½“å‰ nonce æ¢å¤çš„ EOA çš„ä½™é¢å¿…é¡»è¶³å¤Ÿæ”¯ä»˜äº¤æ˜“ tx.gasLimit å¿…é¡»è¶³å¤Ÿè¦†ç›–äº¤æ˜“çš„å†…åœ¨ gas æˆæœ¬ chainId å¿…é¡»åŒ¹é…å½“å‰é“¾ æ‰€æœ‰è¿™äº›æ£€æŸ¥ä¸ä¾èµ– EVM çŠ¶æ€ï¼Œä¸”ä¸èƒ½å—å…¶ä»–è´¦æˆ·äº¤æ˜“å½±å“\nç›¸åï¼ŒUserOperation éªŒè¯ä¾èµ– EVM çŠ¶æ€ï¼ˆå¯¹ validateUserOpã€validatePaymasterUserOp çš„è°ƒç”¨ï¼‰ï¼Œå¯è¢«å…¶ä»– UserOperationï¼ˆæˆ–æ­£å¸¸ä»¥å¤ªåŠäº¤æ˜“ï¼‰æ”¹å˜ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¼•å…¥æ¨¡æ‹Ÿä½œä¸ºæ£€æŸ¥å…¶æœ‰æ•ˆæ€§çš„æ–°æœºåˆ¶ã€‚ç›´è§‚åœ°è¯´ï¼Œæ¨¡æ‹Ÿçš„ç›®æ ‡æ˜¯ç¡®ä¿ UserOperation çš„é“¾ä¸ŠéªŒè¯ä»£ç è¢«æ²™ç®±åŒ–ï¼Œä¸åŒä¸€æ‰¹æ¬¡ä¸­çš„å…¶ä»– UserOperation éš”ç¦»\nSimulation è§„èŒƒï¼š è¦æ¨¡æ‹Ÿ UserOperation éªŒè¯ï¼Œbundler å¯¹ handleOps() æ–¹æ³•è¿›è¡Œè§†å›¾è°ƒç”¨ï¼Œä½¿ç”¨è¦æ£€æŸ¥çš„ UserOperation\næ¨¡æ‹Ÿåº”ä»…è¿è¡Œåœ¨ sender å’Œ paymaster çš„éªŒè¯éƒ¨åˆ†ï¼Œä¸”ä¸è¦æ±‚ UserOperation çš„æ‰§è¡Œã€‚Bundler å¯ä»¥å‘æ‰¹æ¬¡æ·»åŠ ç¬¬äºŒä¸ªâ€œæ€»æ˜¯å¤±è´¥â€çš„ UserOperationï¼Œä»¥ä¾¿æ¨¡æ‹Ÿåœ¨ç¬¬ä¸€ä¸ª UserOperation çš„éªŒè¯å®Œæˆåç»“æŸ\nå¦‚æœæ¨¡æ‹Ÿ revertï¼Œbundler å¿…é¡»ä¸¢å¼ƒ UserOperation\næ¨¡æ‹Ÿè°ƒç”¨æ‰§è¡Œå®Œæ•´éªŒè¯ï¼Œé€šè¿‡è°ƒç”¨ï¼š\nå¦‚æœå­˜åœ¨ initCodeï¼Œåˆ›å»º sender è´¦æˆ· account.validateUserOpã€‚ å¦‚æœæŒ‡å®š paymasterï¼špaymaster.validatePaymasterUserOp sender æˆ– paymaster å¯ä»¥è¿”å›æ—¶é—´èŒƒå›´ï¼ˆvalidAfter/validUntilï¼‰ã€‚UserOperation åœ¨å½“å‰æ—¶é—´å¿…é¡»æœ‰æ•ˆæ‰èƒ½è¢«è§†ä¸ºæœ‰æ•ˆï¼Œå®šä¹‰ä¸º validAfter\u0026lt;=block.timestamp\nBundler å¿…é¡»ä¸¢å¼ƒè¿‡æœŸå¤ªå¿«ä¸”å¯èƒ½åœ¨ä¸‹ä¸€ä¸ªåŒºå—å‰å¤±æ•ˆçš„ UserOperationã€‚è¦è§£ç è¿”å›çš„æ—¶é—´èŒƒå›´ï¼Œbundler å¿…é¡»ä½¿ç”¨è·Ÿè¸ªè¿è¡ŒéªŒè¯ï¼Œä»¥ä» validateUserOp å’Œ validatePaymasterUserOp æ–¹æ³•è§£ç è¿”å›å€¼\nä¸ºäº†é˜²æ­¢å¯¹ bundler çš„ DoS æ”»å‡»ï¼Œå®ƒä»¬å¿…é¡»ç¡®ä¿ä¸Šè¿°éªŒè¯æ–¹æ³•é€šè¿‡éªŒè¯è§„åˆ™ï¼Œè¿™äº›è§„åˆ™çº¦æŸå…¶ opcode å’Œå­˜å‚¨çš„ä½¿ç”¨ã€‚æ­¤ç±»å…±äº«è§„åˆ™é›†çš„å®Œæ•´è®¾è®¡è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\nEstimate preVerificationGas æœ¬æ–‡æ¡£ä¸æŒ‡å®šä¼°ç®—æ­¤å€¼çš„è§„èŒƒæ–¹å¼ï¼Œå› ä¸ºå®ƒå–å†³äºéæ°¸ä¹…ç½‘ç»œå±æ€§ï¼Œå¦‚æ“ä½œå’Œæ•°æ® gas å®šä»·ä»¥åŠé¢„æœŸæ‰¹æ¬¡å¤§å°ã€‚\nç„¶è€Œï¼Œè¦æ±‚ä¼°ç®—å€¼è¶³å¤Ÿè¦†ç›–ä»¥ä¸‹æˆæœ¬ï¼š\nåŸºæœ¬æ‰¹æ¬¡äº¤æ˜“æˆæœ¬ã€‚åœ¨ä»¥å¤ªåŠä¸Šï¼Œ21000 gas é™¤ä»¥ UserOperation æ•°é‡ã€‚ ä¸ UserOperation ç›¸å…³çš„ calldata gas æˆæœ¬ï¼Œå¦‚ EIP-2028 å®šä¹‰ã€‚ é™æ€ EntryPoint åˆçº¦ä»£ç æ‰§è¡Œã€‚ åŠ è½½ UserOperation çš„å›ºå®šå¤§å°å­—æ®µåˆ° EVM å†…å­˜çš„é™æ€å†…å­˜æˆæœ¬ ç”±äº paymaster validatePaymasterUserOp å‡½æ•°è¿”å›çš„ context å¯¼è‡´çš„å†…å­˜æˆæœ¬ï¼ˆåŒ…æ‹¬æ‰©å±•æˆæœ¬ï¼‰ï¼Œå¦‚æœç›¸å…³ã€‚ åˆ° innerHandleOp() å‡½æ•°çš„å¤–éƒ¨è°ƒç”¨ï¼Œè¿™æ˜¯ EntryPoint å®ç°çš„ä¸»è¦éƒ¨åˆ†ã€‚è¯·æ³¨æ„ï¼Œæ­¤å€¼éé™æ€ï¼Œå–å†³äº UserOperation åœ¨æ‰¹æ¬¡ä¸­çš„ä½ç½®ã€‚ [EIP-7702] æˆæƒæˆæœ¬ï¼Œå¦‚æœæœ‰ã€‚ EIP-7623 calldata åº•ä»·å¢åŠ ä¼°ç®—å¦‚ä¸‹ï¼š åº”ç”¨ tx.gasUsed çš„æ–°å…¬å¼ï¼Œç”¨æ­¤ UserOperation çš„ä¼°ç®—å€¼æ›¿æ¢ execution_gas_used å€¼ã€‚ ä¼°ç®—æ˜¯æ¨¡æ‹ŸæœŸé—´ä½¿ç”¨çš„æ‰€æœ‰éªŒè¯ gasï¼ˆè´¦æˆ·åˆ›å»ºã€éªŒè¯å’Œ paymaster éªŒè¯ï¼‰çš„æ€»å’ŒåŠ ä¸Šæ‰§è¡Œå’Œ postOp gas é™åˆ¶æ€»å’Œçš„ 10%ã€‚ Bundler å¿…é¡»è¦æ±‚ PreVerificationGas å€¼æœ‰ slack(æ¾å¼›å€¼)ï¼Œä»¥é€‚åº”æœªæ¥æ‰¹æ¬¡ä¸­çš„å†…å­˜æ‰©å±•æˆæœ¬ï¼Œä»¥åŠ UserOperation åœ¨å…¶ä¸­çš„é¢„æœŸä½ç½®\nPaymaster Paymaster åˆçº¦å…è®¸ gas æŠ½è±¡ï¼šæœ‰ä¸€ä¸ªåˆçº¦ï¼Œä¸æ˜¯äº¤æ˜“çš„ senderï¼Œæ¥æ”¯ä»˜äº¤æ˜“è´¹ç”¨\nPaymaster æ¶æ„å…è®¸å®ƒä»¬éµå¾ªâ€œé¢„æ”¶è´¹ï¼Œåé€€æ¬¾â€çš„æ¨¡å‹ã€‚ä¾‹å¦‚ï¼Œtoken-paymaster å¯ä»¥ç”¨äº¤æ˜“çš„æœ€å¤§å¯èƒ½ä»·æ ¼é¢„æ”¶è´¹ç”¨æˆ·ï¼Œå¹¶åœ¨ä¹‹åé€€æ¬¾å¤šä½™éƒ¨åˆ†\né¦–æ¬¡æ™ºèƒ½åˆçº¦è´¦æˆ·åˆ›å»º æ³¨æ„ï¼šå¯¹äºä½¿ç”¨ EIP-7702 çš„åˆçº¦ï¼Œæ­¤æµç¨‹åœ¨å¯¹ [EIP-7702] æˆæƒçš„æ”¯æŒä¸­æè¿°\næœ¬ææ¡ˆçš„é‡è¦è®¾è®¡ç›®æ ‡æ˜¯å¤åˆ¶ EOA çš„å…³é”®å±æ€§ï¼Œå³ç”¨æˆ·æ— éœ€æ‰§è¡Œè‡ªå®šä¹‰æ“ä½œæˆ–ä¾èµ–ç°æœ‰ç”¨æˆ·åˆ›å»ºå…¶æ™ºèƒ½åˆçº¦è´¦æˆ·ï¼›ä»–ä»¬å¯ä»¥æœ¬åœ°ç”Ÿæˆåœ°å€å¹¶ç«‹å³å¼€å§‹æ¥å—èµ„é‡‘\næ™ºèƒ½åˆçº¦è´¦æˆ·åˆ›å»ºæœ¬èº«ç”±â€œfactoryâ€åˆçº¦å®Œæˆï¼Œå¸¦æœ‰ä¸€äº›è´¦æˆ·ç‰¹å®šæ•°æ®ã€‚Factory é¢„æœŸä½¿ç”¨ CREATE2 0xF5ï¼ˆè€Œé CREATE 0xF0ï¼‰åˆ›å»ºè´¦æˆ·ï¼Œä»¥ä¾¿è´¦æˆ·åˆ›å»ºé¡ºåºä¸å¹²æ‰°ç”Ÿæˆåœ°å€ã€‚initCode å­—æ®µï¼ˆå¦‚æœéé›¶é•¿åº¦ï¼‰è§£æä¸º 20 å­—èŠ‚ factory åœ°å€ï¼Œåè·Ÿä¼ é€’ç»™æ­¤åœ°å€çš„ calldataã€‚æ­¤æ–¹æ³•è°ƒç”¨é¢„æœŸåˆ›å»ºè´¦æˆ·å¹¶è¿”å›å…¶åœ°å€ã€‚å¦‚æœ factory ä½¿ç”¨ CREATE2 0xF5 æˆ–å…¶ä»–ç¡®å®šæ€§æ–¹æ³•åˆ›å»ºè´¦æˆ·ï¼Œé¢„æœŸå³ä½¿å·²åˆ›å»ºä¹Ÿè¿”å›è´¦æˆ·åœ°å€ã€‚è¿™ä½¿å¾— bundler æ›´å®¹æ˜“æŸ¥è¯¢åœ°å€ï¼Œè€Œæ— éœ€çŸ¥é“è´¦æˆ·æ˜¯å¦å·²éƒ¨ç½²ï¼Œé€šè¿‡æ¨¡æ‹Ÿè°ƒç”¨ entryPoint.getSenderAddress()ï¼Œå®ƒåœ¨åº•å±‚è°ƒç”¨ factoryã€‚å½“æŒ‡å®š initCode æ—¶ï¼Œå¦‚æœ sender åœ°å€æŒ‡å‘ç°æœ‰åˆçº¦æˆ–è°ƒç”¨ initCode å sender åœ°å€ä»ä¸å­˜åœ¨ï¼Œåˆ™æ“ä½œä¸­æ­¢ã€‚initCode ä¸å¾—ç›´æ¥ä» EntryPoint è°ƒç”¨ï¼Œè€Œä»å¦ä¸€ä¸ªåœ°å€è°ƒç”¨ã€‚æ­¤ factory æ–¹æ³•åˆ›å»ºçš„åˆçº¦å¿…é¡»æ¥å— validateUserOp è°ƒç”¨ä»¥éªŒè¯ UserOperation çš„ç­¾åã€‚å¦‚æœ factory è®¿é—®å…¨å±€å­˜å‚¨ï¼Œåˆ™å¿…é¡» stakeã€‚æ³¨æ„ï¼šä¸ºäº†è®©é’±åŒ…åº”ç”¨åœ¨åˆ›å»ºå‰ç¡®å®šè´¦æˆ·çš„â€œåäº‹å®â€åœ°å€ï¼Œå®ƒåº”é™æ€è°ƒç”¨ entryPoint.getSenderAddress()\nå®‰å…¨è€ƒé‡ Factory åˆçº¦ æ‰€æœ‰ factory åˆçº¦å¿…é¡»æ£€æŸ¥å¯¹ createAccount() å‡½æ•°çš„æ‰€æœ‰è°ƒç”¨æºäº entryPoint.senderCreator() åœ°å€\nPaymaster åˆçº¦ æ‰€æœ‰ paymaster åˆçº¦å¿…é¡»æ£€æŸ¥å¯¹ validatePaymasterUserOp() å’Œ postOp() å‡½æ•°çš„æ‰€æœ‰è°ƒç”¨æºäº EntryPoint\nAggregator åˆçº¦ æ‰€æœ‰ aggregator åˆçº¦å¿…é¡»æ£€æŸ¥å¯¹ validateSignatures() å‡½æ•°çš„æ‰€æœ‰è°ƒç”¨æºäº EntryPoint\nEIP-7702 å§”æ‰˜æ™ºèƒ½åˆçº¦è´¦æˆ· æ‰€æœ‰ EIP-7702 å§”æ‰˜æ™ºèƒ½åˆçº¦è´¦æˆ·å®ç°å¿…é¡»æ£€æŸ¥å¯¹åˆå§‹åŒ–å‡½æ•°çš„æ‰€æœ‰è°ƒç”¨æºäº entryPoint.senderCreator() åœ°å€\nEntryPoint åˆçº¦æ— æ³•çŸ¥é“ EIP-7702 è´¦æˆ·æ˜¯å¦å·²åˆå§‹åŒ–ï¼Œå› æ­¤ EIP-7702 è´¦æˆ·åˆå§‹åŒ–ä»£ç å¯ä»¥é€šè¿‡ EntryPoint å¤šæ¬¡è°ƒç”¨ã€‚è´¦æˆ·ä»£ç åº”ä»…å…è®¸è°ƒç”¨ä¸€æ¬¡ï¼Œä¸”é’±åŒ…åº”ç”¨ä¸åº”é‡å¤ä¼ é€’ initCode\n","permalink":"http://localhost:1313/web3/eip/eip-4337/","summary":"\u003ch1 id=\"æ‘˜è¦\"\u003eæ‘˜è¦\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eå¼•å…¥ UserOperationï¼šä¸€ç§é«˜å±‚â€œä¼ªäº¤æ˜“å¯¹è±¡â€ï¼Œæ›¿ä»£ç›´æ¥åœ¨å…±è¯†å±‚æäº¤äº¤æ˜“\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç”¨æˆ·å°† UserOperation å‘é€åˆ°å•ç‹¬çš„ mempool\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eBundler å°†å¤šä¸ª UserOperation æ‰“åŒ…ï¼Œé€šè¿‡ handleOps è°ƒç”¨ EntryPoint åˆçº¦ï¼Œå†æ‰“åŒ…è¿›åŒºå—\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç›®æ ‡æ˜¯åœ¨ä¸ä¿®æ”¹ä»¥å¤ªåŠåº•å±‚åè®®çš„æƒ…å†µä¸‹ï¼Œå®ç°è´¦æˆ·æŠ½è±¡\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"åŠ¨æœº\"\u003eåŠ¨æœº\u003c/h1\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eå®ç°è´¦æˆ·æŠ½è±¡\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå…è®¸ä½¿ç”¨æ™ºèƒ½åˆçº¦è´¦æˆ·ä½œä¸ºä¸»è´¦æˆ·ï¼Œæ”¯æŒä»»æ„éªŒè¯é€»è¾‘ã€‚\u003c/li\u003e\n\u003cli\u003eç”¨æˆ·æ— éœ€æ‹¥æœ‰å¤–éƒ¨è´¦æˆ·ï¼ˆEOAï¼‰ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eå»ä¸­å¿ƒåŒ–ä¸å¼€æ”¾å‚ä¸\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä»»ä½• bundler éƒ½å¯å‚ä¸äº¤æ˜“æ‰“åŒ…ã€‚\u003c/li\u003e\n\u003cli\u003eä¾èµ–å…¬å…± mempoolï¼Œæ— éœ€ç”¨æˆ·ç›´æ¥çŸ¥æ™“ bundler åœ°å€ã€‚\u003c/li\u003e\n\u003cli\u003eä¸å¢åŠ ä¿¡ä»»å‡è®¾ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eæ— éœ€å…±è¯†å±‚ä¿®æ”¹\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eé¿å…åè®®å±‚æ”¹åŠ¨ï¼Œæé«˜å¿«é€Ÿéƒ¨ç½²çš„å¯èƒ½æ€§ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eæ”¯æŒæ›´å¤šåº”ç”¨åœºæ™¯\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eéšç§ä¿æŠ¤å‹åº”ç”¨\u003c/li\u003e\n\u003cli\u003eåŸå­å¤šæ“ä½œ\u003c/li\u003e\n\u003cli\u003eä½¿ç”¨ ERC-20 ä»£å¸æ”¯ä»˜æ‰‹ç»­è´¹æˆ–å¼€å‘è€…ä»£ä»˜\u003c/li\u003e\n\u003cli\u003eçµæ´»çš„éªŒè¯é€»è¾‘ï¼ˆä¸åŒç­¾åæ–¹æ¡ˆã€å¤šç­¾ã€æ¢å¤æ–¹æ¡ˆï¼‰\u003c/li\u003e\n\u003cli\u003eçµæ´»çš„æ‰‹ç»­è´¹æ”¯ä»˜ï¼ˆç¬¬ä¸‰æ–¹æ”¯ä»˜ã€è·¨é“¾æ”¯ä»˜ï¼‰\u003c/li\u003e\n\u003cli\u003eæ‰¹é‡æ“ä½œä¸æ‰“åŒ…æ‰§è¡Œ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cstrong\u003eæ€»ç»“\u003c/strong\u003eï¼šè¯¥ææ¡ˆé€šè¿‡ UserOperationã€Bundler å’Œ EntryPoint åˆçº¦å®ç°æ™ºèƒ½åˆçº¦è´¦æˆ·çš„å®Œå…¨æŠ½è±¡åŒ–ï¼Œæ”¯æŒå¤šç­¾ã€ä»£ä»˜å’Œæ‰¹é‡æ“ä½œï¼ŒåŒæ—¶æ— éœ€ä¿®æ”¹ä»¥å¤ªåŠå…±è¯†å±‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"è§„èŒƒ\"\u003eè§„èŒƒ\u003c/h2\u003e\n\u003ch3 id=\"æœ¯è¯­å®šä¹‰\"\u003eæœ¯è¯­å®šä¹‰\u003c/h3\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæœ¯è¯­\u003c/th\u003e\n          \u003cth\u003eå®šä¹‰\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eUserOperation\u003c/td\u003e\n          \u003ctd\u003eä¸€ç§æè¿°â€œä»£è¡¨ç”¨æˆ·å‘èµ·ä¸€ç¬”äº¤æ˜“â€çš„æ•°æ®ç»“æ„ã€‚ä¸ºé¿å…ä¸åŸç”Ÿäº¤æ˜“æ··æ·†ï¼Œç‰¹æ„ä¸å«â€œtransactionâ€ã€‚åƒäº¤æ˜“ä¸€æ ·ï¼Œå®ƒåŒ…å« toã€calldataã€maxFeePerGasã€maxPriorityFeePerGasã€nonceã€signatureã€‚ä¸åƒäº¤æ˜“ï¼Œå®ƒåŒ…å«ä»¥ä¸‹æ‰€è¿°çš„å‡ ä¸ªå…¶ä»–å­—æ®µã€‚ç‰¹åˆ«æ³¨æ„ï¼Œsignature å­—æ®µçš„ä½¿ç”¨ä¸ç”±åè®®å®šä¹‰ï¼Œè€Œæ˜¯ç”±æ™ºèƒ½åˆçº¦è´¦æˆ·å®ç°å®šä¹‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eSender\u003c/td\u003e\n          \u003ctd\u003eå‘èµ· UserOperation çš„æ™ºèƒ½åˆçº¦è´¦æˆ·\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eEntryPoint\u003c/td\u003e\n          \u003ctd\u003eç”¨äºæ‰§è¡Œ UserOperation æ‰¹æ¬¡çš„å•ä¾‹åˆçº¦ã€‚Bundler åº”ç™½åå•æ”¯æŒçš„ EntryPoint\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eBundler\u003c/td\u003e\n          \u003ctd\u003eä¸€ä¸ªèŠ‚ç‚¹ï¼ˆåŒºå—æ„å»ºè€…ï¼‰ï¼Œå®ƒèƒ½å¤„ç† UserOperationã€åˆ›å»ºæœ‰æ•ˆçš„ entryPoint.handleOps() äº¤æ˜“ï¼Œå¹¶åœ¨äº¤æ˜“ä»æœ‰æ•ˆæ—¶å°†å…¶æ·»åŠ åˆ°åŒºå—ä¸­ã€‚è¿™å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°ï¼šBundler å¯ä»¥è‡ªå·±å……å½“åŒºå—æ„å»ºè€…ã€‚å¦‚æœ bundler ä¸æ˜¯åŒºå—æ„å»ºè€…ï¼Œå®ƒåº”é€šè¿‡ mev-boost ç­‰åŸºç¡€è®¾æ–½æˆ–å…¶ä»–æè®®è€…-æ„å»ºè€…åˆ†ç¦»æœºåˆ¶ä¸åŒºå—æ„å»ºè€…åˆä½œ\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ePaymaster\u003c/td\u003e\n          \u003ctd\u003eåŒæ„ä»£æ›¿ sender æ”¯ä»˜äº¤æ˜“è´¹ç”¨çš„è¾…åŠ©åˆçº¦\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eFactory\u003c/td\u003e\n          \u003ctd\u003eå¿…è¦æ—¶è´Ÿè´£éƒ¨ç½²æ–° sender åˆçº¦çš„è¾…åŠ©åˆçº¦\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eAggregator\u003c/td\u003e\n          \u003ctd\u003eä¹Ÿç§°ä¸ºâ€œæˆæƒåˆçº¦â€ - ä¸€ä¸ªå…è®¸å¤šä¸ª UserOperation å…±äº«ä¸€æ¬¡éªŒè¯çš„åˆçº¦ã€‚æ­¤ç±»åˆçº¦çš„å®Œæ•´è®¾è®¡è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eCanonical UserOperation mempool\u003c/td\u003e\n          \u003ctd\u003eä¸€ä¸ªå»ä¸­å¿ƒåŒ–ã€æ— è®¸å¯çš„ P2P ç½‘ç»œï¼Œbundler åœ¨å…¶ä¸­äº¤æ¢ç¬¦åˆåŒä¸€å¥—å…±äº«éªŒè¯è§„åˆ™çš„åˆæ³• UserOperationã€‚å…·ä½“è§„åˆ™çš„å®Œæ•´è§„èŒƒè¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eAlternative UserOperation mempool\u003c/td\u003e\n          \u003ctd\u003eä»»ä½•å…¶ä»– P2P å†…å­˜æ± ï¼Œå…¶ä¸­ UserOperation çš„æœ‰æ•ˆæ€§ç”±ä¸åŒäºå…±äº«è§„åˆ™çš„è§„åˆ™å†³å®šï¼Œè¿™äº›è§„åˆ™ä»¥ä»»ä½•æ–¹å¼åº”ç”¨äºéªŒè¯ä»£ç \u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eDeposit\u003c/td\u003e\n          \u003ctd\u003eSender æˆ– Paymaster åˆçº¦å‘ EntryPoint åˆçº¦è½¬å…¥çš„ä¸€ç¬”ä»¥å¤ªå¸ï¼ˆæˆ–ä»»ä½• L2 åŸç”Ÿè´§å¸ï¼‰ï¼Œç”¨äºæ”¯ä»˜æœªæ¥ UserOperation çš„ gas è´¹ç”¨\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch3 id=\"useroperation-ç»“æ„å®šä¹‰\"\u003e\u003ccode\u003eUserOperation\u003c/code\u003e ç»“æ„å®šä¹‰\u003c/h3\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eå­—æ®µ\u003c/th\u003e\n          \u003cth\u003eç±»å‹\u003c/th\u003e\n          \u003cth\u003eæè¿°\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003esender\u003c/td\u003e\n          \u003ctd\u003eaddress\u003c/td\u003e\n          \u003ctd\u003eå‘èµ· UserOperation çš„è´¦æˆ·\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003enonce\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eé˜²é‡æ”¾å‚æ•°ï¼ˆè¯¦è§â€œåŠæŠ½è±¡ Nonce æ”¯æŒâ€ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003efactory\u003c/td\u003e\n          \u003ctd\u003eaddress\u003c/td\u003e\n          \u003ctd\u003eæ–°è´¦æˆ·çš„è´¦æˆ·å·¥å‚ OR 0x7702 æ ‡å¿—ç”¨äº EIP-7702 è´¦æˆ·ï¼Œå¦åˆ™ address(0)\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003efactoryData\u003c/td\u003e\n          \u003ctd\u003ebytes\u003c/td\u003e\n          \u003ctd\u003eå¦‚æœæä¾› factoryï¼Œåˆ™ä¸ºè´¦æˆ·å·¥å‚çš„æ•°æ® OR EIP-7702 åˆå§‹åŒ–æ•°æ®ï¼Œæˆ–ç©ºæ•°ç»„\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ecallData\u003c/td\u003e\n          \u003ctd\u003ebytes\u003c/td\u003e\n          \u003ctd\u003eåœ¨ä¸»è¦æ‰§è¡Œè°ƒç”¨æœŸé—´ä¼ é€’ç»™ sender çš„æ•°æ®\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ecallGasLimit\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eä¸ºä¸»è¦æ‰§è¡Œè°ƒç”¨åˆ†é…çš„ gas é‡\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003everificationGasLimit\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eä¸ºéªŒè¯æ­¥éª¤åˆ†é…çš„ gas é‡\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epreVerificationGas\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eé¢å¤– gas ç”¨äºæ”¯ä»˜ bundler\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003emaxFeePerGas\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eæœ€å¤§ gas è´¹ï¼ˆç±»ä¼¼äº EIP-1559 max_fee_per_gasï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003emaxPriorityFeePerGas\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eæœ€å¤§ä¼˜å…ˆè´¹ï¼ˆç±»ä¼¼äº EIP-1559 max_priority_fee_per_gasï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epaymaster\u003c/td\u003e\n          \u003ctd\u003eaddress\u003c/td\u003e\n          \u003ctd\u003epaymaster åˆçº¦åœ°å€ï¼ˆæˆ–ç©ºï¼Œå¦‚æœ sender è‡ªå·±æ”¯ä»˜ gasï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epaymasterVerificationGasLimit\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eä¸º paymaster éªŒè¯ä»£ç åˆ†é…çš„ gas é‡ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epaymasterPostOpGasLimit\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eä¸º paymaster åæ“ä½œä»£ç åˆ†é…çš„ gas é‡ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epaymasterData\u003c/td\u003e\n          \u003ctd\u003ebytes\u003c/td\u003e\n          \u003ctd\u003epaymaster çš„æ•°æ®ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003esignature\u003c/td\u003e\n          \u003ctd\u003ebytes\u003c/td\u003e\n          \u003ctd\u003eä¼ å…¥ sender ä»¥éªŒè¯æˆæƒçš„æ•°æ®\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cblockquote\u003e\n\u003cp\u003eä¸Šé“¾æ—¶éƒ¨åˆ†å­—æ®µä¼šè¢«æ‰“åŒ…ï¼Œè½¬å˜æˆ \u003ccode\u003ePackedUserOperation\u003c/code\u003e\u003c/p\u003e","title":"EIP-4337"},{"content":" Promise ä¸ Event Loopï¼šåˆ†æ­¥æ·±å…¥æŒ‡å— ç®€ä»‹ JavaScript æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œå´è¦å¤„ç†å¤§é‡å¼‚æ­¥æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€å®šæ—¶å™¨ã€ç”¨æˆ·äº¤äº’ç­‰ï¼‰ã€‚ä¸ºäº†æ—¢ä¸é˜»å¡ä¸»çº¿ç¨‹ã€åˆèƒ½ä¿è¯å›è°ƒæŒ‰é¢„æœŸé¡ºåºæ‰§è¡Œï¼Œè¯­è¨€å’Œè¿è¡Œæ—¶å…±åŒæä¾›äº†ä¸¤å¥—æ ¸å¿ƒæœºåˆ¶ï¼š\nPromise â€”â€” ä»£è¡¨ä¸€ä¸ªâ€œæœªæ¥ä¼šç»“æŸâ€çš„å¼‚æ­¥æ“ä½œï¼Œæä¾›äº†çŠ¶æ€ç®¡ç†ã€é“¾å¼è°ƒç”¨ã€é”™è¯¯ä¼ æ’­ç­‰è¯­ä¹‰ï¼Œæ˜¯ç°ä»£å¼‚æ­¥ç¼–ç¨‹çš„åŸºçŸ³ Event Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ â€”â€” JavaScript è¿è¡Œæ—¶çœŸæ­£çš„è°ƒåº¦ä¸­å¿ƒï¼Œå®ƒå†³å®šäº†åŒæ­¥ä»£ç ã€Promise å›è°ƒï¼ˆå¾®ä»»åŠ¡ï¼‰ã€setTimeout/IO ç­‰ï¼ˆå®ä»»åŠ¡ï¼‰åˆ°åº•åœ¨ä»€ä¹ˆæ—¶æœºè¢«æ¨å…¥è°ƒç”¨æ ˆæ‰§è¡Œ è¿™ä¸¤è€…ç´§å¯†åä½œï¼š\nPromise çš„ .then / .catch / await åç»­å…¨éƒ¨å±äºå¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰ å¾®ä»»åŠ¡ä¸å®ä»»åŠ¡ï¼ˆmacrotaskï¼‰åœ¨ Event Loop ä¸­æœ‰ä¸¥æ ¼çš„ä¼˜å…ˆçº§ï¼šæ¯æ‰§è¡Œå®Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œå¿…é¡»å…ˆæ¸…ç©ºå…¨éƒ¨å¾®ä»»åŠ¡ï¼Œæ‰ä¼šè¿›è¡Œæ¸²æŸ“å¹¶è¿›å…¥ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ æŒæ¡ Promise çš„çŠ¶æ€æœºç»†èŠ‚ + Event Loop çš„å¾®/å®ä»»åŠ¡æ‰§è¡Œé¡ºåºï¼Œå°±ç­‰äºæ‹¿åˆ°äº† JavaScript å¼‚æ­¥ä¸–ç•Œçš„å®Œæ•´â€œæ—¶åºåœ°å›¾â€\næ‰§è¡Œé¡ºåºè¡¨\næ‰§è¡Œé¡ºåº ç±»å‹ å…¸å‹ä»£è¡¨ è§¦å‘æ—¶æœº åŒæ­¥ä»£ç (åŒ…å«Promise executor) console.logã€å˜é‡èµ‹å€¼ã€å‡½æ•°è°ƒç”¨ ç«‹å³æ‰§è¡Œ å¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰ .then/.catchã€await åç»­ã€queueMicrotaskã€MutationObserver å½“å‰å®ä»»åŠ¡ç»“æŸåã€æ¸²æŸ“å‰å…¨éƒ¨æ¸…ç©º æ¸²æŸ“ï¼ˆæµè§ˆå™¨ï¼‰ é¡µé¢é‡ç»˜ã€å¸ƒå±€ å¾®ä»»åŠ¡æ¸…ç©ºåï¼ˆå¯èƒ½è·³è¿‡ï¼‰ å®ä»»åŠ¡ï¼ˆmacrotaskï¼‰ setTimeoutã€setIntervalã€I/Oã€UI äº‹ä»¶ æ¯è½® Event Loop æ‰§è¡Œä¸€ä¸ª Promise æ ¸å¿ƒæœºåˆ¶\nPromise çš„ä¸‰ä¸ªçŠ¶æ€\npending â†’ fulfilled (æˆåŠŸï¼Œè¿”å› value) â†’ rejected (å¤±è´¥ï¼Œè¿”å› reason) æ„é€ å™¨ executor æ˜¯åŒæ­¥æ‰§è¡Œçš„\nnew Promise((resolve, reject) =\u0026gt; { console.log(\u0026#39;executor start\u0026#39;); // ç«‹åˆ»æ‰“å° setTimeout(() =\u0026gt; resolve(100), 3000); console.log(\u0026#39;executor end\u0026#39;); // ç«‹åˆ»æ‰“å° }); ä¸ºä»€ä¹ˆå¿…é¡»åŒæ­¥ï¼Ÿ\nä¸ºäº†è®©ä½ å¯ä»¥åœ¨åˆ›å»º Promise æ—¶ç«‹åˆ»åšåˆå§‹åŒ–ã€å‚æ•°æ ¡éªŒã€æŠ›é”™ç­‰æ“ä½œ\nå†…éƒ¨æ§½ä½\næ§½ä½å å†…å®¹è¯´æ˜ [[PromiseState]] pending / fulfilled / rejected [[PromiseResult]] æˆåŠŸå€¼æˆ–å¤±è´¥åŸå›  [[PromiseFulfillReactions]] å­˜æ”¾æ‰€æœ‰ onFulfilled å›è°ƒ [[PromiseRejectReactions]] å­˜æ”¾æ‰€æœ‰ onRejected å›è°ƒ resolve/reject ç¬¬ä¸€æ¬¡è°ƒç”¨æˆåŠŸåï¼Œåç»­å…¨éƒ¨å¿½ç•¥\nexecutor æŠ›é”™ = è‡ªåŠ¨ reject\nnew Promise(() =\u0026gt; { throw new Error(\u0026#39;boom\u0026#39;); }) .catch(e =\u0026gt; console.log(e.message)); // boom thenable ä¸æ‰å¹³åŒ–\nPromise.resolve({ then(onFulfilled) { setTimeout(() =\u0026gt; onFulfilled(42), 1000); } }).then(console.log); // 1ç§’åæ‰“å° 42 è§„èŒƒä¼šï¼š\nå–å‡º x.then è°ƒç”¨ then.call(x, resolvePromise, rejectPromise) resolvePromise/rejectPromise æ˜¯åŒ…è£…è¿‡çš„â€œåªå…è®¸è°ƒç”¨ä¸€æ¬¡â€çš„å‡½æ•° è¿™å°±æ˜¯é“¾å¼è°ƒç”¨ä¸ä¼šæ— é™åµŒå¥—çš„æ ¹æœ¬åŸå› \nthen / catch / finally ä¸é“¾å¼è°ƒç”¨\nPromise.resolve(1) .then(x =\u0026gt; x + 1) // è¿”å›æ™®é€šå€¼ â†’ æ–° Promise fulfilled(2) .then(x =\u0026gt; new Promise(r =\u0026gt; setTimeout(() =\u0026gt; r(x + 1), 100))) // è¿”å› Promise â†’ ç­‰å¾…å¹¶é‡‡ç”¨ .then(console.log) // æ‰“å°æœ€ç»ˆç»“æœ .catch(console.error) .finally(() =\u0026gt; console.log(\u0026#39;done\u0026#39;)); .catch = .then(undefined, onRejected)\n.finally ä¸ä¼ å€¼ï¼Œå¼‚å¸¸ä¼šç»§ç»­å‘ä¸‹æŠ›\nasync / await æœ¬è´¨\nasync function foo() { console.log(\u0026#39;1\u0026#39;); const a = await 111; console.log(\u0026#39;2\u0026#39;); const b = await 222; console.log(\u0026#39;3\u0026#39;); return a + b; } V8 ç¼–è¯‘åç­‰ä»·äºï¼š\nfunction foo() { console.log(\u0026#39;1\u0026#39;); return Promise.resolve(111).then(a =\u0026gt; { console.log(\u0026#39;2\u0026#39;); return Promise.resolve(222).then(b =\u0026gt; { console.log(\u0026#39;3\u0026#39;); return a + b; }); }); } ç»“è®ºï¼š\nasync function æ°¸è¿œè¿”å› Promise æ¯ä¸€ä¸ª await = æŠŠåé¢çš„ä»£ç åˆ‡å‡ºå»ï¼ŒåŒ…è£…æˆ .then() å›è°ƒ await å³ä¾§ä¸æ˜¯ Promise ä¹Ÿä¼šè¢« Promise.resolve() åŒ…è£… Promise é™æ€æ–¹æ³•å…¨å®¶æ¡¶\næ–¹æ³• è¡Œä¸º æœ€ä½³å®è·µåœºæ™¯ Promise.all å…¨éƒ¨æˆåŠŸæ‰æˆåŠŸï¼Œä»»ä¸€å¤±è´¥ç«‹å³å¤±è´¥ å¹¶å‘è¯·æ±‚å¤šä¸ªå¿…é¡»æˆåŠŸçš„æ¥å£ Promise.allSettled æ°¸è¿œæˆåŠŸï¼Œè¿”å›æ¯ä¸ªç»“æœçš„çŠ¶æ€å’Œå€¼ æ‰¹é‡æ“ä½œã€ç»Ÿè®¡ä¸ŠæŠ¥ã€ä¸æ€•éƒ¨åˆ†å¤±è´¥ Promise.any ç¬¬ä¸€ä¸ªæˆåŠŸå°±æˆåŠŸï¼Œå…¨å¤±è´¥æ‰å¤±è´¥ å¤š CDN åŠ è½½èµ„æºï¼Œè°å¿«ç”¨è° Promise.race ç¬¬ä¸€ä¸ªæœ‰çŠ¶æ€ï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰å°±è¿”å› è¶…æ—¶æ§åˆ¶ã€é˜²è¶…æ—¶ // å¹¶å‘ + ç»“æ„èµ‹å€¼ const [user, posts] = await Promise.all([ fetch(\u0026#39;/user\u0026#39;), fetch(\u0026#39;/posts\u0026#39;) ]); // è¯·æ±‚è¶…æ—¶æ¨¡æ¿ const withTimeout = (p, ms) =\u0026gt; Promise.race([ p, new Promise((_ , reject) =\u0026gt; setTimeout(() =\u0026gt; reject(\u0026#39;è¶…æ—¶\u0026#39;), ms)) ]); Event Loop å®Œæ•´æµç¨‹ï¼ˆæµè§ˆå™¨ç¯å¢ƒï¼‰\næ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆscript æ•´ä½“ã€setTimeout å›è°ƒã€ç‚¹å‡»äº‹ä»¶ç­‰ï¼‰ æ‰§è¡Œå®Œå½“å‰å®ä»»åŠ¡ â†’ è°ƒç”¨æ ˆæ¸…ç©º æ¸…ç©ºå½“å‰æ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆ.thenã€await åç»­ã€queueMicrotask ç­‰ï¼‰ ï¼ˆæµè§ˆå™¨ï¼‰å¯èƒ½è¿›è¡Œæ¸²æŸ“æ›´æ–° ä»å®ä»»åŠ¡é˜Ÿåˆ—å–ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ é‡å¤ä»¥ä¸Šæ­¥éª¤ Node.js å°åŒºåˆ«\nprocess.nextTick æ¯”å¾®ä»»åŠ¡è¿˜ä¼˜å…ˆ setImmediate æ˜¯ Node ç‰¹æœ‰çš„å®ä»»åŠ¡ ç»å…¸ç»¼åˆä¾‹é¢˜\nconsole.log(\u0026#39;start\u0026#39;); setTimeout(() =\u0026gt; console.log(\u0026#39;timeout\u0026#39;), 0); Promise.resolve() .then(() =\u0026gt; console.log(\u0026#39;p1\u0026#39;)) .then(() =\u0026gt; console.log(\u0026#39;p2\u0026#39;)); queueMicrotask(() =\u0026gt; console.log(\u0026#39;micro\u0026#39;)); (async () =\u0026gt; { console.log(\u0026#39;async start\u0026#39;); await 1; console.log(\u0026#39;await after\u0026#39;); })(); console.log(\u0026#39;end\u0026#39;); è¾“å‡ºé¡ºåºï¼š\ns a e p m a p t t s n 1 i w 2 i a y d c a m r n r i e t c o t o u s a t t f a t r e t r å¸¸è§é™·é˜± \u0026amp; æœ€ä½³å®è·µ\né™·é˜± æ­£ç¡®åšæ³• è¯¯ä»¥ä¸º await é˜»å¡ä¸»çº¿ç¨‹ ä¸é˜»å¡ï¼Œåªæ˜¯æš‚åœå½“å‰ async å‡½æ•° å¤šä¸ªç‹¬ç«‹è¯·æ±‚å†™æˆä¸²è¡Œ await å¹¶è¡Œå‘èµ· â†’ Promise.all èšåˆ å¾®ä»»åŠ¡æ— é™è‡ªæˆ‘è°ƒåº¦ é¿å… then(() =\u0026gt; then(...)) æ— é™å¾ªç¯ æ²¡å¤„ç† rejected Promise å…¨å±€ç›‘å¬ unhandledrejection è¿”å› thenable å¯¼è‡´æ„å¤–æ‰å¹³åŒ– æ˜ç¡®çŸ¥é“è‡ªå·±åœ¨å¹²ä»€ä¹ˆ ","permalink":"http://localhost:1313/findings/promisetoeventloop/","summary":"\u003chr\u003e\n\u003ch1 id=\"promise-ä¸-event-loopåˆ†æ­¥æ·±å…¥æŒ‡å—\"\u003ePromise ä¸ Event Loopï¼šåˆ†æ­¥æ·±å…¥æŒ‡å—\u003c/h1\u003e\n\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eJavaScript æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œå´è¦å¤„ç†å¤§é‡å¼‚æ­¥æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€å®šæ—¶å™¨ã€ç”¨æˆ·äº¤äº’ç­‰ï¼‰ã€‚ä¸ºäº†æ—¢ä¸é˜»å¡ä¸»çº¿ç¨‹ã€åˆèƒ½ä¿è¯å›è°ƒæŒ‰é¢„æœŸé¡ºåºæ‰§è¡Œï¼Œè¯­è¨€å’Œè¿è¡Œæ—¶å…±åŒæä¾›äº†ä¸¤å¥—æ ¸å¿ƒæœºåˆ¶ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePromise\u003c/strong\u003e â€”â€” ä»£è¡¨ä¸€ä¸ªâ€œæœªæ¥ä¼šç»“æŸâ€çš„å¼‚æ­¥æ“ä½œï¼Œæä¾›äº†çŠ¶æ€ç®¡ç†ã€é“¾å¼è°ƒç”¨ã€é”™è¯¯ä¼ æ’­ç­‰è¯­ä¹‰ï¼Œæ˜¯ç°ä»£å¼‚æ­¥ç¼–ç¨‹çš„åŸºçŸ³\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eEvent Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰\u003c/strong\u003e â€”â€” JavaScript è¿è¡Œæ—¶çœŸæ­£çš„è°ƒåº¦ä¸­å¿ƒï¼Œå®ƒå†³å®šäº†åŒæ­¥ä»£ç ã€Promise å›è°ƒï¼ˆå¾®ä»»åŠ¡ï¼‰ã€setTimeout/IO ç­‰ï¼ˆå®ä»»åŠ¡ï¼‰åˆ°åº•åœ¨ä»€ä¹ˆæ—¶æœºè¢«æ¨å…¥è°ƒç”¨æ ˆæ‰§è¡Œ\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eè¿™ä¸¤è€…ç´§å¯†åä½œï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePromise çš„ \u003ccode\u003e.then\u003c/code\u003e / \u003ccode\u003e.catch\u003c/code\u003e / \u003ccode\u003eawait\u003c/code\u003e åç»­å…¨éƒ¨å±äº\u003cstrong\u003eå¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eå¾®ä»»åŠ¡ä¸å®ä»»åŠ¡ï¼ˆmacrotaskï¼‰åœ¨ Event Loop ä¸­æœ‰ä¸¥æ ¼çš„ä¼˜å…ˆçº§ï¼š\u003cstrong\u003eæ¯æ‰§è¡Œå®Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œå¿…é¡»å…ˆæ¸…ç©ºå…¨éƒ¨å¾®ä»»åŠ¡ï¼Œæ‰ä¼šè¿›è¡Œæ¸²æŸ“å¹¶è¿›å…¥ä¸‹ä¸€ä¸ªå®ä»»åŠ¡\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæŒæ¡ Promise çš„çŠ¶æ€æœºç»†èŠ‚ + Event Loop çš„å¾®/å®ä»»åŠ¡æ‰§è¡Œé¡ºåºï¼Œå°±ç­‰äºæ‹¿åˆ°äº† JavaScript å¼‚æ­¥ä¸–ç•Œçš„å®Œæ•´â€œæ—¶åºåœ°å›¾â€\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eæ‰§è¡Œé¡ºåºè¡¨\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ‰§è¡Œé¡ºåº\u003c/th\u003e\n          \u003cth\u003eç±»å‹\u003c/th\u003e\n          \u003cth\u003eå…¸å‹ä»£è¡¨\u003c/th\u003e\n          \u003cth\u003eè§¦å‘æ—¶æœº\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003eåŒæ­¥ä»£ç (åŒ…å«Promise executor)\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003econsole.log\u003c/code\u003eã€å˜é‡èµ‹å€¼ã€å‡½æ•°è°ƒç”¨\u003c/td\u003e\n          \u003ctd\u003eç«‹å³æ‰§è¡Œ\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003eå¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e.then/.catch\u003c/code\u003eã€\u003ccode\u003eawait\u003c/code\u003e åç»­ã€\u003ccode\u003equeueMicrotask\u003c/code\u003eã€\u003ccode\u003eMutationObserver\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eå½“å‰å®ä»»åŠ¡ç»“æŸåã€æ¸²æŸ“å‰å…¨éƒ¨æ¸…ç©º\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003eæ¸²æŸ“ï¼ˆæµè§ˆå™¨ï¼‰\u003c/td\u003e\n          \u003ctd\u003eé¡µé¢é‡ç»˜ã€å¸ƒå±€\u003c/td\u003e\n          \u003ctd\u003eå¾®ä»»åŠ¡æ¸…ç©ºåï¼ˆå¯èƒ½è·³è¿‡ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003eå®ä»»åŠ¡ï¼ˆmacrotaskï¼‰\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003esetTimeout\u003c/code\u003eã€\u003ccode\u003esetInterval\u003c/code\u003eã€\u003ccode\u003eI/O\u003c/code\u003eã€\u003ccode\u003eUI äº‹ä»¶\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæ¯è½® Event Loop æ‰§è¡Œä¸€ä¸ª\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003cp\u003ePromise æ ¸å¿ƒæœºåˆ¶\u003c/p\u003e\n\u003cp\u003ePromise çš„ä¸‰ä¸ªçŠ¶æ€\u003c/p\u003e","title":"Promise ä¸ Event Loop çš„è”ç³»ä¸ç†è§£"},{"content":" æ¨¡å—æ¦‚è§ˆ ğŸ‘‰ æ¨¡å—ä»£ç ä»“åº“ï¼ˆwalletManagementï¼‰\né¡¹ç›® å†…å®¹ æ¨¡å—åç§° é’±åŒ…ç®¡ç†ï¼ˆWallet Managementï¼‰ è·¯ç”±è·¯å¾„ /walletManagement åŠŸèƒ½èŒƒå›´ éšæœº HD é’±åŒ…ç”Ÿæˆã€åŠ©è®°è¯å±•ç¤ºã€é’±åŒ…åŠ å¯†/è§£å¯†ã€åŠ å¯†é’±åŒ…ä¸åœ°å€æœ¬åœ°æŒä¹…åŒ–ï¼ˆIndexedDBï¼‰ è®¿é—®æƒé™ ä¾èµ–æœ¬åœ°ç”¨æˆ·å¯†ç è®°å½•ï¼ˆuserManagement æ¨¡å—ï¼‰ï¼›è‹¥æ— ç”¨æˆ·è®°å½•åˆ™é‡å®šå‘ /userManagement ç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£ app/walletManagement/ â”œâ”€â”€ components â”‚ â”œâ”€â”€ GenerateWallet.tsx | â”œâ”€â”€ ImportWallet.tsx â”œâ”€â”€ lib â”‚ â”œâ”€â”€ cryptoWallet.ts â”‚ â”œâ”€â”€ generateWallet.ts | â”œâ”€â”€ importWallet.ts â”‚ â”œâ”€â”€ saveAddress.ts â”‚ â””â”€â”€ saveWallet.ts â”œâ”€â”€ page.tsx â””â”€â”€ test-cryptoWallet.ts æ–‡ä»¶è·¯å¾„ èŒè´£è¯¦è§£ page.tsx è·¯ç”±å…¥å£ï¼Œæ¸²æŸ“ GenerateWallet ç»„ä»¶ï¼ˆé¡µé¢æœ¬èº«ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼‰ components/GenerateWallet.tsx æ ¸å¿ƒ UI ä¸äº¤äº’ï¼šå¯†ç æ ¡éªŒ â†’ ç”Ÿæˆé’±åŒ… â†’ åŠ å¯† â†’ ä¿å­˜ â†’ åŠ©è®°è¯å±•ç¤ºï¼›åŒ…å«ç”¨æˆ·å‹å¥½æç¤ºä¸é”™è¯¯å¤„ç† lib/generateWallet.ts ä½¿ç”¨ ethers + bip39 ç”Ÿæˆéšæœº HD é’±åŒ…ã€è‹±æ–‡ä¸ä¸­æ–‡åŠ©è®°è¯å¹¶åšä¸€è‡´æ€§æ ¡éªŒ lib/cryptoWallet.ts æä¾›é’±åŒ…åŠ å¯†/è§£å¯†æ¥å£ï¼Œå®šä¹‰ IEncryptedWallet ç±»å‹ï¼ˆè´Ÿè´£ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿå¯†é’¥å¯¹ wallet è¿›è¡Œ AES-GCM åŠ å¯†ï¼‰ lib/saveWallet.ts IndexedDB å°è£…ï¼šå¯¹ Wallets è¡¨ï¼ˆæˆ– storeï¼‰è¿›è¡Œä¿å­˜/è¯»å–/åˆ é™¤/åˆ—å‡º lib/saveAddress.ts IndexedDB å°è£…ï¼šå¯¹ Addresses è¡¨ä¿å­˜åœ°å€è®°å½•ã€è¯»å–ã€åˆ é™¤ã€åˆ—å‡º test-cryptoWallet.ts å•å…ƒæµ‹è¯•ï¼šéªŒè¯åŠ å¯†/è§£å¯†ã€å¯†é’¥æ´¾ç”Ÿä¸€è‡´æ€§ã€å¼‚å¸¸åœºæ™¯ï¼ˆè§£å¯†å¤±è´¥ã€ç¯¡æ”¹æ£€æµ‹ï¼‰ lib/importWallet.ts ä½¿ç”¨ bip39 å’Œ ethers ä»è‹±æ–‡æˆ–ä¸­æ–‡åŠ©è®°è¯å¯¼å…¥ HDNodeWalletï¼ˆä¸­æ–‡å…ˆè½¬æ¢ä¸ºè‹±æ–‡åŠ©è®°è¯å†å¯¼å…¥ï¼‰ 1. è¯¦ç»†äº¤äº’æµç¨‹ 1.1 é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥ ç”¨æˆ·è®¿é—® /walletManagement\npage.tsx æ¸²æŸ“ GenerateWallet\nç»„ä»¶åŠ è½½æ—¶ä¼šæ£€æŸ¥æœ¬åœ°æ˜¯å¦å·²å­˜åœ¨ç”¨æˆ·å¯†ç è®°å½•ï¼ˆé€šè¿‡ userManagement çš„ getUserRecord()ï¼‰\nè‹¥æ— ç”¨æˆ·è®°å½•ï¼šé‡å®šå‘åˆ° /userManagement è¦æ±‚å…ˆè®¾ç½®æœ¬åœ°å¯†ç ï¼ˆé¦–æ¬¡åˆå§‹åŒ–ï¼‰ è‹¥æœ‰ç”¨æˆ·è®°å½•ï¼šç»§ç»­æ˜¾ç¤ºç”Ÿæˆé’±åŒ…æµç¨‹ï¼ˆéœ€ç”¨æˆ·è¾“å…¥æœ¬åœ°å¯†ç ç”¨äºéªŒè¯ï¼‰ 1.2 é’±åŒ…ç”Ÿæˆä¸å¯¼å…¥æµç¨‹ æ­¥éª¤ ç”Ÿæˆé’±åŒ…ï¼ˆGenerateï¼‰ å¯¼å…¥é’±åŒ…ï¼ˆImportï¼‰ 1 ç”¨æˆ·è¾“å…¥æœ¬åœ°å¯†ç  â†’ ç‚¹å‡»ã€Œç”Ÿæˆé’±åŒ…ã€ ç”¨æˆ·è¾“å…¥æœ¬åœ°å¯†ç  â†’ å¡«å†™/ç²˜è´´åŠ©è®°è¯ â†’ ç‚¹å‡»ã€Œå¯¼å…¥é’±åŒ…ã€ 2 å®¢æˆ·ç«¯å¯¹å¯†ç è¿›è¡Œ SHA-256 å“ˆå¸Œï¼Œä¸æœ¬åœ° userRecord.passwordHash æ¯”å¯¹ åŒå·¦ï¼Œå®Œå…¨ä¸€è‡´çš„å¯†ç æ ¡éªŒé€»è¾‘ 3 æ ¡éªŒé€šè¿‡ â†’ è°ƒç”¨ generateWallet()\nâ†’ ä½¿ç”¨ crypto.getRandomValues ç”Ÿæˆéšæœºç†µ\nâ†’ åŒæ—¶ç”Ÿæˆè‹±æ–‡ + ä¸­æ–‡åŠ©è®°è¯\nâ†’ è¿”å› WalletResultï¼ˆå« HDNodeWalletã€è‹±æ–‡åŠ©è®°è¯ã€ä¸­æ–‡åŠ©è®°è¯ï¼‰ æ ¡éªŒé€šè¿‡ â†’ è¯»å–ç”¨æˆ·å¡«å†™çš„åŠ©è®°è¯ï¼ˆæ”¯æŒ 12/24 è¯ã€è‡ªåŠ¨è¯†åˆ«ä¸­è‹±æ–‡ï¼‰\nâ†’ è°ƒç”¨ importWallet_en() æˆ– importWallet_zh()ï¼ˆä¸­æ–‡ä¼šå…ˆè½¬ç†µå†è½¬è‹±æ–‡ï¼‰\nâ†’ å¾—åˆ°ç­‰ä»·çš„ HDNodeWallet å®ä¾‹ 4 è°ƒç”¨ encryptWallet(wallet, password)\nâ†’ PBKDF2 æ´¾ç”Ÿå¯†é’¥ + AES-256-GCM åŠ å¯†æ•´ä¸ªé’±åŒ…å¯¹è±¡ å®Œå…¨ç›¸åŒï¼šencryptWallet(wallet, password)ï¼ˆä»£ç å¤ç”¨ 100%ï¼‰ 5 å¹¶è¡Œæ‰§è¡Œï¼š\nâ€¢ countWallet() æŸ¥è¯¢å·²æœ‰é’±åŒ…æ•°é‡\nâ€¢ åŠ å¯†é’±åŒ… åŒå·¦ï¼šå¹¶è¡Œæ‰§è¡Œ encryptWallet() ä¸ countWallet() 6 æ ¹æ®æ•°é‡å†³å®š keyPathï¼š\n0 ä¸ª â†’ '0'ï¼Œå…¶ä½™ â†’ crypto.randomUUID() å®Œå…¨ä¸€è‡´çš„ keyPath ç­–ç•¥ 7 å¹¶è¡Œä¿å­˜ï¼š\nâ€¢ saveWallet(keyPath, encryptedWallet)\nâ€¢ saveAddress(addressRecord) å®Œå…¨ç›¸åŒçš„å¹¶è¡Œå†™å…¥é€»è¾‘ï¼ˆWallets + Addresses è¡¨ï¼‰ 8 æ¸…ç†å†…å­˜ä¸­çš„æ˜æ–‡åŠ©è®°è¯ä¸ç§é’¥\næ˜¾ç¤ºã€Œç”ŸæˆæˆåŠŸã€\næä¾›å¯åˆ‡æ¢çš„è‹±æ–‡/ä¸­æ–‡åŠ©è®°è¯å±•ç¤ºï¼ˆä»…ç”¨äºå¤‡ä»½ï¼‰ æ¸…ç†è¾“å…¥æ¡†\næ˜¾ç¤ºã€Œå¯¼å…¥æˆåŠŸã€\næä¾›ç›¸åŒçš„åŠ©è®°è¯æ ¸å¯¹ç•Œé¢ï¼ˆè‹±æ–‡ â†” ä¸­æ–‡å¯åˆ‡æ¢ï¼‰ 9 ç”¨æˆ·æ‰‹åŠ¨å¤‡ä»½åŠ©è®°è¯ â†’ ç‚¹å‡»ã€Œå›åˆ°ä¸»é¡µã€ ç”¨æˆ·æ ¸å¯¹åŠ©è®°è¯æ— è¯¯ â†’ ç‚¹å‡»ã€Œå›åˆ°ä¸»é¡µã€æˆ–ã€Œå‰å¾€ç™»å½•ã€ 1.3 å¼‚å¸¸/è¾¹ç•Œåœºæ™¯ å¯†ç ä¸ºç©ºæˆ–æ ¡éªŒå¤±è´¥ï¼šé˜»æ­¢ç”Ÿæˆå¹¶å±•ç¤ºé”™è¯¯æç¤º åŠ å¯†ä¿å­˜å¤±è´¥ï¼ˆIO/Quotaï¼‰ï¼šå›æ»šæˆ–æ¸…ç†å·²å†™å…¥çš„éƒ¨åˆ†æ•°æ®ï¼Œæç¤ºç”¨æˆ·å¹¶è®°å½•é”™è¯¯æ—¥å¿—ï¼ˆå¯é€‰ä¸ŠæŠ¥ï¼‰ åŠ©è®°è¯ä¸€è‡´æ€§æ£€æŸ¥å¤±è´¥ï¼ˆç†è®ºä¸Šåœ¨ generateWallet å·²æ ¡éªŒï¼‰ï¼šæŠ›å‡ºå¼‚å¸¸å¹¶æç¤ºé‡æ–°ç”Ÿæˆ é‡å¤ä¿å­˜/é‡å¤æŒ‰é’®ç‚¹å‡»ï¼šä½¿ç”¨ loading çŠ¶æ€ç¦æ­¢é‡å¤æ“ä½œ 2. æ•°æ®æ¨¡å‹ï¼ˆIndexedDB è¡¨ç»“æ„ï¼‰ Wallets è¡¨ï¼ˆTABLE_WALLETS = 'Wallets'ï¼‰ key: stringï¼ˆå½“å‰å®ç°ä»¥ count() ä½œä¸ºè‡ªå¢ keyï¼Œå†è½¬ String å­˜å‚¨ï¼‰ value (IEncryptedWallet)ï¼ˆå»ºè®®ç¤ºä¾‹ï¼‰ interface IEncryptedWallet { version: number; // ç‰ˆæœ¬å·ï¼Œæ–¹ä¾¿æ—¥åè¿ç§» cipher: \u0026#39;AES-GCM\u0026#39;; // åŠ å¯†ç®—æ³•è¯´æ˜ iv: string; // base64/hex salt: string; // ç”¨äº KDF çš„ salt ciphertext: string; // åŠ å¯†åçš„ payloadï¼ˆå¯èƒ½åŒ…å«ç§é’¥ã€pathã€address ç­‰ï¼‰ meta?: { createdAt: string; // ISO æ—¶é—´ address?: string; } } Addresses è¡¨ï¼ˆTABLE_ADDRESSES = 'Addresses'ï¼‰ key: stringï¼ˆåŒä¸Šï¼‰ value (AddressRecord) interface AddressRecord { wallet: { type: string; // \u0026#39;HDNodeWallet\u0026#39; KeyPath: string; // æŒ‡å‘ Wallets è¡¨çš„ keyï¼ˆStringï¼‰ }; address: string; // 0x... } æ³¨æ„ï¼šå½“å‰å®ç°ä½¿ç”¨ storage.count() ä½œä¸ºè‡ªå¢é”®ï¼ˆkey = countï¼‰ï¼Œä¼˜ç‚¹ç®€å•ï¼›ç¼ºç‚¹æ˜¯åœ¨åˆ é™¤åå¯èƒ½å‡ºç° key ç¼éš™ã€å¹¶å‘å†™å…¥é£é™©ã€‚å¯è€ƒè™‘åç»­æ”¹ä¸º UUID æˆ–è‡ªå¢ sequence ç®¡ç†ã€‚\n3. æ ¸å¿ƒåº“è¯´æ˜ï¼ˆlib/*.tsï¼‰ generateWallet.ts åŠŸèƒ½ï¼šåŸºäº ethers.Wallet.createRandom() ç”Ÿæˆ HD é’±åŒ…ï¼Œè¯»å–è‹±æ–‡åŠ©è®°è¯ entropyï¼Œä½¿ç”¨ bip39 ä¸­æ–‡è¯åº“ç”Ÿæˆä¸­æ–‡åŠ©è®°è¯ï¼Œå¹¶åš entropy ä¸€è‡´æ€§æ ¡éªŒ è¿”å›ï¼šWalletResult { wallet: HDNodeWallet, mnemonic_en, mnemonic_zh } cryptoWallet.ts åŠŸèƒ½ï¼šé’±åŒ…åŠ å¯†ä¸è§£å¯†é€»è¾‘ï¼ˆAES-GCMï¼‰ä¸å¯†é’¥æ´¾ç”Ÿï¼ˆåº”ä½¿ç”¨ PBKDF2 / scrypt / argon2 ç±»å®‰å…¨ KDFï¼Œè‡³å°‘å¸¦ salt ä¸å¤šè½®æ¬¡ï¼‰ã€‚\nå¯¼å‡ºï¼š\nencryptWallet(wallet: HDNodeWallet, password: string): Promise\u0026lt;IEncryptedWallet\u0026gt; decryptWallet(enc: IEncryptedWallet, password: string): Promise\u0026lt;HDNodeWallet\u0026gt; æµ‹è¯•ç‚¹ï¼šè§£å¯†åé’±åŒ…åœ°å€ä¸åŠ å¯†å‰ä¸€è‡´ï¼›ç¯¡æ”¹ ciphertext/iv/salt å¯¼è‡´è§£å¯†å¤±è´¥ï¼ˆé”™è¯¯æŠ›å‡ºï¼‰\nsaveWallet.ts / saveAddress.ts åŠŸèƒ½ï¼šIndexedDB CRUD å°è£…ï¼ˆsave, get, delete, keys, values, count ç­‰ï¼‰ çº¦å®šï¼šsave* è¿”å›æ•°å­— keyï¼ˆå½“å‰å®ç°ä¸º count()ï¼‰ï¼Œget* è¿”å›ç›¸åº”è®°å½•æˆ– null/undefined 4. å®‰å…¨è®¾è®¡åŸåˆ™ å¯†ç æ°¸ä¸æ˜æ–‡å­˜ç›˜ï¼šä»…å­˜å‚¨å¯†ç çš„ SHA-256 å“ˆå¸Œï¼ˆç”¨äºç™»å½•/æ ¡éªŒï¼‰ï¼Œç”¨äºæ´¾ç”Ÿå¯†é’¥çš„ salt ä¸æ´¾ç”Ÿå‚æ•°ä¹Ÿåº”å­˜å‚¨ï¼Œä½†ä¸ä¿å­˜æ˜æ–‡å¯†ç  åŠ©è®°è¯/ç§é’¥æœ€å°ä¿ç•™æ—¶é—´ï¼šåŠ©è®°è¯ä¸ç§é’¥ä»…åœ¨å†…å­˜ä¸­å­˜åœ¨å¹¶åœ¨ä½¿ç”¨åç«‹å³è¦†ç›–/é‡Šæ”¾ï¼ˆå°½é‡é¿å…é•¿æ—¶é©»ç•™ï¼‰ åŠ å¯†å­˜å‚¨ï¼šæ‰€æœ‰æ•æ„Ÿ payload ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿå¯†é’¥ï¼ˆKDFï¼‰è¿›è¡Œ AES-GCM åŠ å¯†å¹¶å­˜å‚¨ï¼›åŠ å¯†å…ƒä¿¡æ¯ï¼ˆsalt, ivï¼‰å¯ä¸ ciphertext ä¸€èµ·å­˜ é˜²æ­¢ä¾§ä¿¡é“æ³„éœ²ï¼šé¿å…åœ¨æ§åˆ¶å°/æ—¥å¿—æ‰“å°åŠ©è®°è¯ã€ç§é’¥æˆ–å®Œæ•´è§£å¯† payload ä¸€é”®åˆ é™¤æœ¬åœ°æ•°æ®ï¼šæä¾›å¿˜è®°å¯†ç /é‡ç½®åŠŸèƒ½ï¼Œå½»åº•åˆ é™¤ Walletsã€Addressesã€user record ç‰ˆæœ¬ä¸è¿ç§»ï¼šåŠ å¯†æ•°æ®å¸¦ version å­—æ®µï¼Œä¾¿äºå°†æ¥æ›´æ¢åŠ å¯†ç­–ç•¥æˆ– KDF å‚æ•°æ—¶è¿›è¡Œè¿ç§» æœ€å°æƒé™ï¼šæ¨¡å—ä»…åšæœ¬åœ°ç®¡ç†ï¼Œä¸è¿›è¡Œç½‘ç»œåŒæ­¥ï¼ˆé™¤éç”¨æˆ·æ˜¾å¼å¯¼å‡ºå¹¶ä¸Šä¼ ï¼‰ï¼Œé¿å…è¿œç«¯æ³„éœ²é£é™© ","permalink":"http://localhost:1313/projects/0907wallet/walletmanagement/","summary":"\u003chr\u003e\n\u003ch1 id=\"æ¨¡å—æ¦‚è§ˆ\"\u003eæ¨¡å—æ¦‚è§ˆ\u003c/h1\u003e\n\u003cp\u003eğŸ‘‰ \u003ca href=\"https://github.com/cgcj0907/0907-Wallet/tree/main/app/walletManagement\"\u003eæ¨¡å—ä»£ç ä»“åº“ï¼ˆwalletManagementï¼‰\u003c/a\u003e\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eé¡¹ç›®\u003c/th\u003e\n          \u003cth\u003eå†…å®¹\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eæ¨¡å—åç§°\u003c/td\u003e\n          \u003ctd\u003eé’±åŒ…ç®¡ç†ï¼ˆWallet Managementï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè·¯ç”±è·¯å¾„\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e/walletManagement\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eåŠŸèƒ½èŒƒå›´\u003c/td\u003e\n          \u003ctd\u003eéšæœº HD é’±åŒ…ç”Ÿæˆã€åŠ©è®°è¯å±•ç¤ºã€é’±åŒ…åŠ å¯†/è§£å¯†ã€åŠ å¯†é’±åŒ…ä¸åœ°å€æœ¬åœ°æŒä¹…åŒ–ï¼ˆIndexedDBï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè®¿é—®æƒé™\u003c/td\u003e\n          \u003ctd\u003eä¾èµ–æœ¬åœ°ç”¨æˆ·å¯†ç è®°å½•ï¼ˆuserManagement æ¨¡å—ï¼‰ï¼›è‹¥æ— ç”¨æˆ·è®°å½•åˆ™é‡å®šå‘ \u003ccode\u003e/userManagement\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2 id=\"ç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£\"\u003eç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£\u003c/h2\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-cosole\" data-lang=\"cosole\"\u003eapp/walletManagement/\nâ”œâ”€â”€ components\nâ”‚   â”œâ”€â”€ GenerateWallet.tsx\n|   â”œâ”€â”€ ImportWallet.tsx\nâ”œâ”€â”€ lib\nâ”‚   â”œâ”€â”€ cryptoWallet.ts\nâ”‚   â”œâ”€â”€ generateWallet.ts\n|   â”œâ”€â”€ importWallet.ts\nâ”‚   â”œâ”€â”€ saveAddress.ts\nâ”‚   â””â”€â”€ saveWallet.ts\nâ”œâ”€â”€ page.tsx\nâ””â”€â”€ test-cryptoWallet.ts\n\u003c/code\u003e\u003c/pre\u003e\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ–‡ä»¶è·¯å¾„\u003c/th\u003e\n          \u003cth\u003eèŒè´£è¯¦è§£\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003epage.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eè·¯ç”±å…¥å£ï¼Œæ¸²æŸ“ GenerateWallet ç»„ä»¶ï¼ˆé¡µé¢æœ¬èº«ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003ecomponents/GenerateWallet.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæ ¸å¿ƒ UI ä¸äº¤äº’ï¼šå¯†ç æ ¡éªŒ â†’ ç”Ÿæˆé’±åŒ… â†’ åŠ å¯† â†’ ä¿å­˜ â†’ åŠ©è®°è¯å±•ç¤ºï¼›åŒ…å«ç”¨æˆ·å‹å¥½æç¤ºä¸é”™è¯¯å¤„ç†\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/generateWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eä½¿ç”¨ ethers + bip39 ç”Ÿæˆéšæœº HD é’±åŒ…ã€è‹±æ–‡ä¸ä¸­æ–‡åŠ©è®°è¯å¹¶åšä¸€è‡´æ€§æ ¡éªŒ\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/cryptoWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæä¾›é’±åŒ…åŠ å¯†/è§£å¯†æ¥å£ï¼Œå®šä¹‰ \u003ccode\u003eIEncryptedWallet\u003c/code\u003e ç±»å‹ï¼ˆè´Ÿè´£ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿå¯†é’¥å¯¹ wallet è¿›è¡Œ AES-GCM åŠ å¯†ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/saveWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eIndexedDB å°è£…ï¼šå¯¹ \u003ccode\u003eWallets\u003c/code\u003e è¡¨ï¼ˆæˆ– storeï¼‰è¿›è¡Œä¿å­˜/è¯»å–/åˆ é™¤/åˆ—å‡º\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/saveAddress.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eIndexedDB å°è£…ï¼šå¯¹ \u003ccode\u003eAddresses\u003c/code\u003e è¡¨ä¿å­˜åœ°å€è®°å½•ã€è¯»å–ã€åˆ é™¤ã€åˆ—å‡º\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003etest-cryptoWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eå•å…ƒæµ‹è¯•ï¼šéªŒè¯åŠ å¯†/è§£å¯†ã€å¯†é’¥æ´¾ç”Ÿä¸€è‡´æ€§ã€å¼‚å¸¸åœºæ™¯ï¼ˆè§£å¯†å¤±è´¥ã€ç¯¡æ”¹æ£€æµ‹ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/importWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eä½¿ç”¨ bip39 å’Œ ethers ä»è‹±æ–‡æˆ–ä¸­æ–‡åŠ©è®°è¯å¯¼å…¥ HDNodeWalletï¼ˆä¸­æ–‡å…ˆè½¬æ¢ä¸ºè‹±æ–‡åŠ©è®°è¯å†å¯¼å…¥ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-è¯¦ç»†äº¤äº’æµç¨‹\"\u003e1. è¯¦ç»†äº¤äº’æµç¨‹\u003c/h2\u003e\n\u003ch3 id=\"11-é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥\"\u003e1.1 é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eç”¨æˆ·è®¿é—® \u003ccode\u003e/walletManagement\u003c/code\u003e\u003c/p\u003e","title":"0907 Wallet é’±åŒ…ç®¡ç†æ¨¡å—è®¾è®¡"},{"content":"ç®€ä»‹ åœ¨åšå¯†ç å­˜å‚¨çš„æ—¶å€™ï¼Œæˆ‘é‡åˆ°äº†ä¸‰ç§å¸¸è§çš„æ•°æ®è¡¨ç¤ºæ–¹å¼ï¼šSHA256ã€Base64 å’Œ Uint8Arrayï¼ˆç®€ç§° Uint8ï¼‰ã€‚å®ƒä»¬å„æœ‰ç”¨é€”å’Œç‰¹ç‚¹ï¼Œäºæ˜¯å†™ä¸‹è¿™ç¯‡æ–‡ç« æ¥æ€»ç»“ä¸€ä¸‹ã€‚\nSHA256 SHA256 æ˜¯ç°ä»£äº’è”ç½‘å¹¿æ³›ä½¿ç”¨çš„åŠ å¯†å“ˆå¸Œç®—æ³•ï¼Œä¾‹å¦‚åœ¨åŒºå—é“¾ã€å¯†ç å­˜å‚¨å’Œæ•°æ®å®Œæ•´æ€§éªŒè¯ä¸­éƒ½å¾ˆå¸¸è§ã€‚\nç‰¹ç‚¹ï¼š\nå°†ä»»æ„é•¿åº¦çš„è¾“å…¥æ•°æ®ç»è¿‡æ•°å­¦è¿ç®—åï¼Œè¾“å‡º 256 ä½äºŒè¿›åˆ¶æ•°ï¼ˆ32 å­—èŠ‚ï¼‰ã€‚\nå‡ ä¹ä¸å¯é€†ï¼Œæ„å‘³ç€å³ä½¿æ‹¿åˆ° SHA256 çš„è¾“å‡ºï¼Œä¹Ÿå¾ˆéš¾åæ¨å‡ºåŸå§‹è¾“å…¥ã€‚\nç¤ºä¾‹è¾“å‡ºï¼ˆä»¥åå…­è¿›åˆ¶è¡¨ç¤ºï¼‰ï¼š\ne 3 b 0 c 4 4 2 9 8 f c 1 c 1 4 9 a f b f 4 c 8 9 9 6 f b 9 2 4 2 7 a e 4 1 e 4 6 4 9 b 9 3 4 c a 4 9 5 9 9 1 b 7 8 5 2 b 8 5 5 ç¼ºç‚¹ï¼šå¯è¯»æ€§å·®ï¼Œå°¤å…¶æ˜¯åœ¨å‰ç«¯éœ€è¦æ˜¾ç¤ºæˆ–ä¼ è¾“æ—¶ä¸æ–¹ä¾¿ã€‚\nå› æ­¤ï¼Œé€šå¸¸ä¼šé…åˆ Base64 æˆ–åå…­è¿›åˆ¶è¡¨ç¤ºæ¥æ–¹ä¾¿å­˜å‚¨å’Œå±•ç¤ºã€‚\nBase64 Base64 æ˜¯ä¸€ç§å°†äºŒè¿›åˆ¶æ•°æ®ç¼–ç ä¸ºå¯æ‰“å° ASCII å­—ç¬¦çš„æ–¹å¼ã€‚\nç‰¹ç‚¹ï¼š\næ¯ 6 ä½äºŒè¿›åˆ¶æ•°æ˜ å°„ä¸ºä¸€ä¸ªå­—ç¬¦ï¼Œå­—ç¬¦é›†åŒ…å«ï¼š\nA - Z , a - z , 0 - 9 , + , / ä»¥åŠ = ç”¨ä½œå¡«å……ï¼Œä½¿é•¿åº¦ä¸º 4 çš„å€æ•°ã€‚\nå¯ä»¥å°† SHA256 çš„ 32 å­—èŠ‚ï¼ˆ256 ä½ï¼‰è¾“å‡ºç¼–ç ä¸º 44 ä¸ª Base64 å­—ç¬¦ã€‚\nä¸ºä»€ä¹ˆæ˜¯ 44 ä¸ªè€Œä¸æ˜¯ 43 ä¸ªï¼ŸåŸå› å¦‚ä¸‹ï¼š\nBase64 æŒ‰ æ¯ 3 ä¸ªå­—èŠ‚ï¼ˆ24 ä½ï¼‰ä¸ºä¸€ç»„ æ¥ç¼–ç ï¼Œæ¯ç»„ä¼šç”Ÿæˆ 4 ä¸ª Base64 å­—ç¬¦ã€‚\nSHA256 è¾“å‡º 32 å­—èŠ‚ â†’ å¯ä»¥åˆ†ä¸º 10 ç»„å®Œæ•´çš„ 3 å­—èŠ‚ + å‰©ä½™ 2 å­—èŠ‚ã€‚\nå‰©ä½™ 2 å­—èŠ‚ä¼šç”Ÿæˆ 3 ä¸ª Base64 å­—ç¬¦ï¼Œæœ€åç”¨ = å¡«å……åˆ° 4 ä¸ªå­—ç¬¦ã€‚\næ€»é•¿åº¦ = 10Ã—4 + 4 = 44\nç¤ºä¾‹è¾“å‡ºï¼ˆBase64 ç¼–ç ï¼‰ï¼š\n4 7 D E Q p j 8 H B S a + / T I m W + 5 J C e u Q e R k m 5 N M p J W Z G 3 h S u F U = ä¼˜ç‚¹ï¼šé•¿åº¦æ›´çŸ­ã€å¯è¯»æ€§é«˜ã€é€‚åˆå‰ç«¯æ˜¾ç¤ºå’Œä¼ è¾“ã€‚\nUint8Arrayï¼ˆUint8ï¼‰ Uint8Array æ˜¯ JavaScript ä¸­çš„ å­—èŠ‚æ•°ç»„ç±»å‹ã€‚\nç‰¹ç‚¹ï¼š\næ¯ä¸ªå…ƒç´ å ç”¨ 8 ä½ï¼ˆ1 å­—èŠ‚ï¼‰\nç”¨äºå­˜å‚¨åŸå§‹äºŒè¿›åˆ¶æ•°æ®ï¼Œä¾‹å¦‚ SHA256 è¾“å‡ºã€æ–‡ä»¶ã€åŠ å¯†å¯†é’¥ç­‰\nä¸ Base64 ä¸åŒï¼Œå®ƒä¸æ˜¯ä¸ºäº†æ˜¾ç¤ºï¼Œè€Œæ˜¯ä¸ºäº†é«˜æ•ˆå­˜å‚¨å’Œè®¡ç®—\nç¤ºä¾‹ï¼š\nconst hash = new Uint8Array([227, 176, 196, 66, 152, 252, ...]); ä¸ Base64 çš„è½¬æ¢ï¼š\nSHA256 è¾“å‡º â†’ Uint8Array â†’ Base64ï¼ˆå¯æ˜¾ç¤ºï¼‰\nBase64 â†’ Uint8Arrayï¼ˆå¯è§£ç å›åŸå§‹äºŒè¿›åˆ¶ï¼‰\næ€»ç»“å¯¹æ¯” ç±»å‹ å•ä½ ç”¨é€” å¯è¯»æ€§ å¤§å° SHA256 256 bit å®‰å…¨å“ˆå¸Œã€æ•°æ®å®Œæ•´æ€§ å·® å›ºå®š 32 å­—èŠ‚ Base64 6 bit/å­—ç¬¦ å±•ç¤ºã€ä¼ è¾“ã€å‹ç¼©é•¿åº¦ é«˜ 44 å­—ç¬¦ï¼ˆå¡«å……ï¼‰ Uint8Array 8 bit/å­—èŠ‚ å†…å­˜æ“ä½œã€åŠ å¯†è¿ç®— ä½ 32 å­—èŠ‚ ","permalink":"http://localhost:1313/findings/sha256-base64-uint8/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eåœ¨åšå¯†ç å­˜å‚¨çš„æ—¶å€™ï¼Œæˆ‘é‡åˆ°äº†ä¸‰ç§å¸¸è§çš„æ•°æ®è¡¨ç¤ºæ–¹å¼ï¼š\u003ccode\u003eSHA256\u003c/code\u003eã€\u003ccode\u003eBase64\u003c/code\u003e å’Œ \u003ccode\u003eUint8Array\u003c/code\u003eï¼ˆç®€ç§° \u003ccode\u003eUint8\u003c/code\u003eï¼‰ã€‚å®ƒä»¬å„æœ‰ç”¨é€”å’Œç‰¹ç‚¹ï¼Œäºæ˜¯å†™ä¸‹è¿™ç¯‡æ–‡ç« æ¥æ€»ç»“ä¸€ä¸‹ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"sha256\"\u003eSHA256\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003eSHA256\u003c/code\u003e æ˜¯ç°ä»£äº’è”ç½‘å¹¿æ³›ä½¿ç”¨çš„åŠ å¯†å“ˆå¸Œç®—æ³•ï¼Œä¾‹å¦‚åœ¨åŒºå—é“¾ã€å¯†ç å­˜å‚¨å’Œæ•°æ®å®Œæ•´æ€§éªŒè¯ä¸­éƒ½å¾ˆå¸¸è§ã€‚\u003c/p\u003e\n\u003cp\u003eç‰¹ç‚¹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eå°†ä»»æ„é•¿åº¦çš„è¾“å…¥æ•°æ®ç»è¿‡æ•°å­¦è¿ç®—åï¼Œè¾“å‡º \u003cstrong\u003e256 ä½äºŒè¿›åˆ¶æ•°\u003c/strong\u003eï¼ˆ32 å­—èŠ‚ï¼‰ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eå‡ ä¹ä¸å¯é€†ï¼Œæ„å‘³ç€å³ä½¿æ‹¿åˆ° SHA256 çš„è¾“å‡ºï¼Œä¹Ÿå¾ˆéš¾åæ¨å‡ºåŸå§‹è¾“å…¥ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç¤ºä¾‹è¾“å‡ºï¼ˆä»¥åå…­è¿›åˆ¶è¡¨ç¤ºï¼‰ï¼š\u003c/p\u003e\n\n\n\n\u003cdiv class=\"goat svg-container \"\u003e\n  \n    \u003csvg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      font-family=\"Menlo,Lucida Console,monospace\"\n      \n        viewBox=\"0 0 520 25\"\n      \u003e\n      \u003cg transform='translate(8,16)'\u003e\n\u003ctext text-anchor='middle' x='0' y='4' fill='currentColor' style='font-size:1em'\u003ee\u003c/text\u003e\n\u003ctext text-anchor='middle' x='8' y='4' fill='currentColor' style='font-size:1em'\u003e3\u003c/text\u003e\n\u003ctext text-anchor='middle' x='16' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='24' y='4' fill='currentColor' style='font-size:1em'\u003e0\u003c/text\u003e\n\u003ctext text-anchor='middle' x='32' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='40' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='48' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='56' y='4' fill='currentColor' style='font-size:1em'\u003e2\u003c/text\u003e\n\u003ctext text-anchor='middle' x='64' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='72' y='4' fill='currentColor' style='font-size:1em'\u003e8\u003c/text\u003e\n\u003ctext text-anchor='middle' x='80' y='4' fill='currentColor' style='font-size:1em'\u003ef\u003c/text\u003e\n\u003ctext text-anchor='middle' x='88' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='96' y='4' fill='currentColor' style='font-size:1em'\u003e1\u003c/text\u003e\n\u003ctext text-anchor='middle' x='104' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='112' y='4' fill='currentColor' style='font-size:1em'\u003e1\u003c/text\u003e\n\u003ctext text-anchor='middle' x='120' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='128' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='136' y='4' fill='currentColor' style='font-size:1em'\u003ea\u003c/text\u003e\n\u003ctext text-anchor='middle' x='144' y='4' fill='currentColor' style='font-size:1em'\u003ef\u003c/text\u003e\n\u003ctext text-anchor='middle' x='152' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='160' y='4' fill='currentColor' style='font-size:1em'\u003ef\u003c/text\u003e\n\u003ctext text-anchor='middle' x='168' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='176' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='184' y='4' fill='currentColor' style='font-size:1em'\u003e8\u003c/text\u003e\n\u003ctext text-anchor='middle' x='192' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='200' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='208' y='4' fill='currentColor' style='font-size:1em'\u003e6\u003c/text\u003e\n\u003ctext text-anchor='middle' x='216' y='4' fill='currentColor' style='font-size:1em'\u003ef\u003c/text\u003e\n\u003ctext text-anchor='middle' x='224' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='232' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='240' y='4' fill='currentColor' style='font-size:1em'\u003e2\u003c/text\u003e\n\u003ctext text-anchor='middle' x='248' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='256' y='4' fill='currentColor' style='font-size:1em'\u003e2\u003c/text\u003e\n\u003ctext text-anchor='middle' x='264' y='4' fill='currentColor' style='font-size:1em'\u003e7\u003c/text\u003e\n\u003ctext text-anchor='middle' x='272' y='4' fill='currentColor' style='font-size:1em'\u003ea\u003c/text\u003e\n\u003ctext text-anchor='middle' x='280' y='4' fill='currentColor' style='font-size:1em'\u003ee\u003c/text\u003e\n\u003ctext text-anchor='middle' x='288' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='296' y='4' fill='currentColor' style='font-size:1em'\u003e1\u003c/text\u003e\n\u003ctext text-anchor='middle' x='304' y='4' fill='currentColor' style='font-size:1em'\u003ee\u003c/text\u003e\n\u003ctext text-anchor='middle' x='312' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='320' y='4' fill='currentColor' style='font-size:1em'\u003e6\u003c/text\u003e\n\u003ctext text-anchor='middle' x='328' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='336' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='344' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='352' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='360' y='4' fill='currentColor' style='font-size:1em'\u003e3\u003c/text\u003e\n\u003ctext text-anchor='middle' x='368' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='376' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='384' y='4' fill='currentColor' style='font-size:1em'\u003ea\u003c/text\u003e\n\u003ctext text-anchor='middle' x='392' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='400' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='408' y='4' fill='currentColor' style='font-size:1em'\u003e5\u003c/text\u003e\n\u003ctext text-anchor='middle' x='416' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='424' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='432' y='4' fill='currentColor' style='font-size:1em'\u003e1\u003c/text\u003e\n\u003ctext text-anchor='middle' x='440' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='448' y='4' fill='currentColor' style='font-size:1em'\u003e7\u003c/text\u003e\n\u003ctext text-anchor='middle' x='456' y='4' fill='currentColor' style='font-size:1em'\u003e8\u003c/text\u003e\n\u003ctext text-anchor='middle' x='464' y='4' fill='currentColor' style='font-size:1em'\u003e5\u003c/text\u003e\n\u003ctext text-anchor='middle' x='472' y='4' fill='currentColor' style='font-size:1em'\u003e2\u003c/text\u003e\n\u003ctext text-anchor='middle' x='480' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='488' y='4' fill='currentColor' style='font-size:1em'\u003e8\u003c/text\u003e\n\u003ctext text-anchor='middle' x='496' y='4' fill='currentColor' style='font-size:1em'\u003e5\u003c/text\u003e\n\u003ctext text-anchor='middle' x='504' y='4' fill='currentColor' style='font-size:1em'\u003e5\u003c/text\u003e\n\u003c/g\u003e\n\n    \u003c/svg\u003e\n  \n\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç¼ºç‚¹ï¼š\u003cstrong\u003eå¯è¯»æ€§å·®\u003c/strong\u003eï¼Œå°¤å…¶æ˜¯åœ¨å‰ç«¯éœ€è¦æ˜¾ç¤ºæˆ–ä¼ è¾“æ—¶ä¸æ–¹ä¾¿ã€‚\u003c/p\u003e","title":"SHA256ã€Base64 ä¸ Uint8Array çš„å¯¹æ¯”ä¸ç†è§£"},{"content":"æ¨¡å—æ¦‚è§ˆ ğŸ‘‰ æ¨¡å—ä»£ç ä»“åº“\né¡¹ç›® å†…å®¹ æ¨¡å—åç§° ç”¨æˆ·ç®¡ç†ï¼ˆUser Managementï¼‰ è·¯ç”±è·¯å¾„ /userManagement åŠŸèƒ½èŒƒå›´ å¯†ç è®¾ç½®ã€å·²æœ‰é’±åŒ…ç™»å½•ã€æœ¬åœ°åŠ å¯†å­˜å‚¨ è®¿é—®æƒé™ æœªç™»å½•çŠ¶æ€ä¸‹å¼ºåˆ¶è·³è½¬åˆ°æ­¤é¡µé¢ï¼Œå·²ç™»å½•æ”¾è¡Œ ç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£ app/userManage/ â”œâ”€â”€ components/ â”‚ â”œâ”€â”€ Login.tsx â”‚ â””â”€â”€ Register.tsx â”œâ”€â”€ lib/ â”‚ â””â”€â”€ savePassword.ts â””â”€â”€ page.tsx æ–‡ä»¶è·¯å¾„ èŒè´£è¯¦è§£ page.tsx 1. è·¯ç”±å…¥å£\n2. æ£€æµ‹ IndexedDB æ˜¯å¦å·²æœ‰é’±åŒ…è®°å½•\n3. å·²ç™»å½• â†’ è·³è½¬ /ï¼ˆé¦–é¡µï¼‰\n4. æœªç™»å½• â†’ æ¸²æŸ“ç™»å½•/æ³¨å†Œåˆ‡æ¢ç•Œé¢ components/Login.tsx çº¯å±•ç¤ºç»„ä»¶ï¼š\nâ€¢ å¯†ç è¾“å…¥è§£é”æœ¬åœ°é’±åŒ…\nâ€¢ â€œå¿˜è®°å¯†ç â€åˆ é™¤æœ¬åœ°æ•°æ® components/Register.tsx 1. è®¾ç½®å¯†ç ï¼ˆå¼ºåº¦æ ¡éªŒï¼‰\n2. åŠ å¯†å­˜å‚¨ lib/savePassword.ts æ ¸å¿ƒåŠ å¯†é€»è¾‘ï¼š\nâ€¢ å°†å¯†ç è¿›è¡Œ SHA256 å¤„ç†\nâ€¢ å­˜å…¥ IndexedDB 1. è¯¦ç»†äº¤äº’æµç¨‹ 1.1 é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥ è®¿é—®ä»»æ„é¡µé¢ â†’ AuthGuard æ£€æµ‹æœªç™»å½• â†’ é‡å®šå‘è‡³ /userManagement page.tsx æ£€æŸ¥ IndexedDB æ—  user:current æ•°æ® â†’ é»˜è®¤å±•ç¤º Register.tsx 1.2 åˆå§‹åŒ–å¯†ç æµç¨‹ é¦–æ¬¡ç™»å½•/å¿˜è®°å¯†ç  æ£€æŸ¥ IndexedDB æœ‰æ—  user:current, è‹¥æœ‰åˆ™åˆ é™¤æœ¬åœ° IndexedDB æ•°æ®åº“ç”¨æˆ·å’Œé’±åŒ…ç›¸å…³å†…å®¹ äºŒæ¬¡ç¡®è®¤å¯†ç åŠ å¯†å­˜å‚¨è‡³ IndexedDB 2. å®‰å…¨è®¾è®¡åŸåˆ™ å¯†ç æ°¸ä¸ä»¥æ˜æ–‡å½¢å¼å‡ºç°åœ¨å†…å­˜ã€ç½‘ç»œã€æ—¥å¿—ä¸­ åŠ©è®°è¯/ç§é’¥åªåœ¨å†…å­˜ä¸­çŸ­æ—¶å­˜åœ¨ï¼Œè§£å¯†åç«‹å³è¦†ç›– æ‰€æœ‰æ•æ„Ÿæ•°æ®å‡ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿçš„å¯†é’¥è¿›è¡Œ AES-GCM åŠ å¯†å­˜å‚¨ æä¾›â€œä¸€é”®åˆ é™¤æœ¬åœ°æ•°æ®â€åŠŸèƒ½ï¼ˆå¯¹åº”â€œå¿˜è®°å¯†ç â€åœºæ™¯ï¼‰ ","permalink":"http://localhost:1313/projects/0907wallet/usermanagement/","summary":"\u003ch1 id=\"æ¨¡å—æ¦‚è§ˆ\"\u003eæ¨¡å—æ¦‚è§ˆ\u003c/h1\u003e\n\u003cp\u003eğŸ‘‰ \u003ca href=\"https://github.com/cgcj0907/0907-Wallet/tree/main/app/userManagement\"\u003eæ¨¡å—ä»£ç ä»“åº“\u003c/a\u003e\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eé¡¹ç›®\u003c/th\u003e\n          \u003cth\u003eå†…å®¹\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eæ¨¡å—åç§°\u003c/td\u003e\n          \u003ctd\u003eç”¨æˆ·ç®¡ç†ï¼ˆUser Managementï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè·¯ç”±è·¯å¾„\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e/userManagement\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eåŠŸèƒ½èŒƒå›´\u003c/td\u003e\n          \u003ctd\u003eå¯†ç è®¾ç½®ã€å·²æœ‰é’±åŒ…ç™»å½•ã€æœ¬åœ°åŠ å¯†å­˜å‚¨\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè®¿é—®æƒé™\u003c/td\u003e\n          \u003ctd\u003eæœªç™»å½•çŠ¶æ€ä¸‹å¼ºåˆ¶è·³è½¬åˆ°æ­¤é¡µé¢ï¼Œå·²ç™»å½•æ”¾è¡Œ\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cul\u003e\n\u003cli\u003eç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eapp/userManage/\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”œâ”€â”€ components/\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”‚   â”œâ”€â”€ Login.tsx       \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”‚   â””â”€â”€ Register.tsx    \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”œâ”€â”€ lib/\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”‚   â””â”€â”€ savePassword.ts  \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ””â”€â”€ page.tsx            \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ–‡ä»¶è·¯å¾„\u003c/th\u003e\n          \u003cth\u003eèŒè´£è¯¦è§£\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003epage.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e1. è·¯ç”±å…¥å£\u003cbr\u003e2. æ£€æµ‹ IndexedDB æ˜¯å¦å·²æœ‰é’±åŒ…è®°å½•\u003cbr\u003e3. å·²ç™»å½• â†’ è·³è½¬ \u003ccode\u003e/\u003c/code\u003eï¼ˆé¦–é¡µï¼‰\u003cbr\u003e4. æœªç™»å½• â†’ æ¸²æŸ“ç™»å½•/æ³¨å†Œåˆ‡æ¢ç•Œé¢\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003ecomponents/Login.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eçº¯å±•ç¤ºç»„ä»¶ï¼š\u003cbr\u003eâ€¢ å¯†ç è¾“å…¥è§£é”æœ¬åœ°é’±åŒ…\u003cbr\u003eâ€¢ â€œå¿˜è®°å¯†ç â€åˆ é™¤æœ¬åœ°æ•°æ®\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003ecomponents/Register.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e1. è®¾ç½®å¯†ç ï¼ˆå¼ºåº¦æ ¡éªŒï¼‰\u003cbr\u003e2. åŠ å¯†å­˜å‚¨\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/savePassword.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæ ¸å¿ƒåŠ å¯†é€»è¾‘ï¼š\u003cbr\u003eâ€¢ å°†å¯†ç è¿›è¡Œ SHA256 å¤„ç†\u003cbr\u003eâ€¢ å­˜å…¥ IndexedDB\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2 id=\"1-è¯¦ç»†äº¤äº’æµç¨‹\"\u003e1. è¯¦ç»†äº¤äº’æµç¨‹\u003c/h2\u003e\n\u003ch3 id=\"11-é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥\"\u003e1.1 é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eè®¿é—®ä»»æ„é¡µé¢ â†’ \u003ccode\u003eAuthGuard\u003c/code\u003e æ£€æµ‹æœªç™»å½• â†’ é‡å®šå‘è‡³ \u003ccode\u003e/userManagement\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epage.tsx\u003c/code\u003e æ£€æŸ¥ IndexedDB æ—  \u003ccode\u003euser:current\u003c/code\u003e æ•°æ® â†’ é»˜è®¤å±•ç¤º \u003ccode\u003eRegister.tsx\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"12-åˆå§‹åŒ–å¯†ç æµç¨‹\"\u003e1.2 åˆå§‹åŒ–å¯†ç æµç¨‹\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eé¦–æ¬¡ç™»å½•/å¿˜è®°å¯†ç \u003c/li\u003e\n\u003cli\u003eæ£€æŸ¥ IndexedDB æœ‰æ—  \u003ccode\u003euser:current\u003c/code\u003e, è‹¥æœ‰åˆ™åˆ é™¤æœ¬åœ° IndexedDB æ•°æ®åº“ç”¨æˆ·å’Œé’±åŒ…ç›¸å…³å†…å®¹\u003c/li\u003e\n\u003cli\u003eäºŒæ¬¡ç¡®è®¤å¯†ç åŠ å¯†å­˜å‚¨è‡³ IndexedDB\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"2-å®‰å…¨è®¾è®¡åŸåˆ™\"\u003e2. å®‰å…¨è®¾è®¡åŸåˆ™\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eå¯†ç \u003cstrong\u003eæ°¸ä¸\u003c/strong\u003eä»¥æ˜æ–‡å½¢å¼å‡ºç°åœ¨å†…å­˜ã€ç½‘ç»œã€æ—¥å¿—ä¸­\u003c/li\u003e\n\u003cli\u003eåŠ©è®°è¯/ç§é’¥\u003cstrong\u003eåªåœ¨å†…å­˜ä¸­çŸ­æ—¶å­˜åœ¨\u003c/strong\u003eï¼Œè§£å¯†åç«‹å³è¦†ç›–\u003c/li\u003e\n\u003cli\u003eæ‰€æœ‰æ•æ„Ÿæ•°æ®å‡ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿçš„å¯†é’¥è¿›è¡Œ AES-GCM åŠ å¯†å­˜å‚¨\u003c/li\u003e\n\u003cli\u003eæä¾›â€œä¸€é”®åˆ é™¤æœ¬åœ°æ•°æ®â€åŠŸèƒ½ï¼ˆå¯¹åº”â€œå¿˜è®°å¯†ç â€åœºæ™¯ï¼‰\u003c/li\u003e\n\u003c/ul\u003e","title":"0907 Wallet ç”¨æˆ·ç®¡ç†æ¨¡å—è®¾è®¡"},{"content":"æ¨¡å—æ¦‚è§ˆ app â”œâ”€â”€ components â”‚ â”œâ”€â”€ AuthGuard.tsx â”‚ â”œâ”€â”€ InitProvider.tsx â”‚ â””â”€â”€ Logo.tsx â”œâ”€â”€ globals.css â”œâ”€â”€ layout.tsx â”œâ”€â”€ lib â”œâ”€â”€ auth.ts â”œâ”€â”€ storage.ts â””â”€â”€ transform.ts å…¬ç”¨åº“( lib ) auth hash storage å…¬ç”¨ç»„ä»¶( components ) AuthGuard Initialer Logo 1. å…¬ç”¨åº“è®¾è®¡ auth.ts // app/lib/auth.ts /** * @file é’±åŒ…è®¤è¯ä¸è´¦æˆ·ç®¡ç†æ ¸å¿ƒæ¨¡å— * @description è´Ÿè´£é’±åŒ…è¿æ¥ã€ç­¾åéªŒè¯ã€ç™»å½•çŠ¶æ€æŒä¹…åŒ–ã€ç™»å‡ºç­‰å®Œæ•´è®¤è¯æµç¨‹ * æ”¯æŒ MetaMaskã€WalletConnectã€Coinbase Wallet ç­‰ä¸»æµé’±åŒ… * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-08-16 */ export const LOGIN_FLAG_KEY = \u0026#39;isLoggedIn\u0026#39;; export const LOGIN_EXPIRES_KEY = \u0026#39;loginExpiresAt\u0026#39;; const DEFAULT_EXPIRE_MINUTES = 10; /**è·å–è¿‡æœŸæ—¶é—´ */ export function getLoginExpiresAt(): number | null {} /**æ£€æŸ¥ç™»å½•çŠ¶æ€æ˜¯å¦åˆæ³• */ export function isLoggedInLocal(): boolean {} /** åˆ·æ–°è¿‡æœŸæ—¶é—´ï¼ˆé»˜è®¤ +10 åˆ†é’Ÿï¼‰å¹¶ç¡®ä¿ flag = \u0026#39;1\u0026#39; */ export function refreshLoginExpiry(minutes = DEFAULT_EXPIRE_MINUTES) {} /** é€€å‡ºç™»å½•ï¼ˆæœ¬åœ°æ¸…ç†ï¼‰ */ export function logoutLocal() {} transform.ts // @/app/lib/hash.ts /** * @file å¯†ç å“ˆå¸Œä¸ ArrayBuffer/Base64 äº’è½¬å·¥å…· * @description æä¾›å®‰å…¨çš„å¯†ç  SHA-256 å“ˆå¸Œï¼ˆè¿”å› Base64ï¼‰å’Œé«˜æ€§èƒ½çš„äºŒè¿›åˆ¶ â†” Base64 è½¬æ¢å·¥å…· * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-11-27 */ /** * å°† ArrayBuffer è½¬æ¢ä¸º Base64 å­—ç¬¦ä¸² * * ä½¿ç”¨ Uint8Array + btoa çš„ç»å…¸å†™æ³•ï¼Œæ¯” Buffer.toString(\u0026#39;base64\u0026#39;) æ›´å…¼å®¹æµè§ˆå™¨ç¯å¢ƒ * * @param buffer è¦è½¬æ¢çš„ ArrayBuffer * @returns Base64 ç¼–ç å­—ç¬¦ä¸² * @example * const b64 = arrayBufferToBase64(hashBuffer); */ export function arrayBufferToBase64(buffer: ArrayBuffer): string {} /** * å°† Base64 å­—ç¬¦ä¸²è½¬æ¢ä¸º Uint8Array * * @param base64 Base64 ç¼–ç çš„å­—ç¬¦ä¸² * @returns å¯¹åº”çš„ Uint8Array * @example * const uint8 = base64ToUint8Array(storedHash); */ export function base64ToUint8Array(base64: string): Uint8Array {} /** * å¯¹æ˜æ–‡å¯†ç è¿›è¡Œå®‰å…¨çš„ SHA-256 å“ˆå¸Œï¼Œå¹¶è¿”å› Base64 ç¼–ç ç»“æœ * * ä½¿ç”¨ Web Crypto APIï¼ˆcrypto.subtleï¼‰ï¼Œåœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ä¸­å‡ä¸ºåŸç”Ÿå®ç°ï¼Œå®‰å…¨ä¸”é«˜æ€§èƒ½ã€‚ * * @param password æ˜æ–‡å¯†ç  * @returns SHA-256 å“ˆå¸Œåçš„ Base64 å­—ç¬¦ä¸²ï¼ˆå›ºå®š 44 å­—ç¬¦ï¼‰ * @example * const hashed = await hashPassword(\u0026#39;mySecret123\u0026#39;); * // â†’ \u0026#34;iOcJ9qP3b...==\u0026#34; */ export async function hashPassword(password: string): Promise\u0026lt;string\u0026gt; {} storage.ts ğŸ‘‰ å…³äº IndexedDB çš„ä½¿ç”¨æ–¹æ³•è¯·è§ï¼šIndexedDB æµè§ˆå™¨æ•°æ®åº“\n// app/lib/storage.ts /** * @file IndexedDB è½»é‡å°è£…å·¥å…·ï¼ˆæŒ‰éœ€æ‡’åˆ›å»º objectStoreï¼‰ * @description æä¾›ç±»ä¼¼ localStorage çš„ç®€æ´ APIï¼Œæ”¯æŒè‡ªåŠ¨å‡çº§ç‰ˆæœ¬åˆ›å»ºè¡¨ï¼Œé¿å…é¢„è®¾ schema * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-11-27 */ import { openDB, IDBPDatabase } from \u0026#39;idb\u0026#39;; const DB_NAME = \u0026#39;0907wallet-db\u0026#39;; const DEFAULT_STORE_NAME = \u0026#39;users\u0026#39;; /** * åˆå§‹åŒ–ï¼ˆæˆ–æ‰“å¼€ï¼‰IndexedDB æ•°æ®åº“ * * æ•°æ®åº“ä¸å­˜åœ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºç‰ˆæœ¬ 1ï¼Œä¸”ä¸é¢„åˆ›å»ºä»»ä½• objectStoreï¼Œ * æ‰€æœ‰è¡¨éƒ½é€šè¿‡ ensureStore æŒ‰éœ€æ‡’åˆ›å»ºï¼Œä¿æŒæœ€å°çš„åˆå§‹ schemaã€‚ * * @returns IndexedDB æ•°æ®åº“å®ä¾‹ * @example * const db = await initDB(); */ export async function initDB(): Promise\u0026lt;IDBPDatabase\u0026gt; {} /** * ç¡®ä¿æŒ‡å®šåç§°çš„ objectStore å­˜åœ¨ï¼ˆå†…éƒ¨ç§æœ‰å‡½æ•°ï¼‰ * * å¦‚æœè¡¨ä¸å­˜åœ¨ï¼Œä¼šå…³é—­å½“å‰è¿æ¥ â†’ ç‰ˆæœ¬ +1 â†’ åœ¨ upgrade äº‹åŠ¡ä¸­åˆ›å»ºè¡¨ã€‚ * è¿™æ˜¯ IndexedDB çš„ç¡¬æ€§é™åˆ¶ï¼šåªæœ‰ versionchange äº‹åŠ¡æ‰èƒ½åˆ›å»º/åˆ é™¤ objectStoreã€‚ * * @param db å½“å‰æ•°æ®åº“å®ä¾‹ * @param storeName è¦ç¡®ä¿å­˜åœ¨çš„è¡¨å * @returns åŒ…å«è¯¥è¡¨çš„æœ€æ–°æ•°æ®åº“å®ä¾‹ */ async function ensureObjectStoreExists( db: IDBPDatabase, storeName: string, ): Promise\u0026lt;IDBPDatabase\u0026gt; {} /** * æ ¹æ® key ä»æŒ‡å®šè¡¨ä¸­è¯»å–æ•°æ® * * @param key é”®å * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @returns å¯¹åº”çš„å€¼ï¼Œè‹¥ä¸å­˜åœ¨è¿”å› undefined * @example * const user = await get(\u0026#39;currentUser\u0026#39;); */ export async function get\u0026lt;T = unknown\u0026gt;( key: string, table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;T | undefined\u0026gt; {} /** * å‘æŒ‡å®šè¡¨ä¸­å†™å…¥æˆ–æ›´æ–°æ•°æ® * * @param key é”®å * @param value è¦å­˜å‚¨çš„å€¼ï¼ˆå¿…é¡»æ”¯æŒç»“æ„åŒ–å…‹éš†ï¼‰ * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @example * await set(\u0026#39;currentUser\u0026#39;, { address: \u0026#39;0x...\u0026#39;, name: \u0026#39;Alice\u0026#39; }); */ export async function set\u0026lt;T = unknown\u0026gt;( key: string, value: T, table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;void\u0026gt; {} /** * æ ¹æ® key åˆ é™¤æŒ‡å®šè¡¨ä¸­çš„è®°å½• * * @param key é”®å * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; */ export async function del( key: string, table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;void\u0026gt; {} /** * æ¸…ç©ºæŒ‡å®šè¡¨çš„æ‰€æœ‰è®°å½• * * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; */ export async function clear(table: string = DEFAULT_STORE_NAME): Promise\u0026lt;void\u0026gt; {} /** * è·å–æŒ‡å®šè¡¨ä¸­æ‰€æœ‰ key * * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @returns key æ•°ç»„ */ export async function keys( table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;IDBValidKey[]\u0026gt; {} /** * è·å–æŒ‡å®šè¡¨ä¸­æ‰€æœ‰å€¼ï¼ˆä¸åŒ…å« keyï¼‰ * * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @returns å€¼æ•°ç»„ */ export async function values\u0026lt;T = unknown\u0026gt;( table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;T[]\u0026gt; {} /** * è·å–æŒ‡å®šè¡¨çš„è®°å½•æ€»æ•° * * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @returns è®°å½•æ•°é‡ */ export async function count(table: string = DEFAULT_STORE_NAME): Promise\u0026lt;number\u0026gt; {} 2. å…¬ç”¨ç»„ä»¶è®¾è®¡ AuthGard.tsx // app/components/AuthGuard.tsx /** * @file å…¨å±€è·¯ç”±æƒé™å®ˆå«ï¼ˆå®¢æˆ·ç«¯ç»„ä»¶ï¼‰ * @description * 1. æœªç™»å½• â†’ å¼ºåˆ¶è·³è½¬ /userLoginï¼ˆå…¬å¼€é¡µé™¤å¤–ï¼‰ * 2. å·²ç™»å½•ä½†æ— é’±åŒ… â†’ å¼ºåˆ¶è·³è½¬ /generateWallet * 3. å…¨éƒ¨é€šè¿‡ â†’ æ”¾è¡Œå¹¶è‡ªåŠ¨åˆ·æ–°ç™»å½•æœ‰æ•ˆæœŸ * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-11-27 */ \u0026#39;use client\u0026#39;; import React, { useEffect, useState } from \u0026#39;react\u0026#39;; import { useRouter, usePathname } from \u0026#39;next/navigation\u0026#39;; import { count } from \u0026#39;@/app/lib/storage\u0026#39;; import * as auth from \u0026#39;@/app/lib/auth\u0026#39;; interface AuthGuardProps { /** è¦æ¸²æŸ“çš„å­å†…å®¹ï¼ˆå—ä¿æŠ¤çš„é¡µé¢ï¼‰ */ children: React.ReactNode; } // å…¬å¼€è·¯å¾„ï¼šæ— éœ€ç™»å½•å³å¯è®¿é—® const PUBLIC_PATHS = [\u0026#39;/userLogin\u0026#39;, \u0026#39;/generateWallet\u0026#39;] as const; // é’±åŒ…å­˜å‚¨è¡¨åï¼ˆé¿å…é­”æ³•å€¼ï¼‰ const WALLETS_STORE_NAME = \u0026#39;Wallets\u0026#39;; export default function AuthGuard({ children }: AuthGuardProps): React.ReactElement { const router = useRouter(); const pathname = usePathname(); const [isChecking, setIsChecking] = useState\u0026lt;boolean\u0026gt;(true); useEffect(() =\u0026gt; { let isMounted = true; /** * æ ¸å¿ƒé‰´æƒé€»è¾‘ * ä¸ºä»€ä¹ˆæ”¾åœ¨ useEffect é‡Œå•ç‹¬æ‰§è¡Œï¼Ÿ * - é¿å…é˜»å¡æ¸²æŸ“ * - éœ€è¦ async/await å¿…é¡»å°è£…åœ¨å‡½æ•°å†… * - é…åˆ isMounted é˜²æ­¢å†…å­˜æ³„æ¼ */ async function performAuthCheck(): Promise\u0026lt;void\u0026gt; { try { // pathname å¯èƒ½ä¸º nullï¼ˆNext.js æŸäº›è¾¹ç¼˜æƒ…å†µï¼‰ if (!pathname) { if (isMounted) setIsChecking(false); return; } const isPublicPath = PUBLIC_PATHS.includes(pathname as any); // Step 1: æ£€æŸ¥æœ¬åœ°ç™»å½•æ€ï¼ˆåŒæ­¥å¿«é€Ÿï¼‰ const isLoggedIn = auth.isLoggedInLocal(); if (!isLoggedIn \u0026amp;\u0026amp; !isPublicPath) { router.replace(\u0026#39;/userLogin\u0026#39;); if (isMounted) setIsChecking(false); return; } // Step 2: å·²ç™»å½• â†’ æ£€æŸ¥æ˜¯å¦å·²åˆ›å»ºé’±åŒ… if (isLoggedIn) { const walletCount = await count(WALLETS_STORE_NAME); // count è¿”å› numberï¼Œ0 è¡¨ç¤ºæ— é’±åŒ… const hasWallet = walletCount \u0026gt; 0; if (!hasWallet \u0026amp;\u0026amp; pathname !== \u0026#39;/generateWallet\u0026#39;) { router.replace(\u0026#39;/generateWallet\u0026#39;); if (isMounted) setIsChecking(false); return; } } // Step 3: å…¨éƒ¨é€šè¿‡ â†’ åˆ·æ–°ç™»å½•æœ‰æ•ˆæœŸå¹¶æ”¾è¡Œ if (isMounted) { auth.refreshLoginExpiry(); // å»¶é•¿æœ¬åœ°ç™»å½•æ€è¿‡æœŸæ—¶é—´ setIsChecking(false); } } catch (error) { // ä¸ºä»€ä¹ˆ catch åç›´æ¥è·³è½¬ç™»å½•ï¼Ÿ // IndexedDB å¼‚å¸¸ã€æœ¬åœ°å­˜å‚¨æŸåç­‰éƒ½è§†ä¸ºâ€œä¸å®‰å…¨çŠ¶æ€â€ï¼Œå¿…é¡»é‡æ–°ç™»å½• console.error(\u0026#39;[AuthGuard] é‰´æƒè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸:\u0026#39;, error); if (isMounted) { setIsChecking(false); router.replace(\u0026#39;/userLogin\u0026#39;); } } } performAuthCheck(); // æ¸…ç†å‡½æ•° return () =\u0026gt; { isMounted = false; }; }, [pathname, router]); // Loading çŠ¶æ€ï¼šå…¨å±å±…ä¸­åŠ¨æ•ˆ if (isChecking) { return ( \u0026lt;div className=\u0026#34;min-h-screen flex flex-col items-center justify-center bg-gray-50\u0026#34;\u0026gt; \u0026lt;p className=\u0026#34;text-gray-600 text-lg mb-4 animate-pulse\u0026#34;\u0026gt; æ­£åœ¨éªŒè¯æˆæƒ... \u0026lt;/p\u0026gt; \u0026lt;div className=\u0026#34;w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin\u0026#34; /\u0026gt; \u0026lt;/div\u0026gt; ); } // é‰´æƒé€šè¿‡ï¼šæ¸²æŸ“å­å†…å®¹ return \u0026lt;\u0026gt;{children}\u0026lt;/\u0026gt;; } InitProvider.tsx \u0026#39;use client\u0026#39; import { useState } from \u0026#39;react\u0026#39;; import clsx from \u0026#39;clsx\u0026#39;; /** * @file Logo ç»„ä»¶ï¼ˆé¦–é¡µ/å¯¼èˆªæ ä¸» Logoï¼‰ * @description å¸¦æ‚¬åœäº¤äº’çš„åœ†å½¢ Logoï¼Œé¼ æ ‡æ‚¬åœæ—¶å‘ä¸Šæµ®èµ·å¹¶å±•ç¤ºæ–‡å­—è¯´æ˜ï¼Œæ”¯æŒç¼“æ…¢å¼¹è·³åŠ¨ç”» * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-11-27 */ /** * ä¸» Logo ç»„ä»¶ * - é»˜è®¤çŠ¶æ€ï¼šLogo å‘ä¸‹ä½ç§»ä¸€åŠï¼Œé®æŒ¡ä¸‹æ–¹æ–‡å­—åŒºåŸŸï¼ˆè§†è§‰ä¸Šå½¢æˆâ€œåŠéšè—â€æ•ˆæœï¼‰ * - æ‚¬åœçŠ¶æ€ï¼šLogo ä¸Šç§»è‡³æ­£å¸¸ä½ç½®ï¼ŒåŒæ—¶ä¸‹æ–¹æ–‡å­—å¡ç‰‡ä» 0 é«˜åº¦å±•å¼€ * - ä½¿ç”¨ z-[-1]/z-[-2] ä¿è¯å›¾ç‰‡å§‹ç»ˆåœ¨æ–‡å­—å¡ç‰‡ä¸Šæ–¹ï¼Œä½†æ•´ä½“è¢«å¤–éƒ¨å®¹å™¨è£å‰ª */ export default function Logo() { // hover çŠ¶æ€æ§åˆ¶æ•´ä¸ªäº¤äº’åŠ¨ç”»çš„å¼€å¯ä¸å…³é—­ const [hover, setHover] = useState(false); return ( // å¤–å±‚å®¹å™¨ï¼šç›¸å¯¹å®šä½ï¼Œç”¨äºæ§åˆ¶å­å…ƒç´ çš„ç»å¯¹/å›ºå®šå®šä½åŸºå‡†ï¼ŒåŒæ—¶å‚ç›´å±…ä¸­æ’åˆ— \u0026lt;div className=\u0026#34;relative flex flex-col items-center\u0026#34; onMouseEnter={() =\u0026gt; setHover(true)} onMouseLeave={() =\u0026gt; setHover(false)} \u0026gt; {/* å›¾ç‰‡ Logoï¼ˆä¸»è§†è§‰å…ƒç´ ï¼‰ */} \u0026lt;div className={clsx( // è´Ÿ z-index è®©å›¾ç‰‡åœ¨æ–‡å­—å¡ç‰‡ä¹‹ä¸‹ï¼Œä½†é€šè¿‡ translate-y åˆ¶é€ â€œæµ®åœ¨å‰é¢â€çš„è§†è§‰é”™ä½ // w-86/h-86 â‰ˆ 344pxï¼ˆTailwind è‡ªå®šä¹‰å•ä½ï¼‰ï¼Œåœ†å½¢è£å‰ª + æº¢å‡ºéšè— + é˜´å½± + å¹³æ»‘ä½ç§»åŠ¨ç”» \u0026#34;z-[-1] w-86 h-86 rounded-full overflow-hidden cursor-pointer shadow-lg transition-transform duration-300\u0026#34;, // æœªæ‚¬åœæ—¶å‘ä¸‹ä½ç§» 48ï¼ˆ192pxï¼‰ï¼Œåˆšå¥½é®ä½ä¸‹æ–¹æ–‡å­—å¡ç‰‡ä¸€åŠï¼Œå½¢æˆæ‚¬å¿µæ„Ÿ // æ‚¬åœæ—¶æ¢å¤åŸä½ï¼Œè§†è§‰ä¸Šåƒâ€œLogo å‘ä¸Šæµ®èµ·â€ hover ? \u0026#34;translate-y-0\u0026#34; : \u0026#34;translate-y-48\u0026#34; )} \u0026gt; {/* Logo å›¾ç‰‡è‡ªé€‚åº”é“ºæ»¡å®¹å™¨ï¼Œä¿æŒåŸå§‹æ¯”ä¾‹ä¸è¢«æ‹‰ä¼¸ */} \u0026lt;img src=\u0026#34;/logo.png\u0026#34; alt=\u0026#34;Logo\u0026#34; className=\u0026#34;w-full h-full object-cover\u0026#34; /\u0026gt; \u0026lt;/div\u0026gt; {/* æ–‡å­—è¯´æ˜å¡ç‰‡åŒºåŸŸï¼ˆé»˜è®¤å®Œå…¨æ”¶èµ·ï¼Œæ‚¬åœæ—¶é€šè¿‡ max-h å±•å¼€ï¼‰ */} \u0026lt;div className={clsx( // ä½¿ç”¨ overflow-hidden + max-h å®ç°å¹³æ»‘çš„å±•å¼€/æ”¶èµ·åŠ¨ç”» // mt-2 ç»™å¡ç‰‡ç•™å‡ºä¸€ç‚¹ä¸Šè¾¹è·ï¼Œé¿å…ç´§è´´ Logo \u0026#34;z-[-2] overflow-hidden transition-all duration-300 mt-2\u0026#34;, hover ? \u0026#34;max-h-40\u0026#34; : \u0026#34;max-h-0\u0026#34; )} \u0026gt; {/* æ–‡å­—å¡ç‰‡æœ¬ä½“ï¼šåœ†è§’èƒŒæ™¯ + å†…è¾¹è· + å›ºå®šå®½åº¦ + æ–‡å­—å±…ä¸­ + ç¼“æ…¢å¼¹è·³åŠ¨ç”» */} \u0026lt;div className=\u0026#34;rounded-2xl p-3 w-40 text-center flex flex-col items-center gap-1 animate-bounce-slow\u0026#34;\u0026gt; {/* ä¸»æ ‡é¢˜ */} \u0026lt;p className=\u0026#34;text-sm font-semibold text-blue-500 flex items-center justify-center gap-1\u0026#34;\u0026gt; 0907 Wallet \u0026lt;/p\u0026gt; {/* å‰¯æ ‡é¢˜ï¼ˆæŠ€æœ¯æ”¯æŒå£°æ˜ï¼‰ */} \u0026lt;p className=\u0026#34;text-xs text-blue-300\u0026#34;\u0026gt;Supported by SST\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ); } ","permalink":"http://localhost:1313/projects/0907wallet/public/","summary":"\u003ch1 id=\"æ¨¡å—æ¦‚è§ˆ\"\u003eæ¨¡å—æ¦‚è§ˆ\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ components\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â”œâ”€â”€ AuthGuard.tsx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â”œâ”€â”€ InitProvider.tsx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â””â”€â”€ Logo.tsx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ globals.css\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ layout.tsx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ lib\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    â”œâ”€â”€ auth.ts\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    â”œâ”€â”€ storage.ts\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    â””â”€â”€ transform.ts\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eå…¬ç”¨åº“( lib )\n\u003cul\u003e\n\u003cli\u003eauth\u003c/li\u003e\n\u003cli\u003ehash\u003c/li\u003e\n\u003cli\u003estorage\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eå…¬ç”¨ç»„ä»¶( components )\n\u003cul\u003e\n\u003cli\u003eAuthGuard\u003c/li\u003e\n\u003cli\u003eInitialer\u003c/li\u003e\n\u003cli\u003eLogo\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"1-å…¬ç”¨åº“è®¾è®¡\"\u003e1. å…¬ç”¨åº“è®¾è®¡\u003c/h2\u003e\n\u003ch3 id=\"authts\"\u003eauth.ts\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// app/lib/auth.ts\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @file é’±åŒ…è®¤è¯ä¸è´¦æˆ·ç®¡ç†æ ¸å¿ƒæ¨¡å—\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @description è´Ÿè´£é’±åŒ…è¿æ¥ã€ç­¾åéªŒè¯ã€ç™»å½•çŠ¶æ€æŒä¹…åŒ–ã€ç™»å‡ºç­‰å®Œæ•´è®¤è¯æµç¨‹\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *              æ”¯æŒ MetaMaskã€WalletConnectã€Coinbase Wallet ç­‰ä¸»æµé’±åŒ…\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @author Guangyang Zhong | github: https://github.com/cgcj0907\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @date 2025-08-16\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eLOGIN_FLAG_KEY\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;isLoggedIn\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eLOGIN_EXPIRES_KEY\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;loginExpiresAt\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eDEFAULT_EXPIRE_MINUTES\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**è·å–è¿‡æœŸæ—¶é—´ */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003egetLoginExpiresAt\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003enumber\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**æ£€æŸ¥ç™»å½•çŠ¶æ€æ˜¯å¦åˆæ³• */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eisLoggedInLocal\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"kr\"\u003eboolean\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/** åˆ·æ–°è¿‡æœŸæ—¶é—´ï¼ˆé»˜è®¤ +10 åˆ†é’Ÿï¼‰å¹¶ç¡®ä¿ flag = \u0026#39;1\u0026#39; */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003erefreshLoginExpiry\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eminutes\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eDEFAULT_EXPIRE_MINUTES\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/** é€€å‡ºç™»å½•ï¼ˆæœ¬åœ°æ¸…ç†ï¼‰ */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003elogoutLocal() {\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"transformts\"\u003etransform.ts\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// @/app/lib/hash.ts\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @file å¯†ç å“ˆå¸Œä¸ ArrayBuffer/Base64 äº’è½¬å·¥å…·\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @description æä¾›å®‰å…¨çš„å¯†ç  SHA-256 å“ˆå¸Œï¼ˆè¿”å› Base64ï¼‰å’Œé«˜æ€§èƒ½çš„äºŒè¿›åˆ¶ â†” Base64 è½¬æ¢å·¥å…·\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @author Guangyang Zhong | github: https://github.com/cgcj0907\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @date 2025-11-27\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * å°† ArrayBuffer è½¬æ¢ä¸º Base64 å­—ç¬¦ä¸²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * ä½¿ç”¨ Uint8Array + btoa çš„ç»å…¸å†™æ³•ï¼Œæ¯” Buffer.toString(\u0026#39;base64\u0026#39;) æ›´å…¼å®¹æµè§ˆå™¨ç¯å¢ƒ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param buffer è¦è½¬æ¢çš„ ArrayBuffer\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @returns Base64 ç¼–ç å­—ç¬¦ä¸²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @example\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * const b64 = arrayBufferToBase64(hashBuffer);\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003earrayBufferToBase64\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ebuffer\u003c/span\u003e: \u003cspan class=\"kt\"\u003eArrayBuffer\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * å°† Base64 å­—ç¬¦ä¸²è½¬æ¢ä¸º Uint8Array\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param base64 Base64 ç¼–ç çš„å­—ç¬¦ä¸²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @returns å¯¹åº”çš„ Uint8Array\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @example\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * const uint8 = base64ToUint8Array(storedHash);\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003ebase64ToUint8Array\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ebase64\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003eUint8Array\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * å¯¹æ˜æ–‡å¯†ç è¿›è¡Œå®‰å…¨çš„ SHA-256 å“ˆå¸Œï¼Œå¹¶è¿”å› Base64 ç¼–ç ç»“æœ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * ä½¿ç”¨ Web Crypto APIï¼ˆcrypto.subtleï¼‰ï¼Œåœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ä¸­å‡ä¸ºåŸç”Ÿå®ç°ï¼Œå®‰å…¨ä¸”é«˜æ€§èƒ½ã€‚\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param password æ˜æ–‡å¯†ç \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @returns SHA-256 å“ˆå¸Œåçš„ Base64 å­—ç¬¦ä¸²ï¼ˆå›ºå®š 44 å­—ç¬¦ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @example\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * const hashed = await hashPassword(\u0026#39;mySecret123\u0026#39;);\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * // â†’ \u0026#34;iOcJ9qP3b...==\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kr\"\u003easync\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003ehashPassword\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003epassword\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003ePromise\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"storagets\"\u003estorage.ts\u003c/h3\u003e\n\u003cp\u003eğŸ‘‰ \u003ca href=\"/toolkits/indexedDB\"\u003eå…³äº IndexedDB çš„ä½¿ç”¨æ–¹æ³•è¯·è§ï¼šIndexedDB æµè§ˆå™¨æ•°æ®åº“\u003c/a\u003e\u003c/p\u003e","title":"0907 Wallet ç³»ç»Ÿå…¬ç”¨å±‚è®¾è®¡"},{"content":"ç®€ä»‹ Vector æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½æ—¥å¿—ä¸æŒ‡æ ‡é‡‡é›†ä»£ç†ï¼Œå®ƒä»å„ç§ source æ”¶é›†æ•°æ®ï¼Œç»è¿‡ transform å¤„ç†åå‘é€åˆ° sinkï¼ˆå¦‚ Lokiã€ClickHouseã€Kafkaã€Elasticsearch ç­‰ï¼‰\nå®ƒçš„ç‰¹ç‚¹æ˜¯é«˜ååã€ä½å»¶è¿Ÿã€æ— éœ€ä¾èµ– JVMã€è½»é‡å¥½éƒ¨ç½²ï¼Œéå¸¸é€‚åˆè¾¹ç¼˜èŠ‚ç‚¹å’Œå®¹å™¨ç¯å¢ƒ æœ¬æ–‡ä¸»è¦è®²è¿° Events å’Œ Compnents\n1. é…ç½®ç»“æ„æ¦‚è§ˆ Vector æœ‰ä¸¤ç§æ•°æ®æ¨¡å‹ (Data Model), åˆç§°äº‹ä»¶(Events):\nLogs: ç”¨äºè¡¨ç¤ºç»“æ„åŒ–æˆ–éç»“æ„åŒ–æ—¥å¿—æ•°æ® metrics: ç”¨äºè¡¨ç¤ºæŒ‡æ ‡æ•°æ® Vector çš„é…ç½®ç”±ä¸‰ä¸ªæ ¸å¿ƒéƒ¨åˆ† (Compnets) ç»„æˆï¼š\nsourcesï¼šæ•°æ®é‡‡é›†æº transformsï¼šæ•°æ®å¤„ç†ä¸è§£æ sinksï¼šè¾“å‡ºç›®æ ‡ 2. Data model(events) Log events Hereâ€™s an example representation of a log event (as JSON):\n{ \u0026#34;log\u0026#34;: { \u0026#34;custom\u0026#34;: \u0026#34;field\u0026#34;, \u0026#34;host\u0026#34;: \u0026#34;my.host.com\u0026#34;, \u0026#34;message\u0026#34;: \u0026#34;Hello world\u0026#34;, \u0026#34;timestamp\u0026#34;: \u0026#34;2020-11-01T21:15:47+00:00\u0026#34; } } Metric event æ­¤å¤„ç•™ç»™ä»¥åæ’°å†™\n3. Compnents 3.1 source è¯¦ç»†é…ç½®è¯·è§ ğŸ‘‰ Sources reference\næ­¤å¤„åªè¯¦ç»†ä»‹ç»ä»¥ File ä¸º source\nExample configurations(é…ç½®æ–‡ä»¶å‡ä¸º toml, ä¸‹åŒ)\n# minimal [sources.my_source_id] type = \u0026#34;file\u0026#34; include = [ \u0026#34;/var/log/**/*.log\u0026#34; ] 3.2 transform è¯¦ç»†é…ç½®è¯·è§ ğŸ‘‰ Sources reference\næ­¤å¤„åªè¯¦ç»†ä»‹ç» Remap with VRL(å³é‡æ–°åŒ¹é…)\n3.2.1 Parse key/value (logfmt) logs ä»¥ key/value å½¢å¼çš„æ—¥å¿—ä¸ºä¾‹\næ³¨æ„ä¸‹é¢çš„æ•°æ®æ ¼å¼ç»è¿‡ source å¤„ç†è¿‡ (ä¼šåŠ ä¸Š log å’Œ message åŒ…è£¹), æˆ‘ä»¬å†™å…¥çš„æ—¥å¿—æ–‡ä»¶ä¸­ä¸å¿…åœ¨å¤–é¢åŠ ä¸Š log å’Œ message åŒ…è£¹, ä¸ç„¶ä¼šå¯¼è‡´äºŒæ¬¡åŒ…è£¹, transform æ‰¾ä¸åˆ°æˆ‘ä»¬çœŸæ­£çš„æ—¥å¿—æ•°æ®\n{ \u0026#34;log\u0026#34;: { \u0026#34;message\u0026#34;: \u0026#34;@timestamp=\\\u0026#34;Sun Jan 10 16:47:39 EST 2021\\\u0026#34; level=info msg=\\\u0026#34;Stopping all fetchers\\\u0026#34; tag#production=stopping_fetchers id=ConsumerFetcherManager-1382721708341 module=kafka.consumer.ConsumerFetcherManager\u0026#34; } } Example configurations\n[transforms.my_transform_id] type = \u0026#34;remap\u0026#34; inputs = [ \u0026#34;my-source-or-transform-id\u0026#34; ] source = \u0026#34;. = parse_key_value!(.message)\u0026#34; 3.2.2 Parse custom logs å¦‚æœæœ‰æ•°æ®ç±»å‹çš„éœ€è¦, è¿˜éœ€è¦åœ¨é…ç½®ä¸­è¿›è¡Œæ•°æ®è½¬æ¢, å› ä¸ºé»˜è®¤è§£æå‡ºæ¥çš„æ˜¯ string Example configurations\n# Coerce parsed fields .timestamp = parse_timestamp(.timestamp, \u0026#34;%Y/%m/%d %H:%M:%S %z\u0026#34;) ?? now() .pid = to_int!(.pid) .tid = to_int!(.tid) 3.3 sink è¯¦ç»†é…ç½®è¯·è§ ğŸ‘‰ Sources reference\næ­¤å¤„åªè¯¦ç»†ä»‹ç»å¦‚ä½•è¾“å‡ºåˆ° ClickHouse Example configurations\n[sinks.my_sink_id] type = \u0026#34;clickhouse\u0026#34; inputs = [ \u0026#34;my-source-or-transform-id\u0026#34; ] endpoint = \u0026#34;http://localhost:8123\u0026#34; table = \u0026#34;mytable\u0026#34; å¦‚æœè¿˜éœ€è¦è®¤è¯ç™»å½•, æ­¤å¤„ä»¥ç”¨æˆ·å¯†ç ç™»å½•ä¸ºä¾‹\n[sinks.my_sink_id.auth] strategy = \u0026#34;basic\u0026#34; user = \u0026#34;default\u0026#34; password = \u0026#34;your_password\u0026#34; å…³äº ClickHouse æ•°æ®åº“çš„ä½¿ç”¨è§ç¬”è®° ğŸ‘‰é«˜æ€§èƒ½æ•°æ®åº“ ClickHouse\n","permalink":"http://localhost:1313/toolkits/vector/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eVector æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½æ—¥å¿—ä¸æŒ‡æ ‡é‡‡é›†ä»£ç†ï¼Œå®ƒä»å„ç§ source æ”¶é›†æ•°æ®ï¼Œç»è¿‡ transform å¤„ç†åå‘é€åˆ° sinkï¼ˆå¦‚ Lokiã€ClickHouseã€Kafkaã€Elasticsearch ç­‰ï¼‰\u003cbr\u003e\nå®ƒçš„ç‰¹ç‚¹æ˜¯é«˜ååã€ä½å»¶è¿Ÿã€æ— éœ€ä¾èµ– JVMã€è½»é‡å¥½éƒ¨ç½²ï¼Œéå¸¸é€‚åˆè¾¹ç¼˜èŠ‚ç‚¹å’Œå®¹å™¨ç¯å¢ƒ\næœ¬æ–‡ä¸»è¦è®²è¿° \u003ccode\u003eEvents\u003c/code\u003e å’Œ \u003ccode\u003eCompnents\u003c/code\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-é…ç½®ç»“æ„æ¦‚è§ˆ\"\u003e1. é…ç½®ç»“æ„æ¦‚è§ˆ\u003c/h2\u003e\n\u003cp\u003eVector æœ‰ä¸¤ç§æ•°æ®æ¨¡å‹ (Data Model), åˆç§°äº‹ä»¶(Events):\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eLogs\u003c/strong\u003e: ç”¨äºè¡¨ç¤ºç»“æ„åŒ–æˆ–éç»“æ„åŒ–æ—¥å¿—æ•°æ®\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003emetrics\u003c/strong\u003e: ç”¨äºè¡¨ç¤ºæŒ‡æ ‡æ•°æ®\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eVector çš„é…ç½®ç”±ä¸‰ä¸ªæ ¸å¿ƒéƒ¨åˆ† (Compnets) ç»„æˆï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003esources\u003c/strong\u003eï¼šæ•°æ®é‡‡é›†æº\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003etransforms\u003c/strong\u003eï¼šæ•°æ®å¤„ç†ä¸è§£æ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003esinks\u003c/strong\u003eï¼šè¾“å‡ºç›®æ ‡\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"2-data-modelevents\"\u003e2. Data model(events)\u003c/h2\u003e\n\u003cp\u003e\u003cimg alt=\"Data model\" loading=\"lazy\" src=\"/Toolkits/vector/Data_model.webp\"\u003e\u003c/p\u003e\n\u003ch3 id=\"log-events\"\u003eLog events\u003c/h3\u003e\n\u003cp\u003eHereâ€™s an example representation of a log event (as JSON):\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-log\" data-lang=\"log\"\u003e{\n  \u0026#34;log\u0026#34;: {\n    \u0026#34;custom\u0026#34;: \u0026#34;field\u0026#34;,\n    \u0026#34;host\u0026#34;: \u0026#34;my.host.com\u0026#34;,\n    \u0026#34;message\u0026#34;: \u0026#34;Hello world\u0026#34;,\n    \u0026#34;timestamp\u0026#34;: \u0026#34;2020-11-01T21:15:47+00:00\u0026#34;\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"metric-event\"\u003eMetric event\u003c/h3\u003e\n\u003cp\u003eæ­¤å¤„ç•™ç»™ä»¥åæ’°å†™\u003c/p\u003e\n\u003ch2 id=\"3-compnents\"\u003e3. Compnents\u003c/h2\u003e\n\u003ch3 id=\"31-source\"\u003e3.1 source\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003eè¯¦ç»†é…ç½®è¯·è§ ğŸ‘‰ \u003ca href=\"https://vector.dev/docs/reference/configuration/sources/\"\u003eSources reference\u003c/a\u003e\u003c/p\u003e","title":"Vector æ—¥å¿—é‡‡é›†ä¸å¤„ç†"},{"content":"ClickHouse é«˜æ€§èƒ½æ•°æ®åº“ ClickHouse æ˜¯ä¸€æ¬¾ å¼€æºã€é«˜æ€§èƒ½çš„åˆ—å¼æ•°æ®åº“ï¼Œä¸»è¦ç”¨äº å¤§è§„æ¨¡æ•°æ®åˆ†æ (OLAP) å’Œ å®æ—¶æŸ¥è¯¢ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼š\nåˆ—å¼å­˜å‚¨ï¼Œè¯»å–æŒ‡å®šåˆ—éå¸¸å¿« æ”¯æŒé«˜å¹¶å‘å†™å…¥å’ŒæŸ¥è¯¢ å¼ºå¤§çš„èšåˆåŠŸèƒ½ï¼Œé€‚åˆæŠ¥è¡¨å’Œæ—¥å¿—åˆ†æ æ”¯æŒ SQL æŸ¥è¯¢ï¼Œæ˜“ä¸Šæ‰‹ 1ï¸. å®‰è£…ä¸å¿«é€Ÿå¼€å§‹ å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£æˆ–ç¤¾åŒºæ•™ç¨‹ ğŸ‘‰ClickHouse å®˜æ–¹æ–‡æ¡£\n1.1 å®‰è£… curl https://clickhouse.com/ | sh sudo ./clickhouse install 1.2 è¿è¡Œ $ clickhouse-client --host server ClickHouse client version 24.12.2.29 (official build). Connecting to server:9000 as user default. Connected to ClickHouse server version 24.12.2. :) Specify additional connection details as necessary:\nOption Description --port \u0026lt;port\u0026gt; The port ClickHouse server is accepting connections on. The default ports are 9440 (TLS) and 9000 (no TLS). Note that ClickHouse Client uses the native protocol and not HTTP(S). -s [--secure] Whether to use TLS (usually autodetected). -u [--user] \u0026lt;username\u0026gt; The database user to connect as. Connects as the default user by default. --password \u0026lt;password\u0026gt; The password of the database user. You can also specify the password for a connection in the configuration file. If you do not specify the password, the client will ask for it. -c [--config] \u0026lt;path-to-file\u0026gt; The location of the configuration file for ClickHouse Client, if it is not at one of the default locations. See Configuration Files. 1.3 é€€å‡º To exit the client, press Ctrl+D, or enter one of the following instead of a query:\nexit or exit; quit or quit; q, Q or :q logout or logout; 2. åº“å’Œè¡¨çš„åˆ›å»º åœ¨ ClickHouse ä¸­ï¼Œæ•°æ®å­˜å‚¨çš„åŸºæœ¬å•å…ƒæ˜¯ æ•°æ®åº“ï¼ˆDatabaseï¼‰ å’Œ è¡¨ï¼ˆTableï¼‰ã€‚\nä¸‹é¢æ˜¯åˆ›å»ºåº“å’Œè¡¨çš„ç¤ºä¾‹ï¼š\n2.1 åˆ›å»ºæ•°æ®åº“ CREATE DATABASE IF NOT EXISTS analytics; IF NOT EXISTS â†’ é¿å…æ•°æ®åº“å·²å­˜åœ¨æ—¶æŠ¥é”™\nanalytics â†’ æ•°æ®åº“åç§°ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡è‡ªå®šä¹‰\n2.2 åˆ›å»ºè¡¨ CREATE TABLE IF NOT EXISTS analytics.visits ( user_id UInt32, page_id UInt32, timestamp DateTime ) ENGINE = MergeTree() ORDER BY timestamp; MergeTree() â†’ é«˜æ€§èƒ½è¡¨å¼•æ“\nORDER BY timestamp â†’ æŒ‰æ—¶é—´åˆ—æ’åºä¼˜åŒ–æŸ¥è¯¢\nIF NOT EXISTS â†’ é¿å…è¡¨å·²å­˜åœ¨æ—¶æŠ¥é”™\n3. æ•°æ®å†™å…¥ä¸æŸ¥è¯¢ æ­¤å¤„ä»¥åæ’°å†™\n","permalink":"http://localhost:1313/toolkits/clickhouse/","summary":"\u003ch1 id=\"clickhouse-é«˜æ€§èƒ½æ•°æ®åº“\"\u003eClickHouse é«˜æ€§èƒ½æ•°æ®åº“\u003c/h1\u003e\n\u003cp\u003eClickHouse æ˜¯ä¸€æ¬¾ \u003cstrong\u003eå¼€æºã€é«˜æ€§èƒ½çš„åˆ—å¼æ•°æ®åº“\u003c/strong\u003eï¼Œä¸»è¦ç”¨äº \u003cstrong\u003eå¤§è§„æ¨¡æ•°æ®åˆ†æ (OLAP)\u003c/strong\u003e å’Œ \u003cstrong\u003eå®æ—¶æŸ¥è¯¢\u003c/strong\u003eã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåˆ—å¼å­˜å‚¨ï¼Œè¯»å–æŒ‡å®šåˆ—éå¸¸å¿«\u003c/li\u003e\n\u003cli\u003eæ”¯æŒé«˜å¹¶å‘å†™å…¥å’ŒæŸ¥è¯¢\u003c/li\u003e\n\u003cli\u003eå¼ºå¤§çš„èšåˆåŠŸèƒ½ï¼Œé€‚åˆæŠ¥è¡¨å’Œæ—¥å¿—åˆ†æ\u003c/li\u003e\n\u003cli\u003eæ”¯æŒ SQL æŸ¥è¯¢ï¼Œæ˜“ä¸Šæ‰‹\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-å®‰è£…ä¸å¿«é€Ÿå¼€å§‹\"\u003e1ï¸. å®‰è£…ä¸å¿«é€Ÿå¼€å§‹\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£æˆ–ç¤¾åŒºæ•™ç¨‹ ğŸ‘‰\u003ca href=\"https://clickhouse.com/docs/\"\u003eClickHouse å®˜æ–¹æ–‡æ¡£\u003c/a\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003ch3 id=\"11-å®‰è£…\"\u003e1.1 å®‰è£…\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ecurl https://clickhouse.com/ \u003cspan class=\"p\"\u003e|\u003c/span\u003e sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo ./clickhouse install\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"12-è¿è¡Œ\"\u003e1.2 è¿è¡Œ\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ clickhouse-client --host server\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eClickHouse client version 24.12.2.29 \u003cspan class=\"o\"\u003e(\u003c/span\u003eofficial build\u003cspan class=\"o\"\u003e)\u003c/span\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eConnecting to server:9000 as user default.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eConnected to ClickHouse server version 24.12.2.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e:\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eSpecify additional connection details as necessary:\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eOption\u003c/th\u003e\n          \u003cth\u003eDescription\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e--port \u0026lt;port\u0026gt;\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eThe port ClickHouse server is accepting connections on. The default ports are 9440 (TLS) and 9000 (no TLS). Note that ClickHouse Client uses the native protocol and not HTTP(S).\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-s [--secure]\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eWhether to use TLS (usually autodetected).\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-u [--user] \u0026lt;username\u0026gt;\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eThe database user to connect as. Connects as the default user by default.\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e--password \u0026lt;password\u0026gt;\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eThe password of the database user. You can also specify the password for a connection in the configuration file. If you do not specify the password, the client will ask for it.\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-c [--config] \u0026lt;path-to-file\u0026gt;\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eThe location of the configuration file for ClickHouse Client, if it is not at one of the default locations. See Configuration Files.\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch3 id=\"13-é€€å‡º\"\u003e1.3 é€€å‡º\u003c/h3\u003e\n\u003cp\u003eTo exit the client, press Ctrl+D, or enter one of the following instead of a query:\u003c/p\u003e","title":"ClickHouse é«˜æ€§èƒ½æ•°æ®åº“"},{"content":"ç®€ä»‹ qr-scanner æ˜¯ä¸€æ¬¾çº¯å‰ç«¯ã€é›¶ä¾èµ–çš„ JavaScript äºŒç»´ç æ‰«æåº“ï¼Œå®Œå…¨åœ¨æµè§ˆå™¨ç«¯è¿è¡Œï¼Œæ— éœ€åç«¯é…åˆã€‚å®ƒåŒæ—¶æ”¯æŒï¼š\næ‘„åƒå¤´å®æ—¶æ‰«ç  é™æ€å›¾ç‰‡/æ–‡ä»¶ç¦»çº¿æ‰«ç ï¼ˆæ”¯æŒ \u0026lt;img\u0026gt;ã€\u0026lt;canvas\u0026gt;ã€\u0026lt;video\u0026gt;ã€Fileã€Blob ç­‰å¤šç§æ¥æºï¼‰ åº•å±‚ä½¿ç”¨ WebAssembly åŠ é€Ÿè§£ç ï¼Œè¯†åˆ«é€Ÿåº¦å¿«ã€å‡†ç¡®ç‡é«˜ï¼Œåœ¨æ‰‹æœºç«¯è¡¨ç°å°¤ä¸ºä¼˜ç§€ï¼Œæ˜¯ç›®å‰æœ€æ¨èçš„å‰ç«¯äºŒç»´ç æ‰«ææ–¹æ¡ˆ\næœ¬æ–‡ä»¥ React + Next.js æ¡†æ¶ä¸ºä¾‹\n1. å®‰è£… npm install qr-scanner æˆ–ä½¿ç”¨ yarnï¼š\nyarn add qr-scanner æ³¨æ„ï¼šå·²ä¸å†æ¨èç›´æ¥ç”¨ \u0026lt;script\u0026gt; æ ‡ç­¾å¼•å…¥ï¼Œç°ä»£é¡¹ç›®è¯·é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…\n2. åŸºæœ¬å¼•å…¥æ–¹å¼ import QrScanner from \u0026#39;qr-scanner\u0026#39;; 3. æ ¸å¿ƒç±»ï¼šQrScanner 3.1 æ‘„åƒå¤´å®æ—¶æ‰«ç  const videoElement = document.getElementById(\u0026#39;video\u0026#39;) as HTMLVideoElement; const scanner = new QrScanner( videoElement, (result) =\u0026gt; { console.log(\u0026#39;æ‰«ç æˆåŠŸ:\u0026#39;, result.data); // result.cornerPoints å¯ç”¨æ¥åšè¾¹æ¡†åŠ¨ç”» }, { returnDetailedScanResult: true, // è¿”å›å®Œæ•´å¯¹è±¡è€Œéä»…å­—ç¬¦ä¸² highlightScanRegion: true, // æ˜¾ç¤ºæ‰«æåŒºåŸŸé®ç½© highlightCodeOutline: true, // é«˜äº®äºŒç»´ç è½®å»“ } ); // å¯åŠ¨æ‘„åƒå¤´ await scanner.start(); // åœæ­¢æ‰«æ scanner.stop(); å¸¸ç”¨é…ç½®é¡¹ å‚æ•° è¯´æ˜ returnDetailedScanResult true æ—¶è¿”å› { data, cornerPoints } å¯¹è±¡ highlightScanRegion æ˜¾ç¤ºåŠé€æ˜æ‰«æåŒºåŸŸæ¡† highlightCodeOutline å®æ—¶ç»˜åˆ¶äºŒç»´ç å››è§’è½®å»“ 3.2 ç¦»çº¿æ‰«æå›¾ç‰‡æ–‡ä»¶ const file: File = æ–‡ä»¶è¾“å…¥æ¡†.files[0]; const result = await QrScanner.scanImage(file, { returnDetailedScanResult: true }); console.log(\u0026#39;äºŒç»´ç å†…å®¹:\u0026#39;, result.data); æ”¯æŒæ‰€æœ‰å›¾ç‰‡æºï¼šFileã€Blobã€HTMLImageElementã€HTMLCanvasElementã€URL ç­‰\n4. å¸¸ç”¨åœºæ™¯ç¤ºä¾‹ 4.1 æ‘„åƒå¤´æ‰«ç è‡ªåŠ¨å¡«å……åœ°å€ const scanner = new QrScanner(videoRef.current!, (result) =\u0026gt; { const match = result.data.match(/0x[a-fA-F0-9]{40}/i); if (match) { setAddress(match[0] as `0x${string}`); scanner.stop(); // æ‰«åˆ°å³åœæ­¢ onClose(); // å…³é—­å¼¹çª— } }); await scanner.start(); 4.2 ä¸Šä¼ å›¾ç‰‡æ‰«ç  const handleUpload = async (file: File) =\u0026gt; { try { const result = await QrScanner.scanImage(file); setAddress(result.data); message.success(\u0026#39;æ‰«ç æˆåŠŸ\u0026#39;); } catch (e) { message.error(\u0026#39;æœªè¯†åˆ«åˆ°äºŒç»´ç \u0026#39;); } }; 4.3 æ­£ç¡®é”€æ¯å®ä¾‹ï¼ˆå¾ˆé‡è¦ï¼ï¼‰ // React useEffect æ¸…ç†ç¤ºä¾‹ useEffect(() =\u0026gt; { return () =\u0026gt; { scanner?.stop(); scanner?.destroy(); scanner = null; }; }, []); ä¸é”€æ¯ä¼šå¯¼è‡´æ‘„åƒå¤´ä¸€ç›´è¢«å ç”¨ã€å†…å­˜æ³„æ¼\n5. React é¡¹ç›®æ³¨æ„äº‹é¡¹ video å…ƒç´ å¿…é¡»é€šè¿‡ useRef ç»‘å®šï¼Œä¸èƒ½ç›´æ¥ç”¨ document.getElementById å»ºè®®åœ¨å¼¹çª—/æŠ½å±‰æ‰“å¼€æ—¶æ‰ start()ï¼Œå…³é—­æ—¶ç«‹å³ stop + destroy start() æ˜¯å¼‚æ­¥çš„ï¼Œå»ºè®®åŠ  await å¹¶ try/catch å¤„ç†æƒé™é—®é¢˜ è¯†åˆ«ä»¥å¤ªåŠåœ°å€æ¨èæ­£åˆ™ï¼š/0x[a-fA-F0-9]{40}/i æä¾›ã€Œä¸Šä¼ å›¾ç‰‡æ‰«ç ã€ä½œä¸ºæ‘„åƒå¤´å¤±è´¥çš„å…œåº•æ–¹æ¡ˆ 6. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ é—®é¢˜ è§£å†³æ–¹æ¡ˆ æ‘„åƒå¤´é»‘å±/æ— æ³•å¼€å¯ å¿…é¡» HTTPS æˆ– localhostï¼›æ£€æŸ¥æ˜¯å¦å·²æˆæƒæ‘„åƒå¤´ start() æŠ¥é”™ ç¡®ä¿ videoRef.current å·²æœ‰å€¼ï¼Œä¸”ä¸Šä¸€ä¸ª scanner å·² destroy æ‰«ä¸åˆ°ç  å…‰çº¿è¦å……è¶³ã€äºŒç»´ç è¦å®Œæ•´ï¼›å¯æç¤ºç”¨æˆ·ã€Œæ”¯æŒä¸Šä¼ å›¾ç‰‡æ‰«ç ã€ åˆ‡æ¢é¡µé¢åæ‘„åƒå¤´ä»å ç”¨ ç»„ä»¶å¸è½½å¿…é¡»æ‰§è¡Œ stop() + destroy() æ‰‹æœºç«¯è¯†åˆ«æ…¢ qr-scanner å·²ä½¿ç”¨ WASMï¼Œå±äºç›®å‰æœ€å¿«æ–¹æ¡ˆï¼›ä»å»ºè®®ä¿æŒäºŒç»´ç å å± 1/3 ä»¥ä¸Šå¤§å° 7. æ€»ç»“ å®æ—¶æ‘„åƒå¤´æ‰«ç  + ç¦»çº¿å›¾ç‰‡æ‰«ç ä¸€æŠŠæŠ“ è¯†åˆ«é€Ÿåº¦å¿«ã€å‡†ç¡®ç‡é«˜ã€æ‰‹æœºç«¯è¡¨ç°ä¼˜ç§€ æä¾›æ‰«æåŒºåŸŸé«˜äº®ã€äºŒç»´ç è½®å»“é«˜äº®ã€è§’ç‚¹æ•°æ®ç­‰é«˜çº§åŠŸèƒ½ React ä½¿ç”¨æ—¶é…åˆ useRef + useEffect ç”Ÿå‘½å‘¨æœŸç®¡ç†å³å¯ å¼ºçƒˆå»ºè®®æ­é…ã€Œä¸Šä¼ å›¾ç‰‡æ‰«ç ã€ä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆï¼Œç”¨æˆ·ä½“éªŒæ›´ä½³ ","permalink":"http://localhost:1313/toolkits/qr-scanner/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003e\u003ccode\u003eqr-scanner\u003c/code\u003e æ˜¯ä¸€æ¬¾çº¯å‰ç«¯ã€é›¶ä¾èµ–çš„ JavaScript äºŒç»´ç æ‰«æåº“ï¼Œå®Œå…¨åœ¨æµè§ˆå™¨ç«¯è¿è¡Œï¼Œæ— éœ€åç«¯é…åˆã€‚å®ƒåŒæ—¶æ”¯æŒï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæ‘„åƒå¤´å®æ—¶æ‰«ç \u003c/li\u003e\n\u003cli\u003eé™æ€å›¾ç‰‡/æ–‡ä»¶ç¦»çº¿æ‰«ç ï¼ˆæ”¯æŒ \u003ccode\u003e\u0026lt;img\u0026gt;\u003c/code\u003eã€\u003ccode\u003e\u0026lt;canvas\u0026gt;\u003c/code\u003eã€\u003ccode\u003e\u0026lt;video\u0026gt;\u003c/code\u003eã€Fileã€Blob ç­‰å¤šç§æ¥æºï¼‰\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eåº•å±‚ä½¿ç”¨ WebAssembly åŠ é€Ÿè§£ç ï¼Œè¯†åˆ«é€Ÿåº¦å¿«ã€å‡†ç¡®ç‡é«˜ï¼Œåœ¨æ‰‹æœºç«¯è¡¨ç°å°¤ä¸ºä¼˜ç§€ï¼Œæ˜¯ç›®å‰æœ€æ¨èçš„å‰ç«¯äºŒç»´ç æ‰«ææ–¹æ¡ˆ\u003c/p\u003e\n\u003cp\u003eæœ¬æ–‡ä»¥ \u003ccode\u003eReact + Next.js\u003c/code\u003e æ¡†æ¶ä¸ºä¾‹\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-å®‰è£…\"\u003e1. å®‰è£…\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003enpm install qr-scanner\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæˆ–ä½¿ç”¨ yarnï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eyarn add qr-scanner\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003eæ³¨æ„ï¼šå·²ä¸å†æ¨èç›´æ¥ç”¨ \u003ccode\u003e\u0026lt;script\u0026gt;\u003c/code\u003e æ ‡ç­¾å¼•å…¥ï¼Œç°ä»£é¡¹ç›®è¯·é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…\u003c/p\u003e\u003c/blockquote\u003e\n\u003chr\u003e\n\u003ch2 id=\"2-åŸºæœ¬å¼•å…¥æ–¹å¼\"\u003e2. åŸºæœ¬å¼•å…¥æ–¹å¼\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eQrScanner\u003c/span\u003e \u003cspan class=\"kr\"\u003efrom\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;qr-scanner\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"3-æ ¸å¿ƒç±»qrscanner\"\u003e3. æ ¸å¿ƒç±»ï¼šQrScanner\u003c/h2\u003e\n\u003ch3 id=\"31-æ‘„åƒå¤´å®æ—¶æ‰«ç \"\u003e3.1 æ‘„åƒå¤´å®æ—¶æ‰«ç \u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003evideoElement\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003edocument\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetElementById\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;video\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"kr\"\u003eas\u003c/span\u003e \u003cspan class=\"nx\"\u003eHTMLVideoElement\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003escanner\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eQrScanner\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003evideoElement\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;æ‰«ç æˆåŠŸ:\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// result.cornerPoints å¯ç”¨æ¥åšè¾¹æ¡†åŠ¨ç”»\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e  \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nx\"\u003ereturnDetailedScanResult\u003c/span\u003e: \u003cspan class=\"kt\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"c1\"\u003e// è¿”å›å®Œæ•´å¯¹è±¡è€Œéä»…å­—ç¬¦ä¸²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003ehighlightScanRegion\u003c/span\u003e: \u003cspan class=\"kt\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e      \u003cspan class=\"c1\"\u003e// æ˜¾ç¤ºæ‰«æåŒºåŸŸé®ç½©\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003ehighlightCodeOutline\u003c/span\u003e: \u003cspan class=\"kt\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e     \u003cspan class=\"c1\"\u003e// é«˜äº®äºŒç»´ç è½®å»“\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// å¯åŠ¨æ‘„åƒå¤´\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003escanner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estart\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// åœæ­¢æ‰«æ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"nx\"\u003escanner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estop\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"å¸¸ç”¨é…ç½®é¡¹\"\u003eå¸¸ç”¨é…ç½®é¡¹\u003c/h4\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eå‚æ•°\u003c/th\u003e\n          \u003cth\u003eè¯´æ˜\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ereturnDetailedScanResult\u003c/td\u003e\n          \u003ctd\u003etrue æ—¶è¿”å› { data, cornerPoints } å¯¹è±¡\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ehighlightScanRegion\u003c/td\u003e\n          \u003ctd\u003eæ˜¾ç¤ºåŠé€æ˜æ‰«æåŒºåŸŸæ¡†\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ehighlightCodeOutline\u003c/td\u003e\n          \u003ctd\u003eå®æ—¶ç»˜åˆ¶äºŒç»´ç å››è§’è½®å»“\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch3 id=\"32-ç¦»çº¿æ‰«æå›¾ç‰‡æ–‡ä»¶\"\u003e3.2 ç¦»çº¿æ‰«æå›¾ç‰‡æ–‡ä»¶\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003efile\u003c/span\u003e: \u003cspan class=\"kt\"\u003eFile\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"err\"\u003eæ–‡ä»¶è¾“å…¥æ¡†\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efiles\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eQrScanner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003escanImage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efile\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003ereturnDetailedScanResult\u003c/span\u003e: \u003cspan class=\"kt\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;äºŒç»´ç å†…å®¹:\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæ”¯æŒæ‰€æœ‰å›¾ç‰‡æºï¼šFileã€Blobã€HTMLImageElementã€HTMLCanvasElementã€URL ç­‰\u003c/p\u003e","title":"QR Scanner ä½¿ç”¨æŒ‡å—"},{"content":"ç®€ä»‹ æœ¬æ–‡æ¡£æ€»ç»“äº†åœ¨ Hugo + PaperMod ä¸»é¢˜ ä¸‹è‡ªå®šä¹‰åšå®¢æ¨¡æ¿çš„é…ç½®æ–¹æ³•ï¼ŒåŒ…æ‹¬é™æ€èµ„æºä¼˜åŒ–ã€Nginx éƒ¨ç½²ã€ç¼“å­˜ç­–ç•¥å’Œå›¾ç‰‡åŠ é€ŸæŠ€å·§\n","permalink":"http://localhost:1313/toolkits/hugo_papermod/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eæœ¬æ–‡æ¡£æ€»ç»“äº†åœ¨ \u003cstrong\u003eHugo + PaperMod ä¸»é¢˜\u003c/strong\u003e ä¸‹è‡ªå®šä¹‰åšå®¢æ¨¡æ¿çš„é…ç½®æ–¹æ³•ï¼ŒåŒ…æ‹¬é™æ€èµ„æºä¼˜åŒ–ã€Nginx éƒ¨ç½²ã€ç¼“å­˜ç­–ç•¥å’Œå›¾ç‰‡åŠ é€ŸæŠ€å·§\u003c/p\u003e\n\u003chr\u003e","title":"Hugo-PaperMod è‡ªå®šä¹‰åšå®¢æ¨¡æ¿"},{"content":"","permalink":"http://localhost:1313/toolkits/indexeddb/","summary":"","title":"IndexedDB æµè§ˆå™¨æ•°æ®åº“"},{"content":"ç¼–ç¨‹å­¦ä¹  åœ¨å¤§å­¦æœŸé—´ï¼Œæˆ‘ä¸»è¦å­¦ä¹ äº†ä»¥ä¸‹ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯ï¼š\nPythonï¼šç”¨äºæ•°æ®åˆ†æã€è„šæœ¬è‡ªåŠ¨åŒ– Javaï¼šé¢å‘å¯¹è±¡è®¾è®¡å’Œå¤§å‹é¡¹ç›®å¼€å‘ C/C++ï¼šç³»ç»Ÿç¼–ç¨‹å’Œç®—æ³•å®ç° Web å¼€å‘ï¼šHTMLã€CSSã€JavaScriptï¼Œæ­å»ºä¸ªäººé¡¹ç›®ç½‘ç«™ é¡¹ç›®å®è·µ Web3 å®éªŒé¡¹ç›®ï¼šä½¿ç”¨åŒºå—é“¾ç›¸å…³æŠ€æœ¯å®ç°ç®€å•çš„å»ä¸­å¿ƒåŒ–åº”ç”¨ æ•°æ®åˆ†æé¡¹ç›®ï¼šPython + Pandas å¯¹å®éªŒæ•°æ®è¿›è¡Œå¤„ç†ä¸å¯è§†åŒ– è¯¾è®¾ä¸å®éªŒï¼šå›¢é˜Ÿåä½œå®Œæˆ Java å’Œ C++ é¡¹ç›®ï¼Œç§¯ç´¯ç‰ˆæœ¬æ§åˆ¶ç»éªŒ å­¦ä¹ å¿ƒå¾— ç†è®ºå­¦ä¹ å’Œå®è·µç»“åˆï¼ŒåŠ¨æ‰‹åšé¡¹ç›®æ‰èƒ½åŠ æ·±ç†è§£ å­¦ä¼šåˆ©ç”¨ Git/GitHub è¿›è¡Œç‰ˆæœ¬æ§åˆ¶å’Œåä½œ å¤šåšç¬”è®°ï¼Œè®°å½•å­¦ä¹ è¿‡ç¨‹ä¸­çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ å…³æ³¨æ–°æŠ€æœ¯åŠ¨æ€ï¼Œä¾‹å¦‚ Web3ã€AIã€äº‘è®¡ç®—ç­‰ æŠ€æœ¯åˆ†äº«è®¡åˆ’ å®šæœŸåœ¨åšå®¢å‘å¸ƒå­¦ä¹ ç¬”è®°ä¸é¡¹ç›®æ€»ç»“ åˆ†äº«ä»£ç ç¤ºä¾‹å’Œå®éªŒæ•™ç¨‹ï¼Œä¾¿äºåŒå­¦å‚è€ƒ æŒç»­æ›´æ–°æŠ€æœ¯æ ˆï¼Œè®°å½•æˆé•¿è¿‡ç¨‹ ","permalink":"http://localhost:1313/uestc/intro/","summary":"\u003ch2 id=\"ç¼–ç¨‹å­¦ä¹ \"\u003eç¼–ç¨‹å­¦ä¹ \u003c/h2\u003e\n\u003cp\u003eåœ¨å¤§å­¦æœŸé—´ï¼Œæˆ‘ä¸»è¦å­¦ä¹ äº†ä»¥ä¸‹ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePython\u003c/strong\u003eï¼šç”¨äºæ•°æ®åˆ†æã€è„šæœ¬è‡ªåŠ¨åŒ–\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eJava\u003c/strong\u003eï¼šé¢å‘å¯¹è±¡è®¾è®¡å’Œå¤§å‹é¡¹ç›®å¼€å‘\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eC/C++\u003c/strong\u003eï¼šç³»ç»Ÿç¼–ç¨‹å’Œç®—æ³•å®ç°\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eWeb å¼€å‘\u003c/strong\u003eï¼šHTMLã€CSSã€JavaScriptï¼Œæ­å»ºä¸ªäººé¡¹ç›®ç½‘ç«™\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"é¡¹ç›®å®è·µ\"\u003eé¡¹ç›®å®è·µ\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eWeb3 å®éªŒé¡¹ç›®\u003c/strong\u003eï¼šä½¿ç”¨åŒºå—é“¾ç›¸å…³æŠ€æœ¯å®ç°ç®€å•çš„å»ä¸­å¿ƒåŒ–åº”ç”¨\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæ•°æ®åˆ†æé¡¹ç›®\u003c/strong\u003eï¼šPython + Pandas å¯¹å®éªŒæ•°æ®è¿›è¡Œå¤„ç†ä¸å¯è§†åŒ–\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eè¯¾è®¾ä¸å®éªŒ\u003c/strong\u003eï¼šå›¢é˜Ÿåä½œå®Œæˆ Java å’Œ C++ é¡¹ç›®ï¼Œç§¯ç´¯ç‰ˆæœ¬æ§åˆ¶ç»éªŒ\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å­¦ä¹ å¿ƒå¾—\"\u003eå­¦ä¹ å¿ƒå¾—\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eç†è®ºå­¦ä¹ å’Œå®è·µç»“åˆï¼ŒåŠ¨æ‰‹åšé¡¹ç›®æ‰èƒ½åŠ æ·±ç†è§£\u003c/li\u003e\n\u003cli\u003eå­¦ä¼šåˆ©ç”¨ Git/GitHub è¿›è¡Œç‰ˆæœ¬æ§åˆ¶å’Œåä½œ\u003c/li\u003e\n\u003cli\u003eå¤šåšç¬”è®°ï¼Œè®°å½•å­¦ä¹ è¿‡ç¨‹ä¸­çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ\u003c/li\u003e\n\u003cli\u003eå…³æ³¨æ–°æŠ€æœ¯åŠ¨æ€ï¼Œä¾‹å¦‚ Web3ã€AIã€äº‘è®¡ç®—ç­‰\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"æŠ€æœ¯åˆ†äº«è®¡åˆ’\"\u003eæŠ€æœ¯åˆ†äº«è®¡åˆ’\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eå®šæœŸåœ¨åšå®¢å‘å¸ƒå­¦ä¹ ç¬”è®°ä¸é¡¹ç›®æ€»ç»“\u003c/li\u003e\n\u003cli\u003eåˆ†äº«ä»£ç ç¤ºä¾‹å’Œå®éªŒæ•™ç¨‹ï¼Œä¾¿äºåŒå­¦å‚è€ƒ\u003c/li\u003e\n\u003cli\u003eæŒç»­æ›´æ–°æŠ€æœ¯æ ˆï¼Œè®°å½•æˆé•¿è¿‡ç¨‹\u003c/li\u003e\n\u003c/ul\u003e","title":"UESTC ç®€ä»‹"},{"content":"Welcome to Web3! Web3ä»£è¡¨äº’è”ç½‘ä¸‹ä¸€ä¸ªæ—¶ä»£ä»¥åŒºå—é“¾ä¸ºæ ¸å¿ƒå®ç°å»ä¸­å¿ƒåŒ–ç”¨æˆ·æŒæ§æ•°æ®å’Œèµ„äº§é€šè¿‡æ™ºèƒ½åˆçº¦è‡ªåŠ¨åŒ–äº¤äº’æ‘†è„±ä¸­å¿ƒåŒ–å¹³å°æ§åˆ¶\nsecurity Web3å®‰å…¨èšç„¦é¢„é˜²é»‘å®¢æ”»å‡»å’Œæ¼æ´åˆ©ç”¨\né‡‡ç”¨å¤šå±‚é˜²å¾¡ç­–ç•¥åŒ…æ‹¬æ™ºèƒ½åˆçº¦å®¡è®¡è®¿é—®æ§åˆ¶å®æ—¶ç›‘æ§\nä½¿ç”¨Slither Mythrilæ£€æµ‹é‡å…¥æ”»å‡»æ•´æ•°æº¢å‡ºæƒé™é—®é¢˜\næœ€ä½³å®è·µå¼ºè°ƒç§é’¥ç®¡ç†å¤šç­¾åé’±åŒ…ç´§æ€¥æš‚åœæœºåˆ¶\n2025å¹´ä¸»è¦å¨èƒåŒ…æ‹¬é—ªè´·æ²»ç†æ”»å‡»è·¨é“¾æ¡¥æ¼æ´é’“é±¼æ”»å‡»\nå¼ºè°ƒå®‰å…¨å³ä»£ç ä»è®¾è®¡é˜¶æ®µæ•´åˆå½¢å¼éªŒè¯AIé©±åŠ¨ç›‘æ§\nå¼€æºåº“OpenZeppelinæä¾›å®‰å…¨åˆçº¦æ¨¡æ¿å‡å°‘å¸¸è§é”™è¯¯\næœºæ„çº§é¡¹ç›®éœ€æŒç»­å®¡è®¡æ¼æ´èµé‡‘è®¡åˆ’æ„å»ºä¿¡ä»»\nwallet é’±åŒ…æ˜¯Web3å…¥å£ç®¡ç†ç§é’¥å’Œèµ„äº§äº¤äº’\nåˆ†ä¸ºçƒ­é’±åŒ…å’Œå†·é’±åŒ…\nçƒ­é’±åŒ…å¦‚MetaMaskæµè§ˆå™¨æ‰©å±•æ–¹ä¾¿dAppè¿æ¥ä½†æ˜“å—ç½‘ç»œæ”»å‡»\nå†·é’±åŒ…åŒ…æ‹¬Ledgerç¡¬ä»¶é’±åŒ…å’Œçº¸é’±åŒ…ç¦»çº¿å­˜å‚¨æ›´å®‰å…¨é€‚åˆå¤§é¢æŒæœ‰\néæ‰˜ç®¡é’±åŒ…ç”¨æˆ·å®Œå…¨æ§åˆ¶å¯†é’¥\næ‰˜ç®¡é’±åŒ…å¦‚Coinbaseç®€åŒ–ä½†ä¾èµ–å¹³å°\nERC-4337è´¦æˆ·æŠ½è±¡æå‡ç”¨æˆ·ä½“éªŒæ”¯æŒç¤¾äº¤æ¢å¤æ°”ä½“èµåŠ©\nå¤šé“¾é’±åŒ…å¦‚Rainbowæ”¯æŒLayer2é™ä½è´¹ç”¨\nå®‰å…¨æç¤ºå¿…é¡»ä½¿ç”¨ç¡¬ä»¶ç­¾åç»ä¸æ³„éœ²ç§å­çŸ­è¯­å®šæœŸå¤‡ä»½\neip ğŸ‘‰ EIP ç¬”è®°åˆé›†\nEIPæ˜¯ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆæ ‡å‡†åŒ–å¹³å°å˜æ›´\næ¶µç›–æ ¸å¿ƒåè®®å®¢æˆ·ç«¯APIåˆçº¦è§„èŒƒ\nä»»ä½•äººå¯æäº¤è‰æ¡ˆç»ç¤¾åŒºè®¨è®ºç¼–è¾‘å®¡æŸ¥è¿›å…¥æœ€ç»ˆçŠ¶æ€\næ ¸å¿ƒEIPéœ€å…¨ç½‘å…±è¯†å¯èƒ½å¼•å‘ç¡¬åˆ†å‰\nå¦‚EIP-1559å¼•å…¥åŸºç¡€è´¹å¸‚åœº\nERCæ˜¯EIPå­é›†ä¸“æ³¨åº”ç”¨å±‚æ ‡å‡†\nEIPè¿‡ç¨‹ç¡®ä¿é€æ˜åŒ…å®¹\nä»è‰ç¨¿åˆ°æœ€åè°ƒç”¨å†åˆ°æœ€ç»ˆå®æ–½\nEIP-4844å¼•å…¥blobæ•°æ®å¤§å¹…é™ä½Layer2æˆæœ¬\næœªæ¥EIPèšç„¦å¯æ‰©å±•æ€§éšç§å¦‚Verkleæ ‘\nerc ERCæ˜¯ä»¥å¤ªåŠè¯·æ±‚è¯„è®ºå®šä¹‰ä»£å¸å’Œåº”ç”¨æ ‡å‡†\nERC20ç”¨äºå¯äº’æ¢ä»£å¸å¦‚USDTæ”¯æŒè½¬ç§»æ‰¹å‡†ä½™é¢æŸ¥è¯¢\nERC721åˆ›å»ºéåŒè´¨åŒ–ä»£å¸NFTå”¯ä¸€æ ‡è¯†æ‰€æœ‰æƒå¦‚CryptoKitties\nERC1155å¤šä»£å¸æ ‡å‡†å•ä¸€åˆçº¦ç®¡ç†å¯äº’æ¢éåŒè´¨åŒ–åŠåŒè´¨åŒ–èµ„äº§\né«˜æ•ˆæ‰¹é‡è½¬ç§»èŠ‚çœæ°”ä½“é€‚ç”¨äºæ¸¸æˆç‰©å“ç¥¨åŠ¡\nè¿™äº›æ ‡å‡†ç¡®ä¿å…¨ç”Ÿæ€äº’æ“ä½œæ€§\nå¼€å‘è€…å¯ç›´æ¥æ„å»ºå…¼å®¹é¡¹ç›®\nERC20ä¸»å¯¼DeFi\nERC721æ¨åŠ¨NFTå¸‚åœº\nERC1155ä¼˜åŒ–å¤æ‚ç”¨ä¾‹\ncodeLanuage æ™ºèƒ½åˆçº¦è¯­è¨€æœ€ç»ˆç¼–è¯‘ä¸ºEVMå­—èŠ‚ç \nSolidityä¸»æµç±»JavaScriptæ”¯æŒç»§æ‰¿ä¿®é¥°ç¬¦åº“ç”Ÿæ€æœ€ä¸°å¯Œ\nVyper Pythoné£æ ¼æ•…æ„å»é™¤ç»§æ‰¿æ— é™å¾ªç¯æå‡å¯å®¡è®¡æ€§å®‰å…¨æ€§\nYulä¸­é—´è¯­è¨€ç”¨äºç²¾ç»†æ°”ä½“ä¼˜åŒ–\nRustä¸»è¦ç”¨äºSolanaéEVMé“¾\nEthereumç”Ÿæ€ä»ä»¥Solidityå’ŒVyperä¸ºä¸»\nå­¦ä¹ Solidityæ¨èä»Remix IDEå¼€å§‹\nVyperå¼ºè°ƒäººç±»å¯è¯»ä»£ç å‡å°‘æ”»å‡»é¢\né€‰æ‹©è¯­è¨€å–å†³äºé¡¹ç›®å¤æ‚åº¦å’Œå®‰å…¨ä¼˜å…ˆçº§\nevm EVMæ˜¯ä»¥å¤ªåŠè™šæ‹Ÿæœºå»ä¸­å¿ƒåŒ–è®¡ç®—å¼•æ“\næ‰§è¡Œæ™ºèƒ½åˆçº¦å­—èŠ‚ç é‡‡ç”¨æ ˆåŸºæ¶æ„æ·±åº¦1024\næ¯æ“ä½œç æ¶ˆè€—æ°”ä½“é˜²æ­¢æ»¥ç”¨\nTuringå®Œå¤‡æ”¯æŒä»»æ„é€»è¾‘ä½†æœ‰æ°”ä½“ä¸Šé™é¿å…æ— é™å¾ªç¯\nEVMè´Ÿè´£çŠ¶æ€è½¬æ¢æ›´æ–°è´¦æˆ·ä½™é¢å­˜å‚¨\næ‰€æœ‰èŠ‚ç‚¹ä¸€è‡´æ‰§è¡Œä¿è¯ç¡®å®šæ€§éš”ç¦»\nå…¼å®¹é“¾å¦‚Polygon Arbitrumå…±äº«EVMå®ç°æ— ç¼ç§»æ¤\næœªæ¥å‡çº§EOFå¼•å…¥å®¹å™¨åŒ–ä»£ç æå‡æ•ˆç‡\nEVMæ˜¯æ•´ä¸ªä»¥å¤ªåŠç”Ÿæ€çš„è®¡ç®—æ ¸å¿ƒ\nframework(é¡¹ç›®æ¡†æ¶) Web3å¼€å‘æ¡†æ¶å¤§å¹…ç®€åŒ–åˆçº¦æ„å»ºæµ‹è¯•éƒ¨ç½²\nHardhat JavaScriptåŸºç¡€æ’ä»¶åŒ–æ”¯æŒæ§åˆ¶å°æ—¥å¿—è‡ªå®šä¹‰ä»»åŠ¡æ·±åº¦é›†æˆEthers.js\nTruffleè€ç‰Œå¥—ä»¶è‡ªå¸¦Ganacheæœ¬åœ°é“¾Mochaæµ‹è¯•é€‚åˆæ–°æ‰‹\nFoundry Rustç¼–å†™è¶…å¿«ç¼–è¯‘é“¸é€ Anvilåˆ†å‰ä¸»ç½‘ç”¨Solidityå†™æµ‹è¯•æ”¯æŒæ¨¡ç³Šæµ‹è¯•\nå½“å‰ä¸»æµé€‰æ‹©\nHardhatçµæ´»åº¦æœ€é«˜\nTruffleæœ€é€‚åˆæ•™å­¦\nFoundryæ€§èƒ½æè‡´é€‚åˆé«˜çº§å¼€å‘è€…\næ­é…VS Code Solidityæ‰©å±•å¼€å‘ä½“éªŒæœ€ä½³\n","permalink":"http://localhost:1313/web3/intro/","summary":"\u003ch1 id=\"welcome-to-web3\"\u003eWelcome to Web3!\u003c/h1\u003e\n\u003cp\u003eWeb3ä»£è¡¨äº’è”ç½‘ä¸‹ä¸€ä¸ªæ—¶ä»£ä»¥åŒºå—é“¾ä¸ºæ ¸å¿ƒå®ç°å»ä¸­å¿ƒåŒ–ç”¨æˆ·æŒæ§æ•°æ®å’Œèµ„äº§é€šè¿‡æ™ºèƒ½åˆçº¦è‡ªåŠ¨åŒ–äº¤äº’æ‘†è„±ä¸­å¿ƒåŒ–å¹³å°æ§åˆ¶\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"security\"\u003esecurity\u003c/h2\u003e\n\u003cp\u003eWeb3å®‰å…¨èšç„¦é¢„é˜²é»‘å®¢æ”»å‡»å’Œæ¼æ´åˆ©ç”¨\u003cbr\u003e\né‡‡ç”¨å¤šå±‚é˜²å¾¡ç­–ç•¥åŒ…æ‹¬æ™ºèƒ½åˆçº¦å®¡è®¡è®¿é—®æ§åˆ¶å®æ—¶ç›‘æ§\u003cbr\u003e\nä½¿ç”¨Slither Mythrilæ£€æµ‹é‡å…¥æ”»å‡»æ•´æ•°æº¢å‡ºæƒé™é—®é¢˜\u003cbr\u003e\næœ€ä½³å®è·µå¼ºè°ƒç§é’¥ç®¡ç†å¤šç­¾åé’±åŒ…ç´§æ€¥æš‚åœæœºåˆ¶\u003cbr\u003e\n2025å¹´ä¸»è¦å¨èƒåŒ…æ‹¬é—ªè´·æ²»ç†æ”»å‡»è·¨é“¾æ¡¥æ¼æ´é’“é±¼æ”»å‡»\u003cbr\u003e\nå¼ºè°ƒå®‰å…¨å³ä»£ç ä»è®¾è®¡é˜¶æ®µæ•´åˆå½¢å¼éªŒè¯AIé©±åŠ¨ç›‘æ§\u003cbr\u003e\nå¼€æºåº“OpenZeppelinæä¾›å®‰å…¨åˆçº¦æ¨¡æ¿å‡å°‘å¸¸è§é”™è¯¯\u003cbr\u003e\næœºæ„çº§é¡¹ç›®éœ€æŒç»­å®¡è®¡æ¼æ´èµé‡‘è®¡åˆ’æ„å»ºä¿¡ä»»\u003c/p\u003e\n\u003ch2 id=\"wallet\"\u003ewallet\u003c/h2\u003e\n\u003cp\u003eé’±åŒ…æ˜¯Web3å…¥å£ç®¡ç†ç§é’¥å’Œèµ„äº§äº¤äº’\u003cbr\u003e\nåˆ†ä¸ºçƒ­é’±åŒ…å’Œå†·é’±åŒ…\u003cbr\u003e\nçƒ­é’±åŒ…å¦‚MetaMaskæµè§ˆå™¨æ‰©å±•æ–¹ä¾¿dAppè¿æ¥ä½†æ˜“å—ç½‘ç»œæ”»å‡»\u003cbr\u003e\nå†·é’±åŒ…åŒ…æ‹¬Ledgerç¡¬ä»¶é’±åŒ…å’Œçº¸é’±åŒ…ç¦»çº¿å­˜å‚¨æ›´å®‰å…¨é€‚åˆå¤§é¢æŒæœ‰\u003cbr\u003e\néæ‰˜ç®¡é’±åŒ…ç”¨æˆ·å®Œå…¨æ§åˆ¶å¯†é’¥\u003cbr\u003e\næ‰˜ç®¡é’±åŒ…å¦‚Coinbaseç®€åŒ–ä½†ä¾èµ–å¹³å°\u003cbr\u003e\nERC-4337è´¦æˆ·æŠ½è±¡æå‡ç”¨æˆ·ä½“éªŒæ”¯æŒç¤¾äº¤æ¢å¤æ°”ä½“èµåŠ©\u003cbr\u003e\nå¤šé“¾é’±åŒ…å¦‚Rainbowæ”¯æŒLayer2é™ä½è´¹ç”¨\u003cbr\u003e\nå®‰å…¨æç¤ºå¿…é¡»ä½¿ç”¨ç¡¬ä»¶ç­¾åç»ä¸æ³„éœ²ç§å­çŸ­è¯­å®šæœŸå¤‡ä»½\u003c/p\u003e\n\u003ch2 id=\"eip\"\u003eeip\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eğŸ‘‰ \u003ca href=\"/web3/eip/intro\"\u003eEIP ç¬”è®°åˆé›†\u003c/a\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003eEIPæ˜¯ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆæ ‡å‡†åŒ–å¹³å°å˜æ›´\u003cbr\u003e\næ¶µç›–æ ¸å¿ƒåè®®å®¢æˆ·ç«¯APIåˆçº¦è§„èŒƒ\u003cbr\u003e\nä»»ä½•äººå¯æäº¤è‰æ¡ˆç»ç¤¾åŒºè®¨è®ºç¼–è¾‘å®¡æŸ¥è¿›å…¥æœ€ç»ˆçŠ¶æ€\u003cbr\u003e\næ ¸å¿ƒEIPéœ€å…¨ç½‘å…±è¯†å¯èƒ½å¼•å‘ç¡¬åˆ†å‰\u003cbr\u003e\nå¦‚EIP-1559å¼•å…¥åŸºç¡€è´¹å¸‚åœº\u003cbr\u003e\nERCæ˜¯EIPå­é›†ä¸“æ³¨åº”ç”¨å±‚æ ‡å‡†\u003cbr\u003e\nEIPè¿‡ç¨‹ç¡®ä¿é€æ˜åŒ…å®¹\u003cbr\u003e\nä»è‰ç¨¿åˆ°æœ€åè°ƒç”¨å†åˆ°æœ€ç»ˆå®æ–½\u003cbr\u003e\nEIP-4844å¼•å…¥blobæ•°æ®å¤§å¹…é™ä½Layer2æˆæœ¬\u003cbr\u003e\næœªæ¥EIPèšç„¦å¯æ‰©å±•æ€§éšç§å¦‚Verkleæ ‘\u003c/p\u003e\n\u003ch2 id=\"erc\"\u003eerc\u003c/h2\u003e\n\u003cp\u003eERCæ˜¯ä»¥å¤ªåŠè¯·æ±‚è¯„è®ºå®šä¹‰ä»£å¸å’Œåº”ç”¨æ ‡å‡†\u003cbr\u003e\nERC20ç”¨äºå¯äº’æ¢ä»£å¸å¦‚USDTæ”¯æŒè½¬ç§»æ‰¹å‡†ä½™é¢æŸ¥è¯¢\u003cbr\u003e\nERC721åˆ›å»ºéåŒè´¨åŒ–ä»£å¸NFTå”¯ä¸€æ ‡è¯†æ‰€æœ‰æƒå¦‚CryptoKitties\u003cbr\u003e\nERC1155å¤šä»£å¸æ ‡å‡†å•ä¸€åˆçº¦ç®¡ç†å¯äº’æ¢éåŒè´¨åŒ–åŠåŒè´¨åŒ–èµ„äº§\u003cbr\u003e\né«˜æ•ˆæ‰¹é‡è½¬ç§»èŠ‚çœæ°”ä½“é€‚ç”¨äºæ¸¸æˆç‰©å“ç¥¨åŠ¡\u003cbr\u003e\nè¿™äº›æ ‡å‡†ç¡®ä¿å…¨ç”Ÿæ€äº’æ“ä½œæ€§\u003cbr\u003e\nå¼€å‘è€…å¯ç›´æ¥æ„å»ºå…¼å®¹é¡¹ç›®\u003cbr\u003e\nERC20ä¸»å¯¼DeFi\u003cbr\u003e\nERC721æ¨åŠ¨NFTå¸‚åœº\u003cbr\u003e\nERC1155ä¼˜åŒ–å¤æ‚ç”¨ä¾‹\u003c/p\u003e\n\u003ch2 id=\"codelanuage\"\u003ecodeLanuage\u003c/h2\u003e\n\u003cp\u003eæ™ºèƒ½åˆçº¦è¯­è¨€æœ€ç»ˆç¼–è¯‘ä¸ºEVMå­—èŠ‚ç \u003cbr\u003e\nSolidityä¸»æµç±»JavaScriptæ”¯æŒç»§æ‰¿ä¿®é¥°ç¬¦åº“ç”Ÿæ€æœ€ä¸°å¯Œ\u003cbr\u003e\nVyper Pythoné£æ ¼æ•…æ„å»é™¤ç»§æ‰¿æ— é™å¾ªç¯æå‡å¯å®¡è®¡æ€§å®‰å…¨æ€§\u003cbr\u003e\nYulä¸­é—´è¯­è¨€ç”¨äºç²¾ç»†æ°”ä½“ä¼˜åŒ–\u003cbr\u003e\nRustä¸»è¦ç”¨äºSolanaéEVMé“¾\u003cbr\u003e\nEthereumç”Ÿæ€ä»ä»¥Solidityå’ŒVyperä¸ºä¸»\u003cbr\u003e\nå­¦ä¹ Solidityæ¨èä»Remix IDEå¼€å§‹\u003cbr\u003e\nVyperå¼ºè°ƒäººç±»å¯è¯»ä»£ç å‡å°‘æ”»å‡»é¢\u003cbr\u003e\né€‰æ‹©è¯­è¨€å–å†³äºé¡¹ç›®å¤æ‚åº¦å’Œå®‰å…¨ä¼˜å…ˆçº§\u003c/p\u003e\n\u003ch2 id=\"evm\"\u003eevm\u003c/h2\u003e\n\u003cp\u003eEVMæ˜¯ä»¥å¤ªåŠè™šæ‹Ÿæœºå»ä¸­å¿ƒåŒ–è®¡ç®—å¼•æ“\u003cbr\u003e\næ‰§è¡Œæ™ºèƒ½åˆçº¦å­—èŠ‚ç é‡‡ç”¨æ ˆåŸºæ¶æ„æ·±åº¦1024\u003cbr\u003e\næ¯æ“ä½œç æ¶ˆè€—æ°”ä½“é˜²æ­¢æ»¥ç”¨\u003cbr\u003e\nTuringå®Œå¤‡æ”¯æŒä»»æ„é€»è¾‘ä½†æœ‰æ°”ä½“ä¸Šé™é¿å…æ— é™å¾ªç¯\u003cbr\u003e\nEVMè´Ÿè´£çŠ¶æ€è½¬æ¢æ›´æ–°è´¦æˆ·ä½™é¢å­˜å‚¨\u003cbr\u003e\næ‰€æœ‰èŠ‚ç‚¹ä¸€è‡´æ‰§è¡Œä¿è¯ç¡®å®šæ€§éš”ç¦»\u003cbr\u003e\nå…¼å®¹é“¾å¦‚Polygon Arbitrumå…±äº«EVMå®ç°æ— ç¼ç§»æ¤\u003cbr\u003e\næœªæ¥å‡çº§EOFå¼•å…¥å®¹å™¨åŒ–ä»£ç æå‡æ•ˆç‡\u003cbr\u003e\nEVMæ˜¯æ•´ä¸ªä»¥å¤ªåŠç”Ÿæ€çš„è®¡ç®—æ ¸å¿ƒ\u003c/p\u003e","title":"Web3 ç®€ä»‹"},{"content":"é¡¹ç›®ç®€ä»‹ é¡¹ç›®åç§°ï¼š0907 Wallet\nç³»ç»Ÿç±»å‹ï¼šåŸºäºæµè§ˆå™¨çš„ Web3 å»ä¸­å¿ƒåŒ–é’±åŒ…\nç³»ç»Ÿå®šä½ï¼šè½»é‡åŒ–ã€æœ¬åœ°åŒ–ã€è‡ªæ‰˜ç®¡çš„é’±åŒ…ç³»ç»Ÿ\nç³»ç»Ÿä»£ç æ¡†æ¶: React + Next.js\næ ¸å¿ƒç›®æ ‡\næä¾›å®‰å…¨å¯é çš„é’±åŒ…è´¦æˆ·ç”Ÿæˆä¸ç®¡ç†èƒ½åŠ›\næ”¯æŒåŸºæœ¬çš„è½¬è´¦ã€æ¶ˆæ¯ç­¾åä¸èµ„äº§æŸ¥çœ‹åŠŸèƒ½\nå®ç°å®Œæ•´çš„æœ¬åœ°åŒ–å­˜å‚¨ï¼Œå…¨æµç¨‹ä¸ä¸Šä¼ ç§é’¥\néç›®æ ‡è¯´æ˜ï¼ˆå¯é€‰ï¼‰\nä¸æ„å»ºé“¾ä¸‹åç«¯æœåŠ¡\nä¸æä¾›ä¸­å¿ƒåŒ–è´¦æˆ·ä½“ç³»\nä¸æ‰˜ç®¡ä»»ä½•ç”¨æˆ·èµ„äº§\n1. ä»£ç è§„èŒƒ 1.1 ä»£ç å‘½åè§„èŒƒ 1.1.1 ç»„ä»¶å‘½åï¼ˆReact ç»„ä»¶ã€é¡µé¢ï¼‰ è§„åˆ™ï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰ æ–‡ä»¶å‘½åï¼šåŒå .tsx æ–‡ä»¶ä¹Ÿå¿…é¡» PascalCase ç¤ºä¾‹ï¼š AccountCard.tsx â†’ æ­£ç¡® UserProfile.tsx â†’ æ­£ç¡® account-card.tsx â†’ é”™è¯¯ 1.1.2 æ¥å£ã€ç±»å‹ã€æšä¸¾å‘½å è§„åˆ™ï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰ å»ºè®®ï¼šæ¥å£å¯åŠ  I å‰ç¼€ï¼ˆå›¢é˜Ÿç»Ÿä¸€å³å¯ï¼‰ï¼Œç±»å‹å¯åŠ  T å‰ç¼€ï¼ˆå¯é€‰ï¼‰ ç¤ºä¾‹ï¼š interface UserInfo { ... } interface IUserInfo { ... } // ä¹Ÿå¯ type NetworkConfig = { ... } type TResponse\u0026lt;T\u0026gt; = { ... } enum ChainId { Ethereum = 1, Sepolia = 11155111 } 1.1.3 å¸¸é‡å‘½åï¼ˆå…¨å±€é…ç½®ã€é­”æ³•å€¼ï¼‰ è§„åˆ™ï¼šå…¨å¤§å†™ + ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆSCREAMING_SNAKE_CASEï¼‰ ç¤ºä¾‹ï¼š const API_BASE_URL = \u0026#34;https://api.0907wallet.com\u0026#34;; const DEFAULT_CHAIN_ID = 1; const MAX_RETRY_COUNT = 5; const SUPPORTED_CHAINS = [1, 5, 11155111]; 1.1.4 æ™®é€šå˜é‡ã€å‡½æ•°ã€å±æ€§å‘½å è§„åˆ™ï¼šå°é©¼å³°ï¼ˆcamelCaseï¼‰ å¸ƒå°”å€¼å»ºè®®ï¼šä»¥ isã€hasã€shouldã€can å¼€å¤´ ç¤ºä¾‹ï¼š const walletAddress = \u0026#34;0x1234...abcd\u0026#34;; let isConnected = false; const hasBalance = balance \u0026gt; 0; function connectWallet() { ... } async function fetchUserInfo() { ... } 1.1.5 æ–‡ä»¶ä¸æ–‡ä»¶å¤¹å‘½å ç±»å‹ å‘½åè§„åˆ™ ç¤ºä¾‹ ç»„ä»¶ / é¡µé¢ PascalCase AccountCard.tsxã€settings/page.tsx å·¥å…·å‡½æ•° kebab-case æˆ– camelCase storage.tsã€format-address.ts hooks ä»¥ use å¼€å¤´ useWallet.tsã€useDebounce.ts æ ·å¼ ä¸ç»„ä»¶åŒå AccountCard.module.css å¸¸é‡/é…ç½® kebab-case chains.config.ts 1.2 ä»£ç æ³¨é‡Šè§„èŒƒ 1.2.1 æ–‡ä»¶å¤´æ³¨é‡Šï¼ˆæ¯ä¸ªæ–‡ä»¶å¿…é¡»ï¼‰ /** * @file æ–‡ä»¶ç®€è¦æè¿°ï¼ˆä¸€å¥è¯ï¼‰ * @description æ›´è¯¦ç»†è¯´æ˜ï¼ˆå¯é€‰ï¼‰ * @author å¼ ä¸‰ï¼ˆgithub: zhangsanï¼‰ * @date 2025-04-05 */ 1.2.2 å¯¼å‡ºå‡½æ•° / ç»„ä»¶ / Hook å¿…é¡»å†™ JSDoc /** * åˆå§‹åŒ– IndexedDB æ•°æ®åº“ï¼ˆæ”¯æŒè‡ªåŠ¨æŒ‰éœ€å»ºè¡¨ï¼‰ * * @returns IndexedDB å®ä¾‹ * @example const db = await initDB(); */ export async function initDB(): Promise\u0026lt;IDBPDatabase\u0026gt; { ... } /** * è´¦æˆ·å¡ç‰‡ç»„ä»¶ï¼ˆå¸¦æ‚¬åœå¤åˆ¶åŠ¨ç”»ï¼‰ * * @param address - é’±åŒ…åœ°å€ï¼ˆ0x...ï¼‰ * @param name - å¯é€‰è´¦æˆ·åˆ«å */ export default function AccountCard({ address, name }: { address: string; name?: string; }) { ... } 1.2.3 å¤æ‚é€»è¾‘å¿…é¡»è§£é‡Šã€Œä¸ºä»€ä¹ˆã€ // ä¸ºä»€ä¹ˆå…³é—­å†å‡çº§ï¼Ÿ // IndexedDB åªæœ‰åœ¨ versionchange äº‹åŠ¡ä¸­æ‰èƒ½åˆ›å»º objectStoreï¼Œ // å½“å‰è¿æ¥æ— æ³•åˆ›å»ºæ–°è¡¨ï¼Œå¿…é¡»å…³é—­åä»¥æ–°ç‰ˆæœ¬é‡æ–°æ‰“å¼€ db.close(); 1.2.4 TODO / FIXME ç»Ÿä¸€æ ¼å¼ // TODO: [é«˜] æ”¯æŒå¤šç­¾é’±åŒ…ï¼ˆ@æå››ï¼Œ2025-07-01ï¼‰ // FIXME: å¿«é€Ÿç§»å…¥ç§»å‡ºä¼šå¯¼è‡´å¤šä¸ª setTimeout æ®‹ç•™ 1.2.5 ç¦æ­¢çš„æ³¨é‡Šï¼ˆç›´æ¥æ‰“å›ï¼‰ // é”™è¯¯ç¤ºä¾‹ï¼ˆè§£é‡Šã€Œåšä»€ä¹ˆã€è€Œä¸æ˜¯ã€Œä¸ºä»€ä¹ˆã€ï¼‰ const a = 1; // å®šä¹‰å˜é‡ a setLoading(true); // è®¾ç½® loading ä¸º true // é”™è¯¯ï¼šè¿‡æ—¶æ³¨é‡Š const MAX_RETRY = 3; // æœ€å¤§é‡è¯•æ¬¡æ•° 5 æ¬¡ï¼ˆå®é™…æ˜¯ 3ï¼‰ 1.3 å…¶ä»–å¼ºåˆ¶è§„èŒƒï¼ˆå¿«é€Ÿè®°å¿†ç‰ˆï¼‰ é¡¹ç›® è¦æ±‚ ç±»å‹ä¼˜å…ˆ èƒ½ç”¨ TypeScript è§£å†³çš„ç»ä¸å†™æ³¨é‡Š props ç±»å‹ å¿…é¡»æ˜¾å¼å£°æ˜ interface/typeï¼Œç¦æ­¢ any è‡ªå®šä¹‰ Hook å¿…é¡»ä»¥ use å¼€å¤´ï¼Œæ–‡ä»¶åä¹Ÿå¿…é¡»æ˜¯ useXxx.ts async å‡½æ•° å¿…é¡» try-catch æˆ–è¿”å›é”™è¯¯çŠ¶æ€ console.log ä¸Šçº¿å‰å¿…é¡»åˆ é™¤æˆ–æ”¹ä¸º logger é­”æ³•å€¼ å…¨éƒ¨æå–ä¸ºå¸¸é‡ï¼ˆå‚è€ƒ 1.1.3ï¼‰ 2. ç³»ç»ŸåŠŸèƒ½èŒƒå›´ï¼ˆScopeï¼‰ 2.1 åŸºç¡€åŠŸèƒ½ ç”¨æˆ·å¯†ç åˆ›å»ºä¸éªŒè¯\nåŠ©è®°è¯ç”Ÿæˆä¸å±•ç¤º\nç§é’¥ç”Ÿæˆä¸å¯¼å…¥\nå¤šè´¦æˆ·ç®¡ç†\né“¾ä¸Šèµ„äº§ï¼ˆETHï¼‰ä½™é¢æŸ¥è¯¢\näº¤æ˜“å‘é€ï¼ˆè½¬è´¦ï¼‰\nåŸºæœ¬æ¶ˆæ¯ç­¾ååŠŸèƒ½\n2.2 æ‰©å±•åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰ å¤šè¯­è¨€æ”¯æŒï¼ˆä¸­/è‹±æ–‡ï¼‰\né’±åŒ…é”å®š / è§£é”\né’±åŒ…æ•°æ®å¯¼å‡ºï¼ˆåŠ©è®°è¯ / ç§é’¥ï¼‰\nå‹å¥½çš„é”™è¯¯åé¦ˆä¸åŸºç¡€æ ¡éªŒ\n3. ç³»ç»Ÿæ•´ä½“ç»“æ„ï¼ˆSystem Overviewï¼‰ ç³»ç»Ÿæ•´ä½“ç”±ä»¥ä¸‹å››ä¸ªä¸»è¦æ¨¡å—ç»„æˆï¼Œå„æ¨¡å—èŒè´£æ¸…æ™°ã€è¾¹ç•Œæ˜ç¡®ï¼Œé€šè¿‡æ ‡å‡†åŒ–æ¥å£è¿›è¡Œåä½œï¼š\n3.0 ç³»ç»Ÿå…¬ç”¨æ¨¡å— ğŸ‘‰ è¯¦ç»†è®¾è®¡è¯·è§ï¼š0907 Wallet ç³»ç»Ÿå…¬ç”¨å±‚è®¾è®¡\n3.1 ç”¨æˆ·ç®¡ç†æ¨¡å— ğŸ‘‰ è¯¦ç»†è®¾è®¡è¯·è§ï¼š0907 Wallet ç”¨æˆ·ç®¡ç†æ¨¡å—è®¾è®¡\n3.2 é’±åŒ…ç®¡ç†æ¨¡å— ğŸ‘‰ è¯¦ç»†è®¾è®¡è¯·è§ï¼š0907 Wallet é’±åŒ…ç®¡ç†æ¨¡å—è®¾è®¡\n3.3 ç½‘ç»œç®¡ç†æ¨¡å— 3.4 åŒºå—é“¾äº¤äº’æ¨¡å— 4. å®‰å…¨ç­–ç•¥æ¦‚è¿° 4.1 æ•°æ®å¤„ç†åŸåˆ™ æ‰€æœ‰æ•æ„Ÿæ•°æ®ä»…å­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°\nç³»ç»Ÿä¸ä¼šä¸Šä¼ ã€å¤‡ä»½æˆ–æ‰˜ç®¡ä»»ä½•ç§é’¥ä¿¡æ¯\n4.2 å¯†ç ç­–ç•¥ ç”¨æˆ·å¯†ç ä»…åœ¨æœ¬åœ°ç”Ÿæ•ˆ\nå¯†ç ç”¨äºæ§åˆ¶é’±åŒ…è§£é”ä¸ç§é’¥è®¿é—®æƒé™\n4.3 äº¤äº’å®‰å…¨æ€§ å¼•å¯¼ç”¨æˆ·åŠæ—¶å¤‡ä»½åŠ©è®°è¯\nè½¬è´¦ç­‰æ•æ„Ÿæ“ä½œéœ€è¿›è¡Œç¡®è®¤æç¤º\n5. å‰ç«¯ç•Œé¢ä¸ä½¿ç”¨æµç¨‹æ¦‚è¿° 5.1 é¡µé¢ç»“æ„ æ¬¢è¿ / åˆå§‹é¡µé¢\nå¯†ç è®¾ç½®é¡µé¢\nåˆ›å»ºé’±åŒ… / å¯¼å…¥é’±åŒ…é¡µé¢\né’±åŒ…ä¸»é¡µï¼ˆè´¦æˆ·ä¸èµ„äº§ï¼‰\nè½¬è´¦é¡µé¢\nè®¾ç½®é¡µé¢\n5.2 UI ä½¿ç”¨æµç¨‹ é¦–æ¬¡ä½¿ç”¨ï¼šåˆå§‹é¡µé¢ â†’ è®¾ç½®å¯†ç  â†’ åˆ›å»º/å¯¼å…¥é’±åŒ… â†’ è¿›å…¥ä¸»é¡µ\nå·²æœ‰é’±åŒ…ç”¨æˆ·ï¼šè¾“å…¥å¯†ç  â†’ è§£é”é’±åŒ… â†’ è¿›å…¥ä¸»é¡µ\n6. ç³»ç»Ÿè¾¹ç•Œï¼ˆSystem Boundariesï¼‰ 6.1 ç³»ç»Ÿå†…çš„å†…å®¹ æ‰€æœ‰å‰ç«¯é’±åŒ…ä¸šåŠ¡é€»è¾‘\næœ¬åœ°ç§é’¥ç”Ÿæˆä¸ç®¡ç†\nä¸åŒºå—é“¾èŠ‚ç‚¹çš„ç›´æ¥äº¤äº’\n6.2 ç³»ç»Ÿå¤–çš„å†…å®¹ åç«¯æœåŠ¡ï¼ˆé“¾ä¸‹åç«¯ï¼‰\næ•°æ®åº“ï¼ˆé“¾ä¸‹å­˜å‚¨ï¼‰\nå¤–éƒ¨é’±åŒ…æ’ä»¶ï¼ˆMetaMask ç­‰ï¼‰\nå¤–éƒ¨ä»·æ ¼æœåŠ¡\nåŒºå—é“¾æµè§ˆå™¨\n7. éåŠŸèƒ½æ€§è¦æ±‚ï¼ˆNFRï¼‰æ¦‚è¿° 7.1 å®‰å…¨æ€§ ç§é’¥ä¸ä¼šé€šè¿‡ç½‘ç»œä¼ è¾“\nç”¨æˆ·å¯†ç éœ€å—åˆ°é€‚å½“ä¿æŠ¤\n7.2 å¯ç”¨æ€§ é¡µé¢ç»“æ„ç®€æ´æ¸…æ™°\næä¾›å¿…è¦çš„é”™è¯¯æç¤º\n7.3 å¯ç»´æŠ¤æ€§ æ ¸å¿ƒé’±åŒ…æ¨¡å—ä¸ UI åˆ†å±‚\næ¨¡å—åŠŸèƒ½è¾¹ç•Œæ˜ç¡®\n7.4 æ‰©å±•æ€§ æ”¯æŒæœªæ¥æ‰©å±•å¤šé“¾èƒ½åŠ›\næ”¯æŒæ–°å¢è´¦æˆ·æˆ–èµ„äº§ç±»å‹\n8. é™åˆ¶ä¸å·²çŸ¥é—®é¢˜ï¼ˆKnown Limitationsï¼‰ æµè§ˆå™¨ç¯å¢ƒå®‰å…¨æ€§ä¾èµ–ç”¨æˆ·è®¾å¤‡æœ¬èº«\nIndexedDB æ•°æ®å¯èƒ½å› æµè§ˆå™¨æ¸…ç†è€Œä¸¢å¤±\nç§é’¥æ³„éœ²åä¸å¯æ¢å¤\n9. åç»­è§„åˆ’ï¼ˆRoadmapï¼‰ 9.1 1.0 ç‰ˆæœ¬ï¼šå•é“¾é’±åŒ… + åŸºç¡€è½¬è´¦/ç­¾ååŠŸèƒ½ å®ç°ä»¥å¤ªåŠä¸»ç½‘åŸºç¡€åŠŸèƒ½ï¼ŒåŒ…æ‹¬è´¦æˆ·ç®¡ç†ã€ETH è½¬è´¦ã€æ¶ˆæ¯ç­¾åç­‰æ ¸å¿ƒèƒ½åŠ›ã€‚\n9.2 2.0 ç‰ˆæœ¬ï¼šå¤šé“¾æ”¯æŒã€NFT åŸºç¡€å±•ç¤º æ‰©å±•è‡³å¤šé“¾æ¶æ„ï¼Œæ”¯æŒ BSCã€Polygon ç­‰ EVM å…¼å®¹é“¾ï¼Œå¹¶å¢åŠ  NFT èµ„äº§å±•ç¤ºåŠŸèƒ½ã€‚\n9.3 3.0 ç‰ˆæœ¬ï¼šDApp è¿æ¥ï¼ˆInject Providerï¼‰ å®ç° EIP-1193 æ ‡å‡† Provider æ³¨å…¥ï¼Œæ”¯æŒè¿æ¥å¤–éƒ¨ DAppï¼Œæä¾› MetaMask å…¼å®¹çš„äº¤äº’ä½“éªŒã€‚\n9.4 3.5 ç‰ˆæœ¬ï¼šç§»åŠ¨ç«¯é€‚é… ä¼˜åŒ–ç§»åŠ¨ç«¯å“åº”å¼å¸ƒå±€ï¼Œå¢åŠ  PWA æ”¯æŒï¼Œæå‡ç§»åŠ¨ç«¯ç”¨æˆ·ä½“éªŒã€‚\n9.5 4.0 ç‰ˆæœ¬ï¼šæ”¯æŒç¡¬ä»¶é’±åŒ… é›†æˆ Ledgerã€Trezor ç­‰ç¡¬ä»¶é’±åŒ…ï¼Œæä¾›ç¡¬ä»¶çº§ç§é’¥ä¿æŠ¤èƒ½åŠ›ã€‚\n","permalink":"http://localhost:1313/projects/0907wallet/","summary":"\u003ch1 id=\"é¡¹ç›®ç®€ä»‹\"\u003eé¡¹ç›®ç®€ä»‹\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eé¡¹ç›®åç§°\u003c/strong\u003eï¼š0907 Wallet\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eç³»ç»Ÿç±»å‹\u003c/strong\u003eï¼šåŸºäºæµè§ˆå™¨çš„ Web3 å»ä¸­å¿ƒåŒ–é’±åŒ…\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eç³»ç»Ÿå®šä½\u003c/strong\u003eï¼šè½»é‡åŒ–ã€æœ¬åœ°åŒ–ã€è‡ªæ‰˜ç®¡çš„é’±åŒ…ç³»ç»Ÿ\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eç³»ç»Ÿä»£ç æ¡†æ¶\u003c/strong\u003e: React + Next.js\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eæ ¸å¿ƒç›®æ ‡\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eæä¾›å®‰å…¨å¯é çš„é’±åŒ…è´¦æˆ·ç”Ÿæˆä¸ç®¡ç†èƒ½åŠ›\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eæ”¯æŒåŸºæœ¬çš„è½¬è´¦ã€æ¶ˆæ¯ç­¾åä¸èµ„äº§æŸ¥çœ‹åŠŸèƒ½\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eå®ç°å®Œæ•´çš„æœ¬åœ°åŒ–å­˜å‚¨ï¼Œå…¨æµç¨‹ä¸ä¸Šä¼ ç§é’¥\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eéç›®æ ‡è¯´æ˜ï¼ˆå¯é€‰ï¼‰\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eä¸æ„å»ºé“¾ä¸‹åç«¯æœåŠ¡\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eä¸æä¾›ä¸­å¿ƒåŒ–è´¦æˆ·ä½“ç³»\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eä¸æ‰˜ç®¡ä»»ä½•ç”¨æˆ·èµ„äº§\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch1 id=\"1-ä»£ç è§„èŒƒ\"\u003e1. ä»£ç è§„èŒƒ\u003c/h1\u003e\n\u003ch2 id=\"11-ä»£ç å‘½åè§„èŒƒ\"\u003e1.1 ä»£ç å‘½åè§„èŒƒ\u003c/h2\u003e\n\u003ch3 id=\"111-ç»„ä»¶å‘½åreact-ç»„ä»¶é¡µé¢\"\u003e1.1.1 ç»„ä»¶å‘½åï¼ˆReact ç»„ä»¶ã€é¡µé¢ï¼‰\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè§„åˆ™\u003c/strong\u003eï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæ–‡ä»¶å‘½å\u003c/strong\u003eï¼šåŒå \u003ccode\u003e.tsx\u003c/code\u003e æ–‡ä»¶ä¹Ÿå¿…é¡» PascalCase\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç¤ºä¾‹\u003c/strong\u003eï¼š\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eAccountCard\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etsx\u003c/span\u003e        \u003cspan class=\"err\"\u003eâ†’\u003c/span\u003e \u003cspan class=\"err\"\u003eæ­£ç¡®\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eUserProfile\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etsx\u003c/span\u003e        \u003cspan class=\"err\"\u003eâ†’\u003c/span\u003e \u003cspan class=\"err\"\u003eæ­£ç¡®\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eaccount\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"nx\"\u003ecard\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etsx\u003c/span\u003e       \u003cspan class=\"err\"\u003eâ†’\u003c/span\u003e \u003cspan class=\"err\"\u003eé”™è¯¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"112-æ¥å£ç±»å‹æšä¸¾å‘½å\"\u003e1.1.2 æ¥å£ã€ç±»å‹ã€æšä¸¾å‘½å\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè§„åˆ™\u003c/strong\u003eï¼šå¤§é©¼å³°ï¼ˆPascalCaseï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå»ºè®®\u003c/strong\u003eï¼šæ¥å£å¯åŠ  \u003ccode\u003eI\u003c/code\u003e å‰ç¼€ï¼ˆå›¢é˜Ÿç»Ÿä¸€å³å¯ï¼‰ï¼Œç±»å‹å¯åŠ  \u003ccode\u003eT\u003c/code\u003e å‰ç¼€ï¼ˆå¯é€‰ï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç¤ºä¾‹\u003c/strong\u003eï¼š\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003einterface\u003c/span\u003e \u003cspan class=\"nx\"\u003eUserInfo\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003einterface\u003c/span\u003e \u003cspan class=\"nx\"\u003eIUserInfo\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e      \u003cspan class=\"c1\"\u003e// ä¹Ÿå¯\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kr\"\u003etype\u003c/span\u003e \u003cspan class=\"nx\"\u003eNetworkConfig\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003etype\u003c/span\u003e \u003cspan class=\"nx\"\u003eTResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eenum\u003c/span\u003e \u003cspan class=\"nx\"\u003eChainId\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003eEthereum\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eSepolia\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e11155111\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"113-å¸¸é‡å‘½åå…¨å±€é…ç½®é­”æ³•å€¼\"\u003e1.1.3 å¸¸é‡å‘½åï¼ˆå…¨å±€é…ç½®ã€é­”æ³•å€¼ï¼‰\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè§„åˆ™\u003c/strong\u003eï¼šå…¨å¤§å†™ + ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆSCREAMING_SNAKE_CASEï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç¤ºä¾‹\u003c/strong\u003eï¼š\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eAPI_BASE_URL\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;https://api.0907wallet.com\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eDEFAULT_CHAIN_ID\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eMAX_RETRY_COUNT\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eSUPPORTED_CHAINS\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e11155111\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"114-æ™®é€šå˜é‡å‡½æ•°å±æ€§å‘½å\"\u003e1.1.4 æ™®é€šå˜é‡ã€å‡½æ•°ã€å±æ€§å‘½å\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè§„åˆ™\u003c/strong\u003eï¼šå°é©¼å³°ï¼ˆcamelCaseï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå¸ƒå°”å€¼å»ºè®®\u003c/strong\u003eï¼šä»¥ \u003ccode\u003eis\u003c/code\u003eã€\u003ccode\u003ehas\u003c/code\u003eã€\u003ccode\u003eshould\u003c/code\u003eã€\u003ccode\u003ecan\u003c/code\u003e å¼€å¤´\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç¤ºä¾‹\u003c/strong\u003eï¼š\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ewalletAddress\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;0x1234...abcd\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eisConnected\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kc\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ehasBalance\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ebalance\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003econnectWallet() {\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003easync\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003efetchUserInfo() {\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"115-æ–‡ä»¶ä¸æ–‡ä»¶å¤¹å‘½å\"\u003e1.1.5 æ–‡ä»¶ä¸æ–‡ä»¶å¤¹å‘½å\u003c/h3\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eç±»å‹\u003c/th\u003e\n          \u003cth\u003eå‘½åè§„åˆ™\u003c/th\u003e\n          \u003cth\u003eç¤ºä¾‹\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eç»„ä»¶ / é¡µé¢\u003c/td\u003e\n          \u003ctd\u003ePascalCase\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003eAccountCard.tsx\u003c/code\u003eã€\u003ccode\u003esettings/page.tsx\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eå·¥å…·å‡½æ•°\u003c/td\u003e\n          \u003ctd\u003ekebab-case æˆ– camelCase\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003estorage.ts\u003c/code\u003eã€\u003ccode\u003eformat-address.ts\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ehooks\u003c/td\u003e\n          \u003ctd\u003eä»¥ \u003ccode\u003euse\u003c/code\u003e å¼€å¤´\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003euseWallet.ts\u003c/code\u003eã€\u003ccode\u003euseDebounce.ts\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eæ ·å¼\u003c/td\u003e\n          \u003ctd\u003eä¸ç»„ä»¶åŒå\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003eAccountCard.module.css\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eå¸¸é‡/é…ç½®\u003c/td\u003e\n          \u003ctd\u003ekebab-case\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003echains.config.ts\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"12-ä»£ç æ³¨é‡Šè§„èŒƒ\"\u003e1.2 ä»£ç æ³¨é‡Šè§„èŒƒ\u003c/h2\u003e\n\u003ch3 id=\"121-æ–‡ä»¶å¤´æ³¨é‡Šæ¯ä¸ªæ–‡ä»¶å¿…é¡»\"\u003e1.2.1 æ–‡ä»¶å¤´æ³¨é‡Šï¼ˆæ¯ä¸ªæ–‡ä»¶å¿…é¡»ï¼‰\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @file æ–‡ä»¶ç®€è¦æè¿°ï¼ˆä¸€å¥è¯ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @description æ›´è¯¦ç»†è¯´æ˜ï¼ˆå¯é€‰ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @author å¼ ä¸‰ï¼ˆgithub: zhangsanï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @date 2025-04-05\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"122-å¯¼å‡ºå‡½æ•°--ç»„ä»¶--hook-å¿…é¡»å†™-jsdoc\"\u003e1.2.2 å¯¼å‡ºå‡½æ•° / ç»„ä»¶ / Hook å¿…é¡»å†™ JSDoc\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * åˆå§‹åŒ– IndexedDB æ•°æ®åº“ï¼ˆæ”¯æŒè‡ªåŠ¨æŒ‰éœ€å»ºè¡¨ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @returns IndexedDB å®ä¾‹\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @example const db = await initDB();\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kr\"\u003easync\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003einitDB\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003ePromise\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003eIDBPDatabase\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * è´¦æˆ·å¡ç‰‡ç»„ä»¶ï¼ˆå¸¦æ‚¬åœå¤åˆ¶åŠ¨ç”»ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param address - é’±åŒ…åœ°å€ï¼ˆ0x...ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param name    - å¯é€‰è´¦æˆ·åˆ«å\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eAccountCard\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003eaddress\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003ename\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003eaddress\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003ename?\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e})\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"123-å¤æ‚é€»è¾‘å¿…é¡»è§£é‡Šä¸ºä»€ä¹ˆ\"\u003e1.2.3 å¤æ‚é€»è¾‘å¿…é¡»è§£é‡Šã€Œä¸ºä»€ä¹ˆã€\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// ä¸ºä»€ä¹ˆå…³é—­å†å‡çº§ï¼Ÿ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// IndexedDB åªæœ‰åœ¨ versionchange äº‹åŠ¡ä¸­æ‰èƒ½åˆ›å»º objectStoreï¼Œ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// å½“å‰è¿æ¥æ— æ³•åˆ›å»ºæ–°è¡¨ï¼Œå¿…é¡»å…³é—­åä»¥æ–°ç‰ˆæœ¬é‡æ–°æ‰“å¼€\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"nx\"\u003edb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eclose\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"124-todo--fixme-ç»Ÿä¸€æ ¼å¼\"\u003e1.2.4 TODO / FIXME ç»Ÿä¸€æ ¼å¼\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// TODO: [é«˜] æ”¯æŒå¤šç­¾é’±åŒ…ï¼ˆ@æå››ï¼Œ2025-07-01ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// FIXME: å¿«é€Ÿç§»å…¥ç§»å‡ºä¼šå¯¼è‡´å¤šä¸ª setTimeout æ®‹ç•™\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"125-ç¦æ­¢çš„æ³¨é‡Šç›´æ¥æ‰“å›\"\u003e1.2.5 ç¦æ­¢çš„æ³¨é‡Šï¼ˆç›´æ¥æ‰“å›ï¼‰\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// é”™è¯¯ç¤ºä¾‹ï¼ˆè§£é‡Šã€Œåšä»€ä¹ˆã€è€Œä¸æ˜¯ã€Œä¸ºä»€ä¹ˆã€ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ea\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e           \u003cspan class=\"c1\"\u003e// å®šä¹‰å˜é‡ a\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"nx\"\u003esetLoading\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e      \u003cspan class=\"c1\"\u003e// è®¾ç½® loading ä¸º true\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// é”™è¯¯ï¼šè¿‡æ—¶æ³¨é‡Š\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eMAX_RETRY\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e   \u003cspan class=\"c1\"\u003e// æœ€å¤§é‡è¯•æ¬¡æ•° 5 æ¬¡ï¼ˆå®é™…æ˜¯ 3ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"13-å…¶ä»–å¼ºåˆ¶è§„èŒƒå¿«é€Ÿè®°å¿†ç‰ˆ\"\u003e1.3 å…¶ä»–å¼ºåˆ¶è§„èŒƒï¼ˆå¿«é€Ÿè®°å¿†ç‰ˆï¼‰\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eé¡¹ç›®\u003c/th\u003e\n          \u003cth\u003eè¦æ±‚\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eç±»å‹ä¼˜å…ˆ\u003c/td\u003e\n          \u003ctd\u003eèƒ½ç”¨ TypeScript è§£å†³çš„ç»ä¸å†™æ³¨é‡Š\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eprops ç±»å‹\u003c/td\u003e\n          \u003ctd\u003eå¿…é¡»æ˜¾å¼å£°æ˜ interface/typeï¼Œç¦æ­¢ any\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè‡ªå®šä¹‰ Hook\u003c/td\u003e\n          \u003ctd\u003eå¿…é¡»ä»¥ \u003ccode\u003euse\u003c/code\u003e å¼€å¤´ï¼Œæ–‡ä»¶åä¹Ÿå¿…é¡»æ˜¯ \u003ccode\u003euseXxx.ts\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003easync å‡½æ•°\u003c/td\u003e\n          \u003ctd\u003eå¿…é¡» try-catch æˆ–è¿”å›é”™è¯¯çŠ¶æ€\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003econsole.log\u003c/td\u003e\n          \u003ctd\u003eä¸Šçº¿å‰å¿…é¡»åˆ é™¤æˆ–æ”¹ä¸º logger\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eé­”æ³•å€¼\u003c/td\u003e\n          \u003ctd\u003eå…¨éƒ¨æå–ä¸ºå¸¸é‡ï¼ˆå‚è€ƒ 1.1.3ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"2-ç³»ç»ŸåŠŸèƒ½èŒƒå›´scope\"\u003e2. ç³»ç»ŸåŠŸèƒ½èŒƒå›´ï¼ˆScopeï¼‰\u003c/h2\u003e\n\u003ch3 id=\"21-åŸºç¡€åŠŸèƒ½\"\u003e2.1 åŸºç¡€åŠŸèƒ½\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eç”¨æˆ·å¯†ç åˆ›å»ºä¸éªŒè¯\u003c/p\u003e","title":"0907 Wallet"},{"content":"IDE Integrated Development Environmentï¼ˆé›†æˆå¼€å‘ç¯å¢ƒï¼‰\nå¸¸ç”¨çš„å¼€å‘ä¸è°ƒè¯•å·¥å…·\nVS Codeï¼šè½»é‡çº§é€šç”¨ç¼–è¾‘å™¨ IntelliJ IDEAï¼šJava é¡¹ç›®å¼€å‘ PyCharmï¼šPython é¡¹ç›®å¼€å‘ ç‰ˆæœ¬æ§åˆ¶ ç”¨äºä»£ç åä½œã€å†å²ç®¡ç†ä¸è‡ªåŠ¨åŒ–æµç¨‹\nGit / GitHubï¼šåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ä¸åä½œ GitHub Actionsï¼šè‡ªåŠ¨åŒ– CI/CD å·¥ä½œæµ GitKrakenï¼šå¯è§†åŒ– Git æ“ä½œå®¢æˆ·ç«¯ å®¹å™¨éƒ¨ç½² Dockerï¼šåº”ç”¨å®¹å™¨åŒ–ä¸ç¯å¢ƒä¸€è‡´æ€§ Docker Composeï¼šå¤šå®¹å™¨å¼€å‘ç¯å¢ƒ Kubernetesï¼ˆå¯é€‰ï¼‰ï¼šåº”ç”¨ç¼–æ’ä¸å¤§è§„æ¨¡éƒ¨ç½² å‰ç«¯å¼€å‘ Node.js / npm / pnpmï¼šå‰ç«¯æ„å»ºç¯å¢ƒ Vue / Reactï¼šå¸¸ç”¨å‰ç«¯æ¡†æ¶ Viteï¼šå¿«é€Ÿæ„å»ºå·¥å…· TailwindCSSï¼šå®ç”¨åŒ– CSS æ¡†æ¶ åç«¯å¼€å‘ Spring Bootï¼šç°ä»£åŒ– Java åç«¯å¼€å‘æ¡†æ¶ MyBatis / JPAï¼šæ•°æ®åº“ ORM Redisï¼šç¼“å­˜ä¸­é—´ä»¶ OpenAPI / Swaggerï¼šæ¥å£æ–‡æ¡£ç”Ÿæˆ è¿ç»´å¼€å‘ æ—¥å¿—ç®¡ç† Lokiï¼šåˆ†å¸ƒå¼æ—¥å¿—ç³»ç»Ÿ Vectorï¼šæ—¥å¿—é‡‡é›†ä¸å¤„ç† ğŸ‘‰ ç›¸å…³ç¬”è®°ï¼šVector æ—¥å¿—é‡‡é›†ä¸å¤„ç† LogstashEncoderï¼šç»“æ„åŒ– JSON æ—¥å¿— ç³»ç»Ÿç›‘æ§ Prometheusï¼šæ—¶åºç›‘æ§ä¸æŠ¥è­¦ Grafanaï¼šå¯è§†åŒ–ç›‘æ§é¢æ¿ åº”ç”¨æµ‹è¯• Postmanï¼šæ¥å£æµ‹è¯• JMeterï¼šå‹æµ‹å·¥å…· æ•°æ®å­˜å‚¨ ClickHouse: é«˜æ€§èƒ½åˆ—å¼æ•°æ®åº“ ğŸ‘‰ ç›¸å…³ç¬”è®°ï¼šClickHouse é«˜æ€§èƒ½æ•°æ®åº“ å­¦ä¹ ä¸æ•ˆç‡å·¥å…· å¸®åŠ©çŸ¥è¯†ç®¡ç†ã€é¡¹ç›®æ•´ç†ä¸å†™ä½œ\nNotionï¼šçŸ¥è¯†åº“ä¸ä»»åŠ¡ç®¡ç† Obsidianï¼šMarkdown åŒé“¾ç¬”è®° Hugo + PaperModï¼šä¸ªäººåšå®¢ç”Ÿæˆå™¨ å›¾åƒå¤„ç† Photopeaï¼šåœ¨çº¿ PS GIMPï¼šå¼€æºå›¾åƒå¤„ç† Pixelmator / Affinityï¼ˆå¯é€‰ï¼‰ï¼šè½»é‡ PS æ›¿ä»£å“ ","permalink":"http://localhost:1313/toolkits/intro/","summary":"\u003ch2 id=\"ide\"\u003eIDE\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIntegrated Development Environmentï¼ˆé›†æˆå¼€å‘ç¯å¢ƒï¼‰\u003cbr\u003e\nå¸¸ç”¨çš„å¼€å‘ä¸è°ƒè¯•å·¥å…·\u003c/p\u003e\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eVS Code\u003c/strong\u003eï¼šè½»é‡çº§é€šç”¨ç¼–è¾‘å™¨\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eIntelliJ IDEA\u003c/strong\u003eï¼šJava é¡¹ç›®å¼€å‘\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePyCharm\u003c/strong\u003eï¼šPython é¡¹ç›®å¼€å‘\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"ç‰ˆæœ¬æ§åˆ¶\"\u003eç‰ˆæœ¬æ§åˆ¶\u003c/h2\u003e\n\u003cp\u003eç”¨äºä»£ç åä½œã€å†å²ç®¡ç†ä¸è‡ªåŠ¨åŒ–æµç¨‹\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eGit / GitHub\u003c/strong\u003eï¼šåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ä¸åä½œ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGitHub Actions\u003c/strong\u003eï¼šè‡ªåŠ¨åŒ– CI/CD å·¥ä½œæµ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGitKraken\u003c/strong\u003eï¼šå¯è§†åŒ– Git æ“ä½œå®¢æˆ·ç«¯\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å®¹å™¨éƒ¨ç½²\"\u003eå®¹å™¨éƒ¨ç½²\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eDocker\u003c/strong\u003eï¼šåº”ç”¨å®¹å™¨åŒ–ä¸ç¯å¢ƒä¸€è‡´æ€§\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDocker Compose\u003c/strong\u003eï¼šå¤šå®¹å™¨å¼€å‘ç¯å¢ƒ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eKubernetesï¼ˆå¯é€‰ï¼‰\u003c/strong\u003eï¼šåº”ç”¨ç¼–æ’ä¸å¤§è§„æ¨¡éƒ¨ç½²\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å‰ç«¯å¼€å‘\"\u003eå‰ç«¯å¼€å‘\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eNode.js / npm / pnpm\u003c/strong\u003eï¼šå‰ç«¯æ„å»ºç¯å¢ƒ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVue / React\u003c/strong\u003eï¼šå¸¸ç”¨å‰ç«¯æ¡†æ¶\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVite\u003c/strong\u003eï¼šå¿«é€Ÿæ„å»ºå·¥å…·\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTailwindCSS\u003c/strong\u003eï¼šå®ç”¨åŒ– CSS æ¡†æ¶\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"åç«¯å¼€å‘\"\u003eåç«¯å¼€å‘\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eSpring Boot\u003c/strong\u003eï¼šç°ä»£åŒ– Java åç«¯å¼€å‘æ¡†æ¶\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMyBatis / JPA\u003c/strong\u003eï¼šæ•°æ®åº“ ORM\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eRedis\u003c/strong\u003eï¼šç¼“å­˜ä¸­é—´ä»¶\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eOpenAPI / Swagger\u003c/strong\u003eï¼šæ¥å£æ–‡æ¡£ç”Ÿæˆ\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"è¿ç»´å¼€å‘\"\u003eè¿ç»´å¼€å‘\u003c/h2\u003e\n\u003ch3 id=\"æ—¥å¿—ç®¡ç†\"\u003eæ—¥å¿—ç®¡ç†\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eLoki\u003c/strong\u003eï¼šåˆ†å¸ƒå¼æ—¥å¿—ç³»ç»Ÿ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVector\u003c/strong\u003eï¼šæ—¥å¿—é‡‡é›†ä¸å¤„ç†  ğŸ‘‰ \u003ca href=\"/toolkits/vector\"\u003eç›¸å…³ç¬”è®°ï¼šVector æ—¥å¿—é‡‡é›†ä¸å¤„ç†\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLogstashEncoder\u003c/strong\u003eï¼šç»“æ„åŒ– JSON æ—¥å¿—\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ç³»ç»Ÿç›‘æ§\"\u003eç³»ç»Ÿç›‘æ§\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePrometheus\u003c/strong\u003eï¼šæ—¶åºç›‘æ§ä¸æŠ¥è­¦\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGrafana\u003c/strong\u003eï¼šå¯è§†åŒ–ç›‘æ§é¢æ¿\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"åº”ç”¨æµ‹è¯•\"\u003eåº”ç”¨æµ‹è¯•\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePostman\u003c/strong\u003eï¼šæ¥å£æµ‹è¯•\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eJMeter\u003c/strong\u003eï¼šå‹æµ‹å·¥å…·\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"æ•°æ®å­˜å‚¨\"\u003eæ•°æ®å­˜å‚¨\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eClickHouse\u003c/strong\u003e: é«˜æ€§èƒ½åˆ—å¼æ•°æ®åº“\nğŸ‘‰ \u003ca href=\"/toolkits/clickhouse\"\u003eç›¸å…³ç¬”è®°ï¼šClickHouse é«˜æ€§èƒ½æ•°æ®åº“\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å­¦ä¹ ä¸æ•ˆç‡å·¥å…·\"\u003eå­¦ä¹ ä¸æ•ˆç‡å·¥å…·\u003c/h2\u003e\n\u003cp\u003eå¸®åŠ©çŸ¥è¯†ç®¡ç†ã€é¡¹ç›®æ•´ç†ä¸å†™ä½œ\u003c/p\u003e","title":"Toolkits ç®€ä»‹"},{"content":"EIP ç´¢å¼•æ€»è§ˆ è¿™é‡Œæ”¶å½•æ‰€æœ‰å€¼å¾—å•ç‹¬æˆæ–‡çš„é‡Œç¨‹ç¢‘çº§EIP\næ¯ç¯‡æ·±åº¦æ‹†è§£ä¸€ä»½EIPçš„è¯ç”ŸèƒŒæ™¯æŠ€æœ¯ç»†èŠ‚å®‰å…¨å½±å“è½åœ°å†ç¨‹ç¤¾åŒºäº‰è®®åŠåç»­æ¼”è¿›\nç‚¹å‡»æ ‡é¢˜ç›´è¾¾å¯¹åº”ä¸“æ–‡\nç®€ä»‹ EIPï¼ˆEthereum Improvement Proposalï¼‰æ˜¯ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆ\nä»»ä½•äººéƒ½èƒ½æäº¤çš„æ ‡å‡†åŒ–æ–‡æ¡£\né©±åŠ¨ä»¥å¤ªåŠä»åˆ›ä¸–åŒºå—åˆ°ä»Šå¤©çš„å”¯ä¸€æ­£å¼æœºåˆ¶\nERCåªæ˜¯EIPçš„åº”ç”¨å±‚å­é›†\næ‰€æœ‰ç¡¬åˆ†å‰å‡çº§Layer2å˜é©è´¦æˆ·æŠ½è±¡éƒ½æºäºEIP\nè´¦æˆ·æŠ½è±¡æ—¶ä»£ EIP-4337 æ— ç§é’¥è´¦æˆ·æŠ½è±¡ï¼š2023å¹´çœŸæ­£è½åœ°ç‰ˆæœ¬ï¼ˆå·²å®Œç¨¿ï¼‰ EIP-3074 AUTHä¸AUTHCALLï¼šè¢«åºŸå¼ƒçš„è´¦æˆ·æŠ½è±¡å…ˆé©±ï¼ˆå¾…æ’°å†™ï¼‰ EIP-5003 ä»£ç æ³¨å…¥å¼è´¦æˆ·æŠ½è±¡ï¼ˆå¾…æ’°å†™ï¼‰ EIP-7702 æ–°è´¦æˆ·æŠ½è±¡ç»ˆææ–¹æ¡ˆï¼ˆ2025è¿›è¡Œä¸­ï¼‰ï¼ˆå¾…æ’°å†™ï¼‰ è´¹ç”¨å¸‚åœºä¸é€šç¼© EIP-1559 åŸºç¡€è´¹ç‡ƒçƒ§ï¼šè®©ETHæˆä¸ºè¶…å£°æ³¢è´§å¸ï¼ˆå¾…æ’°å†™ï¼‰ EIP-4844 Proto-Dankshardingï¼šRollupè´¹ç”¨æš´è·Œ90%ï¼ˆå¾…æ’°å†™ï¼‰ EIP-7514 å‡ç¼“è´¨æŠ¼å¢é•¿ï¼šä¿æŠ¤å»ä¸­å¿ƒåŒ–ï¼ˆå¾…æ’°å†™ï¼‰ è´¨æŠ¼ä¸ææ¬¾ EIP-4895 è´¨æŠ¼ææ¬¾ï¼šä¸Šæµ·å‡çº§æ ¸å¿ƒï¼ˆå¾…æ’°å†™ï¼‰ EIP-7002 éƒ¨åˆ†ææ¬¾ä¸ä¸»åŠ¨é€€å‡ºï¼ˆå¾…æ’°å†™ï¼‰ EIP-6110 é“¾ä¸Šè´¨æŠ¼å­˜æ¬¾ï¼ˆå¾…æ’°å†™ï¼‰ EVMä¸æ‰§è¡Œå±‚æœªæ¥ EIP-7691 EOFï¼šEVMå®¹å™¨åŒ–é©å‘½ï¼ˆ2026ç›®æ ‡ï¼‰ï¼ˆå¾…æ’°å†™ï¼‰ EIP-7623 æé«˜CALLDATAæˆæœ¬ä¸ºDankshardingé“ºè·¯ï¼ˆå¾…æ’°å†™ï¼‰ EIP-4444 å†å²æ•°æ®è¿‡æœŸæœºåˆ¶ï¼ˆå¾…æ’°å†™ï¼‰ EIP-5656 MCOPYæŒ‡ä»¤ï¼šé™ä½å†…å­˜æ‹·è´æˆæœ¬ï¼ˆå¾…æ’°å†™ï¼‰ æ•°æ®å¯ç”¨æ€§ä¸Layer2 EIP-4844 Blobäº¤æ˜“ä¸Dankshardingè·¯çº¿å›¾ï¼ˆå¾…æ’°å†™ï¼‰ EIP-7594 PeerDASï¼šå¯¹ç­‰æ•°æ®å¯ç”¨æ€§é‡‡æ ·ï¼ˆå¾…æ’°å†™ï¼‰ EIP-6465/6466 Blobå†å²è¿‡æœŸæ–¹æ¡ˆï¼ˆå¾…æ’°å†™ï¼‰ å…¶ä»–æ­£åœ¨å…³æ³¨çš„EIP EIP-7732 EIP-7702+ERC-7730å®‰å…¨å¢å¼ºç‰ˆï¼ˆå¾…æ’°å†™ï¼‰ EIP-2537 BLSé¢„ç¼–è¯‘ï¼šåŠ é€Ÿé›¶çŸ¥è¯†è¯æ˜ï¼ˆå¾…æ’°å†™ï¼‰ EIP-5920 PAY opcodeï¼šåŸç”Ÿè½¬è´¦æ–°æ–¹å¼ï¼ˆå¾…æ’°å†™ï¼‰ EIP-6780 è‡ªæ¯ä»…é™åˆ›å»ºäº¤æ˜“ï¼šæå‡çŠ¶æ€ç®¡ç†ï¼ˆå¾…æ’°å†™ï¼‰ æ›´å¤šEIPä¸“æ–‡æŒç»­æ›´æ–°ä¸­\nç›®å‰ä»…EIP-4337å·²å®Œç¨¿ï¼Œå…¶ä½™é™†ç»­æ”¾å‡º\næ¯ä¸€ç¯‡éƒ½æ˜¯ä»¥å¤ªåŠè¿›åŒ–å²çš„çœŸå®æ³¨è„š\n","permalink":"http://localhost:1313/web3/eip/intro/","summary":"\u003ch1 id=\"eip-ç´¢å¼•æ€»è§ˆ\"\u003eEIP ç´¢å¼•æ€»è§ˆ\u003c/h1\u003e\n\u003cp\u003eè¿™é‡Œæ”¶å½•æ‰€æœ‰å€¼å¾—å•ç‹¬æˆæ–‡çš„é‡Œç¨‹ç¢‘çº§EIP\u003cbr\u003e\næ¯ç¯‡æ·±åº¦æ‹†è§£ä¸€ä»½EIPçš„è¯ç”ŸèƒŒæ™¯æŠ€æœ¯ç»†èŠ‚å®‰å…¨å½±å“è½åœ°å†ç¨‹ç¤¾åŒºäº‰è®®åŠåç»­æ¼”è¿›\u003cbr\u003e\nç‚¹å‡»æ ‡é¢˜ç›´è¾¾å¯¹åº”ä¸“æ–‡\u003c/p\u003e\n\u003ch2 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eEIPï¼ˆEthereum Improvement Proposalï¼‰æ˜¯ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆ\u003cbr\u003e\nä»»ä½•äººéƒ½èƒ½æäº¤çš„æ ‡å‡†åŒ–æ–‡æ¡£\u003cbr\u003e\né©±åŠ¨ä»¥å¤ªåŠä»åˆ›ä¸–åŒºå—åˆ°ä»Šå¤©çš„å”¯ä¸€æ­£å¼æœºåˆ¶\u003cbr\u003e\nERCåªæ˜¯EIPçš„åº”ç”¨å±‚å­é›†\u003cbr\u003e\næ‰€æœ‰ç¡¬åˆ†å‰å‡çº§Layer2å˜é©è´¦æˆ·æŠ½è±¡éƒ½æºäºEIP\u003c/p\u003e\n\u003ch2 id=\"è´¦æˆ·æŠ½è±¡æ—¶ä»£\"\u003eè´¦æˆ·æŠ½è±¡æ—¶ä»£\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/web3/eip/eip-4337\"\u003eEIP-4337 æ— ç§é’¥è´¦æˆ·æŠ½è±¡ï¼š2023å¹´çœŸæ­£è½åœ°ç‰ˆæœ¬ï¼ˆå·²å®Œç¨¿ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-3074\"\u003eEIP-3074 AUTHä¸AUTHCALLï¼šè¢«åºŸå¼ƒçš„è´¦æˆ·æŠ½è±¡å…ˆé©±ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-5003\"\u003eEIP-5003 ä»£ç æ³¨å…¥å¼è´¦æˆ·æŠ½è±¡ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7702\"\u003eEIP-7702 æ–°è´¦æˆ·æŠ½è±¡ç»ˆææ–¹æ¡ˆï¼ˆ2025è¿›è¡Œä¸­ï¼‰ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"è´¹ç”¨å¸‚åœºä¸é€šç¼©\"\u003eè´¹ç”¨å¸‚åœºä¸é€šç¼©\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-1559\"\u003eEIP-1559 åŸºç¡€è´¹ç‡ƒçƒ§ï¼šè®©ETHæˆä¸ºè¶…å£°æ³¢è´§å¸ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-4844\"\u003eEIP-4844 Proto-Dankshardingï¼šRollupè´¹ç”¨æš´è·Œ90%ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7514\"\u003eEIP-7514 å‡ç¼“è´¨æŠ¼å¢é•¿ï¼šä¿æŠ¤å»ä¸­å¿ƒåŒ–ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"è´¨æŠ¼ä¸ææ¬¾\"\u003eè´¨æŠ¼ä¸ææ¬¾\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-4895\"\u003eEIP-4895 è´¨æŠ¼ææ¬¾ï¼šä¸Šæµ·å‡çº§æ ¸å¿ƒï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7002\"\u003eEIP-7002 éƒ¨åˆ†ææ¬¾ä¸ä¸»åŠ¨é€€å‡ºï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-6110\"\u003eEIP-6110 é“¾ä¸Šè´¨æŠ¼å­˜æ¬¾ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"evmä¸æ‰§è¡Œå±‚æœªæ¥\"\u003eEVMä¸æ‰§è¡Œå±‚æœªæ¥\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7691\"\u003eEIP-7691 EOFï¼šEVMå®¹å™¨åŒ–é©å‘½ï¼ˆ2026ç›®æ ‡ï¼‰ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7623\"\u003eEIP-7623 æé«˜CALLDATAæˆæœ¬ä¸ºDankshardingé“ºè·¯ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-4444\"\u003eEIP-4444 å†å²æ•°æ®è¿‡æœŸæœºåˆ¶ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-5656\"\u003eEIP-5656 MCOPYæŒ‡ä»¤ï¼šé™ä½å†…å­˜æ‹·è´æˆæœ¬ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"æ•°æ®å¯ç”¨æ€§ä¸layer2\"\u003eæ•°æ®å¯ç”¨æ€§ä¸Layer2\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-4844\"\u003eEIP-4844 Blobäº¤æ˜“ä¸Dankshardingè·¯çº¿å›¾ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7594\"\u003eEIP-7594 PeerDASï¼šå¯¹ç­‰æ•°æ®å¯ç”¨æ€§é‡‡æ ·ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-6465\"\u003eEIP-6465/6466 Blobå†å²è¿‡æœŸæ–¹æ¡ˆï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å…¶ä»–æ­£åœ¨å…³æ³¨çš„eip\"\u003eå…¶ä»–æ­£åœ¨å…³æ³¨çš„EIP\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-7732\"\u003eEIP-7732 EIP-7702+ERC-7730å®‰å…¨å¢å¼ºç‰ˆï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-2537\"\u003eEIP-2537 BLSé¢„ç¼–è¯‘ï¼šåŠ é€Ÿé›¶çŸ¥è¯†è¯æ˜ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-5920\"\u003eEIP-5920 PAY opcodeï¼šåŸç”Ÿè½¬è´¦æ–°æ–¹å¼ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/eips/eip-6780\"\u003eEIP-6780 è‡ªæ¯ä»…é™åˆ›å»ºäº¤æ˜“ï¼šæå‡çŠ¶æ€ç®¡ç†ï¼ˆå¾…æ’°å†™ï¼‰\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæ›´å¤šEIPä¸“æ–‡æŒç»­æ›´æ–°ä¸­\u003cbr\u003e\nç›®å‰ä»…EIP-4337å·²å®Œç¨¿ï¼Œå…¶ä½™é™†ç»­æ”¾å‡º\u003cbr\u003e\næ¯ä¸€ç¯‡éƒ½æ˜¯ä»¥å¤ªåŠè¿›åŒ–å²çš„çœŸå®æ³¨è„š\u003c/p\u003e","title":"EIP ç¬”è®°åˆé›†"},{"content":"æ‘˜è¦ å¼•å…¥ UserOperationï¼šä¸€ç§é«˜å±‚â€œä¼ªäº¤æ˜“å¯¹è±¡â€ï¼Œæ›¿ä»£ç›´æ¥åœ¨å…±è¯†å±‚æäº¤äº¤æ˜“\nç”¨æˆ·å°† UserOperation å‘é€åˆ°å•ç‹¬çš„ mempool\nBundler å°†å¤šä¸ª UserOperation æ‰“åŒ…ï¼Œé€šè¿‡ handleOps è°ƒç”¨ EntryPoint åˆçº¦ï¼Œå†æ‰“åŒ…è¿›åŒºå—\nç›®æ ‡æ˜¯åœ¨ä¸ä¿®æ”¹ä»¥å¤ªåŠåº•å±‚åè®®çš„æƒ…å†µä¸‹ï¼Œå®ç°è´¦æˆ·æŠ½è±¡\nåŠ¨æœº å®ç°è´¦æˆ·æŠ½è±¡\nå…è®¸ä½¿ç”¨æ™ºèƒ½åˆçº¦è´¦æˆ·ä½œä¸ºä¸»è´¦æˆ·ï¼Œæ”¯æŒä»»æ„éªŒè¯é€»è¾‘ã€‚ ç”¨æˆ·æ— éœ€æ‹¥æœ‰å¤–éƒ¨è´¦æˆ·ï¼ˆEOAï¼‰ã€‚ å»ä¸­å¿ƒåŒ–ä¸å¼€æ”¾å‚ä¸\nä»»ä½• bundler éƒ½å¯å‚ä¸äº¤æ˜“æ‰“åŒ…ã€‚ ä¾èµ–å…¬å…± mempoolï¼Œæ— éœ€ç”¨æˆ·ç›´æ¥çŸ¥æ™“ bundler åœ°å€ã€‚ ä¸å¢åŠ ä¿¡ä»»å‡è®¾ã€‚ æ— éœ€å…±è¯†å±‚ä¿®æ”¹\né¿å…åè®®å±‚æ”¹åŠ¨ï¼Œæé«˜å¿«é€Ÿéƒ¨ç½²çš„å¯èƒ½æ€§ã€‚ æ”¯æŒæ›´å¤šåº”ç”¨åœºæ™¯\néšç§ä¿æŠ¤å‹åº”ç”¨ åŸå­å¤šæ“ä½œ ä½¿ç”¨ ERC-20 ä»£å¸æ”¯ä»˜æ‰‹ç»­è´¹æˆ–å¼€å‘è€…ä»£ä»˜ çµæ´»çš„éªŒè¯é€»è¾‘ï¼ˆä¸åŒç­¾åæ–¹æ¡ˆã€å¤šç­¾ã€æ¢å¤æ–¹æ¡ˆï¼‰ çµæ´»çš„æ‰‹ç»­è´¹æ”¯ä»˜ï¼ˆç¬¬ä¸‰æ–¹æ”¯ä»˜ã€è·¨é“¾æ”¯ä»˜ï¼‰ æ‰¹é‡æ“ä½œä¸æ‰“åŒ…æ‰§è¡Œ æ€»ç»“ï¼šè¯¥ææ¡ˆé€šè¿‡ UserOperationã€Bundler å’Œ EntryPoint åˆçº¦å®ç°æ™ºèƒ½åˆçº¦è´¦æˆ·çš„å®Œå…¨æŠ½è±¡åŒ–ï¼Œæ”¯æŒå¤šç­¾ã€ä»£ä»˜å’Œæ‰¹é‡æ“ä½œï¼ŒåŒæ—¶æ— éœ€ä¿®æ”¹ä»¥å¤ªåŠå…±è¯†å±‚\nè§„èŒƒ æœ¯è¯­å®šä¹‰ æœ¯è¯­ å®šä¹‰ UserOperation ä¸€ç§æè¿°â€œä»£è¡¨ç”¨æˆ·å‘èµ·ä¸€ç¬”äº¤æ˜“â€çš„æ•°æ®ç»“æ„ã€‚ä¸ºé¿å…ä¸åŸç”Ÿäº¤æ˜“æ··æ·†ï¼Œç‰¹æ„ä¸å«â€œtransactionâ€ã€‚åƒäº¤æ˜“ä¸€æ ·ï¼Œå®ƒåŒ…å« toã€calldataã€maxFeePerGasã€maxPriorityFeePerGasã€nonceã€signatureã€‚ä¸åƒäº¤æ˜“ï¼Œå®ƒåŒ…å«ä»¥ä¸‹æ‰€è¿°çš„å‡ ä¸ªå…¶ä»–å­—æ®µã€‚ç‰¹åˆ«æ³¨æ„ï¼Œsignature å­—æ®µçš„ä½¿ç”¨ä¸ç”±åè®®å®šä¹‰ï¼Œè€Œæ˜¯ç”±æ™ºèƒ½åˆçº¦è´¦æˆ·å®ç°å®šä¹‰ Sender å‘èµ· UserOperation çš„æ™ºèƒ½åˆçº¦è´¦æˆ· EntryPoint ç”¨äºæ‰§è¡Œ UserOperation æ‰¹æ¬¡çš„å•ä¾‹åˆçº¦ã€‚Bundler åº”ç™½åå•æ”¯æŒçš„ EntryPoint Bundler ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆåŒºå—æ„å»ºè€…ï¼‰ï¼Œå®ƒèƒ½å¤„ç† UserOperationã€åˆ›å»ºæœ‰æ•ˆçš„ entryPoint.handleOps() äº¤æ˜“ï¼Œå¹¶åœ¨äº¤æ˜“ä»æœ‰æ•ˆæ—¶å°†å…¶æ·»åŠ åˆ°åŒºå—ä¸­ã€‚è¿™å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°ï¼šBundler å¯ä»¥è‡ªå·±å……å½“åŒºå—æ„å»ºè€…ã€‚å¦‚æœ bundler ä¸æ˜¯åŒºå—æ„å»ºè€…ï¼Œå®ƒåº”é€šè¿‡ mev-boost ç­‰åŸºç¡€è®¾æ–½æˆ–å…¶ä»–æè®®è€…-æ„å»ºè€…åˆ†ç¦»æœºåˆ¶ä¸åŒºå—æ„å»ºè€…åˆä½œ Paymaster åŒæ„ä»£æ›¿ sender æ”¯ä»˜äº¤æ˜“è´¹ç”¨çš„è¾…åŠ©åˆçº¦ Factory å¿…è¦æ—¶è´Ÿè´£éƒ¨ç½²æ–° sender åˆçº¦çš„è¾…åŠ©åˆçº¦ Aggregator ä¹Ÿç§°ä¸ºâ€œæˆæƒåˆçº¦â€ - ä¸€ä¸ªå…è®¸å¤šä¸ª UserOperation å…±äº«ä¸€æ¬¡éªŒè¯çš„åˆçº¦ã€‚æ­¤ç±»åˆçº¦çš„å®Œæ•´è®¾è®¡è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´ Canonical UserOperation mempool ä¸€ä¸ªå»ä¸­å¿ƒåŒ–ã€æ— è®¸å¯çš„ P2P ç½‘ç»œï¼Œbundler åœ¨å…¶ä¸­äº¤æ¢ç¬¦åˆåŒä¸€å¥—å…±äº«éªŒè¯è§„åˆ™çš„åˆæ³• UserOperationã€‚å…·ä½“è§„åˆ™çš„å®Œæ•´è§„èŒƒè¶…å‡ºæœ¬ææ¡ˆèŒƒå›´ Alternative UserOperation mempool ä»»ä½•å…¶ä»– P2P å†…å­˜æ± ï¼Œå…¶ä¸­ UserOperation çš„æœ‰æ•ˆæ€§ç”±ä¸åŒäºå…±äº«è§„åˆ™çš„è§„åˆ™å†³å®šï¼Œè¿™äº›è§„åˆ™ä»¥ä»»ä½•æ–¹å¼åº”ç”¨äºéªŒè¯ä»£ç  Deposit Sender æˆ– Paymaster åˆçº¦å‘ EntryPoint åˆçº¦è½¬å…¥çš„ä¸€ç¬”ä»¥å¤ªå¸ï¼ˆæˆ–ä»»ä½• L2 åŸç”Ÿè´§å¸ï¼‰ï¼Œç”¨äºæ”¯ä»˜æœªæ¥ UserOperation çš„ gas è´¹ç”¨ UserOperation ç»“æ„å®šä¹‰ å­—æ®µ ç±»å‹ æè¿° sender address å‘èµ· UserOperation çš„è´¦æˆ· nonce uint256 é˜²é‡æ”¾å‚æ•°ï¼ˆè¯¦è§â€œåŠæŠ½è±¡ Nonce æ”¯æŒâ€ï¼‰ factory address æ–°è´¦æˆ·çš„è´¦æˆ·å·¥å‚ OR 0x7702 æ ‡å¿—ç”¨äº EIP-7702 è´¦æˆ·ï¼Œå¦åˆ™ address(0) factoryData bytes å¦‚æœæä¾› factoryï¼Œåˆ™ä¸ºè´¦æˆ·å·¥å‚çš„æ•°æ® OR EIP-7702 åˆå§‹åŒ–æ•°æ®ï¼Œæˆ–ç©ºæ•°ç»„ callData bytes åœ¨ä¸»è¦æ‰§è¡Œè°ƒç”¨æœŸé—´ä¼ é€’ç»™ sender çš„æ•°æ® callGasLimit uint256 ä¸ºä¸»è¦æ‰§è¡Œè°ƒç”¨åˆ†é…çš„ gas é‡ verificationGasLimit uint256 ä¸ºéªŒè¯æ­¥éª¤åˆ†é…çš„ gas é‡ preVerificationGas uint256 é¢å¤– gas ç”¨äºæ”¯ä»˜ bundler maxFeePerGas uint256 æœ€å¤§ gas è´¹ï¼ˆç±»ä¼¼äº EIP-1559 max_fee_per_gasï¼‰ maxPriorityFeePerGas uint256 æœ€å¤§ä¼˜å…ˆè´¹ï¼ˆç±»ä¼¼äº EIP-1559 max_priority_fee_per_gasï¼‰ paymaster address paymaster åˆçº¦åœ°å€ï¼ˆæˆ–ç©ºï¼Œå¦‚æœ sender è‡ªå·±æ”¯ä»˜ gasï¼‰ paymasterVerificationGasLimit uint256 ä¸º paymaster éªŒè¯ä»£ç åˆ†é…çš„ gas é‡ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰ paymasterPostOpGasLimit uint256 ä¸º paymaster åæ“ä½œä»£ç åˆ†é…çš„ gas é‡ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰ paymasterData bytes paymaster çš„æ•°æ®ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰ signature bytes ä¼ å…¥ sender ä»¥éªŒè¯æˆæƒçš„æ•°æ® ä¸Šé“¾æ—¶éƒ¨åˆ†å­—æ®µä¼šè¢«æ‰“åŒ…ï¼Œè½¬å˜æˆ PackedUserOperation\nEntrypoint æ¥å£ PackedUserOperation ç»“æ„å®šä¹‰\nå­—æ®µ ç±»å‹ æè¿° sender address nonce uint256 initCode bytes factory åœ°å€å’Œ factoryData çš„è¿æ¥ï¼ˆæˆ–ç©ºï¼‰ï¼Œæˆ– EIP-7702 æ•°æ® callData bytes accountGasLimits bytes32 verificationGasLimitï¼ˆ16 å­—èŠ‚ï¼‰å’Œ callGasLimitï¼ˆ16 å­—èŠ‚ï¼‰çš„è¿æ¥ preVerificationGas uint256 gasFees bytes32 maxPriorityFeePerGasï¼ˆ16 å­—èŠ‚ï¼‰å’Œ maxFeePerGasï¼ˆ16 å­—èŠ‚ï¼‰çš„è¿æ¥ paymasterAndData bytes paymaster å­—æ®µçš„è¿æ¥ï¼ˆæˆ–ç©ºï¼‰ signature bytes EntryPoint åˆçº¦çš„æ ¸å¿ƒæ¥å£å¦‚ä¸‹ï¼š\nfunction handleOps(PackedUserOperation[] calldata ops, address payable beneficiary); beneficiary æ˜¯å°†æ”¶åˆ°æ‰¹æ¬¡æ‰§è¡ŒæœŸé—´æ”¶é›†çš„æ‰€æœ‰ gas è´¹çš„åœ°å€ã€‚\nSmart Contract Account æ¥å£ interface IAccount { function validateUserOp (PackedUserOperation calldata userOp, bytes32 userOpHash, uint256 missingAccountFunds) external returns (uint256 validationData); } userOpHash æ˜¯å¯¹ userOpï¼ˆé™¤ signatureï¼‰ã€entryPoint å’Œ chainId çš„å“ˆå¸Œ\néœ€å®ç°åŠŸèƒ½\nå¿…é¡»éªŒè¯è°ƒç”¨è€…æ˜¯å¯ä¿¡çš„ EntryPoint å¿…é¡»éªŒè¯ signature æ˜¯ userOpHash çš„æœ‰æ•ˆç­¾åï¼Œå¹¶åœ¨ç­¾åä¸åŒ¹é…æ—¶è¿”å› SIG_VALIDATION_FAILED (1) è€Œé revertã€‚ä»»ä½•å…¶ä»–é”™è¯¯å¿…é¡» revert åœ¨è¿”å› SIG_VALIDATION_FAILED (1) æ—¶ä¸åº”æå‰è¿”å›ã€‚ç›¸åï¼Œåº”å®Œæˆæ­£å¸¸æµç¨‹ä»¥å¯ç”¨éªŒè¯å‡½æ•°çš„ gas ä¼°ç®— å¿…é¡»æ”¯ä»˜ EntryPointï¼ˆè°ƒç”¨è€…ï¼‰è‡³å°‘ missingAccountFundsï¼ˆå¯èƒ½ä¸ºé›¶ï¼Œå¦‚æœå½“å‰ sender çš„å­˜æ¬¾è¶³å¤Ÿ/å­˜åœ¨ paymaster å«ä»˜ï¼‰ sender å¯ä»¥æ”¯ä»˜è¶…è¿‡æ­¤æœ€å°å€¼ä»¥è¦†ç›–æœªæ¥äº¤æ˜“ã€‚å®ƒä¹Ÿå¯ä»¥éšæ—¶è°ƒç”¨ withdrawTo æ¥å–å› è¿”å›å€¼å¿…é¡»æ‰“åŒ… aggregator/authorizerã€validUntil å’Œ validAfter æ—¶é—´æˆ³ aggregator/authorizer - 0 è¡¨ç¤ºæœ‰æ•ˆç­¾åï¼Œ1 è¡¨ç¤ºç­¾åå¤±è´¥ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¸º aggregator/authorizer åˆçº¦çš„åœ°å€ validUntil æ˜¯ 6 å­—èŠ‚æ—¶é—´æˆ³å€¼ï¼Œæˆ–é›¶è¡¨ç¤ºâ€œæ— é™â€ã€‚UserOperation ä»…åœ¨æ­¤æ—¶é—´ä¹‹å‰æœ‰æ•ˆ validAfter æ˜¯ 6 å­—èŠ‚æ—¶é—´æˆ³ã€‚UserOperation ä»…åœ¨æ­¤æ—¶é—´ä¹‹åæœ‰æ•ˆ ä¸ºäº†ä½¿ç”¨åŒºå—å·æŒ‡å®šæœ‰æ•ˆèŒƒå›´ï¼ŒvalidUntil å’Œ validAfter éƒ½éœ€è¦å°†å…¶æœ€é«˜ä½è®¾ç½®ä¸º 1 æ³¨æ„ï¼šæœ‰æ•ˆèŒƒå›´å¯ä»¥ç”¨ä¸¤ä¸ªåŒºå—æ—¶é—´æˆ³æˆ–ä¸¤ä¸ªåŒºå—å·è¡¨ç¤ºï¼Œä½†ä¸èƒ½åœ¨åŒä¸€ä¸ª UserOperation çš„æœ‰æ•ˆèŒƒå›´ä¸­æ··åˆä¸€ä¸ªæ—¶é—´æˆ³å’Œä¸€ä¸ªåŒºå—å·\nSmart Contract Account å¯ä»¥å®ç° IAccountExecute æ¥å£\ninterface IAccountExecute { function executeUserOp(PackedUserOperation calldata userOp, bytes32 userOpHash) external; } æ­¤æ–¹æ³•å°†ç”± EntryPoint ä½¿ç”¨å½“å‰ UserOperation è°ƒç”¨ï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨ sender ä¸Šæ‰§è¡Œ callData\nåŠæŠ½è±¡ Nonce æ”¯æŒ åœ¨ä»¥å¤ªåŠåè®®ä¸­ï¼Œé¡ºåºäº¤æ˜“ nonce å€¼ç”¨ä½œé˜²é‡æ”¾æ–¹æ³•ï¼Œä»¥åŠç¡®å®šäº¤æ˜“åŒ…å«åœ¨åŒºå—ä¸­çš„æœ‰æ•ˆé¡ºåº.\nå®ƒè¿˜è´¡çŒ®äºäº¤æ˜“å“ˆå¸Œçš„å”¯ä¸€æ€§ï¼Œå› ä¸ºåŒä¸€ sender çš„åŒä¸€ nonce äº¤æ˜“ä¸èƒ½ä¸¤æ¬¡åŒ…å«åœ¨é“¾ä¸­.\nç„¶è€Œï¼Œè¦æ±‚å•ä¸€é¡ºåº nonce å€¼é™åˆ¶äº† sender å®šä¹‰è‡ªå®šä¹‰äº¤æ˜“æ’åºå’Œé˜²é‡æ”¾é€»è¾‘çš„èƒ½åŠ›.\næˆ‘ä»¬å®ç°äº† nonce æœºåˆ¶ï¼Œä½¿ç”¨ UserOperation ä¸­çš„å•ä¸€ uint256 nonce å€¼ï¼Œä½†å°†å…¶è§†ä¸ºä¸¤ä¸ªå€¼ï¼š\n192 ä½â€œkeyâ€ 64 ä½â€œsequenceâ€ è¿™äº›å€¼åœ¨ EntryPoint åˆçº¦ä¸­é“¾ä¸Šè¡¨ç¤ºã€‚æˆ‘ä»¬åœ¨ EntryPoint æ¥å£ä¸­å®šä¹‰ä»¥ä¸‹æ–¹æ³•æ¥æš´éœ²è¿™äº›å€¼ï¼š\nfunction getNonce(address sender, uint192 key) external view returns (uint256 nonce); å¯¹äºæ¯ä¸ª keyï¼ŒEntryPoint ä¸ºæ¯ä¸ª UserOperation éªŒè¯ sequenceã€‚å¦‚æœ nonce éªŒè¯å¤±è´¥ï¼ŒUserOperation è¢«è§†ä¸ºæ— æ•ˆï¼Œæ‰¹æ¬¡ revertã€‚sequence å€¼ä¸º sender é¡ºåºä¸”å•è°ƒé€’å¢ã€‚æ–° key å¯ä»¥éšæ—¶å¼•å…¥ä»»æ„å€¼ï¼Œå…¶ sequence ä» 0 å¼€å§‹.\nè¿™ç§æ–¹æ³•åœ¨åè®®å±‚é¢ç»´æŠ¤äº†é“¾ä¸Š UserOperation å“ˆå¸Œå”¯ä¸€æ€§çš„ä¿è¯ï¼ŒåŒæ—¶å…è®¸è´¦æˆ·ä½¿ç”¨ 192 ä½â€œkeyâ€å­—æ®µå®ç°ä»»ä½•è‡ªå®šä¹‰é€»è¾‘ï¼ŒåŒæ—¶é€‚åˆ 32 å­—èŠ‚å­—.\nè¯»å–/éªŒè¯ nonce åœ¨å‡†å¤‡ UserOperation æ—¶ï¼Œbundler å¯ä»¥è°ƒç”¨æ­¤æ–¹æ³•æ¥ç¡®å®š nonce å­—æ®µçš„æœ‰æ•ˆå€¼.\nBundler å¯¹ UserOperation çš„éªŒè¯åº”ä»¥ getNonce å¼€å§‹ï¼Œä»¥ç¡®ä¿äº¤æ˜“å…·æœ‰æœ‰æ•ˆçš„ nonce å­—æ®µ.\nå¦‚æœ bundler æ„¿æ„æ¥å—åŒä¸€ sender çš„å¤šä¸ª UserOperation è¿›å…¥å…¶å†…å­˜æ± ï¼Œåˆ™ bundler åº”è·Ÿè¸ªå·²æ·»åŠ å†…å­˜æ± çš„ UserOperation çš„ key å’Œ sequence å¯¹.\nä½¿ç”¨ç¤ºä¾‹\nç»å…¸é¡ºåºé€’å¢ nonce ä¸ºäº†è¦æ±‚è´¦æˆ·å…·æœ‰ç»å…¸é¡ºåº nonceï¼ŒéªŒè¯å‡½æ•°å¿…é¡»æ‰§è¡Œï¼š\nrequire(userOp.nonce\u0026lt;type(uint64).max) æœ‰åºç®¡ç†äº‹ä»¶ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè´¦æˆ·å¯èƒ½éœ€è¦ä¸æ­£å¸¸æ“ä½œå¹¶è¡Œçš„â€œç®¡ç†â€æ“ä½œé€šé“.\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè´¦æˆ·å¯ä»¥åœ¨è°ƒç”¨è´¦æˆ·è‡ªèº«çš„æ–¹æ³•æ—¶ä½¿ç”¨ç‰¹å®š keyï¼š\nbytes4 sig = bytes4(userOp.callData[0 : 4]); uint key = userOp.nonce \u0026gt;\u0026gt; 64; if (sig == ADMIN_METHODSIG) { require(key == ADMIN_KEY, \u0026#34;wrong nonce-key for admin operation\u0026#34;); } else { require(key == 0, \u0026#34;wrong nonce-key for normal operation\u0026#34;); } EntryPoint åˆçº¦æ‰€éœ€åŠŸèƒ½ EntryPoint æ ¸å¿ƒæ–¹æ³•æ˜¯ handleOpsï¼Œå®ƒå¤„ç† UserOperation æ•°ç»„\nEntryPoint çš„ handleOps å‡½æ•°å¿…é¡»æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼ˆæˆ‘ä»¬é¦–å…ˆæè¿°æ›´ç®€å•çš„æ—  paymaster æƒ…å†µï¼‰ã€‚å®ƒå¿…é¡»è¿›è¡Œä¸¤ä¸ªå¾ªç¯ï¼ŒéªŒè¯å¾ªç¯å’Œæ‰§è¡Œå¾ªç¯ã€‚åœ¨éªŒè¯å¾ªç¯ä¸­ï¼ŒhandleOps è°ƒç”¨å¿…é¡»ä¸ºæ¯ä¸ª UserOperation æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š\nå¦‚æœ sender æ™ºèƒ½åˆçº¦è´¦æˆ·å°šä¸å­˜åœ¨ï¼Œä½¿ç”¨ UserOperation ä¸­æä¾›çš„ initcode åˆ›å»ºå®ƒ å¦‚æœ factory åœ°å€æ˜¯â€œ0x7702â€ï¼Œåˆ™ sender å¿…é¡»æ˜¯å…·æœ‰ EIP-7702 æˆæƒæŒ‡å®šçš„ EOAã€‚EntryPoint éªŒè¯æˆæƒåœ°å€ä¸ UserOperation signature ä¸­æŒ‡å®šçš„åœ°å€åŒ¹é…ï¼ˆè¯¦è§å¯¹ [EIP-7702] æˆæƒçš„æ”¯æŒï¼‰ å¦‚æœ sender ä¸å­˜åœ¨ï¼Œä¸” initcode ä¸ºç©ºï¼Œæˆ–æœªåœ¨â€œsenderâ€åœ°å€éƒ¨ç½²åˆçº¦ï¼Œåˆ™è°ƒç”¨å¿…é¡»å¤±è´¥ è­¦å‘Šï¼šå¦‚æœ sender å­˜åœ¨ï¼Œä¸” initcode ä¸ä¸ºç©ºï¼Œåˆ™å¿½ç•¥ initcodeã€‚\nåŸºäºéªŒè¯å’Œè°ƒç”¨ gas é™åˆ¶ä»¥åŠå½“å‰ gas å€¼è®¡ç®— sender éœ€è¦æ”¯ä»˜çš„æœ€å¤§å¯èƒ½è´¹ç”¨ è®¡ç®— sender å¿…é¡»æ·»åŠ åˆ° EntryPointâ€œdepositâ€çš„è´¹ç”¨ åœ¨ sender åˆçº¦ä¸Šè°ƒç”¨ validateUserOpï¼Œä¼ å…¥ UserOperationã€å…¶å“ˆå¸Œå’Œæ‰€éœ€è´¹ç”¨ã€‚å¦‚æœ sender è®¤ä¸º UserOperation æœ‰æ•ˆï¼Œæ™ºèƒ½åˆçº¦è´¦æˆ·å¿…é¡»éªŒè¯ UserOperation çš„ signature å‚æ•°å¹¶æ”¯ä»˜è´¹ç”¨ã€‚å¦‚æœä»»ä½• validateUserOp è°ƒç”¨å¤±è´¥ï¼ŒhandleOps å¿…é¡»è‡³å°‘è·³è¿‡è¯¥ UserOperation çš„æ‰§è¡Œï¼Œå¹¶å¯èƒ½å®Œå…¨ revert éªŒè¯ EntryPoint ä¸­è´¦æˆ·çš„ deposit è¶³å¤Ÿé«˜ä»¥è¦†ç›–æœ€å¤§å¯èƒ½æˆæœ¬ï¼ˆè¦†ç›–å·²å®Œæˆçš„éªŒè¯å’Œæœ€å¤§æ‰§è¡Œ gasï¼‰ æ‰§è¡Œæµç¨‹ ä½¿ç”¨ UserOperation çš„ calldata è°ƒç”¨è´¦æˆ·ã€‚è´¦æˆ·è‡ªè¡Œå†³å®šå¦‚ä½•è§£æ calldataï¼›é¢„æœŸå·¥ä½œæµæ˜¯è´¦æˆ·æœ‰ä¸€ä¸ª execute å‡½æ•°ï¼Œå°†å‰©ä½™ calldata è§£æä¸ºè´¦æˆ·åº”æ‰§è¡Œçš„ä¸€ä¸ªæˆ–å¤šä¸ªè°ƒç”¨åºåˆ— å¦‚æœ calldata ä»¥ IAccountExecute.executeUserOp çš„æ–¹æ³•ç­¾åå¼€å¤´ï¼Œåˆ™ EntryPoint å¿…é¡»é€šè¿‡ç¼–ç  executeUserOp(userOp,userOpHash) æ„å»º calldataï¼Œå¹¶ä½¿ç”¨è¯¥ calldata è°ƒç”¨è´¦æˆ· è°ƒç”¨åï¼Œç”¨é¢„æ”¶è´¹ç”¨çš„å¤šä½™ gas æˆæœ¬é€€è¿˜è´¦æˆ·çš„ deposit å¯¹ callGasLimit å’Œ paymasterPostOpGasLimit çš„å‰©ä½™æœªç”¨ gas æ–½åŠ  10%ï¼ˆUNUSED_GAS_PENALTY_PERCENTï¼‰çš„ç½šæ¬¾ã€‚ ä»…å½“å‰©ä½™æœªç”¨ gas é‡å¤§äºæˆ–ç­‰äº 40000ï¼ˆPENALTY_GAS_THRESHOLDï¼‰æ—¶æ‰æ–½åŠ æ­¤ç½šæ¬¾ æ­¤ç½šæ¬¾æ˜¯å¿…è¦çš„ï¼Œä»¥é˜²æ­¢ UserOperation é¢„ç•™æ‰¹æ¬¡ä¸­çš„å¤§é‡ gas ç©ºé—´ä½†æœªä½¿ç”¨ï¼Œä»è€Œé˜»æ­¢ bundler åŒ…å«å…¶ä»– UserOperation\næ‰§è¡Œæ‰€æœ‰è°ƒç”¨åï¼Œä»æ‰€æœ‰ UserOperation æ”¶é›†çš„è´¹ç”¨æ”¯ä»˜ç»™ bundler æä¾›çš„ beneficiary åœ°å€ åœ¨æ¥å— UserOperation ä¹‹å‰ï¼Œbundler åº”ä½¿ç”¨ RPC æ–¹æ³•æœ¬åœ°è°ƒç”¨ EntryPoint çš„ handleOps å‡½æ•°ï¼Œä»¥éªŒè¯ signature æ­£ç¡®ä¸” UserOperation å®é™…æ”¯ä»˜è´¹ç”¨ï¼›è¯¦è§ä¸‹æ–‡Simulation sectionéƒ¨åˆ†ã€‚èŠ‚ç‚¹/bundler å¿…é¡»æ‹’ç»éªŒè¯å¤±è´¥çš„ UserOperationï¼Œå³ä¸å°†å…¶æ·»åŠ åˆ°æœ¬åœ°å†…å­˜æ± ï¼Œä¹Ÿä¸ä¼ æ’­ç»™å…¶ä»–å¯¹ç­‰èŠ‚ç‚¹\nERC-4337 çš„ JSON-RPC API ä¸ºäº†æ”¯æŒå‘ bundler å‘é€ UserOperation å¯¹è±¡ï¼Œåè€…é€šè¿‡ P2P å†…å­˜æ± ä¼ æ’­å®ƒä»¬ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ç»„ JSON-RPC APIï¼ŒåŒ…æ‹¬ eth_sendUserOperation å’Œ eth_getUserOperationReceipt\næ–° JSON-RPC API çš„å®Œæ•´å®šä¹‰è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\nå¯¹ EIP-712 ç­¾åçš„æ”¯æŒ userOpHash è®¡ç®—ä¸º [EIP-712] ç±»å‹æ¶ˆæ¯å“ˆå¸Œï¼Œå…·æœ‰ä»¥ä¸‹å‚æ•°ï¼š\nbytes32 constant TYPE_HASH = keccak256( \u0026#34;EIP712Domain(string name,string version,uint256 chainId,address verifyingContract)\u0026#34; ); bytes32 constant PACKED_USEROP_TYPEHASH = keccak256( \u0026#34;PackedUserOperation(address sender,uint256 nonce,bytes initCode,bytes callData,bytes32 accountGasLimits,uint256 preVerificationGas,bytes32 gasFees,bytes paymasterAndData)\u0026#34; ); å¯¹ EIP-7702 æˆæƒçš„æ”¯æŒ åœ¨å¯ç”¨ EIP-7702 çš„ç½‘ç»œä¸Šï¼Œeth_sendUserOperation æ–¹æ³•æ¥å—é¢å¤–çš„ eip7702Auth å‚æ•°ã€‚å¦‚æœè®¾ç½®æ­¤å‚æ•°ï¼Œå®ƒå¿…é¡»æ˜¯æœ‰æ•ˆçš„ EIP-7702 æˆæƒå…ƒç»„ï¼Œå¹¶ç”± sender åœ°å€ç­¾åã€‚Bundler å¿…é¡»å°†æ‰¹æ¬¡ä¸­æ‰€æœ‰ UserOperation çš„æ‰€æœ‰æ‰€éœ€ eip7702Auth æ·»åŠ åˆ° authorizationListï¼Œå¹¶ä½¿ç”¨ SET_CODE_TX_TYPE äº¤æ˜“ç±»å‹æ‰§è¡Œæ‰¹æ¬¡ã€‚æ­¤å¤–ï¼ŒUserOperation å“ˆå¸Œè®¡ç®—æ›´æ–°ä»¥åŒ…å«æ‰€éœ€çš„ EIP-7702 å§”æ‰˜åœ°å€\nå¦‚æœ initCode å­—æ®µä»¥å³å¡«å…… 18 ä¸ªé›¶çš„ 0x7702 å¼€å¤´ï¼Œä¸”æ­¤è´¦æˆ·ä½¿ç”¨ EIP-7702 äº¤æ˜“éƒ¨ç½²ï¼Œåˆ™å“ˆå¸Œè®¡ç®—å¦‚ä¸‹ï¼š\nä¸ºå“ˆå¸Œè®¡ç®—ç›®çš„ï¼Œå°† UserOperation çš„ initCode å­—æ®µçš„å‰ 20 å­—èŠ‚è®¾ç½®ä¸ºè´¦æˆ·çš„ EIP-7702 å§”æ‰˜åœ°å€ï¼ˆä½¿ç”¨ EXTCODECOPY è·å–ï¼‰ initCode ä¸ç”¨äºè°ƒç”¨ factory åˆçº¦ å¦‚æœ initCode é•¿äº 20 å­—èŠ‚ï¼Œåˆ™å‰©ä½™ initCode ç”¨äºè°ƒç”¨è´¦æˆ·è‡ªèº«çš„åˆå§‹åŒ–å‡½æ•° æ³¨æ„ï¼šUserOperation å¯èƒ½ä»å¯åœ¨æ— æ­¤ç±» initCode çš„æƒ…å†µä¸‹æ‰§è¡Œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒEntryPoint ä¸å“ˆå¸Œå½“å‰ EIP-7702 å§”æ‰˜ï¼Œå¹¶å¯èƒ½é’ˆå¯¹ä¿®æ”¹åçš„è´¦æˆ·æ‰§è¡Œ\næ­¤å¤–ï¼ŒEIP-7702 å®šä¹‰æ‰§è¡Œæˆæƒçš„ gas æˆæœ¬ç­‰äº PER_EMPTY_ACCOUNT_COST = 25000ã€‚æ­¤ gas æ¶ˆè€—åœ¨ EntryPoint åˆçº¦é“¾ä¸Šä¸å¯è§‚å¯Ÿï¼Œå¿…é¡»åŒ…å«åœ¨ preVerificationGas å€¼ä¸­\næ‰©å±•ï¼špaymaster æˆ‘ä»¬æ‰©å±• EntryPoint é€»è¾‘ä»¥æ”¯æŒ paymaster èµåŠ©å…¶ä»–ç”¨æˆ·çš„äº¤æ˜“ã€‚æ­¤åŠŸèƒ½å¯ç”¨äºå…è®¸åº”ç”¨å¼€å‘è€…ä¸ºç”¨æˆ·è¡¥è´´è´¹ç”¨ã€å…è®¸ç”¨æˆ·ä½¿ç”¨ [ERC-20] ä»£å¸æ”¯ä»˜è´¹ç”¨ä»¥åŠè®¸å¤šå…¶ä»–ç”¨ä¾‹ã€‚å½“ UserOperation ä¸­çš„ paymasterAndData å­—æ®µéç©ºæ—¶ï¼ŒEntryPoint ä¸ºè¯¥ UserOperation å®ç°ä¸åŒçš„æµç¨‹ï¼š\nåœ¨éªŒè¯å¾ªç¯æœŸé—´ï¼Œé™¤äº†è°ƒç”¨ validateUserOpï¼ŒhandleOps æ‰§è¡Œè¿˜å¿…é¡»æ£€æŸ¥ paymaster åœ¨ EntryPoint æœ‰è¶³å¤Ÿçš„ ETH å­˜æ¬¾æ¥æ”¯ä»˜ UserOperationï¼Œç„¶åè°ƒç”¨ paymaster ä¸Šçš„ validatePaymasterUserOp ä»¥éªŒè¯ paymaster æ˜¯å¦æ„¿æ„æ”¯ä»˜ UserOperationã€‚è¯·æ³¨æ„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒvalidateUserOp ä»¥ missingAccountFunds ä¸º 0 è°ƒç”¨ï¼Œä»¥åæ˜ è´¦æˆ·çš„å­˜æ¬¾ä¸ç”¨äºæ­¤ UserOperation çš„æ”¯ä»˜\nå¦‚æœ paymaster çš„ validatePaymasterUserOp è¿”å›éç©º context å­—èŠ‚æ•°ç»„ï¼Œåˆ™ handleOps å¿…é¡»åœ¨ä¸»è¦æ‰§è¡Œè°ƒç”¨åè°ƒç”¨ paymaster ä¸Šçš„ postOpã€‚å¦åˆ™ï¼Œä¸è°ƒç”¨ postOp å‡½æ•°\næ¶æ„åˆ¶ä½œçš„ paymaster å¯èƒ½å¯¹ç³»ç»Ÿé€ æˆ DoS æ”»å‡»é£é™©ï¼Œbundler åº”é‡‡å–æ­¥éª¤ç¼“è§£ã€‚ä½œä¸ºç¼“è§£ï¼Œbundler åº”ä¸ºå…¶æœåŠ¡çš„åˆçº¦ä½¿ç”¨å£°èª‰ç³»ç»Ÿï¼Œä¸” paymaster å¿…é¡»é™åˆ¶å…¶å­˜å‚¨ä½¿ç”¨ï¼Œæˆ–åœ¨å£°èª‰ç³»ç»Ÿä¸­å­˜å…¥ stakeã€‚æ­¤ç±»å£°èª‰ç³»ç»Ÿçš„å®Œæ•´è§„èŒƒè¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\npaymasterAndData å­—æ®µç¼–ç å’Œ paymasterSignature paymasterAndData å­—æ®µæ˜¯ä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µçš„éæ ‡å‡†ç¼–ç ï¼š\npaymasterAddress - 20 å­—èŠ‚ â€” paymaster åˆçº¦åœ°å€\npaymasterVerificationGasLimit - 16 å­—èŠ‚ - éªŒè¯å‡½æ•°çš„ gas é™åˆ¶\npostOpGasLimit - 16 å­—èŠ‚ - postOp å‡½æ•°çš„ gas é™åˆ¶\npaymasterData - paymaster åˆçº¦å°†åœ¨ validatePaymasterUserOp è°ƒç”¨ä¸­æ¥æ”¶çš„æ•°æ® ä»¥ä¸‹æ•°æ®å¯ä»¥é€‰æ‹©é™„åŠ åˆ° paymasterAndData å­—æ®µï¼š\npaymasterSignature - paymaster åˆçº¦è¦æ£€æŸ¥çš„â€œsignatureâ€å€¼å­—èŠ‚æ•°ç»„ï¼›æ­¤å€¼å¯ä»¥æä¾›è€Œä¸å½±å“ UserOperation å“ˆå¸Œ\npaymasterSignatureLength - 2 å­—èŠ‚ - paymasterSignature å‚æ•°å­—èŠ‚æ•°ç»„çš„ç²¾ç¡®é•¿åº¦\nPAYMASTER_SIG_MAGIC (0x22e325a297439656) - é™„åŠ çš„é­”æœ¯å€¼ï¼Œè¡¨ç¤º UserOperation ä½¿ç”¨ paymasterSignature åŠŸèƒ½\næ³¨æ„ï¼Œç”±äº signature å’Œ paymasterSignature å­—æ®µéƒ½ä¸å½±å“ UserOperation å“ˆå¸Œï¼ŒSender å’Œ Paymaster çš„ç­¾åå¯ä»¥å¹¶è¡Œæ‰§è¡Œ\npaymaster æ¥å£å¦‚ä¸‹ï¼š\nfunction validatePaymasterUserOp (PackedUserOperation calldata userOp, bytes32 userOpHash, uint256 maxCost) external returns (bytes memory context, uint256 validationData); function postOp (PostOpMode mode, bytes calldata context, uint256 actualGasCost, uint256 actualUserOpFeePerGas) external; enum PostOpMode { opSucceeded, // UserOperation æˆåŠŸ opReverted // UserOperation revertã€‚paymaster ä»éœ€æ”¯ä»˜ gasã€‚ } EntryPoint å¿…é¡»å®ç°ä»¥ä¸‹ API ä»¥å…è®¸ paymaster ç­‰å®ä½“ stakeï¼Œä»è€Œåœ¨å­˜å‚¨è®¿é—®ä¸­å…·æœ‰æ›´å¤šçµæ´»æ€§ã€‚ // ä¸ºè°ƒç”¨å®ä½“æ·»åŠ  stake function addStake(uint32 _unstakeDelaySec) external payable; // è§£é” stakeï¼ˆå¿…é¡»ç­‰å¾… unstakeDelay æ‰èƒ½å–å›ï¼‰ function unlockStake() external; // å–å›è§£é”çš„ stake function withdrawStake(address payable withdrawAddress) external; paymaster è¿˜å¿…é¡»æœ‰ depositï¼ŒEntryPoint å°†ä»ä¸­æ”¶å– UserOperation æˆæœ¬ã€‚depositï¼ˆç”¨äºæ”¯ä»˜ gas è´¹ç”¨ï¼‰ä¸ stakeï¼ˆè¢«é”å®šï¼‰åˆ†å¼€ã€‚ EntryPoint å¿…é¡»å®ç°ä»¥ä¸‹æ¥å£ä»¥å…è®¸ Paymasterï¼ˆå¯é€‰åœ° Accountsï¼‰ç®¡ç†å…¶ depositï¼š\n// è¿”å›è´¦æˆ·çš„ deposit function balanceOf(address account) public view returns (uint256); // æ·»åŠ åˆ°ç»™å®šè´¦æˆ·çš„ deposit function depositTo(address account) public payable; // æ·»åŠ åˆ°è°ƒç”¨è´¦æˆ·çš„ deposit receive() external payable; // ä»å½“å‰è´¦æˆ·çš„ deposit å–å› function withdrawTo(address payable withdrawAddress, uint256 withdrawAmount) external; // è·å–å½“å‰æ‰§è¡Œçš„ UserOperation å“ˆå¸Œï¼Œæˆ–å¦‚æœä¸åœ¨æ‰§è¡ŒæœŸé—´è°ƒç”¨åˆ™ä¸º 0 function getCurrentUserOpHash() public view returns (bytes32); Bundler åœ¨æ”¶åˆ° UserOperation æ—¶çš„è¡Œä¸º ç±»ä¼¼äºä»¥å¤ªåŠäº¤æ˜“ï¼ŒUserOperation çš„é“¾å¤–æµç¨‹å¯ä»¥æè¿°å¦‚ä¸‹ï¼š\nå®¢æˆ·ç«¯é€šè¿‡ RPC è°ƒç”¨ eth_sendUserOperation å‘ bundler å‘é€ UserOperation åœ¨å°† UserOperation åŒ…å«åˆ°å†…å­˜æ± ä¹‹å‰ï¼Œbundler å¯¹æ–°æ”¶åˆ°çš„ UserOperation è¿è¡Œç¬¬ä¸€æ¬¡éªŒè¯ã€‚å¦‚æœ UserOperation éªŒè¯å¤±è´¥ï¼Œbundler ä¸¢å¼ƒå®ƒå¹¶åœ¨ eth_sendUserOperation å“åº”ä¸­è¿”å›é”™è¯¯ ç¨åï¼Œä¸€æ—¦æ„å»ºæ‰¹æ¬¡ï¼Œbundler ä»å†…å­˜æ± å–å‡º UserOperation å¹¶å¯¹æ¯ä¸ªè¿è¡Œå•ä¸ª UserOperation çš„ç¬¬äºŒæ¬¡éªŒè¯ã€‚å¦‚æœæˆåŠŸï¼Œåˆ™è®¡åˆ’åŒ…å«åœ¨ä¸‹ä¸€ä¸ªæ‰¹æ¬¡ä¸­ï¼Œå¦åˆ™ä¸¢å¼ƒ åœ¨é“¾ä¸Šæäº¤æ–°æ‰¹æ¬¡ä¹‹å‰ï¼Œbundler æ‰§è¡Œæ•´ä¸ª UserOperation æ‰¹æ¬¡çš„ç¬¬ä¸‰æ¬¡éªŒè¯ã€‚å¦‚æœä»»ä½• UserOperation éªŒè¯å¤±è´¥ï¼Œbundler ä¸¢å¼ƒå®ƒä»¬ã€‚bundler åº”è·Ÿè¸ªå¯¹ç­‰èŠ‚ç‚¹çš„å£°èª‰ã€‚æ­¤ç±»å£°èª‰ç³»ç»Ÿçš„å®Œæ•´è®¾è®¡è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´ å½“ bundler æ”¶åˆ° UserOperation æ—¶ï¼Œå®ƒå¿…é¡»é¦–å…ˆè¿è¡Œä¸€äº›åŸºæœ¬ sanity æ£€æŸ¥ï¼Œå³ï¼š\nsender æ˜¯ç°æœ‰åˆçº¦ï¼Œæˆ– initCode éç©ºï¼ˆä½†ä¸èƒ½ä¸¤è€…çš†æœ‰ï¼‰ å¦‚æœ initCode éç©ºï¼Œè§£æå…¶å‰ 20 å­—èŠ‚ä¸º factory åœ°å€æˆ– EIP-7702 æ ‡å¿— è®°å½• factory æ˜¯å¦ stakeï¼Œåœ¨åç»­æ¨¡æ‹Ÿè¡¨æ˜éœ€è¦æ—¶ã€‚å¦‚æœ factory è®¿é—®å…¨å±€çŠ¶æ€ï¼Œå®ƒå¿…é¡» stake verificationGasLimit å’Œ paymasterVerificationGasLimits ä½äº MAX_VERIFICATION_GAS (500000)ï¼Œä¸” preVerificationGas è¶³å¤Ÿé«˜ä»¥æ”¯ä»˜åºåˆ—åŒ– UserOperation çš„ calldata gas æˆæœ¬åŠ ä¸Š PRE_VERIFICATION_OVERHEAD_GAS (50000) paymasterAndData ä¸ºç©ºï¼Œæˆ–ä»¥ paymaster åœ°å€å¼€å¤´ï¼Œè¯¥åˆçº¦ (i) å½“å‰é“¾ä¸Šæœ‰éç©ºä»£ç ï¼Œ(ii) æœ‰è¶³å¤Ÿ deposit æ”¯ä»˜ UserOperationï¼Œ(iii) å½“å‰æœªè¢«ç¦ã€‚åœ¨æ¨¡æ‹ŸæœŸé—´ï¼Œè¿˜æ ¹æ®å…¶å­˜å‚¨ä½¿ç”¨æ£€æŸ¥ paymaster çš„ stake callGasLimit è‡³å°‘æ˜¯å…·æœ‰éé›¶å€¼çš„ CALL æˆæœ¬ maxFeePerGas å’Œ maxPriorityFeePerGas é«˜äº bundler æ„¿æ„æ¥å—çš„å¯é…ç½®æœ€å°å€¼ã€‚è‡³å°‘ï¼Œå®ƒä»¬è¶³å¤Ÿé«˜ä»¥åŒ…å«åœ¨å³å°†åˆ°æ¥çš„ block.basefee ä¸­ sender åœ¨å†…å­˜æ± ä¸­æ²¡æœ‰å¦ä¸€ä¸ª UserOperationï¼ˆæˆ–å®ƒæ›¿æ¢ç°æœ‰æ¡ç›®ï¼Œå…·æœ‰ç›¸åŒ sender å’Œ nonceï¼Œå…·æœ‰æ›´é«˜çš„ maxPriorityFeePerGas å’ŒåŒç­‰å¢åŠ çš„ maxFeePerGasï¼‰ã€‚å•ä¸ªæ‰¹æ¬¡ä¸­æ¯ä¸ª sender ä»…ä¸€ä¸ª UserOperationã€‚å¦‚æœ sender stakeï¼Œåˆ™å…é™¤æ­¤è§„åˆ™ï¼Œå¹¶å¯åœ¨å†…å­˜æ± å’Œæ‰¹æ¬¡ä¸­æœ‰å¤šä¸ª UserOperation UserOperation Simulation æˆ‘ä»¬å®šä¹‰ UserOperation æ¨¡æ‹Ÿï¼Œä½œä¸ºå¯¹ EntryPoint åˆçº¦çš„é“¾å¤–è§†å›¾è°ƒç”¨ï¼ˆæˆ–è·Ÿè¸ªè°ƒç”¨ï¼‰ä¸ UserOperationï¼Œä»¥åŠå¯¹éªŒè¯ä»£ç åº”ç”¨çš„å…±äº«è§„åˆ™é›†çš„å¼ºåˆ¶ï¼Œä½œä¸º UserOperation éªŒè¯çš„ä¸€éƒ¨åˆ†\nSimulation é€»è¾‘ä¾æ® è¦éªŒè¯æ­£å¸¸ä»¥å¤ªåŠäº¤æ˜“ txï¼Œbundler æ‰§è¡Œé™æ€æ£€æŸ¥ï¼Œå¦‚ï¼š\necrecover(tx.v, tx.r, tx.s) å¿…é¡»è¿”å›æœ‰æ•ˆ EOA tx.nonce å¿…é¡»æ˜¯æ¢å¤çš„ EOA çš„å½“å‰ nonce æ¢å¤çš„ EOA çš„ä½™é¢å¿…é¡»è¶³å¤Ÿæ”¯ä»˜äº¤æ˜“ tx.gasLimit å¿…é¡»è¶³å¤Ÿè¦†ç›–äº¤æ˜“çš„å†…åœ¨ gas æˆæœ¬ chainId å¿…é¡»åŒ¹é…å½“å‰é“¾ æ‰€æœ‰è¿™äº›æ£€æŸ¥ä¸ä¾èµ– EVM çŠ¶æ€ï¼Œä¸”ä¸èƒ½å—å…¶ä»–è´¦æˆ·äº¤æ˜“å½±å“\nç›¸åï¼ŒUserOperation éªŒè¯ä¾èµ– EVM çŠ¶æ€ï¼ˆå¯¹ validateUserOpã€validatePaymasterUserOp çš„è°ƒç”¨ï¼‰ï¼Œå¯è¢«å…¶ä»– UserOperationï¼ˆæˆ–æ­£å¸¸ä»¥å¤ªåŠäº¤æ˜“ï¼‰æ”¹å˜ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¼•å…¥æ¨¡æ‹Ÿä½œä¸ºæ£€æŸ¥å…¶æœ‰æ•ˆæ€§çš„æ–°æœºåˆ¶ã€‚ç›´è§‚åœ°è¯´ï¼Œæ¨¡æ‹Ÿçš„ç›®æ ‡æ˜¯ç¡®ä¿ UserOperation çš„é“¾ä¸ŠéªŒè¯ä»£ç è¢«æ²™ç®±åŒ–ï¼Œä¸åŒä¸€æ‰¹æ¬¡ä¸­çš„å…¶ä»– UserOperation éš”ç¦»\nSimulation è§„èŒƒï¼š è¦æ¨¡æ‹Ÿ UserOperation éªŒè¯ï¼Œbundler å¯¹ handleOps() æ–¹æ³•è¿›è¡Œè§†å›¾è°ƒç”¨ï¼Œä½¿ç”¨è¦æ£€æŸ¥çš„ UserOperation\næ¨¡æ‹Ÿåº”ä»…è¿è¡Œåœ¨ sender å’Œ paymaster çš„éªŒè¯éƒ¨åˆ†ï¼Œä¸”ä¸è¦æ±‚ UserOperation çš„æ‰§è¡Œã€‚Bundler å¯ä»¥å‘æ‰¹æ¬¡æ·»åŠ ç¬¬äºŒä¸ªâ€œæ€»æ˜¯å¤±è´¥â€çš„ UserOperationï¼Œä»¥ä¾¿æ¨¡æ‹Ÿåœ¨ç¬¬ä¸€ä¸ª UserOperation çš„éªŒè¯å®Œæˆåç»“æŸ\nå¦‚æœæ¨¡æ‹Ÿ revertï¼Œbundler å¿…é¡»ä¸¢å¼ƒ UserOperation\næ¨¡æ‹Ÿè°ƒç”¨æ‰§è¡Œå®Œæ•´éªŒè¯ï¼Œé€šè¿‡è°ƒç”¨ï¼š\nå¦‚æœå­˜åœ¨ initCodeï¼Œåˆ›å»º sender è´¦æˆ· account.validateUserOpã€‚ å¦‚æœæŒ‡å®š paymasterï¼špaymaster.validatePaymasterUserOp sender æˆ– paymaster å¯ä»¥è¿”å›æ—¶é—´èŒƒå›´ï¼ˆvalidAfter/validUntilï¼‰ã€‚UserOperation åœ¨å½“å‰æ—¶é—´å¿…é¡»æœ‰æ•ˆæ‰èƒ½è¢«è§†ä¸ºæœ‰æ•ˆï¼Œå®šä¹‰ä¸º validAfter\u0026lt;=block.timestamp\nBundler å¿…é¡»ä¸¢å¼ƒè¿‡æœŸå¤ªå¿«ä¸”å¯èƒ½åœ¨ä¸‹ä¸€ä¸ªåŒºå—å‰å¤±æ•ˆçš„ UserOperationã€‚è¦è§£ç è¿”å›çš„æ—¶é—´èŒƒå›´ï¼Œbundler å¿…é¡»ä½¿ç”¨è·Ÿè¸ªè¿è¡ŒéªŒè¯ï¼Œä»¥ä» validateUserOp å’Œ validatePaymasterUserOp æ–¹æ³•è§£ç è¿”å›å€¼\nä¸ºäº†é˜²æ­¢å¯¹ bundler çš„ DoS æ”»å‡»ï¼Œå®ƒä»¬å¿…é¡»ç¡®ä¿ä¸Šè¿°éªŒè¯æ–¹æ³•é€šè¿‡éªŒè¯è§„åˆ™ï¼Œè¿™äº›è§„åˆ™çº¦æŸå…¶ opcode å’Œå­˜å‚¨çš„ä½¿ç”¨ã€‚æ­¤ç±»å…±äº«è§„åˆ™é›†çš„å®Œæ•´è®¾è®¡è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\nEstimate preVerificationGas æœ¬æ–‡æ¡£ä¸æŒ‡å®šä¼°ç®—æ­¤å€¼çš„è§„èŒƒæ–¹å¼ï¼Œå› ä¸ºå®ƒå–å†³äºéæ°¸ä¹…ç½‘ç»œå±æ€§ï¼Œå¦‚æ“ä½œå’Œæ•°æ® gas å®šä»·ä»¥åŠé¢„æœŸæ‰¹æ¬¡å¤§å°ã€‚\nç„¶è€Œï¼Œè¦æ±‚ä¼°ç®—å€¼è¶³å¤Ÿè¦†ç›–ä»¥ä¸‹æˆæœ¬ï¼š\nåŸºæœ¬æ‰¹æ¬¡äº¤æ˜“æˆæœ¬ã€‚åœ¨ä»¥å¤ªåŠä¸Šï¼Œ21000 gas é™¤ä»¥ UserOperation æ•°é‡ã€‚ ä¸ UserOperation ç›¸å…³çš„ calldata gas æˆæœ¬ï¼Œå¦‚ EIP-2028 å®šä¹‰ã€‚ é™æ€ EntryPoint åˆçº¦ä»£ç æ‰§è¡Œã€‚ åŠ è½½ UserOperation çš„å›ºå®šå¤§å°å­—æ®µåˆ° EVM å†…å­˜çš„é™æ€å†…å­˜æˆæœ¬ ç”±äº paymaster validatePaymasterUserOp å‡½æ•°è¿”å›çš„ context å¯¼è‡´çš„å†…å­˜æˆæœ¬ï¼ˆåŒ…æ‹¬æ‰©å±•æˆæœ¬ï¼‰ï¼Œå¦‚æœç›¸å…³ã€‚ åˆ° innerHandleOp() å‡½æ•°çš„å¤–éƒ¨è°ƒç”¨ï¼Œè¿™æ˜¯ EntryPoint å®ç°çš„ä¸»è¦éƒ¨åˆ†ã€‚è¯·æ³¨æ„ï¼Œæ­¤å€¼éé™æ€ï¼Œå–å†³äº UserOperation åœ¨æ‰¹æ¬¡ä¸­çš„ä½ç½®ã€‚ [EIP-7702] æˆæƒæˆæœ¬ï¼Œå¦‚æœæœ‰ã€‚ EIP-7623 calldata åº•ä»·å¢åŠ ä¼°ç®—å¦‚ä¸‹ï¼š åº”ç”¨ tx.gasUsed çš„æ–°å…¬å¼ï¼Œç”¨æ­¤ UserOperation çš„ä¼°ç®—å€¼æ›¿æ¢ execution_gas_used å€¼ã€‚ ä¼°ç®—æ˜¯æ¨¡æ‹ŸæœŸé—´ä½¿ç”¨çš„æ‰€æœ‰éªŒè¯ gasï¼ˆè´¦æˆ·åˆ›å»ºã€éªŒè¯å’Œ paymaster éªŒè¯ï¼‰çš„æ€»å’ŒåŠ ä¸Šæ‰§è¡Œå’Œ postOp gas é™åˆ¶æ€»å’Œçš„ 10%ã€‚ Bundler å¿…é¡»è¦æ±‚ PreVerificationGas å€¼æœ‰ slack(æ¾å¼›å€¼)ï¼Œä»¥é€‚åº”æœªæ¥æ‰¹æ¬¡ä¸­çš„å†…å­˜æ‰©å±•æˆæœ¬ï¼Œä»¥åŠ UserOperation åœ¨å…¶ä¸­çš„é¢„æœŸä½ç½®\nPaymaster Paymaster åˆçº¦å…è®¸ gas æŠ½è±¡ï¼šæœ‰ä¸€ä¸ªåˆçº¦ï¼Œä¸æ˜¯äº¤æ˜“çš„ senderï¼Œæ¥æ”¯ä»˜äº¤æ˜“è´¹ç”¨\nPaymaster æ¶æ„å…è®¸å®ƒä»¬éµå¾ªâ€œé¢„æ”¶è´¹ï¼Œåé€€æ¬¾â€çš„æ¨¡å‹ã€‚ä¾‹å¦‚ï¼Œtoken-paymaster å¯ä»¥ç”¨äº¤æ˜“çš„æœ€å¤§å¯èƒ½ä»·æ ¼é¢„æ”¶è´¹ç”¨æˆ·ï¼Œå¹¶åœ¨ä¹‹åé€€æ¬¾å¤šä½™éƒ¨åˆ†\né¦–æ¬¡æ™ºèƒ½åˆçº¦è´¦æˆ·åˆ›å»º æ³¨æ„ï¼šå¯¹äºä½¿ç”¨ EIP-7702 çš„åˆçº¦ï¼Œæ­¤æµç¨‹åœ¨å¯¹ [EIP-7702] æˆæƒçš„æ”¯æŒä¸­æè¿°\næœ¬ææ¡ˆçš„é‡è¦è®¾è®¡ç›®æ ‡æ˜¯å¤åˆ¶ EOA çš„å…³é”®å±æ€§ï¼Œå³ç”¨æˆ·æ— éœ€æ‰§è¡Œè‡ªå®šä¹‰æ“ä½œæˆ–ä¾èµ–ç°æœ‰ç”¨æˆ·åˆ›å»ºå…¶æ™ºèƒ½åˆçº¦è´¦æˆ·ï¼›ä»–ä»¬å¯ä»¥æœ¬åœ°ç”Ÿæˆåœ°å€å¹¶ç«‹å³å¼€å§‹æ¥å—èµ„é‡‘\næ™ºèƒ½åˆçº¦è´¦æˆ·åˆ›å»ºæœ¬èº«ç”±â€œfactoryâ€åˆçº¦å®Œæˆï¼Œå¸¦æœ‰ä¸€äº›è´¦æˆ·ç‰¹å®šæ•°æ®ã€‚Factory é¢„æœŸä½¿ç”¨ CREATE2 0xF5ï¼ˆè€Œé CREATE 0xF0ï¼‰åˆ›å»ºè´¦æˆ·ï¼Œä»¥ä¾¿è´¦æˆ·åˆ›å»ºé¡ºåºä¸å¹²æ‰°ç”Ÿæˆåœ°å€ã€‚initCode å­—æ®µï¼ˆå¦‚æœéé›¶é•¿åº¦ï¼‰è§£æä¸º 20 å­—èŠ‚ factory åœ°å€ï¼Œåè·Ÿä¼ é€’ç»™æ­¤åœ°å€çš„ calldataã€‚æ­¤æ–¹æ³•è°ƒç”¨é¢„æœŸåˆ›å»ºè´¦æˆ·å¹¶è¿”å›å…¶åœ°å€ã€‚å¦‚æœ factory ä½¿ç”¨ CREATE2 0xF5 æˆ–å…¶ä»–ç¡®å®šæ€§æ–¹æ³•åˆ›å»ºè´¦æˆ·ï¼Œé¢„æœŸå³ä½¿å·²åˆ›å»ºä¹Ÿè¿”å›è´¦æˆ·åœ°å€ã€‚è¿™ä½¿å¾— bundler æ›´å®¹æ˜“æŸ¥è¯¢åœ°å€ï¼Œè€Œæ— éœ€çŸ¥é“è´¦æˆ·æ˜¯å¦å·²éƒ¨ç½²ï¼Œé€šè¿‡æ¨¡æ‹Ÿè°ƒç”¨ entryPoint.getSenderAddress()ï¼Œå®ƒåœ¨åº•å±‚è°ƒç”¨ factoryã€‚å½“æŒ‡å®š initCode æ—¶ï¼Œå¦‚æœ sender åœ°å€æŒ‡å‘ç°æœ‰åˆçº¦æˆ–è°ƒç”¨ initCode å sender åœ°å€ä»ä¸å­˜åœ¨ï¼Œåˆ™æ“ä½œä¸­æ­¢ã€‚initCode ä¸å¾—ç›´æ¥ä» EntryPoint è°ƒç”¨ï¼Œè€Œä»å¦ä¸€ä¸ªåœ°å€è°ƒç”¨ã€‚æ­¤ factory æ–¹æ³•åˆ›å»ºçš„åˆçº¦å¿…é¡»æ¥å— validateUserOp è°ƒç”¨ä»¥éªŒè¯ UserOperation çš„ç­¾åã€‚å¦‚æœ factory è®¿é—®å…¨å±€å­˜å‚¨ï¼Œåˆ™å¿…é¡» stakeã€‚æ³¨æ„ï¼šä¸ºäº†è®©é’±åŒ…åº”ç”¨åœ¨åˆ›å»ºå‰ç¡®å®šè´¦æˆ·çš„â€œåäº‹å®â€åœ°å€ï¼Œå®ƒåº”é™æ€è°ƒç”¨ entryPoint.getSenderAddress()\nå®‰å…¨è€ƒé‡ Factory åˆçº¦ æ‰€æœ‰ factory åˆçº¦å¿…é¡»æ£€æŸ¥å¯¹ createAccount() å‡½æ•°çš„æ‰€æœ‰è°ƒç”¨æºäº entryPoint.senderCreator() åœ°å€\nPaymaster åˆçº¦ æ‰€æœ‰ paymaster åˆçº¦å¿…é¡»æ£€æŸ¥å¯¹ validatePaymasterUserOp() å’Œ postOp() å‡½æ•°çš„æ‰€æœ‰è°ƒç”¨æºäº EntryPoint\nAggregator åˆçº¦ æ‰€æœ‰ aggregator åˆçº¦å¿…é¡»æ£€æŸ¥å¯¹ validateSignatures() å‡½æ•°çš„æ‰€æœ‰è°ƒç”¨æºäº EntryPoint\nEIP-7702 å§”æ‰˜æ™ºèƒ½åˆçº¦è´¦æˆ· æ‰€æœ‰ EIP-7702 å§”æ‰˜æ™ºèƒ½åˆçº¦è´¦æˆ·å®ç°å¿…é¡»æ£€æŸ¥å¯¹åˆå§‹åŒ–å‡½æ•°çš„æ‰€æœ‰è°ƒç”¨æºäº entryPoint.senderCreator() åœ°å€\nEntryPoint åˆçº¦æ— æ³•çŸ¥é“ EIP-7702 è´¦æˆ·æ˜¯å¦å·²åˆå§‹åŒ–ï¼Œå› æ­¤ EIP-7702 è´¦æˆ·åˆå§‹åŒ–ä»£ç å¯ä»¥é€šè¿‡ EntryPoint å¤šæ¬¡è°ƒç”¨ã€‚è´¦æˆ·ä»£ç åº”ä»…å…è®¸è°ƒç”¨ä¸€æ¬¡ï¼Œä¸”é’±åŒ…åº”ç”¨ä¸åº”é‡å¤ä¼ é€’ initCode\n","permalink":"http://localhost:1313/web3/eip/eip-4337/","summary":"\u003ch1 id=\"æ‘˜è¦\"\u003eæ‘˜è¦\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eå¼•å…¥ UserOperationï¼šä¸€ç§é«˜å±‚â€œä¼ªäº¤æ˜“å¯¹è±¡â€ï¼Œæ›¿ä»£ç›´æ¥åœ¨å…±è¯†å±‚æäº¤äº¤æ˜“\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç”¨æˆ·å°† UserOperation å‘é€åˆ°å•ç‹¬çš„ mempool\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eBundler å°†å¤šä¸ª UserOperation æ‰“åŒ…ï¼Œé€šè¿‡ handleOps è°ƒç”¨ EntryPoint åˆçº¦ï¼Œå†æ‰“åŒ…è¿›åŒºå—\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç›®æ ‡æ˜¯åœ¨ä¸ä¿®æ”¹ä»¥å¤ªåŠåº•å±‚åè®®çš„æƒ…å†µä¸‹ï¼Œå®ç°è´¦æˆ·æŠ½è±¡\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"åŠ¨æœº\"\u003eåŠ¨æœº\u003c/h1\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eå®ç°è´¦æˆ·æŠ½è±¡\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå…è®¸ä½¿ç”¨æ™ºèƒ½åˆçº¦è´¦æˆ·ä½œä¸ºä¸»è´¦æˆ·ï¼Œæ”¯æŒä»»æ„éªŒè¯é€»è¾‘ã€‚\u003c/li\u003e\n\u003cli\u003eç”¨æˆ·æ— éœ€æ‹¥æœ‰å¤–éƒ¨è´¦æˆ·ï¼ˆEOAï¼‰ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eå»ä¸­å¿ƒåŒ–ä¸å¼€æ”¾å‚ä¸\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä»»ä½• bundler éƒ½å¯å‚ä¸äº¤æ˜“æ‰“åŒ…ã€‚\u003c/li\u003e\n\u003cli\u003eä¾èµ–å…¬å…± mempoolï¼Œæ— éœ€ç”¨æˆ·ç›´æ¥çŸ¥æ™“ bundler åœ°å€ã€‚\u003c/li\u003e\n\u003cli\u003eä¸å¢åŠ ä¿¡ä»»å‡è®¾ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eæ— éœ€å…±è¯†å±‚ä¿®æ”¹\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eé¿å…åè®®å±‚æ”¹åŠ¨ï¼Œæé«˜å¿«é€Ÿéƒ¨ç½²çš„å¯èƒ½æ€§ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eæ”¯æŒæ›´å¤šåº”ç”¨åœºæ™¯\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eéšç§ä¿æŠ¤å‹åº”ç”¨\u003c/li\u003e\n\u003cli\u003eåŸå­å¤šæ“ä½œ\u003c/li\u003e\n\u003cli\u003eä½¿ç”¨ ERC-20 ä»£å¸æ”¯ä»˜æ‰‹ç»­è´¹æˆ–å¼€å‘è€…ä»£ä»˜\u003c/li\u003e\n\u003cli\u003eçµæ´»çš„éªŒè¯é€»è¾‘ï¼ˆä¸åŒç­¾åæ–¹æ¡ˆã€å¤šç­¾ã€æ¢å¤æ–¹æ¡ˆï¼‰\u003c/li\u003e\n\u003cli\u003eçµæ´»çš„æ‰‹ç»­è´¹æ”¯ä»˜ï¼ˆç¬¬ä¸‰æ–¹æ”¯ä»˜ã€è·¨é“¾æ”¯ä»˜ï¼‰\u003c/li\u003e\n\u003cli\u003eæ‰¹é‡æ“ä½œä¸æ‰“åŒ…æ‰§è¡Œ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cstrong\u003eæ€»ç»“\u003c/strong\u003eï¼šè¯¥ææ¡ˆé€šè¿‡ UserOperationã€Bundler å’Œ EntryPoint åˆçº¦å®ç°æ™ºèƒ½åˆçº¦è´¦æˆ·çš„å®Œå…¨æŠ½è±¡åŒ–ï¼Œæ”¯æŒå¤šç­¾ã€ä»£ä»˜å’Œæ‰¹é‡æ“ä½œï¼ŒåŒæ—¶æ— éœ€ä¿®æ”¹ä»¥å¤ªåŠå…±è¯†å±‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"è§„èŒƒ\"\u003eè§„èŒƒ\u003c/h2\u003e\n\u003ch3 id=\"æœ¯è¯­å®šä¹‰\"\u003eæœ¯è¯­å®šä¹‰\u003c/h3\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæœ¯è¯­\u003c/th\u003e\n          \u003cth\u003eå®šä¹‰\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eUserOperation\u003c/td\u003e\n          \u003ctd\u003eä¸€ç§æè¿°â€œä»£è¡¨ç”¨æˆ·å‘èµ·ä¸€ç¬”äº¤æ˜“â€çš„æ•°æ®ç»“æ„ã€‚ä¸ºé¿å…ä¸åŸç”Ÿäº¤æ˜“æ··æ·†ï¼Œç‰¹æ„ä¸å«â€œtransactionâ€ã€‚åƒäº¤æ˜“ä¸€æ ·ï¼Œå®ƒåŒ…å« toã€calldataã€maxFeePerGasã€maxPriorityFeePerGasã€nonceã€signatureã€‚ä¸åƒäº¤æ˜“ï¼Œå®ƒåŒ…å«ä»¥ä¸‹æ‰€è¿°çš„å‡ ä¸ªå…¶ä»–å­—æ®µã€‚ç‰¹åˆ«æ³¨æ„ï¼Œsignature å­—æ®µçš„ä½¿ç”¨ä¸ç”±åè®®å®šä¹‰ï¼Œè€Œæ˜¯ç”±æ™ºèƒ½åˆçº¦è´¦æˆ·å®ç°å®šä¹‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eSender\u003c/td\u003e\n          \u003ctd\u003eå‘èµ· UserOperation çš„æ™ºèƒ½åˆçº¦è´¦æˆ·\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eEntryPoint\u003c/td\u003e\n          \u003ctd\u003eç”¨äºæ‰§è¡Œ UserOperation æ‰¹æ¬¡çš„å•ä¾‹åˆçº¦ã€‚Bundler åº”ç™½åå•æ”¯æŒçš„ EntryPoint\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eBundler\u003c/td\u003e\n          \u003ctd\u003eä¸€ä¸ªèŠ‚ç‚¹ï¼ˆåŒºå—æ„å»ºè€…ï¼‰ï¼Œå®ƒèƒ½å¤„ç† UserOperationã€åˆ›å»ºæœ‰æ•ˆçš„ entryPoint.handleOps() äº¤æ˜“ï¼Œå¹¶åœ¨äº¤æ˜“ä»æœ‰æ•ˆæ—¶å°†å…¶æ·»åŠ åˆ°åŒºå—ä¸­ã€‚è¿™å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°ï¼šBundler å¯ä»¥è‡ªå·±å……å½“åŒºå—æ„å»ºè€…ã€‚å¦‚æœ bundler ä¸æ˜¯åŒºå—æ„å»ºè€…ï¼Œå®ƒåº”é€šè¿‡ mev-boost ç­‰åŸºç¡€è®¾æ–½æˆ–å…¶ä»–æè®®è€…-æ„å»ºè€…åˆ†ç¦»æœºåˆ¶ä¸åŒºå—æ„å»ºè€…åˆä½œ\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ePaymaster\u003c/td\u003e\n          \u003ctd\u003eåŒæ„ä»£æ›¿ sender æ”¯ä»˜äº¤æ˜“è´¹ç”¨çš„è¾…åŠ©åˆçº¦\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eFactory\u003c/td\u003e\n          \u003ctd\u003eå¿…è¦æ—¶è´Ÿè´£éƒ¨ç½²æ–° sender åˆçº¦çš„è¾…åŠ©åˆçº¦\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eAggregator\u003c/td\u003e\n          \u003ctd\u003eä¹Ÿç§°ä¸ºâ€œæˆæƒåˆçº¦â€ - ä¸€ä¸ªå…è®¸å¤šä¸ª UserOperation å…±äº«ä¸€æ¬¡éªŒè¯çš„åˆçº¦ã€‚æ­¤ç±»åˆçº¦çš„å®Œæ•´è®¾è®¡è¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eCanonical UserOperation mempool\u003c/td\u003e\n          \u003ctd\u003eä¸€ä¸ªå»ä¸­å¿ƒåŒ–ã€æ— è®¸å¯çš„ P2P ç½‘ç»œï¼Œbundler åœ¨å…¶ä¸­äº¤æ¢ç¬¦åˆåŒä¸€å¥—å…±äº«éªŒè¯è§„åˆ™çš„åˆæ³• UserOperationã€‚å…·ä½“è§„åˆ™çš„å®Œæ•´è§„èŒƒè¶…å‡ºæœ¬ææ¡ˆèŒƒå›´\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eAlternative UserOperation mempool\u003c/td\u003e\n          \u003ctd\u003eä»»ä½•å…¶ä»– P2P å†…å­˜æ± ï¼Œå…¶ä¸­ UserOperation çš„æœ‰æ•ˆæ€§ç”±ä¸åŒäºå…±äº«è§„åˆ™çš„è§„åˆ™å†³å®šï¼Œè¿™äº›è§„åˆ™ä»¥ä»»ä½•æ–¹å¼åº”ç”¨äºéªŒè¯ä»£ç \u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eDeposit\u003c/td\u003e\n          \u003ctd\u003eSender æˆ– Paymaster åˆçº¦å‘ EntryPoint åˆçº¦è½¬å…¥çš„ä¸€ç¬”ä»¥å¤ªå¸ï¼ˆæˆ–ä»»ä½• L2 åŸç”Ÿè´§å¸ï¼‰ï¼Œç”¨äºæ”¯ä»˜æœªæ¥ UserOperation çš„ gas è´¹ç”¨\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch3 id=\"useroperation-ç»“æ„å®šä¹‰\"\u003e\u003ccode\u003eUserOperation\u003c/code\u003e ç»“æ„å®šä¹‰\u003c/h3\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eå­—æ®µ\u003c/th\u003e\n          \u003cth\u003eç±»å‹\u003c/th\u003e\n          \u003cth\u003eæè¿°\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003esender\u003c/td\u003e\n          \u003ctd\u003eaddress\u003c/td\u003e\n          \u003ctd\u003eå‘èµ· UserOperation çš„è´¦æˆ·\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003enonce\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eé˜²é‡æ”¾å‚æ•°ï¼ˆè¯¦è§â€œåŠæŠ½è±¡ Nonce æ”¯æŒâ€ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003efactory\u003c/td\u003e\n          \u003ctd\u003eaddress\u003c/td\u003e\n          \u003ctd\u003eæ–°è´¦æˆ·çš„è´¦æˆ·å·¥å‚ OR 0x7702 æ ‡å¿—ç”¨äº EIP-7702 è´¦æˆ·ï¼Œå¦åˆ™ address(0)\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003efactoryData\u003c/td\u003e\n          \u003ctd\u003ebytes\u003c/td\u003e\n          \u003ctd\u003eå¦‚æœæä¾› factoryï¼Œåˆ™ä¸ºè´¦æˆ·å·¥å‚çš„æ•°æ® OR EIP-7702 åˆå§‹åŒ–æ•°æ®ï¼Œæˆ–ç©ºæ•°ç»„\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ecallData\u003c/td\u003e\n          \u003ctd\u003ebytes\u003c/td\u003e\n          \u003ctd\u003eåœ¨ä¸»è¦æ‰§è¡Œè°ƒç”¨æœŸé—´ä¼ é€’ç»™ sender çš„æ•°æ®\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ecallGasLimit\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eä¸ºä¸»è¦æ‰§è¡Œè°ƒç”¨åˆ†é…çš„ gas é‡\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003everificationGasLimit\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eä¸ºéªŒè¯æ­¥éª¤åˆ†é…çš„ gas é‡\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epreVerificationGas\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eé¢å¤– gas ç”¨äºæ”¯ä»˜ bundler\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003emaxFeePerGas\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eæœ€å¤§ gas è´¹ï¼ˆç±»ä¼¼äº EIP-1559 max_fee_per_gasï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003emaxPriorityFeePerGas\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eæœ€å¤§ä¼˜å…ˆè´¹ï¼ˆç±»ä¼¼äº EIP-1559 max_priority_fee_per_gasï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epaymaster\u003c/td\u003e\n          \u003ctd\u003eaddress\u003c/td\u003e\n          \u003ctd\u003epaymaster åˆçº¦åœ°å€ï¼ˆæˆ–ç©ºï¼Œå¦‚æœ sender è‡ªå·±æ”¯ä»˜ gasï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epaymasterVerificationGasLimit\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eä¸º paymaster éªŒè¯ä»£ç åˆ†é…çš„ gas é‡ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epaymasterPostOpGasLimit\u003c/td\u003e\n          \u003ctd\u003euint256\u003c/td\u003e\n          \u003ctd\u003eä¸º paymaster åæ“ä½œä»£ç åˆ†é…çš„ gas é‡ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003epaymasterData\u003c/td\u003e\n          \u003ctd\u003ebytes\u003c/td\u003e\n          \u003ctd\u003epaymaster çš„æ•°æ®ï¼ˆä»…å½“ paymaster å­˜åœ¨æ—¶ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003esignature\u003c/td\u003e\n          \u003ctd\u003ebytes\u003c/td\u003e\n          \u003ctd\u003eä¼ å…¥ sender ä»¥éªŒè¯æˆæƒçš„æ•°æ®\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cblockquote\u003e\n\u003cp\u003eä¸Šé“¾æ—¶éƒ¨åˆ†å­—æ®µä¼šè¢«æ‰“åŒ…ï¼Œè½¬å˜æˆ \u003ccode\u003ePackedUserOperation\u003c/code\u003e\u003c/p\u003e","title":"EIP-4337"},{"content":" Promise ä¸ Event Loopï¼šåˆ†æ­¥æ·±å…¥æŒ‡å— ç®€ä»‹ JavaScript æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œå´è¦å¤„ç†å¤§é‡å¼‚æ­¥æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€å®šæ—¶å™¨ã€ç”¨æˆ·äº¤äº’ç­‰ï¼‰ã€‚ä¸ºäº†æ—¢ä¸é˜»å¡ä¸»çº¿ç¨‹ã€åˆèƒ½ä¿è¯å›è°ƒæŒ‰é¢„æœŸé¡ºåºæ‰§è¡Œï¼Œè¯­è¨€å’Œè¿è¡Œæ—¶å…±åŒæä¾›äº†ä¸¤å¥—æ ¸å¿ƒæœºåˆ¶ï¼š\nPromise â€”â€” ä»£è¡¨ä¸€ä¸ªâ€œæœªæ¥ä¼šç»“æŸâ€çš„å¼‚æ­¥æ“ä½œï¼Œæä¾›äº†çŠ¶æ€ç®¡ç†ã€é“¾å¼è°ƒç”¨ã€é”™è¯¯ä¼ æ’­ç­‰è¯­ä¹‰ï¼Œæ˜¯ç°ä»£å¼‚æ­¥ç¼–ç¨‹çš„åŸºçŸ³ Event Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ â€”â€” JavaScript è¿è¡Œæ—¶çœŸæ­£çš„è°ƒåº¦ä¸­å¿ƒï¼Œå®ƒå†³å®šäº†åŒæ­¥ä»£ç ã€Promise å›è°ƒï¼ˆå¾®ä»»åŠ¡ï¼‰ã€setTimeout/IO ç­‰ï¼ˆå®ä»»åŠ¡ï¼‰åˆ°åº•åœ¨ä»€ä¹ˆæ—¶æœºè¢«æ¨å…¥è°ƒç”¨æ ˆæ‰§è¡Œ è¿™ä¸¤è€…ç´§å¯†åä½œï¼š\nPromise çš„ .then / .catch / await åç»­å…¨éƒ¨å±äºå¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰ å¾®ä»»åŠ¡ä¸å®ä»»åŠ¡ï¼ˆmacrotaskï¼‰åœ¨ Event Loop ä¸­æœ‰ä¸¥æ ¼çš„ä¼˜å…ˆçº§ï¼šæ¯æ‰§è¡Œå®Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œå¿…é¡»å…ˆæ¸…ç©ºå…¨éƒ¨å¾®ä»»åŠ¡ï¼Œæ‰ä¼šè¿›è¡Œæ¸²æŸ“å¹¶è¿›å…¥ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ æŒæ¡ Promise çš„çŠ¶æ€æœºç»†èŠ‚ + Event Loop çš„å¾®/å®ä»»åŠ¡æ‰§è¡Œé¡ºåºï¼Œå°±ç­‰äºæ‹¿åˆ°äº† JavaScript å¼‚æ­¥ä¸–ç•Œçš„å®Œæ•´â€œæ—¶åºåœ°å›¾â€\næ‰§è¡Œé¡ºåºè¡¨\næ‰§è¡Œé¡ºåº ç±»å‹ å…¸å‹ä»£è¡¨ è§¦å‘æ—¶æœº åŒæ­¥ä»£ç (åŒ…å«Promise executor) console.logã€å˜é‡èµ‹å€¼ã€å‡½æ•°è°ƒç”¨ ç«‹å³æ‰§è¡Œ å¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰ .then/.catchã€await åç»­ã€queueMicrotaskã€MutationObserver å½“å‰å®ä»»åŠ¡ç»“æŸåã€æ¸²æŸ“å‰å…¨éƒ¨æ¸…ç©º æ¸²æŸ“ï¼ˆæµè§ˆå™¨ï¼‰ é¡µé¢é‡ç»˜ã€å¸ƒå±€ å¾®ä»»åŠ¡æ¸…ç©ºåï¼ˆå¯èƒ½è·³è¿‡ï¼‰ å®ä»»åŠ¡ï¼ˆmacrotaskï¼‰ setTimeoutã€setIntervalã€I/Oã€UI äº‹ä»¶ æ¯è½® Event Loop æ‰§è¡Œä¸€ä¸ª Promise æ ¸å¿ƒæœºåˆ¶\nPromise çš„ä¸‰ä¸ªçŠ¶æ€\npending â†’ fulfilled (æˆåŠŸï¼Œè¿”å› value) â†’ rejected (å¤±è´¥ï¼Œè¿”å› reason) æ„é€ å™¨ executor æ˜¯åŒæ­¥æ‰§è¡Œçš„\nnew Promise((resolve, reject) =\u0026gt; { console.log(\u0026#39;executor start\u0026#39;); // ç«‹åˆ»æ‰“å° setTimeout(() =\u0026gt; resolve(100), 3000); console.log(\u0026#39;executor end\u0026#39;); // ç«‹åˆ»æ‰“å° }); ä¸ºä»€ä¹ˆå¿…é¡»åŒæ­¥ï¼Ÿ\nä¸ºäº†è®©ä½ å¯ä»¥åœ¨åˆ›å»º Promise æ—¶ç«‹åˆ»åšåˆå§‹åŒ–ã€å‚æ•°æ ¡éªŒã€æŠ›é”™ç­‰æ“ä½œ\nå†…éƒ¨æ§½ä½\næ§½ä½å å†…å®¹è¯´æ˜ [[PromiseState]] pending / fulfilled / rejected [[PromiseResult]] æˆåŠŸå€¼æˆ–å¤±è´¥åŸå›  [[PromiseFulfillReactions]] å­˜æ”¾æ‰€æœ‰ onFulfilled å›è°ƒ [[PromiseRejectReactions]] å­˜æ”¾æ‰€æœ‰ onRejected å›è°ƒ resolve/reject ç¬¬ä¸€æ¬¡è°ƒç”¨æˆåŠŸåï¼Œåç»­å…¨éƒ¨å¿½ç•¥\nexecutor æŠ›é”™ = è‡ªåŠ¨ reject\nnew Promise(() =\u0026gt; { throw new Error(\u0026#39;boom\u0026#39;); }) .catch(e =\u0026gt; console.log(e.message)); // boom thenable ä¸æ‰å¹³åŒ–\nPromise.resolve({ then(onFulfilled) { setTimeout(() =\u0026gt; onFulfilled(42), 1000); } }).then(console.log); // 1ç§’åæ‰“å° 42 è§„èŒƒä¼šï¼š\nå–å‡º x.then è°ƒç”¨ then.call(x, resolvePromise, rejectPromise) resolvePromise/rejectPromise æ˜¯åŒ…è£…è¿‡çš„â€œåªå…è®¸è°ƒç”¨ä¸€æ¬¡â€çš„å‡½æ•° è¿™å°±æ˜¯é“¾å¼è°ƒç”¨ä¸ä¼šæ— é™åµŒå¥—çš„æ ¹æœ¬åŸå› \nthen / catch / finally ä¸é“¾å¼è°ƒç”¨\nPromise.resolve(1) .then(x =\u0026gt; x + 1) // è¿”å›æ™®é€šå€¼ â†’ æ–° Promise fulfilled(2) .then(x =\u0026gt; new Promise(r =\u0026gt; setTimeout(() =\u0026gt; r(x + 1), 100))) // è¿”å› Promise â†’ ç­‰å¾…å¹¶é‡‡ç”¨ .then(console.log) // æ‰“å°æœ€ç»ˆç»“æœ .catch(console.error) .finally(() =\u0026gt; console.log(\u0026#39;done\u0026#39;)); .catch = .then(undefined, onRejected)\n.finally ä¸ä¼ å€¼ï¼Œå¼‚å¸¸ä¼šç»§ç»­å‘ä¸‹æŠ›\nasync / await æœ¬è´¨\nasync function foo() { console.log(\u0026#39;1\u0026#39;); const a = await 111; console.log(\u0026#39;2\u0026#39;); const b = await 222; console.log(\u0026#39;3\u0026#39;); return a + b; } V8 ç¼–è¯‘åç­‰ä»·äºï¼š\nfunction foo() { console.log(\u0026#39;1\u0026#39;); return Promise.resolve(111).then(a =\u0026gt; { console.log(\u0026#39;2\u0026#39;); return Promise.resolve(222).then(b =\u0026gt; { console.log(\u0026#39;3\u0026#39;); return a + b; }); }); } ç»“è®ºï¼š\nasync function æ°¸è¿œè¿”å› Promise æ¯ä¸€ä¸ª await = æŠŠåé¢çš„ä»£ç åˆ‡å‡ºå»ï¼ŒåŒ…è£…æˆ .then() å›è°ƒ await å³ä¾§ä¸æ˜¯ Promise ä¹Ÿä¼šè¢« Promise.resolve() åŒ…è£… Promise é™æ€æ–¹æ³•å…¨å®¶æ¡¶\næ–¹æ³• è¡Œä¸º æœ€ä½³å®è·µåœºæ™¯ Promise.all å…¨éƒ¨æˆåŠŸæ‰æˆåŠŸï¼Œä»»ä¸€å¤±è´¥ç«‹å³å¤±è´¥ å¹¶å‘è¯·æ±‚å¤šä¸ªå¿…é¡»æˆåŠŸçš„æ¥å£ Promise.allSettled æ°¸è¿œæˆåŠŸï¼Œè¿”å›æ¯ä¸ªç»“æœçš„çŠ¶æ€å’Œå€¼ æ‰¹é‡æ“ä½œã€ç»Ÿè®¡ä¸ŠæŠ¥ã€ä¸æ€•éƒ¨åˆ†å¤±è´¥ Promise.any ç¬¬ä¸€ä¸ªæˆåŠŸå°±æˆåŠŸï¼Œå…¨å¤±è´¥æ‰å¤±è´¥ å¤š CDN åŠ è½½èµ„æºï¼Œè°å¿«ç”¨è° Promise.race ç¬¬ä¸€ä¸ªæœ‰çŠ¶æ€ï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰å°±è¿”å› è¶…æ—¶æ§åˆ¶ã€é˜²è¶…æ—¶ // å¹¶å‘ + ç»“æ„èµ‹å€¼ const [user, posts] = await Promise.all([ fetch(\u0026#39;/user\u0026#39;), fetch(\u0026#39;/posts\u0026#39;) ]); // è¯·æ±‚è¶…æ—¶æ¨¡æ¿ const withTimeout = (p, ms) =\u0026gt; Promise.race([ p, new Promise((_ , reject) =\u0026gt; setTimeout(() =\u0026gt; reject(\u0026#39;è¶…æ—¶\u0026#39;), ms)) ]); Event Loop å®Œæ•´æµç¨‹ï¼ˆæµè§ˆå™¨ç¯å¢ƒï¼‰\næ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆscript æ•´ä½“ã€setTimeout å›è°ƒã€ç‚¹å‡»äº‹ä»¶ç­‰ï¼‰ æ‰§è¡Œå®Œå½“å‰å®ä»»åŠ¡ â†’ è°ƒç”¨æ ˆæ¸…ç©º æ¸…ç©ºå½“å‰æ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆ.thenã€await åç»­ã€queueMicrotask ç­‰ï¼‰ ï¼ˆæµè§ˆå™¨ï¼‰å¯èƒ½è¿›è¡Œæ¸²æŸ“æ›´æ–° ä»å®ä»»åŠ¡é˜Ÿåˆ—å–ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ é‡å¤ä»¥ä¸Šæ­¥éª¤ Node.js å°åŒºåˆ«\nprocess.nextTick æ¯”å¾®ä»»åŠ¡è¿˜ä¼˜å…ˆ setImmediate æ˜¯ Node ç‰¹æœ‰çš„å®ä»»åŠ¡ ç»å…¸ç»¼åˆä¾‹é¢˜\nconsole.log(\u0026#39;start\u0026#39;); setTimeout(() =\u0026gt; console.log(\u0026#39;timeout\u0026#39;), 0); Promise.resolve() .then(() =\u0026gt; console.log(\u0026#39;p1\u0026#39;)) .then(() =\u0026gt; console.log(\u0026#39;p2\u0026#39;)); queueMicrotask(() =\u0026gt; console.log(\u0026#39;micro\u0026#39;)); (async () =\u0026gt; { console.log(\u0026#39;async start\u0026#39;); await 1; console.log(\u0026#39;await after\u0026#39;); })(); console.log(\u0026#39;end\u0026#39;); è¾“å‡ºé¡ºåºï¼š\ns a e p m a p t t s n 1 i w 2 i a y d c a m r n r i e t c o t o u s a t t f a t r e t r å¸¸è§é™·é˜± \u0026amp; æœ€ä½³å®è·µ\né™·é˜± æ­£ç¡®åšæ³• è¯¯ä»¥ä¸º await é˜»å¡ä¸»çº¿ç¨‹ ä¸é˜»å¡ï¼Œåªæ˜¯æš‚åœå½“å‰ async å‡½æ•° å¤šä¸ªç‹¬ç«‹è¯·æ±‚å†™æˆä¸²è¡Œ await å¹¶è¡Œå‘èµ· â†’ Promise.all èšåˆ å¾®ä»»åŠ¡æ— é™è‡ªæˆ‘è°ƒåº¦ é¿å… then(() =\u0026gt; then(...)) æ— é™å¾ªç¯ æ²¡å¤„ç† rejected Promise å…¨å±€ç›‘å¬ unhandledrejection è¿”å› thenable å¯¼è‡´æ„å¤–æ‰å¹³åŒ– æ˜ç¡®çŸ¥é“è‡ªå·±åœ¨å¹²ä»€ä¹ˆ ","permalink":"http://localhost:1313/findings/promisetoeventloop/","summary":"\u003chr\u003e\n\u003ch1 id=\"promise-ä¸-event-loopåˆ†æ­¥æ·±å…¥æŒ‡å—\"\u003ePromise ä¸ Event Loopï¼šåˆ†æ­¥æ·±å…¥æŒ‡å—\u003c/h1\u003e\n\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eJavaScript æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œå´è¦å¤„ç†å¤§é‡å¼‚æ­¥æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€å®šæ—¶å™¨ã€ç”¨æˆ·äº¤äº’ç­‰ï¼‰ã€‚ä¸ºäº†æ—¢ä¸é˜»å¡ä¸»çº¿ç¨‹ã€åˆèƒ½ä¿è¯å›è°ƒæŒ‰é¢„æœŸé¡ºåºæ‰§è¡Œï¼Œè¯­è¨€å’Œè¿è¡Œæ—¶å…±åŒæä¾›äº†ä¸¤å¥—æ ¸å¿ƒæœºåˆ¶ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePromise\u003c/strong\u003e â€”â€” ä»£è¡¨ä¸€ä¸ªâ€œæœªæ¥ä¼šç»“æŸâ€çš„å¼‚æ­¥æ“ä½œï¼Œæä¾›äº†çŠ¶æ€ç®¡ç†ã€é“¾å¼è°ƒç”¨ã€é”™è¯¯ä¼ æ’­ç­‰è¯­ä¹‰ï¼Œæ˜¯ç°ä»£å¼‚æ­¥ç¼–ç¨‹çš„åŸºçŸ³\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eEvent Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰\u003c/strong\u003e â€”â€” JavaScript è¿è¡Œæ—¶çœŸæ­£çš„è°ƒåº¦ä¸­å¿ƒï¼Œå®ƒå†³å®šäº†åŒæ­¥ä»£ç ã€Promise å›è°ƒï¼ˆå¾®ä»»åŠ¡ï¼‰ã€setTimeout/IO ç­‰ï¼ˆå®ä»»åŠ¡ï¼‰åˆ°åº•åœ¨ä»€ä¹ˆæ—¶æœºè¢«æ¨å…¥è°ƒç”¨æ ˆæ‰§è¡Œ\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eè¿™ä¸¤è€…ç´§å¯†åä½œï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePromise çš„ \u003ccode\u003e.then\u003c/code\u003e / \u003ccode\u003e.catch\u003c/code\u003e / \u003ccode\u003eawait\u003c/code\u003e åç»­å…¨éƒ¨å±äº\u003cstrong\u003eå¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eå¾®ä»»åŠ¡ä¸å®ä»»åŠ¡ï¼ˆmacrotaskï¼‰åœ¨ Event Loop ä¸­æœ‰ä¸¥æ ¼çš„ä¼˜å…ˆçº§ï¼š\u003cstrong\u003eæ¯æ‰§è¡Œå®Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œå¿…é¡»å…ˆæ¸…ç©ºå…¨éƒ¨å¾®ä»»åŠ¡ï¼Œæ‰ä¼šè¿›è¡Œæ¸²æŸ“å¹¶è¿›å…¥ä¸‹ä¸€ä¸ªå®ä»»åŠ¡\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæŒæ¡ Promise çš„çŠ¶æ€æœºç»†èŠ‚ + Event Loop çš„å¾®/å®ä»»åŠ¡æ‰§è¡Œé¡ºåºï¼Œå°±ç­‰äºæ‹¿åˆ°äº† JavaScript å¼‚æ­¥ä¸–ç•Œçš„å®Œæ•´â€œæ—¶åºåœ°å›¾â€\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eæ‰§è¡Œé¡ºåºè¡¨\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ‰§è¡Œé¡ºåº\u003c/th\u003e\n          \u003cth\u003eç±»å‹\u003c/th\u003e\n          \u003cth\u003eå…¸å‹ä»£è¡¨\u003c/th\u003e\n          \u003cth\u003eè§¦å‘æ—¶æœº\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003eåŒæ­¥ä»£ç (åŒ…å«Promise executor)\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003econsole.log\u003c/code\u003eã€å˜é‡èµ‹å€¼ã€å‡½æ•°è°ƒç”¨\u003c/td\u003e\n          \u003ctd\u003eç«‹å³æ‰§è¡Œ\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003eå¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e.then/.catch\u003c/code\u003eã€\u003ccode\u003eawait\u003c/code\u003e åç»­ã€\u003ccode\u003equeueMicrotask\u003c/code\u003eã€\u003ccode\u003eMutationObserver\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eå½“å‰å®ä»»åŠ¡ç»“æŸåã€æ¸²æŸ“å‰å…¨éƒ¨æ¸…ç©º\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003eæ¸²æŸ“ï¼ˆæµè§ˆå™¨ï¼‰\u003c/td\u003e\n          \u003ctd\u003eé¡µé¢é‡ç»˜ã€å¸ƒå±€\u003c/td\u003e\n          \u003ctd\u003eå¾®ä»»åŠ¡æ¸…ç©ºåï¼ˆå¯èƒ½è·³è¿‡ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003eå®ä»»åŠ¡ï¼ˆmacrotaskï¼‰\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003esetTimeout\u003c/code\u003eã€\u003ccode\u003esetInterval\u003c/code\u003eã€\u003ccode\u003eI/O\u003c/code\u003eã€\u003ccode\u003eUI äº‹ä»¶\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæ¯è½® Event Loop æ‰§è¡Œä¸€ä¸ª\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003cp\u003ePromise æ ¸å¿ƒæœºåˆ¶\u003c/p\u003e\n\u003cp\u003ePromise çš„ä¸‰ä¸ªçŠ¶æ€\u003c/p\u003e","title":"Promise ä¸ Event Loop çš„è”ç³»ä¸ç†è§£"},{"content":" æ¨¡å—æ¦‚è§ˆ ğŸ‘‰ æ¨¡å—ä»£ç ä»“åº“ï¼ˆwalletManagementï¼‰\né¡¹ç›® å†…å®¹ æ¨¡å—åç§° é’±åŒ…ç®¡ç†ï¼ˆWallet Managementï¼‰ è·¯ç”±è·¯å¾„ /walletManagement åŠŸèƒ½èŒƒå›´ éšæœº HD é’±åŒ…ç”Ÿæˆã€åŠ©è®°è¯å±•ç¤ºã€é’±åŒ…åŠ å¯†/è§£å¯†ã€åŠ å¯†é’±åŒ…ä¸åœ°å€æœ¬åœ°æŒä¹…åŒ–ï¼ˆIndexedDBï¼‰ è®¿é—®æƒé™ ä¾èµ–æœ¬åœ°ç”¨æˆ·å¯†ç è®°å½•ï¼ˆuserManagement æ¨¡å—ï¼‰ï¼›è‹¥æ— ç”¨æˆ·è®°å½•åˆ™é‡å®šå‘ /userManagement ç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£ app/walletManagement/ â”œâ”€â”€ components â”‚ â”œâ”€â”€ GenerateWallet.tsx | â”œâ”€â”€ ImportWallet.tsx â”œâ”€â”€ lib â”‚ â”œâ”€â”€ cryptoWallet.ts â”‚ â”œâ”€â”€ generateWallet.ts | â”œâ”€â”€ importWallet.ts â”‚ â”œâ”€â”€ saveAddress.ts â”‚ â””â”€â”€ saveWallet.ts â”œâ”€â”€ page.tsx â””â”€â”€ test-cryptoWallet.ts æ–‡ä»¶è·¯å¾„ èŒè´£è¯¦è§£ page.tsx è·¯ç”±å…¥å£ï¼Œæ¸²æŸ“ GenerateWallet ç»„ä»¶ï¼ˆé¡µé¢æœ¬èº«ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼‰ components/GenerateWallet.tsx æ ¸å¿ƒ UI ä¸äº¤äº’ï¼šå¯†ç æ ¡éªŒ â†’ ç”Ÿæˆé’±åŒ… â†’ åŠ å¯† â†’ ä¿å­˜ â†’ åŠ©è®°è¯å±•ç¤ºï¼›åŒ…å«ç”¨æˆ·å‹å¥½æç¤ºä¸é”™è¯¯å¤„ç† lib/generateWallet.ts ä½¿ç”¨ ethers + bip39 ç”Ÿæˆéšæœº HD é’±åŒ…ã€è‹±æ–‡ä¸ä¸­æ–‡åŠ©è®°è¯å¹¶åšä¸€è‡´æ€§æ ¡éªŒ lib/cryptoWallet.ts æä¾›é’±åŒ…åŠ å¯†/è§£å¯†æ¥å£ï¼Œå®šä¹‰ IEncryptedWallet ç±»å‹ï¼ˆè´Ÿè´£ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿå¯†é’¥å¯¹ wallet è¿›è¡Œ AES-GCM åŠ å¯†ï¼‰ lib/saveWallet.ts IndexedDB å°è£…ï¼šå¯¹ Wallets è¡¨ï¼ˆæˆ– storeï¼‰è¿›è¡Œä¿å­˜/è¯»å–/åˆ é™¤/åˆ—å‡º lib/saveAddress.ts IndexedDB å°è£…ï¼šå¯¹ Addresses è¡¨ä¿å­˜åœ°å€è®°å½•ã€è¯»å–ã€åˆ é™¤ã€åˆ—å‡º test-cryptoWallet.ts å•å…ƒæµ‹è¯•ï¼šéªŒè¯åŠ å¯†/è§£å¯†ã€å¯†é’¥æ´¾ç”Ÿä¸€è‡´æ€§ã€å¼‚å¸¸åœºæ™¯ï¼ˆè§£å¯†å¤±è´¥ã€ç¯¡æ”¹æ£€æµ‹ï¼‰ lib/importWallet.ts ä½¿ç”¨ bip39 å’Œ ethers ä»è‹±æ–‡æˆ–ä¸­æ–‡åŠ©è®°è¯å¯¼å…¥ HDNodeWalletï¼ˆä¸­æ–‡å…ˆè½¬æ¢ä¸ºè‹±æ–‡åŠ©è®°è¯å†å¯¼å…¥ï¼‰ 1. è¯¦ç»†äº¤äº’æµç¨‹ 1.1 é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥ ç”¨æˆ·è®¿é—® /walletManagement\npage.tsx æ¸²æŸ“ GenerateWallet\nç»„ä»¶åŠ è½½æ—¶ä¼šæ£€æŸ¥æœ¬åœ°æ˜¯å¦å·²å­˜åœ¨ç”¨æˆ·å¯†ç è®°å½•ï¼ˆé€šè¿‡ userManagement çš„ getUserRecord()ï¼‰\nè‹¥æ— ç”¨æˆ·è®°å½•ï¼šé‡å®šå‘åˆ° /userManagement è¦æ±‚å…ˆè®¾ç½®æœ¬åœ°å¯†ç ï¼ˆé¦–æ¬¡åˆå§‹åŒ–ï¼‰ è‹¥æœ‰ç”¨æˆ·è®°å½•ï¼šç»§ç»­æ˜¾ç¤ºç”Ÿæˆé’±åŒ…æµç¨‹ï¼ˆéœ€ç”¨æˆ·è¾“å…¥æœ¬åœ°å¯†ç ç”¨äºéªŒè¯ï¼‰ 1.2 é’±åŒ…ç”Ÿæˆä¸å¯¼å…¥æµç¨‹ æ­¥éª¤ ç”Ÿæˆé’±åŒ…ï¼ˆGenerateï¼‰ å¯¼å…¥é’±åŒ…ï¼ˆImportï¼‰ 1 ç”¨æˆ·è¾“å…¥æœ¬åœ°å¯†ç  â†’ ç‚¹å‡»ã€Œç”Ÿæˆé’±åŒ…ã€ ç”¨æˆ·è¾“å…¥æœ¬åœ°å¯†ç  â†’ å¡«å†™/ç²˜è´´åŠ©è®°è¯ â†’ ç‚¹å‡»ã€Œå¯¼å…¥é’±åŒ…ã€ 2 å®¢æˆ·ç«¯å¯¹å¯†ç è¿›è¡Œ SHA-256 å“ˆå¸Œï¼Œä¸æœ¬åœ° userRecord.passwordHash æ¯”å¯¹ åŒå·¦ï¼Œå®Œå…¨ä¸€è‡´çš„å¯†ç æ ¡éªŒé€»è¾‘ 3 æ ¡éªŒé€šè¿‡ â†’ è°ƒç”¨ generateWallet()\nâ†’ ä½¿ç”¨ crypto.getRandomValues ç”Ÿæˆéšæœºç†µ\nâ†’ åŒæ—¶ç”Ÿæˆè‹±æ–‡ + ä¸­æ–‡åŠ©è®°è¯\nâ†’ è¿”å› WalletResultï¼ˆå« HDNodeWalletã€è‹±æ–‡åŠ©è®°è¯ã€ä¸­æ–‡åŠ©è®°è¯ï¼‰ æ ¡éªŒé€šè¿‡ â†’ è¯»å–ç”¨æˆ·å¡«å†™çš„åŠ©è®°è¯ï¼ˆæ”¯æŒ 12/24 è¯ã€è‡ªåŠ¨è¯†åˆ«ä¸­è‹±æ–‡ï¼‰\nâ†’ è°ƒç”¨ importWallet_en() æˆ– importWallet_zh()ï¼ˆä¸­æ–‡ä¼šå…ˆè½¬ç†µå†è½¬è‹±æ–‡ï¼‰\nâ†’ å¾—åˆ°ç­‰ä»·çš„ HDNodeWallet å®ä¾‹ 4 è°ƒç”¨ encryptWallet(wallet, password)\nâ†’ PBKDF2 æ´¾ç”Ÿå¯†é’¥ + AES-256-GCM åŠ å¯†æ•´ä¸ªé’±åŒ…å¯¹è±¡ å®Œå…¨ç›¸åŒï¼šencryptWallet(wallet, password)ï¼ˆä»£ç å¤ç”¨ 100%ï¼‰ 5 å¹¶è¡Œæ‰§è¡Œï¼š\nâ€¢ countWallet() æŸ¥è¯¢å·²æœ‰é’±åŒ…æ•°é‡\nâ€¢ åŠ å¯†é’±åŒ… åŒå·¦ï¼šå¹¶è¡Œæ‰§è¡Œ encryptWallet() ä¸ countWallet() 6 æ ¹æ®æ•°é‡å†³å®š keyPathï¼š\n0 ä¸ª â†’ '0'ï¼Œå…¶ä½™ â†’ crypto.randomUUID() å®Œå…¨ä¸€è‡´çš„ keyPath ç­–ç•¥ 7 å¹¶è¡Œä¿å­˜ï¼š\nâ€¢ saveWallet(keyPath, encryptedWallet)\nâ€¢ saveAddress(addressRecord) å®Œå…¨ç›¸åŒçš„å¹¶è¡Œå†™å…¥é€»è¾‘ï¼ˆWallets + Addresses è¡¨ï¼‰ 8 æ¸…ç†å†…å­˜ä¸­çš„æ˜æ–‡åŠ©è®°è¯ä¸ç§é’¥\næ˜¾ç¤ºã€Œç”ŸæˆæˆåŠŸã€\næä¾›å¯åˆ‡æ¢çš„è‹±æ–‡/ä¸­æ–‡åŠ©è®°è¯å±•ç¤ºï¼ˆä»…ç”¨äºå¤‡ä»½ï¼‰ æ¸…ç†è¾“å…¥æ¡†\næ˜¾ç¤ºã€Œå¯¼å…¥æˆåŠŸã€\næä¾›ç›¸åŒçš„åŠ©è®°è¯æ ¸å¯¹ç•Œé¢ï¼ˆè‹±æ–‡ â†” ä¸­æ–‡å¯åˆ‡æ¢ï¼‰ 9 ç”¨æˆ·æ‰‹åŠ¨å¤‡ä»½åŠ©è®°è¯ â†’ ç‚¹å‡»ã€Œå›åˆ°ä¸»é¡µã€ ç”¨æˆ·æ ¸å¯¹åŠ©è®°è¯æ— è¯¯ â†’ ç‚¹å‡»ã€Œå›åˆ°ä¸»é¡µã€æˆ–ã€Œå‰å¾€ç™»å½•ã€ 1.3 å¼‚å¸¸/è¾¹ç•Œåœºæ™¯ å¯†ç ä¸ºç©ºæˆ–æ ¡éªŒå¤±è´¥ï¼šé˜»æ­¢ç”Ÿæˆå¹¶å±•ç¤ºé”™è¯¯æç¤º åŠ å¯†ä¿å­˜å¤±è´¥ï¼ˆIO/Quotaï¼‰ï¼šå›æ»šæˆ–æ¸…ç†å·²å†™å…¥çš„éƒ¨åˆ†æ•°æ®ï¼Œæç¤ºç”¨æˆ·å¹¶è®°å½•é”™è¯¯æ—¥å¿—ï¼ˆå¯é€‰ä¸ŠæŠ¥ï¼‰ åŠ©è®°è¯ä¸€è‡´æ€§æ£€æŸ¥å¤±è´¥ï¼ˆç†è®ºä¸Šåœ¨ generateWallet å·²æ ¡éªŒï¼‰ï¼šæŠ›å‡ºå¼‚å¸¸å¹¶æç¤ºé‡æ–°ç”Ÿæˆ é‡å¤ä¿å­˜/é‡å¤æŒ‰é’®ç‚¹å‡»ï¼šä½¿ç”¨ loading çŠ¶æ€ç¦æ­¢é‡å¤æ“ä½œ 2. æ•°æ®æ¨¡å‹ï¼ˆIndexedDB è¡¨ç»“æ„ï¼‰ Wallets è¡¨ï¼ˆTABLE_WALLETS = 'Wallets'ï¼‰ key: stringï¼ˆå½“å‰å®ç°ä»¥ count() ä½œä¸ºè‡ªå¢ keyï¼Œå†è½¬ String å­˜å‚¨ï¼‰ value (IEncryptedWallet)ï¼ˆå»ºè®®ç¤ºä¾‹ï¼‰ interface IEncryptedWallet { version: number; // ç‰ˆæœ¬å·ï¼Œæ–¹ä¾¿æ—¥åè¿ç§» cipher: \u0026#39;AES-GCM\u0026#39;; // åŠ å¯†ç®—æ³•è¯´æ˜ iv: string; // base64/hex salt: string; // ç”¨äº KDF çš„ salt ciphertext: string; // åŠ å¯†åçš„ payloadï¼ˆå¯èƒ½åŒ…å«ç§é’¥ã€pathã€address ç­‰ï¼‰ meta?: { createdAt: string; // ISO æ—¶é—´ address?: string; } } Addresses è¡¨ï¼ˆTABLE_ADDRESSES = 'Addresses'ï¼‰ key: stringï¼ˆåŒä¸Šï¼‰ value (AddressRecord) interface AddressRecord { wallet: { type: string; // \u0026#39;HDNodeWallet\u0026#39; KeyPath: string; // æŒ‡å‘ Wallets è¡¨çš„ keyï¼ˆStringï¼‰ }; address: string; // 0x... } æ³¨æ„ï¼šå½“å‰å®ç°ä½¿ç”¨ storage.count() ä½œä¸ºè‡ªå¢é”®ï¼ˆkey = countï¼‰ï¼Œä¼˜ç‚¹ç®€å•ï¼›ç¼ºç‚¹æ˜¯åœ¨åˆ é™¤åå¯èƒ½å‡ºç° key ç¼éš™ã€å¹¶å‘å†™å…¥é£é™©ã€‚å¯è€ƒè™‘åç»­æ”¹ä¸º UUID æˆ–è‡ªå¢ sequence ç®¡ç†ã€‚\n3. æ ¸å¿ƒåº“è¯´æ˜ï¼ˆlib/*.tsï¼‰ generateWallet.ts åŠŸèƒ½ï¼šåŸºäº ethers.Wallet.createRandom() ç”Ÿæˆ HD é’±åŒ…ï¼Œè¯»å–è‹±æ–‡åŠ©è®°è¯ entropyï¼Œä½¿ç”¨ bip39 ä¸­æ–‡è¯åº“ç”Ÿæˆä¸­æ–‡åŠ©è®°è¯ï¼Œå¹¶åš entropy ä¸€è‡´æ€§æ ¡éªŒ è¿”å›ï¼šWalletResult { wallet: HDNodeWallet, mnemonic_en, mnemonic_zh } cryptoWallet.ts åŠŸèƒ½ï¼šé’±åŒ…åŠ å¯†ä¸è§£å¯†é€»è¾‘ï¼ˆAES-GCMï¼‰ä¸å¯†é’¥æ´¾ç”Ÿï¼ˆåº”ä½¿ç”¨ PBKDF2 / scrypt / argon2 ç±»å®‰å…¨ KDFï¼Œè‡³å°‘å¸¦ salt ä¸å¤šè½®æ¬¡ï¼‰ã€‚\nå¯¼å‡ºï¼š\nencryptWallet(wallet: HDNodeWallet, password: string): Promise\u0026lt;IEncryptedWallet\u0026gt; decryptWallet(enc: IEncryptedWallet, password: string): Promise\u0026lt;HDNodeWallet\u0026gt; æµ‹è¯•ç‚¹ï¼šè§£å¯†åé’±åŒ…åœ°å€ä¸åŠ å¯†å‰ä¸€è‡´ï¼›ç¯¡æ”¹ ciphertext/iv/salt å¯¼è‡´è§£å¯†å¤±è´¥ï¼ˆé”™è¯¯æŠ›å‡ºï¼‰\nsaveWallet.ts / saveAddress.ts åŠŸèƒ½ï¼šIndexedDB CRUD å°è£…ï¼ˆsave, get, delete, keys, values, count ç­‰ï¼‰ çº¦å®šï¼šsave* è¿”å›æ•°å­— keyï¼ˆå½“å‰å®ç°ä¸º count()ï¼‰ï¼Œget* è¿”å›ç›¸åº”è®°å½•æˆ– null/undefined 4. å®‰å…¨è®¾è®¡åŸåˆ™ å¯†ç æ°¸ä¸æ˜æ–‡å­˜ç›˜ï¼šä»…å­˜å‚¨å¯†ç çš„ SHA-256 å“ˆå¸Œï¼ˆç”¨äºç™»å½•/æ ¡éªŒï¼‰ï¼Œç”¨äºæ´¾ç”Ÿå¯†é’¥çš„ salt ä¸æ´¾ç”Ÿå‚æ•°ä¹Ÿåº”å­˜å‚¨ï¼Œä½†ä¸ä¿å­˜æ˜æ–‡å¯†ç  åŠ©è®°è¯/ç§é’¥æœ€å°ä¿ç•™æ—¶é—´ï¼šåŠ©è®°è¯ä¸ç§é’¥ä»…åœ¨å†…å­˜ä¸­å­˜åœ¨å¹¶åœ¨ä½¿ç”¨åç«‹å³è¦†ç›–/é‡Šæ”¾ï¼ˆå°½é‡é¿å…é•¿æ—¶é©»ç•™ï¼‰ åŠ å¯†å­˜å‚¨ï¼šæ‰€æœ‰æ•æ„Ÿ payload ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿå¯†é’¥ï¼ˆKDFï¼‰è¿›è¡Œ AES-GCM åŠ å¯†å¹¶å­˜å‚¨ï¼›åŠ å¯†å…ƒä¿¡æ¯ï¼ˆsalt, ivï¼‰å¯ä¸ ciphertext ä¸€èµ·å­˜ é˜²æ­¢ä¾§ä¿¡é“æ³„éœ²ï¼šé¿å…åœ¨æ§åˆ¶å°/æ—¥å¿—æ‰“å°åŠ©è®°è¯ã€ç§é’¥æˆ–å®Œæ•´è§£å¯† payload ä¸€é”®åˆ é™¤æœ¬åœ°æ•°æ®ï¼šæä¾›å¿˜è®°å¯†ç /é‡ç½®åŠŸèƒ½ï¼Œå½»åº•åˆ é™¤ Walletsã€Addressesã€user record ç‰ˆæœ¬ä¸è¿ç§»ï¼šåŠ å¯†æ•°æ®å¸¦ version å­—æ®µï¼Œä¾¿äºå°†æ¥æ›´æ¢åŠ å¯†ç­–ç•¥æˆ– KDF å‚æ•°æ—¶è¿›è¡Œè¿ç§» æœ€å°æƒé™ï¼šæ¨¡å—ä»…åšæœ¬åœ°ç®¡ç†ï¼Œä¸è¿›è¡Œç½‘ç»œåŒæ­¥ï¼ˆé™¤éç”¨æˆ·æ˜¾å¼å¯¼å‡ºå¹¶ä¸Šä¼ ï¼‰ï¼Œé¿å…è¿œç«¯æ³„éœ²é£é™© ","permalink":"http://localhost:1313/projects/0907wallet/walletmanagement/","summary":"\u003chr\u003e\n\u003ch1 id=\"æ¨¡å—æ¦‚è§ˆ\"\u003eæ¨¡å—æ¦‚è§ˆ\u003c/h1\u003e\n\u003cp\u003eğŸ‘‰ \u003ca href=\"https://github.com/cgcj0907/0907-Wallet/tree/main/app/walletManagement\"\u003eæ¨¡å—ä»£ç ä»“åº“ï¼ˆwalletManagementï¼‰\u003c/a\u003e\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eé¡¹ç›®\u003c/th\u003e\n          \u003cth\u003eå†…å®¹\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eæ¨¡å—åç§°\u003c/td\u003e\n          \u003ctd\u003eé’±åŒ…ç®¡ç†ï¼ˆWallet Managementï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè·¯ç”±è·¯å¾„\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e/walletManagement\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eåŠŸèƒ½èŒƒå›´\u003c/td\u003e\n          \u003ctd\u003eéšæœº HD é’±åŒ…ç”Ÿæˆã€åŠ©è®°è¯å±•ç¤ºã€é’±åŒ…åŠ å¯†/è§£å¯†ã€åŠ å¯†é’±åŒ…ä¸åœ°å€æœ¬åœ°æŒä¹…åŒ–ï¼ˆIndexedDBï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè®¿é—®æƒé™\u003c/td\u003e\n          \u003ctd\u003eä¾èµ–æœ¬åœ°ç”¨æˆ·å¯†ç è®°å½•ï¼ˆuserManagement æ¨¡å—ï¼‰ï¼›è‹¥æ— ç”¨æˆ·è®°å½•åˆ™é‡å®šå‘ \u003ccode\u003e/userManagement\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2 id=\"ç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£\"\u003eç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£\u003c/h2\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-cosole\" data-lang=\"cosole\"\u003eapp/walletManagement/\nâ”œâ”€â”€ components\nâ”‚   â”œâ”€â”€ GenerateWallet.tsx\n|   â”œâ”€â”€ ImportWallet.tsx\nâ”œâ”€â”€ lib\nâ”‚   â”œâ”€â”€ cryptoWallet.ts\nâ”‚   â”œâ”€â”€ generateWallet.ts\n|   â”œâ”€â”€ importWallet.ts\nâ”‚   â”œâ”€â”€ saveAddress.ts\nâ”‚   â””â”€â”€ saveWallet.ts\nâ”œâ”€â”€ page.tsx\nâ””â”€â”€ test-cryptoWallet.ts\n\u003c/code\u003e\u003c/pre\u003e\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ–‡ä»¶è·¯å¾„\u003c/th\u003e\n          \u003cth\u003eèŒè´£è¯¦è§£\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003epage.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eè·¯ç”±å…¥å£ï¼Œæ¸²æŸ“ GenerateWallet ç»„ä»¶ï¼ˆé¡µé¢æœ¬èº«ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003ecomponents/GenerateWallet.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæ ¸å¿ƒ UI ä¸äº¤äº’ï¼šå¯†ç æ ¡éªŒ â†’ ç”Ÿæˆé’±åŒ… â†’ åŠ å¯† â†’ ä¿å­˜ â†’ åŠ©è®°è¯å±•ç¤ºï¼›åŒ…å«ç”¨æˆ·å‹å¥½æç¤ºä¸é”™è¯¯å¤„ç†\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/generateWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eä½¿ç”¨ ethers + bip39 ç”Ÿæˆéšæœº HD é’±åŒ…ã€è‹±æ–‡ä¸ä¸­æ–‡åŠ©è®°è¯å¹¶åšä¸€è‡´æ€§æ ¡éªŒ\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/cryptoWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæä¾›é’±åŒ…åŠ å¯†/è§£å¯†æ¥å£ï¼Œå®šä¹‰ \u003ccode\u003eIEncryptedWallet\u003c/code\u003e ç±»å‹ï¼ˆè´Ÿè´£ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿå¯†é’¥å¯¹ wallet è¿›è¡Œ AES-GCM åŠ å¯†ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/saveWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eIndexedDB å°è£…ï¼šå¯¹ \u003ccode\u003eWallets\u003c/code\u003e è¡¨ï¼ˆæˆ– storeï¼‰è¿›è¡Œä¿å­˜/è¯»å–/åˆ é™¤/åˆ—å‡º\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/saveAddress.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eIndexedDB å°è£…ï¼šå¯¹ \u003ccode\u003eAddresses\u003c/code\u003e è¡¨ä¿å­˜åœ°å€è®°å½•ã€è¯»å–ã€åˆ é™¤ã€åˆ—å‡º\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003etest-cryptoWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eå•å…ƒæµ‹è¯•ï¼šéªŒè¯åŠ å¯†/è§£å¯†ã€å¯†é’¥æ´¾ç”Ÿä¸€è‡´æ€§ã€å¼‚å¸¸åœºæ™¯ï¼ˆè§£å¯†å¤±è´¥ã€ç¯¡æ”¹æ£€æµ‹ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/importWallet.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eä½¿ç”¨ bip39 å’Œ ethers ä»è‹±æ–‡æˆ–ä¸­æ–‡åŠ©è®°è¯å¯¼å…¥ HDNodeWalletï¼ˆä¸­æ–‡å…ˆè½¬æ¢ä¸ºè‹±æ–‡åŠ©è®°è¯å†å¯¼å…¥ï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-è¯¦ç»†äº¤äº’æµç¨‹\"\u003e1. è¯¦ç»†äº¤äº’æµç¨‹\u003c/h2\u003e\n\u003ch3 id=\"11-é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥\"\u003e1.1 é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eç”¨æˆ·è®¿é—® \u003ccode\u003e/walletManagement\u003c/code\u003e\u003c/p\u003e","title":"0907 Wallet é’±åŒ…ç®¡ç†æ¨¡å—è®¾è®¡"},{"content":"ç®€ä»‹ åœ¨åšå¯†ç å­˜å‚¨çš„æ—¶å€™ï¼Œæˆ‘é‡åˆ°äº†ä¸‰ç§å¸¸è§çš„æ•°æ®è¡¨ç¤ºæ–¹å¼ï¼šSHA256ã€Base64 å’Œ Uint8Arrayï¼ˆç®€ç§° Uint8ï¼‰ã€‚å®ƒä»¬å„æœ‰ç”¨é€”å’Œç‰¹ç‚¹ï¼Œäºæ˜¯å†™ä¸‹è¿™ç¯‡æ–‡ç« æ¥æ€»ç»“ä¸€ä¸‹ã€‚\nSHA256 SHA256 æ˜¯ç°ä»£äº’è”ç½‘å¹¿æ³›ä½¿ç”¨çš„åŠ å¯†å“ˆå¸Œç®—æ³•ï¼Œä¾‹å¦‚åœ¨åŒºå—é“¾ã€å¯†ç å­˜å‚¨å’Œæ•°æ®å®Œæ•´æ€§éªŒè¯ä¸­éƒ½å¾ˆå¸¸è§ã€‚\nç‰¹ç‚¹ï¼š\nå°†ä»»æ„é•¿åº¦çš„è¾“å…¥æ•°æ®ç»è¿‡æ•°å­¦è¿ç®—åï¼Œè¾“å‡º 256 ä½äºŒè¿›åˆ¶æ•°ï¼ˆ32 å­—èŠ‚ï¼‰ã€‚\nå‡ ä¹ä¸å¯é€†ï¼Œæ„å‘³ç€å³ä½¿æ‹¿åˆ° SHA256 çš„è¾“å‡ºï¼Œä¹Ÿå¾ˆéš¾åæ¨å‡ºåŸå§‹è¾“å…¥ã€‚\nç¤ºä¾‹è¾“å‡ºï¼ˆä»¥åå…­è¿›åˆ¶è¡¨ç¤ºï¼‰ï¼š\ne 3 b 0 c 4 4 2 9 8 f c 1 c 1 4 9 a f b f 4 c 8 9 9 6 f b 9 2 4 2 7 a e 4 1 e 4 6 4 9 b 9 3 4 c a 4 9 5 9 9 1 b 7 8 5 2 b 8 5 5 ç¼ºç‚¹ï¼šå¯è¯»æ€§å·®ï¼Œå°¤å…¶æ˜¯åœ¨å‰ç«¯éœ€è¦æ˜¾ç¤ºæˆ–ä¼ è¾“æ—¶ä¸æ–¹ä¾¿ã€‚\nå› æ­¤ï¼Œé€šå¸¸ä¼šé…åˆ Base64 æˆ–åå…­è¿›åˆ¶è¡¨ç¤ºæ¥æ–¹ä¾¿å­˜å‚¨å’Œå±•ç¤ºã€‚\nBase64 Base64 æ˜¯ä¸€ç§å°†äºŒè¿›åˆ¶æ•°æ®ç¼–ç ä¸ºå¯æ‰“å° ASCII å­—ç¬¦çš„æ–¹å¼ã€‚\nç‰¹ç‚¹ï¼š\næ¯ 6 ä½äºŒè¿›åˆ¶æ•°æ˜ å°„ä¸ºä¸€ä¸ªå­—ç¬¦ï¼Œå­—ç¬¦é›†åŒ…å«ï¼š\nA - Z , a - z , 0 - 9 , + , / ä»¥åŠ = ç”¨ä½œå¡«å……ï¼Œä½¿é•¿åº¦ä¸º 4 çš„å€æ•°ã€‚\nå¯ä»¥å°† SHA256 çš„ 32 å­—èŠ‚ï¼ˆ256 ä½ï¼‰è¾“å‡ºç¼–ç ä¸º 44 ä¸ª Base64 å­—ç¬¦ã€‚\nä¸ºä»€ä¹ˆæ˜¯ 44 ä¸ªè€Œä¸æ˜¯ 43 ä¸ªï¼ŸåŸå› å¦‚ä¸‹ï¼š\nBase64 æŒ‰ æ¯ 3 ä¸ªå­—èŠ‚ï¼ˆ24 ä½ï¼‰ä¸ºä¸€ç»„ æ¥ç¼–ç ï¼Œæ¯ç»„ä¼šç”Ÿæˆ 4 ä¸ª Base64 å­—ç¬¦ã€‚\nSHA256 è¾“å‡º 32 å­—èŠ‚ â†’ å¯ä»¥åˆ†ä¸º 10 ç»„å®Œæ•´çš„ 3 å­—èŠ‚ + å‰©ä½™ 2 å­—èŠ‚ã€‚\nå‰©ä½™ 2 å­—èŠ‚ä¼šç”Ÿæˆ 3 ä¸ª Base64 å­—ç¬¦ï¼Œæœ€åç”¨ = å¡«å……åˆ° 4 ä¸ªå­—ç¬¦ã€‚\næ€»é•¿åº¦ = 10Ã—4 + 4 = 44\nç¤ºä¾‹è¾“å‡ºï¼ˆBase64 ç¼–ç ï¼‰ï¼š\n4 7 D E Q p j 8 H B S a + / T I m W + 5 J C e u Q e R k m 5 N M p J W Z G 3 h S u F U = ä¼˜ç‚¹ï¼šé•¿åº¦æ›´çŸ­ã€å¯è¯»æ€§é«˜ã€é€‚åˆå‰ç«¯æ˜¾ç¤ºå’Œä¼ è¾“ã€‚\nUint8Arrayï¼ˆUint8ï¼‰ Uint8Array æ˜¯ JavaScript ä¸­çš„ å­—èŠ‚æ•°ç»„ç±»å‹ã€‚\nç‰¹ç‚¹ï¼š\næ¯ä¸ªå…ƒç´ å ç”¨ 8 ä½ï¼ˆ1 å­—èŠ‚ï¼‰\nç”¨äºå­˜å‚¨åŸå§‹äºŒè¿›åˆ¶æ•°æ®ï¼Œä¾‹å¦‚ SHA256 è¾“å‡ºã€æ–‡ä»¶ã€åŠ å¯†å¯†é’¥ç­‰\nä¸ Base64 ä¸åŒï¼Œå®ƒä¸æ˜¯ä¸ºäº†æ˜¾ç¤ºï¼Œè€Œæ˜¯ä¸ºäº†é«˜æ•ˆå­˜å‚¨å’Œè®¡ç®—\nç¤ºä¾‹ï¼š\nconst hash = new Uint8Array([227, 176, 196, 66, 152, 252, ...]); ä¸ Base64 çš„è½¬æ¢ï¼š\nSHA256 è¾“å‡º â†’ Uint8Array â†’ Base64ï¼ˆå¯æ˜¾ç¤ºï¼‰\nBase64 â†’ Uint8Arrayï¼ˆå¯è§£ç å›åŸå§‹äºŒè¿›åˆ¶ï¼‰\næ€»ç»“å¯¹æ¯” ç±»å‹ å•ä½ ç”¨é€” å¯è¯»æ€§ å¤§å° SHA256 256 bit å®‰å…¨å“ˆå¸Œã€æ•°æ®å®Œæ•´æ€§ å·® å›ºå®š 32 å­—èŠ‚ Base64 6 bit/å­—ç¬¦ å±•ç¤ºã€ä¼ è¾“ã€å‹ç¼©é•¿åº¦ é«˜ 44 å­—ç¬¦ï¼ˆå¡«å……ï¼‰ Uint8Array 8 bit/å­—èŠ‚ å†…å­˜æ“ä½œã€åŠ å¯†è¿ç®— ä½ 32 å­—èŠ‚ ","permalink":"http://localhost:1313/findings/sha256-base64-uint8/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eåœ¨åšå¯†ç å­˜å‚¨çš„æ—¶å€™ï¼Œæˆ‘é‡åˆ°äº†ä¸‰ç§å¸¸è§çš„æ•°æ®è¡¨ç¤ºæ–¹å¼ï¼š\u003ccode\u003eSHA256\u003c/code\u003eã€\u003ccode\u003eBase64\u003c/code\u003e å’Œ \u003ccode\u003eUint8Array\u003c/code\u003eï¼ˆç®€ç§° \u003ccode\u003eUint8\u003c/code\u003eï¼‰ã€‚å®ƒä»¬å„æœ‰ç”¨é€”å’Œç‰¹ç‚¹ï¼Œäºæ˜¯å†™ä¸‹è¿™ç¯‡æ–‡ç« æ¥æ€»ç»“ä¸€ä¸‹ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"sha256\"\u003eSHA256\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003eSHA256\u003c/code\u003e æ˜¯ç°ä»£äº’è”ç½‘å¹¿æ³›ä½¿ç”¨çš„åŠ å¯†å“ˆå¸Œç®—æ³•ï¼Œä¾‹å¦‚åœ¨åŒºå—é“¾ã€å¯†ç å­˜å‚¨å’Œæ•°æ®å®Œæ•´æ€§éªŒè¯ä¸­éƒ½å¾ˆå¸¸è§ã€‚\u003c/p\u003e\n\u003cp\u003eç‰¹ç‚¹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eå°†ä»»æ„é•¿åº¦çš„è¾“å…¥æ•°æ®ç»è¿‡æ•°å­¦è¿ç®—åï¼Œè¾“å‡º \u003cstrong\u003e256 ä½äºŒè¿›åˆ¶æ•°\u003c/strong\u003eï¼ˆ32 å­—èŠ‚ï¼‰ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eå‡ ä¹ä¸å¯é€†ï¼Œæ„å‘³ç€å³ä½¿æ‹¿åˆ° SHA256 çš„è¾“å‡ºï¼Œä¹Ÿå¾ˆéš¾åæ¨å‡ºåŸå§‹è¾“å…¥ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç¤ºä¾‹è¾“å‡ºï¼ˆä»¥åå…­è¿›åˆ¶è¡¨ç¤ºï¼‰ï¼š\u003c/p\u003e\n\n\n\n\u003cdiv class=\"goat svg-container \"\u003e\n  \n    \u003csvg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      font-family=\"Menlo,Lucida Console,monospace\"\n      \n        viewBox=\"0 0 520 25\"\n      \u003e\n      \u003cg transform='translate(8,16)'\u003e\n\u003ctext text-anchor='middle' x='0' y='4' fill='currentColor' style='font-size:1em'\u003ee\u003c/text\u003e\n\u003ctext text-anchor='middle' x='8' y='4' fill='currentColor' style='font-size:1em'\u003e3\u003c/text\u003e\n\u003ctext text-anchor='middle' x='16' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='24' y='4' fill='currentColor' style='font-size:1em'\u003e0\u003c/text\u003e\n\u003ctext text-anchor='middle' x='32' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='40' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='48' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='56' y='4' fill='currentColor' style='font-size:1em'\u003e2\u003c/text\u003e\n\u003ctext text-anchor='middle' x='64' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='72' y='4' fill='currentColor' style='font-size:1em'\u003e8\u003c/text\u003e\n\u003ctext text-anchor='middle' x='80' y='4' fill='currentColor' style='font-size:1em'\u003ef\u003c/text\u003e\n\u003ctext text-anchor='middle' x='88' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='96' y='4' fill='currentColor' style='font-size:1em'\u003e1\u003c/text\u003e\n\u003ctext text-anchor='middle' x='104' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='112' y='4' fill='currentColor' style='font-size:1em'\u003e1\u003c/text\u003e\n\u003ctext text-anchor='middle' x='120' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='128' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='136' y='4' fill='currentColor' style='font-size:1em'\u003ea\u003c/text\u003e\n\u003ctext text-anchor='middle' x='144' y='4' fill='currentColor' style='font-size:1em'\u003ef\u003c/text\u003e\n\u003ctext text-anchor='middle' x='152' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='160' y='4' fill='currentColor' style='font-size:1em'\u003ef\u003c/text\u003e\n\u003ctext text-anchor='middle' x='168' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='176' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='184' y='4' fill='currentColor' style='font-size:1em'\u003e8\u003c/text\u003e\n\u003ctext text-anchor='middle' x='192' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='200' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='208' y='4' fill='currentColor' style='font-size:1em'\u003e6\u003c/text\u003e\n\u003ctext text-anchor='middle' x='216' y='4' fill='currentColor' style='font-size:1em'\u003ef\u003c/text\u003e\n\u003ctext text-anchor='middle' x='224' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='232' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='240' y='4' fill='currentColor' style='font-size:1em'\u003e2\u003c/text\u003e\n\u003ctext text-anchor='middle' x='248' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='256' y='4' fill='currentColor' style='font-size:1em'\u003e2\u003c/text\u003e\n\u003ctext text-anchor='middle' x='264' y='4' fill='currentColor' style='font-size:1em'\u003e7\u003c/text\u003e\n\u003ctext text-anchor='middle' x='272' y='4' fill='currentColor' style='font-size:1em'\u003ea\u003c/text\u003e\n\u003ctext text-anchor='middle' x='280' y='4' fill='currentColor' style='font-size:1em'\u003ee\u003c/text\u003e\n\u003ctext text-anchor='middle' x='288' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='296' y='4' fill='currentColor' style='font-size:1em'\u003e1\u003c/text\u003e\n\u003ctext text-anchor='middle' x='304' y='4' fill='currentColor' style='font-size:1em'\u003ee\u003c/text\u003e\n\u003ctext text-anchor='middle' x='312' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='320' y='4' fill='currentColor' style='font-size:1em'\u003e6\u003c/text\u003e\n\u003ctext text-anchor='middle' x='328' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='336' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='344' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='352' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='360' y='4' fill='currentColor' style='font-size:1em'\u003e3\u003c/text\u003e\n\u003ctext text-anchor='middle' x='368' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='376' y='4' fill='currentColor' style='font-size:1em'\u003ec\u003c/text\u003e\n\u003ctext text-anchor='middle' x='384' y='4' fill='currentColor' style='font-size:1em'\u003ea\u003c/text\u003e\n\u003ctext text-anchor='middle' x='392' y='4' fill='currentColor' style='font-size:1em'\u003e4\u003c/text\u003e\n\u003ctext text-anchor='middle' x='400' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='408' y='4' fill='currentColor' style='font-size:1em'\u003e5\u003c/text\u003e\n\u003ctext text-anchor='middle' x='416' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='424' y='4' fill='currentColor' style='font-size:1em'\u003e9\u003c/text\u003e\n\u003ctext text-anchor='middle' x='432' y='4' fill='currentColor' style='font-size:1em'\u003e1\u003c/text\u003e\n\u003ctext text-anchor='middle' x='440' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='448' y='4' fill='currentColor' style='font-size:1em'\u003e7\u003c/text\u003e\n\u003ctext text-anchor='middle' x='456' y='4' fill='currentColor' style='font-size:1em'\u003e8\u003c/text\u003e\n\u003ctext text-anchor='middle' x='464' y='4' fill='currentColor' style='font-size:1em'\u003e5\u003c/text\u003e\n\u003ctext text-anchor='middle' x='472' y='4' fill='currentColor' style='font-size:1em'\u003e2\u003c/text\u003e\n\u003ctext text-anchor='middle' x='480' y='4' fill='currentColor' style='font-size:1em'\u003eb\u003c/text\u003e\n\u003ctext text-anchor='middle' x='488' y='4' fill='currentColor' style='font-size:1em'\u003e8\u003c/text\u003e\n\u003ctext text-anchor='middle' x='496' y='4' fill='currentColor' style='font-size:1em'\u003e5\u003c/text\u003e\n\u003ctext text-anchor='middle' x='504' y='4' fill='currentColor' style='font-size:1em'\u003e5\u003c/text\u003e\n\u003c/g\u003e\n\n    \u003c/svg\u003e\n  \n\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç¼ºç‚¹ï¼š\u003cstrong\u003eå¯è¯»æ€§å·®\u003c/strong\u003eï¼Œå°¤å…¶æ˜¯åœ¨å‰ç«¯éœ€è¦æ˜¾ç¤ºæˆ–ä¼ è¾“æ—¶ä¸æ–¹ä¾¿ã€‚\u003c/p\u003e","title":"SHA256ã€Base64 ä¸ Uint8Array çš„å¯¹æ¯”ä¸ç†è§£"},{"content":"æ¨¡å—æ¦‚è§ˆ ğŸ‘‰ æ¨¡å—ä»£ç ä»“åº“\né¡¹ç›® å†…å®¹ æ¨¡å—åç§° ç”¨æˆ·ç®¡ç†ï¼ˆUser Managementï¼‰ è·¯ç”±è·¯å¾„ /userManagement åŠŸèƒ½èŒƒå›´ å¯†ç è®¾ç½®ã€å·²æœ‰é’±åŒ…ç™»å½•ã€æœ¬åœ°åŠ å¯†å­˜å‚¨ è®¿é—®æƒé™ æœªç™»å½•çŠ¶æ€ä¸‹å¼ºåˆ¶è·³è½¬åˆ°æ­¤é¡µé¢ï¼Œå·²ç™»å½•æ”¾è¡Œ ç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£ app/userManage/ â”œâ”€â”€ components/ â”‚ â”œâ”€â”€ Login.tsx â”‚ â””â”€â”€ Register.tsx â”œâ”€â”€ lib/ â”‚ â””â”€â”€ savePassword.ts â””â”€â”€ page.tsx æ–‡ä»¶è·¯å¾„ èŒè´£è¯¦è§£ page.tsx 1. è·¯ç”±å…¥å£\n2. æ£€æµ‹ IndexedDB æ˜¯å¦å·²æœ‰é’±åŒ…è®°å½•\n3. å·²ç™»å½• â†’ è·³è½¬ /ï¼ˆé¦–é¡µï¼‰\n4. æœªç™»å½• â†’ æ¸²æŸ“ç™»å½•/æ³¨å†Œåˆ‡æ¢ç•Œé¢ components/Login.tsx çº¯å±•ç¤ºç»„ä»¶ï¼š\nâ€¢ å¯†ç è¾“å…¥è§£é”æœ¬åœ°é’±åŒ…\nâ€¢ â€œå¿˜è®°å¯†ç â€åˆ é™¤æœ¬åœ°æ•°æ® components/Register.tsx 1. è®¾ç½®å¯†ç ï¼ˆå¼ºåº¦æ ¡éªŒï¼‰\n2. åŠ å¯†å­˜å‚¨ lib/savePassword.ts æ ¸å¿ƒåŠ å¯†é€»è¾‘ï¼š\nâ€¢ å°†å¯†ç è¿›è¡Œ SHA256 å¤„ç†\nâ€¢ å­˜å…¥ IndexedDB 1. è¯¦ç»†äº¤äº’æµç¨‹ 1.1 é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥ è®¿é—®ä»»æ„é¡µé¢ â†’ AuthGuard æ£€æµ‹æœªç™»å½• â†’ é‡å®šå‘è‡³ /userManagement page.tsx æ£€æŸ¥ IndexedDB æ—  user:current æ•°æ® â†’ é»˜è®¤å±•ç¤º Register.tsx 1.2 åˆå§‹åŒ–å¯†ç æµç¨‹ é¦–æ¬¡ç™»å½•/å¿˜è®°å¯†ç  æ£€æŸ¥ IndexedDB æœ‰æ—  user:current, è‹¥æœ‰åˆ™åˆ é™¤æœ¬åœ° IndexedDB æ•°æ®åº“ç”¨æˆ·å’Œé’±åŒ…ç›¸å…³å†…å®¹ äºŒæ¬¡ç¡®è®¤å¯†ç åŠ å¯†å­˜å‚¨è‡³ IndexedDB 2. å®‰å…¨è®¾è®¡åŸåˆ™ å¯†ç æ°¸ä¸ä»¥æ˜æ–‡å½¢å¼å‡ºç°åœ¨å†…å­˜ã€ç½‘ç»œã€æ—¥å¿—ä¸­ åŠ©è®°è¯/ç§é’¥åªåœ¨å†…å­˜ä¸­çŸ­æ—¶å­˜åœ¨ï¼Œè§£å¯†åç«‹å³è¦†ç›– æ‰€æœ‰æ•æ„Ÿæ•°æ®å‡ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿçš„å¯†é’¥è¿›è¡Œ AES-GCM åŠ å¯†å­˜å‚¨ æä¾›â€œä¸€é”®åˆ é™¤æœ¬åœ°æ•°æ®â€åŠŸèƒ½ï¼ˆå¯¹åº”â€œå¿˜è®°å¯†ç â€åœºæ™¯ï¼‰ ","permalink":"http://localhost:1313/projects/0907wallet/usermanagement/","summary":"\u003ch1 id=\"æ¨¡å—æ¦‚è§ˆ\"\u003eæ¨¡å—æ¦‚è§ˆ\u003c/h1\u003e\n\u003cp\u003eğŸ‘‰ \u003ca href=\"https://github.com/cgcj0907/0907-Wallet/tree/main/app/userManagement\"\u003eæ¨¡å—ä»£ç ä»“åº“\u003c/a\u003e\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eé¡¹ç›®\u003c/th\u003e\n          \u003cth\u003eå†…å®¹\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eæ¨¡å—åç§°\u003c/td\u003e\n          \u003ctd\u003eç”¨æˆ·ç®¡ç†ï¼ˆUser Managementï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè·¯ç”±è·¯å¾„\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e/userManagement\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eåŠŸèƒ½èŒƒå›´\u003c/td\u003e\n          \u003ctd\u003eå¯†ç è®¾ç½®ã€å·²æœ‰é’±åŒ…ç™»å½•ã€æœ¬åœ°åŠ å¯†å­˜å‚¨\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè®¿é—®æƒé™\u003c/td\u003e\n          \u003ctd\u003eæœªç™»å½•çŠ¶æ€ä¸‹å¼ºåˆ¶è·³è½¬åˆ°æ­¤é¡µé¢ï¼Œå·²ç™»å½•æ”¾è¡Œ\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cul\u003e\n\u003cli\u003eç›®å½•ç»“æ„ä¸æ–‡ä»¶èŒè´£\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eapp/userManage/\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”œâ”€â”€ components/\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”‚   â”œâ”€â”€ Login.tsx       \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”‚   â””â”€â”€ Register.tsx    \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”œâ”€â”€ lib/\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ”‚   â””â”€â”€ savePassword.ts  \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"go\"\u003eâ””â”€â”€ page.tsx            \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ–‡ä»¶è·¯å¾„\u003c/th\u003e\n          \u003cth\u003eèŒè´£è¯¦è§£\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003epage.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e1. è·¯ç”±å…¥å£\u003cbr\u003e2. æ£€æµ‹ IndexedDB æ˜¯å¦å·²æœ‰é’±åŒ…è®°å½•\u003cbr\u003e3. å·²ç™»å½• â†’ è·³è½¬ \u003ccode\u003e/\u003c/code\u003eï¼ˆé¦–é¡µï¼‰\u003cbr\u003e4. æœªç™»å½• â†’ æ¸²æŸ“ç™»å½•/æ³¨å†Œåˆ‡æ¢ç•Œé¢\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003ecomponents/Login.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eçº¯å±•ç¤ºç»„ä»¶ï¼š\u003cbr\u003eâ€¢ å¯†ç è¾“å…¥è§£é”æœ¬åœ°é’±åŒ…\u003cbr\u003eâ€¢ â€œå¿˜è®°å¯†ç â€åˆ é™¤æœ¬åœ°æ•°æ®\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003ecomponents/Register.tsx\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e1. è®¾ç½®å¯†ç ï¼ˆå¼ºåº¦æ ¡éªŒï¼‰\u003cbr\u003e2. åŠ å¯†å­˜å‚¨\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003elib/savePassword.ts\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæ ¸å¿ƒåŠ å¯†é€»è¾‘ï¼š\u003cbr\u003eâ€¢ å°†å¯†ç è¿›è¡Œ SHA256 å¤„ç†\u003cbr\u003eâ€¢ å­˜å…¥ IndexedDB\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2 id=\"1-è¯¦ç»†äº¤äº’æµç¨‹\"\u003e1. è¯¦ç»†äº¤äº’æµç¨‹\u003c/h2\u003e\n\u003ch3 id=\"11-é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥\"\u003e1.1 é¡µé¢è®¿é—®ä¸å‰ç½®æ£€æŸ¥\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eè®¿é—®ä»»æ„é¡µé¢ â†’ \u003ccode\u003eAuthGuard\u003c/code\u003e æ£€æµ‹æœªç™»å½• â†’ é‡å®šå‘è‡³ \u003ccode\u003e/userManagement\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epage.tsx\u003c/code\u003e æ£€æŸ¥ IndexedDB æ—  \u003ccode\u003euser:current\u003c/code\u003e æ•°æ® â†’ é»˜è®¤å±•ç¤º \u003ccode\u003eRegister.tsx\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"12-åˆå§‹åŒ–å¯†ç æµç¨‹\"\u003e1.2 åˆå§‹åŒ–å¯†ç æµç¨‹\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eé¦–æ¬¡ç™»å½•/å¿˜è®°å¯†ç \u003c/li\u003e\n\u003cli\u003eæ£€æŸ¥ IndexedDB æœ‰æ—  \u003ccode\u003euser:current\u003c/code\u003e, è‹¥æœ‰åˆ™åˆ é™¤æœ¬åœ° IndexedDB æ•°æ®åº“ç”¨æˆ·å’Œé’±åŒ…ç›¸å…³å†…å®¹\u003c/li\u003e\n\u003cli\u003eäºŒæ¬¡ç¡®è®¤å¯†ç åŠ å¯†å­˜å‚¨è‡³ IndexedDB\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"2-å®‰å…¨è®¾è®¡åŸåˆ™\"\u003e2. å®‰å…¨è®¾è®¡åŸåˆ™\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eå¯†ç \u003cstrong\u003eæ°¸ä¸\u003c/strong\u003eä»¥æ˜æ–‡å½¢å¼å‡ºç°åœ¨å†…å­˜ã€ç½‘ç»œã€æ—¥å¿—ä¸­\u003c/li\u003e\n\u003cli\u003eåŠ©è®°è¯/ç§é’¥\u003cstrong\u003eåªåœ¨å†…å­˜ä¸­çŸ­æ—¶å­˜åœ¨\u003c/strong\u003eï¼Œè§£å¯†åç«‹å³è¦†ç›–\u003c/li\u003e\n\u003cli\u003eæ‰€æœ‰æ•æ„Ÿæ•°æ®å‡ä½¿ç”¨ç”¨æˆ·å¯†ç æ´¾ç”Ÿçš„å¯†é’¥è¿›è¡Œ AES-GCM åŠ å¯†å­˜å‚¨\u003c/li\u003e\n\u003cli\u003eæä¾›â€œä¸€é”®åˆ é™¤æœ¬åœ°æ•°æ®â€åŠŸèƒ½ï¼ˆå¯¹åº”â€œå¿˜è®°å¯†ç â€åœºæ™¯ï¼‰\u003c/li\u003e\n\u003c/ul\u003e","title":"0907 Wallet ç”¨æˆ·ç®¡ç†æ¨¡å—è®¾è®¡"},{"content":"æ¨¡å—æ¦‚è§ˆ app â”œâ”€â”€ components â”‚ â”œâ”€â”€ AuthGuard.tsx â”‚ â”œâ”€â”€ InitProvider.tsx â”‚ â””â”€â”€ Logo.tsx â”œâ”€â”€ globals.css â”œâ”€â”€ layout.tsx â”œâ”€â”€ lib â”œâ”€â”€ auth.ts â”œâ”€â”€ storage.ts â””â”€â”€ transform.ts å…¬ç”¨åº“( lib ) auth hash storage å…¬ç”¨ç»„ä»¶( components ) AuthGuard Initialer Logo 1. å…¬ç”¨åº“è®¾è®¡ auth.ts // app/lib/auth.ts /** * @file é’±åŒ…è®¤è¯ä¸è´¦æˆ·ç®¡ç†æ ¸å¿ƒæ¨¡å— * @description è´Ÿè´£é’±åŒ…è¿æ¥ã€ç­¾åéªŒè¯ã€ç™»å½•çŠ¶æ€æŒä¹…åŒ–ã€ç™»å‡ºç­‰å®Œæ•´è®¤è¯æµç¨‹ * æ”¯æŒ MetaMaskã€WalletConnectã€Coinbase Wallet ç­‰ä¸»æµé’±åŒ… * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-08-16 */ export const LOGIN_FLAG_KEY = \u0026#39;isLoggedIn\u0026#39;; export const LOGIN_EXPIRES_KEY = \u0026#39;loginExpiresAt\u0026#39;; const DEFAULT_EXPIRE_MINUTES = 10; /**è·å–è¿‡æœŸæ—¶é—´ */ export function getLoginExpiresAt(): number | null {} /**æ£€æŸ¥ç™»å½•çŠ¶æ€æ˜¯å¦åˆæ³• */ export function isLoggedInLocal(): boolean {} /** åˆ·æ–°è¿‡æœŸæ—¶é—´ï¼ˆé»˜è®¤ +10 åˆ†é’Ÿï¼‰å¹¶ç¡®ä¿ flag = \u0026#39;1\u0026#39; */ export function refreshLoginExpiry(minutes = DEFAULT_EXPIRE_MINUTES) {} /** é€€å‡ºç™»å½•ï¼ˆæœ¬åœ°æ¸…ç†ï¼‰ */ export function logoutLocal() {} transform.ts // @/app/lib/hash.ts /** * @file å¯†ç å“ˆå¸Œä¸ ArrayBuffer/Base64 äº’è½¬å·¥å…· * @description æä¾›å®‰å…¨çš„å¯†ç  SHA-256 å“ˆå¸Œï¼ˆè¿”å› Base64ï¼‰å’Œé«˜æ€§èƒ½çš„äºŒè¿›åˆ¶ â†” Base64 è½¬æ¢å·¥å…· * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-11-27 */ /** * å°† ArrayBuffer è½¬æ¢ä¸º Base64 å­—ç¬¦ä¸² * * ä½¿ç”¨ Uint8Array + btoa çš„ç»å…¸å†™æ³•ï¼Œæ¯” Buffer.toString(\u0026#39;base64\u0026#39;) æ›´å…¼å®¹æµè§ˆå™¨ç¯å¢ƒ * * @param buffer è¦è½¬æ¢çš„ ArrayBuffer * @returns Base64 ç¼–ç å­—ç¬¦ä¸² * @example * const b64 = arrayBufferToBase64(hashBuffer); */ export function arrayBufferToBase64(buffer: ArrayBuffer): string {} /** * å°† Base64 å­—ç¬¦ä¸²è½¬æ¢ä¸º Uint8Array * * @param base64 Base64 ç¼–ç çš„å­—ç¬¦ä¸² * @returns å¯¹åº”çš„ Uint8Array * @example * const uint8 = base64ToUint8Array(storedHash); */ export function base64ToUint8Array(base64: string): Uint8Array {} /** * å¯¹æ˜æ–‡å¯†ç è¿›è¡Œå®‰å…¨çš„ SHA-256 å“ˆå¸Œï¼Œå¹¶è¿”å› Base64 ç¼–ç ç»“æœ * * ä½¿ç”¨ Web Crypto APIï¼ˆcrypto.subtleï¼‰ï¼Œåœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ä¸­å‡ä¸ºåŸç”Ÿå®ç°ï¼Œå®‰å…¨ä¸”é«˜æ€§èƒ½ã€‚ * * @param password æ˜æ–‡å¯†ç  * @returns SHA-256 å“ˆå¸Œåçš„ Base64 å­—ç¬¦ä¸²ï¼ˆå›ºå®š 44 å­—ç¬¦ï¼‰ * @example * const hashed = await hashPassword(\u0026#39;mySecret123\u0026#39;); * // â†’ \u0026#34;iOcJ9qP3b...==\u0026#34; */ export async function hashPassword(password: string): Promise\u0026lt;string\u0026gt; {} storage.ts ğŸ‘‰ å…³äº IndexedDB çš„ä½¿ç”¨æ–¹æ³•è¯·è§ï¼šIndexedDB æµè§ˆå™¨æ•°æ®åº“\n// app/lib/storage.ts /** * @file IndexedDB è½»é‡å°è£…å·¥å…·ï¼ˆæŒ‰éœ€æ‡’åˆ›å»º objectStoreï¼‰ * @description æä¾›ç±»ä¼¼ localStorage çš„ç®€æ´ APIï¼Œæ”¯æŒè‡ªåŠ¨å‡çº§ç‰ˆæœ¬åˆ›å»ºè¡¨ï¼Œé¿å…é¢„è®¾ schema * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-11-27 */ import { openDB, IDBPDatabase } from \u0026#39;idb\u0026#39;; const DB_NAME = \u0026#39;0907wallet-db\u0026#39;; const DEFAULT_STORE_NAME = \u0026#39;users\u0026#39;; /** * åˆå§‹åŒ–ï¼ˆæˆ–æ‰“å¼€ï¼‰IndexedDB æ•°æ®åº“ * * æ•°æ®åº“ä¸å­˜åœ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºç‰ˆæœ¬ 1ï¼Œä¸”ä¸é¢„åˆ›å»ºä»»ä½• objectStoreï¼Œ * æ‰€æœ‰è¡¨éƒ½é€šè¿‡ ensureStore æŒ‰éœ€æ‡’åˆ›å»ºï¼Œä¿æŒæœ€å°çš„åˆå§‹ schemaã€‚ * * @returns IndexedDB æ•°æ®åº“å®ä¾‹ * @example * const db = await initDB(); */ export async function initDB(): Promise\u0026lt;IDBPDatabase\u0026gt; {} /** * ç¡®ä¿æŒ‡å®šåç§°çš„ objectStore å­˜åœ¨ï¼ˆå†…éƒ¨ç§æœ‰å‡½æ•°ï¼‰ * * å¦‚æœè¡¨ä¸å­˜åœ¨ï¼Œä¼šå…³é—­å½“å‰è¿æ¥ â†’ ç‰ˆæœ¬ +1 â†’ åœ¨ upgrade äº‹åŠ¡ä¸­åˆ›å»ºè¡¨ã€‚ * è¿™æ˜¯ IndexedDB çš„ç¡¬æ€§é™åˆ¶ï¼šåªæœ‰ versionchange äº‹åŠ¡æ‰èƒ½åˆ›å»º/åˆ é™¤ objectStoreã€‚ * * @param db å½“å‰æ•°æ®åº“å®ä¾‹ * @param storeName è¦ç¡®ä¿å­˜åœ¨çš„è¡¨å * @returns åŒ…å«è¯¥è¡¨çš„æœ€æ–°æ•°æ®åº“å®ä¾‹ */ async function ensureObjectStoreExists( db: IDBPDatabase, storeName: string, ): Promise\u0026lt;IDBPDatabase\u0026gt; {} /** * æ ¹æ® key ä»æŒ‡å®šè¡¨ä¸­è¯»å–æ•°æ® * * @param key é”®å * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @returns å¯¹åº”çš„å€¼ï¼Œè‹¥ä¸å­˜åœ¨è¿”å› undefined * @example * const user = await get(\u0026#39;currentUser\u0026#39;); */ export async function get\u0026lt;T = unknown\u0026gt;( key: string, table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;T | undefined\u0026gt; {} /** * å‘æŒ‡å®šè¡¨ä¸­å†™å…¥æˆ–æ›´æ–°æ•°æ® * * @param key é”®å * @param value è¦å­˜å‚¨çš„å€¼ï¼ˆå¿…é¡»æ”¯æŒç»“æ„åŒ–å…‹éš†ï¼‰ * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @example * await set(\u0026#39;currentUser\u0026#39;, { address: \u0026#39;0x...\u0026#39;, name: \u0026#39;Alice\u0026#39; }); */ export async function set\u0026lt;T = unknown\u0026gt;( key: string, value: T, table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;void\u0026gt; {} /** * æ ¹æ® key åˆ é™¤æŒ‡å®šè¡¨ä¸­çš„è®°å½• * * @param key é”®å * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; */ export async function del( key: string, table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;void\u0026gt; {} /** * æ¸…ç©ºæŒ‡å®šè¡¨çš„æ‰€æœ‰è®°å½• * * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; */ export async function clear(table: string = DEFAULT_STORE_NAME): Promise\u0026lt;void\u0026gt; {} /** * è·å–æŒ‡å®šè¡¨ä¸­æ‰€æœ‰ key * * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @returns key æ•°ç»„ */ export async function keys( table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;IDBValidKey[]\u0026gt; {} /** * è·å–æŒ‡å®šè¡¨ä¸­æ‰€æœ‰å€¼ï¼ˆä¸åŒ…å« keyï¼‰ * * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @returns å€¼æ•°ç»„ */ export async function values\u0026lt;T = unknown\u0026gt;( table: string = DEFAULT_STORE_NAME, ): Promise\u0026lt;T[]\u0026gt; {} /** * è·å–æŒ‡å®šè¡¨çš„è®°å½•æ€»æ•° * * @param table è¡¨åï¼Œé»˜è®¤ä¸º \u0026#39;users\u0026#39; * @returns è®°å½•æ•°é‡ */ export async function count(table: string = DEFAULT_STORE_NAME): Promise\u0026lt;number\u0026gt; {} 2. å…¬ç”¨ç»„ä»¶è®¾è®¡ AuthGard.tsx // app/components/AuthGuard.tsx /** * @file å…¨å±€è·¯ç”±æƒé™å®ˆå«ï¼ˆå®¢æˆ·ç«¯ç»„ä»¶ï¼‰ * @description * 1. æœªç™»å½• â†’ å¼ºåˆ¶è·³è½¬ /userLoginï¼ˆå…¬å¼€é¡µé™¤å¤–ï¼‰ * 2. å·²ç™»å½•ä½†æ— é’±åŒ… â†’ å¼ºåˆ¶è·³è½¬ /generateWallet * 3. å…¨éƒ¨é€šè¿‡ â†’ æ”¾è¡Œå¹¶è‡ªåŠ¨åˆ·æ–°ç™»å½•æœ‰æ•ˆæœŸ * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-11-27 */ \u0026#39;use client\u0026#39;; import React, { useEffect, useState } from \u0026#39;react\u0026#39;; import { useRouter, usePathname } from \u0026#39;next/navigation\u0026#39;; import { count } from \u0026#39;@/app/lib/storage\u0026#39;; import * as auth from \u0026#39;@/app/lib/auth\u0026#39;; interface AuthGuardProps { /** è¦æ¸²æŸ“çš„å­å†…å®¹ï¼ˆå—ä¿æŠ¤çš„é¡µé¢ï¼‰ */ children: React.ReactNode; } // å…¬å¼€è·¯å¾„ï¼šæ— éœ€ç™»å½•å³å¯è®¿é—® const PUBLIC_PATHS = [\u0026#39;/userLogin\u0026#39;, \u0026#39;/generateWallet\u0026#39;] as const; // é’±åŒ…å­˜å‚¨è¡¨åï¼ˆé¿å…é­”æ³•å€¼ï¼‰ const WALLETS_STORE_NAME = \u0026#39;Wallets\u0026#39;; export default function AuthGuard({ children }: AuthGuardProps): React.ReactElement { const router = useRouter(); const pathname = usePathname(); const [isChecking, setIsChecking] = useState\u0026lt;boolean\u0026gt;(true); useEffect(() =\u0026gt; { let isMounted = true; /** * æ ¸å¿ƒé‰´æƒé€»è¾‘ * ä¸ºä»€ä¹ˆæ”¾åœ¨ useEffect é‡Œå•ç‹¬æ‰§è¡Œï¼Ÿ * - é¿å…é˜»å¡æ¸²æŸ“ * - éœ€è¦ async/await å¿…é¡»å°è£…åœ¨å‡½æ•°å†… * - é…åˆ isMounted é˜²æ­¢å†…å­˜æ³„æ¼ */ async function performAuthCheck(): Promise\u0026lt;void\u0026gt; { try { // pathname å¯èƒ½ä¸º nullï¼ˆNext.js æŸäº›è¾¹ç¼˜æƒ…å†µï¼‰ if (!pathname) { if (isMounted) setIsChecking(false); return; } const isPublicPath = PUBLIC_PATHS.includes(pathname as any); // Step 1: æ£€æŸ¥æœ¬åœ°ç™»å½•æ€ï¼ˆåŒæ­¥å¿«é€Ÿï¼‰ const isLoggedIn = auth.isLoggedInLocal(); if (!isLoggedIn \u0026amp;\u0026amp; !isPublicPath) { router.replace(\u0026#39;/userLogin\u0026#39;); if (isMounted) setIsChecking(false); return; } // Step 2: å·²ç™»å½• â†’ æ£€æŸ¥æ˜¯å¦å·²åˆ›å»ºé’±åŒ… if (isLoggedIn) { const walletCount = await count(WALLETS_STORE_NAME); // count è¿”å› numberï¼Œ0 è¡¨ç¤ºæ— é’±åŒ… const hasWallet = walletCount \u0026gt; 0; if (!hasWallet \u0026amp;\u0026amp; pathname !== \u0026#39;/generateWallet\u0026#39;) { router.replace(\u0026#39;/generateWallet\u0026#39;); if (isMounted) setIsChecking(false); return; } } // Step 3: å…¨éƒ¨é€šè¿‡ â†’ åˆ·æ–°ç™»å½•æœ‰æ•ˆæœŸå¹¶æ”¾è¡Œ if (isMounted) { auth.refreshLoginExpiry(); // å»¶é•¿æœ¬åœ°ç™»å½•æ€è¿‡æœŸæ—¶é—´ setIsChecking(false); } } catch (error) { // ä¸ºä»€ä¹ˆ catch åç›´æ¥è·³è½¬ç™»å½•ï¼Ÿ // IndexedDB å¼‚å¸¸ã€æœ¬åœ°å­˜å‚¨æŸåç­‰éƒ½è§†ä¸ºâ€œä¸å®‰å…¨çŠ¶æ€â€ï¼Œå¿…é¡»é‡æ–°ç™»å½• console.error(\u0026#39;[AuthGuard] é‰´æƒè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸:\u0026#39;, error); if (isMounted) { setIsChecking(false); router.replace(\u0026#39;/userLogin\u0026#39;); } } } performAuthCheck(); // æ¸…ç†å‡½æ•° return () =\u0026gt; { isMounted = false; }; }, [pathname, router]); // Loading çŠ¶æ€ï¼šå…¨å±å±…ä¸­åŠ¨æ•ˆ if (isChecking) { return ( \u0026lt;div className=\u0026#34;min-h-screen flex flex-col items-center justify-center bg-gray-50\u0026#34;\u0026gt; \u0026lt;p className=\u0026#34;text-gray-600 text-lg mb-4 animate-pulse\u0026#34;\u0026gt; æ­£åœ¨éªŒè¯æˆæƒ... \u0026lt;/p\u0026gt; \u0026lt;div className=\u0026#34;w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin\u0026#34; /\u0026gt; \u0026lt;/div\u0026gt; ); } // é‰´æƒé€šè¿‡ï¼šæ¸²æŸ“å­å†…å®¹ return \u0026lt;\u0026gt;{children}\u0026lt;/\u0026gt;; } InitProvider.tsx \u0026#39;use client\u0026#39; import { useState } from \u0026#39;react\u0026#39;; import clsx from \u0026#39;clsx\u0026#39;; /** * @file Logo ç»„ä»¶ï¼ˆé¦–é¡µ/å¯¼èˆªæ ä¸» Logoï¼‰ * @description å¸¦æ‚¬åœäº¤äº’çš„åœ†å½¢ Logoï¼Œé¼ æ ‡æ‚¬åœæ—¶å‘ä¸Šæµ®èµ·å¹¶å±•ç¤ºæ–‡å­—è¯´æ˜ï¼Œæ”¯æŒç¼“æ…¢å¼¹è·³åŠ¨ç”» * @author Guangyang Zhong | github: https://github.com/cgcj0907 * @date 2025-11-27 */ /** * ä¸» Logo ç»„ä»¶ * - é»˜è®¤çŠ¶æ€ï¼šLogo å‘ä¸‹ä½ç§»ä¸€åŠï¼Œé®æŒ¡ä¸‹æ–¹æ–‡å­—åŒºåŸŸï¼ˆè§†è§‰ä¸Šå½¢æˆâ€œåŠéšè—â€æ•ˆæœï¼‰ * - æ‚¬åœçŠ¶æ€ï¼šLogo ä¸Šç§»è‡³æ­£å¸¸ä½ç½®ï¼ŒåŒæ—¶ä¸‹æ–¹æ–‡å­—å¡ç‰‡ä» 0 é«˜åº¦å±•å¼€ * - ä½¿ç”¨ z-[-1]/z-[-2] ä¿è¯å›¾ç‰‡å§‹ç»ˆåœ¨æ–‡å­—å¡ç‰‡ä¸Šæ–¹ï¼Œä½†æ•´ä½“è¢«å¤–éƒ¨å®¹å™¨è£å‰ª */ export default function Logo() { // hover çŠ¶æ€æ§åˆ¶æ•´ä¸ªäº¤äº’åŠ¨ç”»çš„å¼€å¯ä¸å…³é—­ const [hover, setHover] = useState(false); return ( // å¤–å±‚å®¹å™¨ï¼šç›¸å¯¹å®šä½ï¼Œç”¨äºæ§åˆ¶å­å…ƒç´ çš„ç»å¯¹/å›ºå®šå®šä½åŸºå‡†ï¼ŒåŒæ—¶å‚ç›´å±…ä¸­æ’åˆ— \u0026lt;div className=\u0026#34;relative flex flex-col items-center\u0026#34; onMouseEnter={() =\u0026gt; setHover(true)} onMouseLeave={() =\u0026gt; setHover(false)} \u0026gt; {/* å›¾ç‰‡ Logoï¼ˆä¸»è§†è§‰å…ƒç´ ï¼‰ */} \u0026lt;div className={clsx( // è´Ÿ z-index è®©å›¾ç‰‡åœ¨æ–‡å­—å¡ç‰‡ä¹‹ä¸‹ï¼Œä½†é€šè¿‡ translate-y åˆ¶é€ â€œæµ®åœ¨å‰é¢â€çš„è§†è§‰é”™ä½ // w-86/h-86 â‰ˆ 344pxï¼ˆTailwind è‡ªå®šä¹‰å•ä½ï¼‰ï¼Œåœ†å½¢è£å‰ª + æº¢å‡ºéšè— + é˜´å½± + å¹³æ»‘ä½ç§»åŠ¨ç”» \u0026#34;z-[-1] w-86 h-86 rounded-full overflow-hidden cursor-pointer shadow-lg transition-transform duration-300\u0026#34;, // æœªæ‚¬åœæ—¶å‘ä¸‹ä½ç§» 48ï¼ˆ192pxï¼‰ï¼Œåˆšå¥½é®ä½ä¸‹æ–¹æ–‡å­—å¡ç‰‡ä¸€åŠï¼Œå½¢æˆæ‚¬å¿µæ„Ÿ // æ‚¬åœæ—¶æ¢å¤åŸä½ï¼Œè§†è§‰ä¸Šåƒâ€œLogo å‘ä¸Šæµ®èµ·â€ hover ? \u0026#34;translate-y-0\u0026#34; : \u0026#34;translate-y-48\u0026#34; )} \u0026gt; {/* Logo å›¾ç‰‡è‡ªé€‚åº”é“ºæ»¡å®¹å™¨ï¼Œä¿æŒåŸå§‹æ¯”ä¾‹ä¸è¢«æ‹‰ä¼¸ */} \u0026lt;img src=\u0026#34;/logo.png\u0026#34; alt=\u0026#34;Logo\u0026#34; className=\u0026#34;w-full h-full object-cover\u0026#34; /\u0026gt; \u0026lt;/div\u0026gt; {/* æ–‡å­—è¯´æ˜å¡ç‰‡åŒºåŸŸï¼ˆé»˜è®¤å®Œå…¨æ”¶èµ·ï¼Œæ‚¬åœæ—¶é€šè¿‡ max-h å±•å¼€ï¼‰ */} \u0026lt;div className={clsx( // ä½¿ç”¨ overflow-hidden + max-h å®ç°å¹³æ»‘çš„å±•å¼€/æ”¶èµ·åŠ¨ç”» // mt-2 ç»™å¡ç‰‡ç•™å‡ºä¸€ç‚¹ä¸Šè¾¹è·ï¼Œé¿å…ç´§è´´ Logo \u0026#34;z-[-2] overflow-hidden transition-all duration-300 mt-2\u0026#34;, hover ? \u0026#34;max-h-40\u0026#34; : \u0026#34;max-h-0\u0026#34; )} \u0026gt; {/* æ–‡å­—å¡ç‰‡æœ¬ä½“ï¼šåœ†è§’èƒŒæ™¯ + å†…è¾¹è· + å›ºå®šå®½åº¦ + æ–‡å­—å±…ä¸­ + ç¼“æ…¢å¼¹è·³åŠ¨ç”» */} \u0026lt;div className=\u0026#34;rounded-2xl p-3 w-40 text-center flex flex-col items-center gap-1 animate-bounce-slow\u0026#34;\u0026gt; {/* ä¸»æ ‡é¢˜ */} \u0026lt;p className=\u0026#34;text-sm font-semibold text-blue-500 flex items-center justify-center gap-1\u0026#34;\u0026gt; 0907 Wallet \u0026lt;/p\u0026gt; {/* å‰¯æ ‡é¢˜ï¼ˆæŠ€æœ¯æ”¯æŒå£°æ˜ï¼‰ */} \u0026lt;p className=\u0026#34;text-xs text-blue-300\u0026#34;\u0026gt;Supported by SST\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ); } ","permalink":"http://localhost:1313/projects/0907wallet/public/","summary":"\u003ch1 id=\"æ¨¡å—æ¦‚è§ˆ\"\u003eæ¨¡å—æ¦‚è§ˆ\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ components\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â”œâ”€â”€ AuthGuard.tsx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â”œâ”€â”€ InitProvider.tsx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”‚   â””â”€â”€ Logo.tsx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ globals.css\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ layout.tsx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eâ”œâ”€â”€ lib\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    â”œâ”€â”€ auth.ts\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    â”œâ”€â”€ storage.ts\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    â””â”€â”€ transform.ts\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eå…¬ç”¨åº“( lib )\n\u003cul\u003e\n\u003cli\u003eauth\u003c/li\u003e\n\u003cli\u003ehash\u003c/li\u003e\n\u003cli\u003estorage\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eå…¬ç”¨ç»„ä»¶( components )\n\u003cul\u003e\n\u003cli\u003eAuthGuard\u003c/li\u003e\n\u003cli\u003eInitialer\u003c/li\u003e\n\u003cli\u003eLogo\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"1-å…¬ç”¨åº“è®¾è®¡\"\u003e1. å…¬ç”¨åº“è®¾è®¡\u003c/h2\u003e\n\u003ch3 id=\"authts\"\u003eauth.ts\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// app/lib/auth.ts\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @file é’±åŒ…è®¤è¯ä¸è´¦æˆ·ç®¡ç†æ ¸å¿ƒæ¨¡å—\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @description è´Ÿè´£é’±åŒ…è¿æ¥ã€ç­¾åéªŒè¯ã€ç™»å½•çŠ¶æ€æŒä¹…åŒ–ã€ç™»å‡ºç­‰å®Œæ•´è®¤è¯æµç¨‹\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *              æ”¯æŒ MetaMaskã€WalletConnectã€Coinbase Wallet ç­‰ä¸»æµé’±åŒ…\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @author Guangyang Zhong | github: https://github.com/cgcj0907\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @date 2025-08-16\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eLOGIN_FLAG_KEY\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;isLoggedIn\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eLOGIN_EXPIRES_KEY\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;loginExpiresAt\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eDEFAULT_EXPIRE_MINUTES\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**è·å–è¿‡æœŸæ—¶é—´ */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003egetLoginExpiresAt\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003enumber\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**æ£€æŸ¥ç™»å½•çŠ¶æ€æ˜¯å¦åˆæ³• */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eisLoggedInLocal\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"kr\"\u003eboolean\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/** åˆ·æ–°è¿‡æœŸæ—¶é—´ï¼ˆé»˜è®¤ +10 åˆ†é’Ÿï¼‰å¹¶ç¡®ä¿ flag = \u0026#39;1\u0026#39; */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003erefreshLoginExpiry\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eminutes\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eDEFAULT_EXPIRE_MINUTES\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/** é€€å‡ºç™»å½•ï¼ˆæœ¬åœ°æ¸…ç†ï¼‰ */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003elogoutLocal() {\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"transformts\"\u003etransform.ts\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// @/app/lib/hash.ts\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @file å¯†ç å“ˆå¸Œä¸ ArrayBuffer/Base64 äº’è½¬å·¥å…·\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @description æä¾›å®‰å…¨çš„å¯†ç  SHA-256 å“ˆå¸Œï¼ˆè¿”å› Base64ï¼‰å’Œé«˜æ€§èƒ½çš„äºŒè¿›åˆ¶ â†” Base64 è½¬æ¢å·¥å…·\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @author Guangyang Zhong | github: https://github.com/cgcj0907\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @date 2025-11-27\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * å°† ArrayBuffer è½¬æ¢ä¸º Base64 å­—ç¬¦ä¸²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * ä½¿ç”¨ Uint8Array + btoa çš„ç»å…¸å†™æ³•ï¼Œæ¯” Buffer.toString(\u0026#39;base64\u0026#39;) æ›´å…¼å®¹æµè§ˆå™¨ç¯å¢ƒ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param buffer è¦è½¬æ¢çš„ ArrayBuffer\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @returns Base64 ç¼–ç å­—ç¬¦ä¸²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @example\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * const b64 = arrayBufferToBase64(hashBuffer);\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003earrayBufferToBase64\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ebuffer\u003c/span\u003e: \u003cspan class=\"kt\"\u003eArrayBuffer\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * å°† Base64 å­—ç¬¦ä¸²è½¬æ¢ä¸º Uint8Array\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param base64 Base64 ç¼–ç çš„å­—ç¬¦ä¸²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @returns å¯¹åº”çš„ Uint8Array\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @example\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * const uint8 = base64ToUint8Array(storedHash);\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003ebase64ToUint8Array\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ebase64\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003eUint8Array\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e/**\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * å¯¹æ˜æ–‡å¯†ç è¿›è¡Œå®‰å…¨çš„ SHA-256 å“ˆå¸Œï¼Œå¹¶è¿”å› Base64 ç¼–ç ç»“æœ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * ä½¿ç”¨ Web Crypto APIï¼ˆcrypto.subtleï¼‰ï¼Œåœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ä¸­å‡ä¸ºåŸç”Ÿå®ç°ï¼Œå®‰å…¨ä¸”é«˜æ€§èƒ½ã€‚\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @param password æ˜æ–‡å¯†ç \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @returns SHA-256 å“ˆå¸Œåçš„ Base64 å­—ç¬¦ä¸²ï¼ˆå›ºå®š 44 å­—ç¬¦ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * @example\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * const hashed = await hashPassword(\u0026#39;mySecret123\u0026#39;);\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e * // â†’ \u0026#34;iOcJ9qP3b...==\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eexport\u003c/span\u003e \u003cspan class=\"kr\"\u003easync\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003ehashPassword\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003epassword\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003ePromise\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"storagets\"\u003estorage.ts\u003c/h3\u003e\n\u003cp\u003eğŸ‘‰ \u003ca href=\"/toolkits/indexedDB\"\u003eå…³äº IndexedDB çš„ä½¿ç”¨æ–¹æ³•è¯·è§ï¼šIndexedDB æµè§ˆå™¨æ•°æ®åº“\u003c/a\u003e\u003c/p\u003e","title":"0907 Wallet ç³»ç»Ÿå…¬ç”¨å±‚è®¾è®¡"},{"content":"ç®€ä»‹ Vector æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½æ—¥å¿—ä¸æŒ‡æ ‡é‡‡é›†ä»£ç†ï¼Œå®ƒä»å„ç§ source æ”¶é›†æ•°æ®ï¼Œç»è¿‡ transform å¤„ç†åå‘é€åˆ° sinkï¼ˆå¦‚ Lokiã€ClickHouseã€Kafkaã€Elasticsearch ç­‰ï¼‰\nå®ƒçš„ç‰¹ç‚¹æ˜¯é«˜ååã€ä½å»¶è¿Ÿã€æ— éœ€ä¾èµ– JVMã€è½»é‡å¥½éƒ¨ç½²ï¼Œéå¸¸é€‚åˆè¾¹ç¼˜èŠ‚ç‚¹å’Œå®¹å™¨ç¯å¢ƒ æœ¬æ–‡ä¸»è¦è®²è¿° Events å’Œ Compnents\n1. é…ç½®ç»“æ„æ¦‚è§ˆ Vector æœ‰ä¸¤ç§æ•°æ®æ¨¡å‹ (Data Model), åˆç§°äº‹ä»¶(Events):\nLogs: ç”¨äºè¡¨ç¤ºç»“æ„åŒ–æˆ–éç»“æ„åŒ–æ—¥å¿—æ•°æ® metrics: ç”¨äºè¡¨ç¤ºæŒ‡æ ‡æ•°æ® Vector çš„é…ç½®ç”±ä¸‰ä¸ªæ ¸å¿ƒéƒ¨åˆ† (Compnets) ç»„æˆï¼š\nsourcesï¼šæ•°æ®é‡‡é›†æº transformsï¼šæ•°æ®å¤„ç†ä¸è§£æ sinksï¼šè¾“å‡ºç›®æ ‡ 2. Data model(events) Log events Hereâ€™s an example representation of a log event (as JSON):\n{ \u0026#34;log\u0026#34;: { \u0026#34;custom\u0026#34;: \u0026#34;field\u0026#34;, \u0026#34;host\u0026#34;: \u0026#34;my.host.com\u0026#34;, \u0026#34;message\u0026#34;: \u0026#34;Hello world\u0026#34;, \u0026#34;timestamp\u0026#34;: \u0026#34;2020-11-01T21:15:47+00:00\u0026#34; } } Metric event æ­¤å¤„ç•™ç»™ä»¥åæ’°å†™\n3. Compnents 3.1 source è¯¦ç»†é…ç½®è¯·è§ ğŸ‘‰ Sources reference\næ­¤å¤„åªè¯¦ç»†ä»‹ç»ä»¥ File ä¸º source\nExample configurations(é…ç½®æ–‡ä»¶å‡ä¸º toml, ä¸‹åŒ)\n# minimal [sources.my_source_id] type = \u0026#34;file\u0026#34; include = [ \u0026#34;/var/log/**/*.log\u0026#34; ] 3.2 transform è¯¦ç»†é…ç½®è¯·è§ ğŸ‘‰ Sources reference\næ­¤å¤„åªè¯¦ç»†ä»‹ç» Remap with VRL(å³é‡æ–°åŒ¹é…)\n3.2.1 Parse key/value (logfmt) logs ä»¥ key/value å½¢å¼çš„æ—¥å¿—ä¸ºä¾‹\næ³¨æ„ä¸‹é¢çš„æ•°æ®æ ¼å¼ç»è¿‡ source å¤„ç†è¿‡ (ä¼šåŠ ä¸Š log å’Œ message åŒ…è£¹), æˆ‘ä»¬å†™å…¥çš„æ—¥å¿—æ–‡ä»¶ä¸­ä¸å¿…åœ¨å¤–é¢åŠ ä¸Š log å’Œ message åŒ…è£¹, ä¸ç„¶ä¼šå¯¼è‡´äºŒæ¬¡åŒ…è£¹, transform æ‰¾ä¸åˆ°æˆ‘ä»¬çœŸæ­£çš„æ—¥å¿—æ•°æ®\n{ \u0026#34;log\u0026#34;: { \u0026#34;message\u0026#34;: \u0026#34;@timestamp=\\\u0026#34;Sun Jan 10 16:47:39 EST 2021\\\u0026#34; level=info msg=\\\u0026#34;Stopping all fetchers\\\u0026#34; tag#production=stopping_fetchers id=ConsumerFetcherManager-1382721708341 module=kafka.consumer.ConsumerFetcherManager\u0026#34; } } Example configurations\n[transforms.my_transform_id] type = \u0026#34;remap\u0026#34; inputs = [ \u0026#34;my-source-or-transform-id\u0026#34; ] source = \u0026#34;. = parse_key_value!(.message)\u0026#34; 3.2.2 Parse custom logs å¦‚æœæœ‰æ•°æ®ç±»å‹çš„éœ€è¦, è¿˜éœ€è¦åœ¨é…ç½®ä¸­è¿›è¡Œæ•°æ®è½¬æ¢, å› ä¸ºé»˜è®¤è§£æå‡ºæ¥çš„æ˜¯ string Example configurations\n# Coerce parsed fields .timestamp = parse_timestamp(.timestamp, \u0026#34;%Y/%m/%d %H:%M:%S %z\u0026#34;) ?? now() .pid = to_int!(.pid) .tid = to_int!(.tid) 3.3 sink è¯¦ç»†é…ç½®è¯·è§ ğŸ‘‰ Sources reference\næ­¤å¤„åªè¯¦ç»†ä»‹ç»å¦‚ä½•è¾“å‡ºåˆ° ClickHouse Example configurations\n[sinks.my_sink_id] type = \u0026#34;clickhouse\u0026#34; inputs = [ \u0026#34;my-source-or-transform-id\u0026#34; ] endpoint = \u0026#34;http://localhost:8123\u0026#34; table = \u0026#34;mytable\u0026#34; å¦‚æœè¿˜éœ€è¦è®¤è¯ç™»å½•, æ­¤å¤„ä»¥ç”¨æˆ·å¯†ç ç™»å½•ä¸ºä¾‹\n[sinks.my_sink_id.auth] strategy = \u0026#34;basic\u0026#34; user = \u0026#34;default\u0026#34; password = \u0026#34;your_password\u0026#34; å…³äº ClickHouse æ•°æ®åº“çš„ä½¿ç”¨è§ç¬”è®° ğŸ‘‰é«˜æ€§èƒ½æ•°æ®åº“ ClickHouse\n","permalink":"http://localhost:1313/toolkits/vector/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eVector æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½æ—¥å¿—ä¸æŒ‡æ ‡é‡‡é›†ä»£ç†ï¼Œå®ƒä»å„ç§ source æ”¶é›†æ•°æ®ï¼Œç»è¿‡ transform å¤„ç†åå‘é€åˆ° sinkï¼ˆå¦‚ Lokiã€ClickHouseã€Kafkaã€Elasticsearch ç­‰ï¼‰\u003cbr\u003e\nå®ƒçš„ç‰¹ç‚¹æ˜¯é«˜ååã€ä½å»¶è¿Ÿã€æ— éœ€ä¾èµ– JVMã€è½»é‡å¥½éƒ¨ç½²ï¼Œéå¸¸é€‚åˆè¾¹ç¼˜èŠ‚ç‚¹å’Œå®¹å™¨ç¯å¢ƒ\næœ¬æ–‡ä¸»è¦è®²è¿° \u003ccode\u003eEvents\u003c/code\u003e å’Œ \u003ccode\u003eCompnents\u003c/code\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-é…ç½®ç»“æ„æ¦‚è§ˆ\"\u003e1. é…ç½®ç»“æ„æ¦‚è§ˆ\u003c/h2\u003e\n\u003cp\u003eVector æœ‰ä¸¤ç§æ•°æ®æ¨¡å‹ (Data Model), åˆç§°äº‹ä»¶(Events):\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eLogs\u003c/strong\u003e: ç”¨äºè¡¨ç¤ºç»“æ„åŒ–æˆ–éç»“æ„åŒ–æ—¥å¿—æ•°æ®\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003emetrics\u003c/strong\u003e: ç”¨äºè¡¨ç¤ºæŒ‡æ ‡æ•°æ®\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eVector çš„é…ç½®ç”±ä¸‰ä¸ªæ ¸å¿ƒéƒ¨åˆ† (Compnets) ç»„æˆï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003esources\u003c/strong\u003eï¼šæ•°æ®é‡‡é›†æº\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003etransforms\u003c/strong\u003eï¼šæ•°æ®å¤„ç†ä¸è§£æ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003esinks\u003c/strong\u003eï¼šè¾“å‡ºç›®æ ‡\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"2-data-modelevents\"\u003e2. Data model(events)\u003c/h2\u003e\n\u003cp\u003e\u003cimg alt=\"Data model\" loading=\"lazy\" src=\"/Toolkits/vector/Data_model.webp\"\u003e\u003c/p\u003e\n\u003ch3 id=\"log-events\"\u003eLog events\u003c/h3\u003e\n\u003cp\u003eHereâ€™s an example representation of a log event (as JSON):\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-log\" data-lang=\"log\"\u003e{\n  \u0026#34;log\u0026#34;: {\n    \u0026#34;custom\u0026#34;: \u0026#34;field\u0026#34;,\n    \u0026#34;host\u0026#34;: \u0026#34;my.host.com\u0026#34;,\n    \u0026#34;message\u0026#34;: \u0026#34;Hello world\u0026#34;,\n    \u0026#34;timestamp\u0026#34;: \u0026#34;2020-11-01T21:15:47+00:00\u0026#34;\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"metric-event\"\u003eMetric event\u003c/h3\u003e\n\u003cp\u003eæ­¤å¤„ç•™ç»™ä»¥åæ’°å†™\u003c/p\u003e\n\u003ch2 id=\"3-compnents\"\u003e3. Compnents\u003c/h2\u003e\n\u003ch3 id=\"31-source\"\u003e3.1 source\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003eè¯¦ç»†é…ç½®è¯·è§ ğŸ‘‰ \u003ca href=\"https://vector.dev/docs/reference/configuration/sources/\"\u003eSources reference\u003c/a\u003e\u003c/p\u003e","title":"Vector æ—¥å¿—é‡‡é›†ä¸å¤„ç†"},{"content":"ClickHouse é«˜æ€§èƒ½æ•°æ®åº“ ClickHouse æ˜¯ä¸€æ¬¾ å¼€æºã€é«˜æ€§èƒ½çš„åˆ—å¼æ•°æ®åº“ï¼Œä¸»è¦ç”¨äº å¤§è§„æ¨¡æ•°æ®åˆ†æ (OLAP) å’Œ å®æ—¶æŸ¥è¯¢ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼š\nåˆ—å¼å­˜å‚¨ï¼Œè¯»å–æŒ‡å®šåˆ—éå¸¸å¿« æ”¯æŒé«˜å¹¶å‘å†™å…¥å’ŒæŸ¥è¯¢ å¼ºå¤§çš„èšåˆåŠŸèƒ½ï¼Œé€‚åˆæŠ¥è¡¨å’Œæ—¥å¿—åˆ†æ æ”¯æŒ SQL æŸ¥è¯¢ï¼Œæ˜“ä¸Šæ‰‹ 1ï¸. å®‰è£…ä¸å¿«é€Ÿå¼€å§‹ å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£æˆ–ç¤¾åŒºæ•™ç¨‹ ğŸ‘‰ClickHouse å®˜æ–¹æ–‡æ¡£\n1.1 å®‰è£… curl https://clickhouse.com/ | sh sudo ./clickhouse install 1.2 è¿è¡Œ $ clickhouse-client --host server ClickHouse client version 24.12.2.29 (official build). Connecting to server:9000 as user default. Connected to ClickHouse server version 24.12.2. :) Specify additional connection details as necessary:\nOption Description --port \u0026lt;port\u0026gt; The port ClickHouse server is accepting connections on. The default ports are 9440 (TLS) and 9000 (no TLS). Note that ClickHouse Client uses the native protocol and not HTTP(S). -s [--secure] Whether to use TLS (usually autodetected). -u [--user] \u0026lt;username\u0026gt; The database user to connect as. Connects as the default user by default. --password \u0026lt;password\u0026gt; The password of the database user. You can also specify the password for a connection in the configuration file. If you do not specify the password, the client will ask for it. -c [--config] \u0026lt;path-to-file\u0026gt; The location of the configuration file for ClickHouse Client, if it is not at one of the default locations. See Configuration Files. 1.3 é€€å‡º To exit the client, press Ctrl+D, or enter one of the following instead of a query:\nexit or exit; quit or quit; q, Q or :q logout or logout; 2. åº“å’Œè¡¨çš„åˆ›å»º åœ¨ ClickHouse ä¸­ï¼Œæ•°æ®å­˜å‚¨çš„åŸºæœ¬å•å…ƒæ˜¯ æ•°æ®åº“ï¼ˆDatabaseï¼‰ å’Œ è¡¨ï¼ˆTableï¼‰ã€‚\nä¸‹é¢æ˜¯åˆ›å»ºåº“å’Œè¡¨çš„ç¤ºä¾‹ï¼š\n2.1 åˆ›å»ºæ•°æ®åº“ CREATE DATABASE IF NOT EXISTS analytics; IF NOT EXISTS â†’ é¿å…æ•°æ®åº“å·²å­˜åœ¨æ—¶æŠ¥é”™\nanalytics â†’ æ•°æ®åº“åç§°ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡è‡ªå®šä¹‰\n2.2 åˆ›å»ºè¡¨ CREATE TABLE IF NOT EXISTS analytics.visits ( user_id UInt32, page_id UInt32, timestamp DateTime ) ENGINE = MergeTree() ORDER BY timestamp; MergeTree() â†’ é«˜æ€§èƒ½è¡¨å¼•æ“\nORDER BY timestamp â†’ æŒ‰æ—¶é—´åˆ—æ’åºä¼˜åŒ–æŸ¥è¯¢\nIF NOT EXISTS â†’ é¿å…è¡¨å·²å­˜åœ¨æ—¶æŠ¥é”™\n3. æ•°æ®å†™å…¥ä¸æŸ¥è¯¢ æ­¤å¤„ä»¥åæ’°å†™\n","permalink":"http://localhost:1313/toolkits/clickhouse/","summary":"\u003ch1 id=\"clickhouse-é«˜æ€§èƒ½æ•°æ®åº“\"\u003eClickHouse é«˜æ€§èƒ½æ•°æ®åº“\u003c/h1\u003e\n\u003cp\u003eClickHouse æ˜¯ä¸€æ¬¾ \u003cstrong\u003eå¼€æºã€é«˜æ€§èƒ½çš„åˆ—å¼æ•°æ®åº“\u003c/strong\u003eï¼Œä¸»è¦ç”¨äº \u003cstrong\u003eå¤§è§„æ¨¡æ•°æ®åˆ†æ (OLAP)\u003c/strong\u003e å’Œ \u003cstrong\u003eå®æ—¶æŸ¥è¯¢\u003c/strong\u003eã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåˆ—å¼å­˜å‚¨ï¼Œè¯»å–æŒ‡å®šåˆ—éå¸¸å¿«\u003c/li\u003e\n\u003cli\u003eæ”¯æŒé«˜å¹¶å‘å†™å…¥å’ŒæŸ¥è¯¢\u003c/li\u003e\n\u003cli\u003eå¼ºå¤§çš„èšåˆåŠŸèƒ½ï¼Œé€‚åˆæŠ¥è¡¨å’Œæ—¥å¿—åˆ†æ\u003c/li\u003e\n\u003cli\u003eæ”¯æŒ SQL æŸ¥è¯¢ï¼Œæ˜“ä¸Šæ‰‹\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-å®‰è£…ä¸å¿«é€Ÿå¼€å§‹\"\u003e1ï¸. å®‰è£…ä¸å¿«é€Ÿå¼€å§‹\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£æˆ–ç¤¾åŒºæ•™ç¨‹ ğŸ‘‰\u003ca href=\"https://clickhouse.com/docs/\"\u003eClickHouse å®˜æ–¹æ–‡æ¡£\u003c/a\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003ch3 id=\"11-å®‰è£…\"\u003e1.1 å®‰è£…\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ecurl https://clickhouse.com/ \u003cspan class=\"p\"\u003e|\u003c/span\u003e sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo ./clickhouse install\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"12-è¿è¡Œ\"\u003e1.2 è¿è¡Œ\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e$ clickhouse-client --host server\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eClickHouse client version 24.12.2.29 \u003cspan class=\"o\"\u003e(\u003c/span\u003eofficial build\u003cspan class=\"o\"\u003e)\u003c/span\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eConnecting to server:9000 as user default.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eConnected to ClickHouse server version 24.12.2.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e:\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eSpecify additional connection details as necessary:\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eOption\u003c/th\u003e\n          \u003cth\u003eDescription\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e--port \u0026lt;port\u0026gt;\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eThe port ClickHouse server is accepting connections on. The default ports are 9440 (TLS) and 9000 (no TLS). Note that ClickHouse Client uses the native protocol and not HTTP(S).\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-s [--secure]\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eWhether to use TLS (usually autodetected).\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-u [--user] \u0026lt;username\u0026gt;\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eThe database user to connect as. Connects as the default user by default.\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e--password \u0026lt;password\u0026gt;\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eThe password of the database user. You can also specify the password for a connection in the configuration file. If you do not specify the password, the client will ask for it.\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-c [--config] \u0026lt;path-to-file\u0026gt;\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eThe location of the configuration file for ClickHouse Client, if it is not at one of the default locations. See Configuration Files.\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch3 id=\"13-é€€å‡º\"\u003e1.3 é€€å‡º\u003c/h3\u003e\n\u003cp\u003eTo exit the client, press Ctrl+D, or enter one of the following instead of a query:\u003c/p\u003e","title":"ClickHouse é«˜æ€§èƒ½æ•°æ®åº“"},{"content":"ç®€ä»‹ qr-scanner æ˜¯ä¸€æ¬¾çº¯å‰ç«¯ã€é›¶ä¾èµ–çš„ JavaScript äºŒç»´ç æ‰«æåº“ï¼Œå®Œå…¨åœ¨æµè§ˆå™¨ç«¯è¿è¡Œï¼Œæ— éœ€åç«¯é…åˆã€‚å®ƒåŒæ—¶æ”¯æŒï¼š\næ‘„åƒå¤´å®æ—¶æ‰«ç  é™æ€å›¾ç‰‡/æ–‡ä»¶ç¦»çº¿æ‰«ç ï¼ˆæ”¯æŒ \u0026lt;img\u0026gt;ã€\u0026lt;canvas\u0026gt;ã€\u0026lt;video\u0026gt;ã€Fileã€Blob ç­‰å¤šç§æ¥æºï¼‰ åº•å±‚ä½¿ç”¨ WebAssembly åŠ é€Ÿè§£ç ï¼Œè¯†åˆ«é€Ÿåº¦å¿«ã€å‡†ç¡®ç‡é«˜ï¼Œåœ¨æ‰‹æœºç«¯è¡¨ç°å°¤ä¸ºä¼˜ç§€ï¼Œæ˜¯ç›®å‰æœ€æ¨èçš„å‰ç«¯äºŒç»´ç æ‰«ææ–¹æ¡ˆ\næœ¬æ–‡ä»¥ React + Next.js æ¡†æ¶ä¸ºä¾‹\n1. å®‰è£… npm install qr-scanner æˆ–ä½¿ç”¨ yarnï¼š\nyarn add qr-scanner æ³¨æ„ï¼šå·²ä¸å†æ¨èç›´æ¥ç”¨ \u0026lt;script\u0026gt; æ ‡ç­¾å¼•å…¥ï¼Œç°ä»£é¡¹ç›®è¯·é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…\n2. åŸºæœ¬å¼•å…¥æ–¹å¼ import QrScanner from \u0026#39;qr-scanner\u0026#39;; 3. æ ¸å¿ƒç±»ï¼šQrScanner 3.1 æ‘„åƒå¤´å®æ—¶æ‰«ç  const videoElement = document.getElementById(\u0026#39;video\u0026#39;) as HTMLVideoElement; const scanner = new QrScanner( videoElement, (result) =\u0026gt; { console.log(\u0026#39;æ‰«ç æˆåŠŸ:\u0026#39;, result.data); // result.cornerPoints å¯ç”¨æ¥åšè¾¹æ¡†åŠ¨ç”» }, { returnDetailedScanResult: true, // è¿”å›å®Œæ•´å¯¹è±¡è€Œéä»…å­—ç¬¦ä¸² highlightScanRegion: true, // æ˜¾ç¤ºæ‰«æåŒºåŸŸé®ç½© highlightCodeOutline: true, // é«˜äº®äºŒç»´ç è½®å»“ } ); // å¯åŠ¨æ‘„åƒå¤´ await scanner.start(); // åœæ­¢æ‰«æ scanner.stop(); å¸¸ç”¨é…ç½®é¡¹ å‚æ•° è¯´æ˜ returnDetailedScanResult true æ—¶è¿”å› { data, cornerPoints } å¯¹è±¡ highlightScanRegion æ˜¾ç¤ºåŠé€æ˜æ‰«æåŒºåŸŸæ¡† highlightCodeOutline å®æ—¶ç»˜åˆ¶äºŒç»´ç å››è§’è½®å»“ 3.2 ç¦»çº¿æ‰«æå›¾ç‰‡æ–‡ä»¶ const file: File = æ–‡ä»¶è¾“å…¥æ¡†.files[0]; const result = await QrScanner.scanImage(file, { returnDetailedScanResult: true }); console.log(\u0026#39;äºŒç»´ç å†…å®¹:\u0026#39;, result.data); æ”¯æŒæ‰€æœ‰å›¾ç‰‡æºï¼šFileã€Blobã€HTMLImageElementã€HTMLCanvasElementã€URL ç­‰\n4. å¸¸ç”¨åœºæ™¯ç¤ºä¾‹ 4.1 æ‘„åƒå¤´æ‰«ç è‡ªåŠ¨å¡«å……åœ°å€ const scanner = new QrScanner(videoRef.current!, (result) =\u0026gt; { const match = result.data.match(/0x[a-fA-F0-9]{40}/i); if (match) { setAddress(match[0] as `0x${string}`); scanner.stop(); // æ‰«åˆ°å³åœæ­¢ onClose(); // å…³é—­å¼¹çª— } }); await scanner.start(); 4.2 ä¸Šä¼ å›¾ç‰‡æ‰«ç  const handleUpload = async (file: File) =\u0026gt; { try { const result = await QrScanner.scanImage(file); setAddress(result.data); message.success(\u0026#39;æ‰«ç æˆåŠŸ\u0026#39;); } catch (e) { message.error(\u0026#39;æœªè¯†åˆ«åˆ°äºŒç»´ç \u0026#39;); } }; 4.3 æ­£ç¡®é”€æ¯å®ä¾‹ï¼ˆå¾ˆé‡è¦ï¼ï¼‰ // React useEffect æ¸…ç†ç¤ºä¾‹ useEffect(() =\u0026gt; { return () =\u0026gt; { scanner?.stop(); scanner?.destroy(); scanner = null; }; }, []); ä¸é”€æ¯ä¼šå¯¼è‡´æ‘„åƒå¤´ä¸€ç›´è¢«å ç”¨ã€å†…å­˜æ³„æ¼\n5. React é¡¹ç›®æ³¨æ„äº‹é¡¹ video å…ƒç´ å¿…é¡»é€šè¿‡ useRef ç»‘å®šï¼Œä¸èƒ½ç›´æ¥ç”¨ document.getElementById å»ºè®®åœ¨å¼¹çª—/æŠ½å±‰æ‰“å¼€æ—¶æ‰ start()ï¼Œå…³é—­æ—¶ç«‹å³ stop + destroy start() æ˜¯å¼‚æ­¥çš„ï¼Œå»ºè®®åŠ  await å¹¶ try/catch å¤„ç†æƒé™é—®é¢˜ è¯†åˆ«ä»¥å¤ªåŠåœ°å€æ¨èæ­£åˆ™ï¼š/0x[a-fA-F0-9]{40}/i æä¾›ã€Œä¸Šä¼ å›¾ç‰‡æ‰«ç ã€ä½œä¸ºæ‘„åƒå¤´å¤±è´¥çš„å…œåº•æ–¹æ¡ˆ 6. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ é—®é¢˜ è§£å†³æ–¹æ¡ˆ æ‘„åƒå¤´é»‘å±/æ— æ³•å¼€å¯ å¿…é¡» HTTPS æˆ– localhostï¼›æ£€æŸ¥æ˜¯å¦å·²æˆæƒæ‘„åƒå¤´ start() æŠ¥é”™ ç¡®ä¿ videoRef.current å·²æœ‰å€¼ï¼Œä¸”ä¸Šä¸€ä¸ª scanner å·² destroy æ‰«ä¸åˆ°ç  å…‰çº¿è¦å……è¶³ã€äºŒç»´ç è¦å®Œæ•´ï¼›å¯æç¤ºç”¨æˆ·ã€Œæ”¯æŒä¸Šä¼ å›¾ç‰‡æ‰«ç ã€ åˆ‡æ¢é¡µé¢åæ‘„åƒå¤´ä»å ç”¨ ç»„ä»¶å¸è½½å¿…é¡»æ‰§è¡Œ stop() + destroy() æ‰‹æœºç«¯è¯†åˆ«æ…¢ qr-scanner å·²ä½¿ç”¨ WASMï¼Œå±äºç›®å‰æœ€å¿«æ–¹æ¡ˆï¼›ä»å»ºè®®ä¿æŒäºŒç»´ç å å± 1/3 ä»¥ä¸Šå¤§å° 7. æ€»ç»“ å®æ—¶æ‘„åƒå¤´æ‰«ç  + ç¦»çº¿å›¾ç‰‡æ‰«ç ä¸€æŠŠæŠ“ è¯†åˆ«é€Ÿåº¦å¿«ã€å‡†ç¡®ç‡é«˜ã€æ‰‹æœºç«¯è¡¨ç°ä¼˜ç§€ æä¾›æ‰«æåŒºåŸŸé«˜äº®ã€äºŒç»´ç è½®å»“é«˜äº®ã€è§’ç‚¹æ•°æ®ç­‰é«˜çº§åŠŸèƒ½ React ä½¿ç”¨æ—¶é…åˆ useRef + useEffect ç”Ÿå‘½å‘¨æœŸç®¡ç†å³å¯ å¼ºçƒˆå»ºè®®æ­é…ã€Œä¸Šä¼ å›¾ç‰‡æ‰«ç ã€ä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆï¼Œç”¨æˆ·ä½“éªŒæ›´ä½³ ","permalink":"http://localhost:1313/toolkits/qr-scanner/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003e\u003ccode\u003eqr-scanner\u003c/code\u003e æ˜¯ä¸€æ¬¾çº¯å‰ç«¯ã€é›¶ä¾èµ–çš„ JavaScript äºŒç»´ç æ‰«æåº“ï¼Œå®Œå…¨åœ¨æµè§ˆå™¨ç«¯è¿è¡Œï¼Œæ— éœ€åç«¯é…åˆã€‚å®ƒåŒæ—¶æ”¯æŒï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæ‘„åƒå¤´å®æ—¶æ‰«ç \u003c/li\u003e\n\u003cli\u003eé™æ€å›¾ç‰‡/æ–‡ä»¶ç¦»çº¿æ‰«ç ï¼ˆæ”¯æŒ \u003ccode\u003e\u0026lt;img\u0026gt;\u003c/code\u003eã€\u003ccode\u003e\u0026lt;canvas\u0026gt;\u003c/code\u003eã€\u003ccode\u003e\u0026lt;video\u0026gt;\u003c/code\u003eã€Fileã€Blob ç­‰å¤šç§æ¥æºï¼‰\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eåº•å±‚ä½¿ç”¨ WebAssembly åŠ é€Ÿè§£ç ï¼Œè¯†åˆ«é€Ÿåº¦å¿«ã€å‡†ç¡®ç‡é«˜ï¼Œåœ¨æ‰‹æœºç«¯è¡¨ç°å°¤ä¸ºä¼˜ç§€ï¼Œæ˜¯ç›®å‰æœ€æ¨èçš„å‰ç«¯äºŒç»´ç æ‰«ææ–¹æ¡ˆ\u003c/p\u003e\n\u003cp\u003eæœ¬æ–‡ä»¥ \u003ccode\u003eReact + Next.js\u003c/code\u003e æ¡†æ¶ä¸ºä¾‹\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-å®‰è£…\"\u003e1. å®‰è£…\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003enpm install qr-scanner\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæˆ–ä½¿ç”¨ yarnï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eyarn add qr-scanner\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003eæ³¨æ„ï¼šå·²ä¸å†æ¨èç›´æ¥ç”¨ \u003ccode\u003e\u0026lt;script\u0026gt;\u003c/code\u003e æ ‡ç­¾å¼•å…¥ï¼Œç°ä»£é¡¹ç›®è¯·é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…\u003c/p\u003e\u003c/blockquote\u003e\n\u003chr\u003e\n\u003ch2 id=\"2-åŸºæœ¬å¼•å…¥æ–¹å¼\"\u003e2. åŸºæœ¬å¼•å…¥æ–¹å¼\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003eQrScanner\u003c/span\u003e \u003cspan class=\"kr\"\u003efrom\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;qr-scanner\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"3-æ ¸å¿ƒç±»qrscanner\"\u003e3. æ ¸å¿ƒç±»ï¼šQrScanner\u003c/h2\u003e\n\u003ch3 id=\"31-æ‘„åƒå¤´å®æ—¶æ‰«ç \"\u003e3.1 æ‘„åƒå¤´å®æ—¶æ‰«ç \u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003evideoElement\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003edocument\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetElementById\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;video\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"kr\"\u003eas\u003c/span\u003e \u003cspan class=\"nx\"\u003eHTMLVideoElement\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003escanner\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eQrScanner\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003evideoElement\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;æ‰«ç æˆåŠŸ:\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// result.cornerPoints å¯ç”¨æ¥åšè¾¹æ¡†åŠ¨ç”»\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e  \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nx\"\u003ereturnDetailedScanResult\u003c/span\u003e: \u003cspan class=\"kt\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"c1\"\u003e// è¿”å›å®Œæ•´å¯¹è±¡è€Œéä»…å­—ç¬¦ä¸²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003ehighlightScanRegion\u003c/span\u003e: \u003cspan class=\"kt\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e      \u003cspan class=\"c1\"\u003e// æ˜¾ç¤ºæ‰«æåŒºåŸŸé®ç½©\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003ehighlightCodeOutline\u003c/span\u003e: \u003cspan class=\"kt\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e     \u003cspan class=\"c1\"\u003e// é«˜äº®äºŒç»´ç è½®å»“\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// å¯åŠ¨æ‘„åƒå¤´\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003escanner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estart\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// åœæ­¢æ‰«æ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"nx\"\u003escanner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estop\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"å¸¸ç”¨é…ç½®é¡¹\"\u003eå¸¸ç”¨é…ç½®é¡¹\u003c/h4\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eå‚æ•°\u003c/th\u003e\n          \u003cth\u003eè¯´æ˜\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ereturnDetailedScanResult\u003c/td\u003e\n          \u003ctd\u003etrue æ—¶è¿”å› { data, cornerPoints } å¯¹è±¡\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ehighlightScanRegion\u003c/td\u003e\n          \u003ctd\u003eæ˜¾ç¤ºåŠé€æ˜æ‰«æåŒºåŸŸæ¡†\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ehighlightCodeOutline\u003c/td\u003e\n          \u003ctd\u003eå®æ—¶ç»˜åˆ¶äºŒç»´ç å››è§’è½®å»“\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch3 id=\"32-ç¦»çº¿æ‰«æå›¾ç‰‡æ–‡ä»¶\"\u003e3.2 ç¦»çº¿æ‰«æå›¾ç‰‡æ–‡ä»¶\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ts\" data-lang=\"ts\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003efile\u003c/span\u003e: \u003cspan class=\"kt\"\u003eFile\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"err\"\u003eæ–‡ä»¶è¾“å…¥æ¡†\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efiles\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eQrScanner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003escanImage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efile\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  \u003cspan class=\"nx\"\u003ereturnDetailedScanResult\u003c/span\u003e: \u003cspan class=\"kt\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;äºŒç»´ç å†…å®¹:\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæ”¯æŒæ‰€æœ‰å›¾ç‰‡æºï¼šFileã€Blobã€HTMLImageElementã€HTMLCanvasElementã€URL ç­‰\u003c/p\u003e","title":"QR Scanner ä½¿ç”¨æŒ‡å—"},{"content":"ç®€ä»‹ æœ¬æ–‡æ¡£æ€»ç»“äº†åœ¨ Hugo + PaperMod ä¸»é¢˜ ä¸‹è‡ªå®šä¹‰åšå®¢æ¨¡æ¿çš„é…ç½®æ–¹æ³•ï¼ŒåŒ…æ‹¬é™æ€èµ„æºä¼˜åŒ–ã€Nginx éƒ¨ç½²ã€ç¼“å­˜ç­–ç•¥å’Œå›¾ç‰‡åŠ é€ŸæŠ€å·§\n","permalink":"http://localhost:1313/toolkits/hugo_papermod/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eæœ¬æ–‡æ¡£æ€»ç»“äº†åœ¨ \u003cstrong\u003eHugo + PaperMod ä¸»é¢˜\u003c/strong\u003e ä¸‹è‡ªå®šä¹‰åšå®¢æ¨¡æ¿çš„é…ç½®æ–¹æ³•ï¼ŒåŒ…æ‹¬é™æ€èµ„æºä¼˜åŒ–ã€Nginx éƒ¨ç½²ã€ç¼“å­˜ç­–ç•¥å’Œå›¾ç‰‡åŠ é€ŸæŠ€å·§\u003c/p\u003e\n\u003chr\u003e","title":"Hugo-PaperMod è‡ªå®šä¹‰åšå®¢æ¨¡æ¿"},{"content":"","permalink":"http://localhost:1313/toolkits/indexeddb/","summary":"","title":"IndexedDB æµè§ˆå™¨æ•°æ®åº“"}]